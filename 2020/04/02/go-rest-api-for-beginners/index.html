<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="no-referrer">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-center-atom.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.jpg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.jpg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.jpg?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Go,RESTful,">





  <link rel="alternate" href="/atom.xml" title="ÈªëÁôΩ‰πãÈô¢" type="application/atom+xml">






<meta name="description" content="0x00 ÂºïË®ÄÁñ´ÊÉÖÊúüÈó¥Â≠¶ÁöÑ‰∏úË•øÊØîËæÉÊùÇÔºàÊØîÂ¶ÇÂ≠¶‰π†‰∫ÜÂ¶Ç‰ΩïÂú®Â∏ÇÂú∫Ë°åÊÉÖ‰∏çÂ•ΩÁöÑÊó∂ÂÄôËøòÁõ≤ÁõÆÂä†‰ªì üôÇÔºâÔºåÊ≤°‰ªÄ‰πàÂπ≤Ë¥ßÂÄºÂæóÂàÜ‰∫´„ÄÇ‰∏çËøáËÄÉËôëÂà∞Âæà‰πÖÈÉΩÊ≤°ÊúâÊõ¥Êñ∞‰∫ÜÔºåËøòÊòØË¶ÅÂº∫Ëø´Ëá™Â∑±ÂÜô‰∏ÄÁÇπ‰∏úË•øÔºå‰∏çÁÑ∂ÂÆπÊòìÂèòÊáí„ÄÇÊÄª‰πãÔºåÂ§öÊÄùËÄÉÔºåÂ§öÂÆûË∑µËøòÊòØÂæàÈáçË¶Å„ÄÇ ‰ªäÂ§©‰∏ªË¶ÅÊòØÊÉ≥Êää‰∏â‰∏™ÊúàÂâçÂ∞±ÊîæÂà∞ GitHub ‰∏äÁöÑ go-rest-api-starter È°πÁõÆ‰ªãÁªç‰∏ãÔºåÁõÆÁöÑÊúâ‰∏§‰∏™Ôºö  ÂàÜ‰∫´‰∏ãÊàë‰ª¨ÁõÆÂâçÁöÑÂ∑•Á®ãÂÆûË∑µÔºõ Áªô portal Â¢ûÂä†ÁÇπÊõùÂÖâÂ∫¶ üòä„ÄÇËôΩ">
<meta name="keywords" content="Go,RESTful">
<meta property="og:type" content="article">
<meta property="og:title" content="Go RESTful API È°πÁõÆÊ®°Êùø‰ªãÁªç">
<meta property="og:url" content="/2020/04/02/go-rest-api-for-beginners/index.html">
<meta property="og:site_name" content="ÈªëÁôΩ‰πãÈô¢">
<meta property="og:description" content="0x00 ÂºïË®ÄÁñ´ÊÉÖÊúüÈó¥Â≠¶ÁöÑ‰∏úË•øÊØîËæÉÊùÇÔºàÊØîÂ¶ÇÂ≠¶‰π†‰∫ÜÂ¶Ç‰ΩïÂú®Â∏ÇÂú∫Ë°åÊÉÖ‰∏çÂ•ΩÁöÑÊó∂ÂÄôËøòÁõ≤ÁõÆÂä†‰ªì üôÇÔºâÔºåÊ≤°‰ªÄ‰πàÂπ≤Ë¥ßÂÄºÂæóÂàÜ‰∫´„ÄÇ‰∏çËøáËÄÉËôëÂà∞Âæà‰πÖÈÉΩÊ≤°ÊúâÊõ¥Êñ∞‰∫ÜÔºåËøòÊòØË¶ÅÂº∫Ëø´Ëá™Â∑±ÂÜô‰∏ÄÁÇπ‰∏úË•øÔºå‰∏çÁÑ∂ÂÆπÊòìÂèòÊáí„ÄÇÊÄª‰πãÔºåÂ§öÊÄùËÄÉÔºåÂ§öÂÆûË∑µËøòÊòØÂæàÈáçË¶Å„ÄÇ ‰ªäÂ§©‰∏ªË¶ÅÊòØÊÉ≥Êää‰∏â‰∏™ÊúàÂâçÂ∞±ÊîæÂà∞ GitHub ‰∏äÁöÑ go-rest-api-starter È°πÁõÆ‰ªãÁªç‰∏ãÔºåÁõÆÁöÑÊúâ‰∏§‰∏™Ôºö  ÂàÜ‰∫´‰∏ãÊàë‰ª¨ÁõÆÂâçÁöÑÂ∑•Á®ãÂÆûË∑µÔºõ Áªô portal Â¢ûÂä†ÁÇπÊõùÂÖâÂ∫¶ üòä„ÄÇËôΩ">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://camo.githubusercontent.com/878e48b845b8e24e870c9ecd4642b0ae2ddd5dd0/68747470733a2f2f706963332e7a68696d672e636f6d2f76322d37303061333265333865316465303361633639393732343138303462356136622e706e67">
<meta property="og:updated_time" content="2020-04-13T10:50:03.217Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Go RESTful API È°πÁõÆÊ®°Êùø‰ªãÁªç">
<meta name="twitter:description" content="0x00 ÂºïË®ÄÁñ´ÊÉÖÊúüÈó¥Â≠¶ÁöÑ‰∏úË•øÊØîËæÉÊùÇÔºàÊØîÂ¶ÇÂ≠¶‰π†‰∫ÜÂ¶Ç‰ΩïÂú®Â∏ÇÂú∫Ë°åÊÉÖ‰∏çÂ•ΩÁöÑÊó∂ÂÄôËøòÁõ≤ÁõÆÂä†‰ªì üôÇÔºâÔºåÊ≤°‰ªÄ‰πàÂπ≤Ë¥ßÂÄºÂæóÂàÜ‰∫´„ÄÇ‰∏çËøáËÄÉËôëÂà∞Âæà‰πÖÈÉΩÊ≤°ÊúâÊõ¥Êñ∞‰∫ÜÔºåËøòÊòØË¶ÅÂº∫Ëø´Ëá™Â∑±ÂÜô‰∏ÄÁÇπ‰∏úË•øÔºå‰∏çÁÑ∂ÂÆπÊòìÂèòÊáí„ÄÇÊÄª‰πãÔºåÂ§öÊÄùËÄÉÔºåÂ§öÂÆûË∑µËøòÊòØÂæàÈáçË¶Å„ÄÇ ‰ªäÂ§©‰∏ªË¶ÅÊòØÊÉ≥Êää‰∏â‰∏™ÊúàÂâçÂ∞±ÊîæÂà∞ GitHub ‰∏äÁöÑ go-rest-api-starter È°πÁõÆ‰ªãÁªç‰∏ãÔºåÁõÆÁöÑÊúâ‰∏§‰∏™Ôºö  ÂàÜ‰∫´‰∏ãÊàë‰ª¨ÁõÆÂâçÁöÑÂ∑•Á®ãÂÆûË∑µÔºõ Áªô portal Â¢ûÂä†ÁÇπÊõùÂÖâÂ∫¶ üòä„ÄÇËôΩ">
<meta name="twitter:image" content="https://camo.githubusercontent.com/878e48b845b8e24e870c9ecd4642b0ae2ddd5dd0/68747470733a2f2f706963332e7a68696d672e636f6d2f76322d37303061333265333865316465303361633639393732343138303462356136622e706e67">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Âçö‰∏ª'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="/2020/04/02/go-rest-api-for-beginners/">





  <title>Go RESTful API È°πÁõÆÊ®°Êùø‰ªãÁªç | ÈªëÁôΩ‰πãÈô¢</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ÈªëÁôΩ‰πãÈô¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">Valar Morghulis</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            È¶ñÈ°µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            ÂΩíÊ°£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            ÂàÜÁ±ª
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Ê†áÁ≠æ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-Êî∂Ëóè">
          <a href="/collection" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-star"></i> <br>
            
            Êî∂Ëóè
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            ÂÖ≥‰∫é
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="/2020/04/02/go-rest-api-for-beginners/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iFaceless">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ÈªëÁôΩ‰πãÈô¢">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Go RESTful API È°πÁõÆÊ®°Êùø‰ªãÁªç</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ÂèëË°®‰∫é</span>
              
              <time title="ÂàõÂª∫‰∫é" itemprop="dateCreated datePublished" datetime="2020-04-02T23:03:15+08:00">
                2020-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">ÂàÜÁ±ª‰∫é</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Go/" itemprop="url" rel="index">
                    <span itemprop="name">Go</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Â≠óÊï∞ÁªüËÆ°&#58;</span>
                
                <span title="Â≠óÊï∞ÁªüËÆ°">
                  3.3k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">ÈòÖËØªÊó∂Èïø &asymp;</span>
                
                <span title="ÈòÖËØªÊó∂Èïø">
                  12
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="0x00-ÂºïË®Ä"><a href="#0x00-ÂºïË®Ä" class="headerlink" title="0x00 ÂºïË®Ä"></a>0x00 ÂºïË®Ä</h1><p>Áñ´ÊÉÖÊúüÈó¥Â≠¶ÁöÑ‰∏úË•øÊØîËæÉÊùÇÔºàÊØîÂ¶ÇÂ≠¶‰π†‰∫ÜÂ¶Ç‰ΩïÂú®Â∏ÇÂú∫Ë°åÊÉÖ‰∏çÂ•ΩÁöÑÊó∂ÂÄôËøòÁõ≤ÁõÆÂä†‰ªì üôÇÔºâÔºåÊ≤°‰ªÄ‰πàÂπ≤Ë¥ßÂÄºÂæóÂàÜ‰∫´„ÄÇ‰∏çËøáËÄÉËôëÂà∞Âæà‰πÖÈÉΩÊ≤°ÊúâÊõ¥Êñ∞‰∫ÜÔºåËøòÊòØË¶ÅÂº∫Ëø´Ëá™Â∑±ÂÜô‰∏ÄÁÇπ‰∏úË•øÔºå‰∏çÁÑ∂ÂÆπÊòìÂèòÊáí„ÄÇÊÄª‰πãÔºåÂ§öÊÄùËÄÉÔºåÂ§öÂÆûË∑µËøòÊòØÂæàÈáçË¶Å„ÄÇ</p>
<p>‰ªäÂ§©‰∏ªË¶ÅÊòØÊÉ≥Êää‰∏â‰∏™ÊúàÂâçÂ∞±ÊîæÂà∞ GitHub ‰∏äÁöÑ <a href="https://github.com/iFaceless/go-rest-api-starter" target="_blank" rel="noopener">go-rest-api-starter</a> È°πÁõÆ‰ªãÁªç‰∏ãÔºåÁõÆÁöÑÊúâ‰∏§‰∏™Ôºö</p>
<ol>
<li>ÂàÜ‰∫´‰∏ãÊàë‰ª¨ÁõÆÂâçÁöÑÂ∑•Á®ãÂÆûË∑µÔºõ</li>
<li>Áªô <a href="https://github.com/ifaceless/portal" target="_blank" rel="noopener">portal</a> Â¢ûÂä†ÁÇπÊõùÂÖâÂ∫¶ üòä„ÄÇËôΩÁÑ∂Á¨îËÄÖÂú® <a href="https://zhuanlan.zhihu.com/p/85404746" target="_blank" rel="noopener">Go ËØ≠Ë®Ä‰∏≠Â¶Ç‰Ωï‰ª•‰ºòÈõÖÁöÑÂßøÂäøÂÆûÁé∞ÂØπË±°Â∫èÂàóÂåñ</a> ÂÅöËøá‰ªãÁªçÔºå‰∏çËøá‰∏ÄÁõ¥Ê≤°ÊúâÁªôËøáÊàë‰ª¨Âú®ÁúüÂÆûÁéØÂ¢É‰∏≠ÁöÑÂÖ∑‰ΩìÁî®Ê≥ïÔºå‰ªäÂ§©Êèê‰æõÁöÑÁ§∫‰æã‰πüÂàöÂ•ΩÂèØ‰ª•Â∏ÆÂä©ÊÑüÂÖ¥Ë∂£ÁöÑÂêåÂ≠¶‰∫ÜËß£‰∏ãÂÆÉÁöÑÁî®Ê≥ï„ÄÇ</li>
</ol>
<h1 id="0x01-‰∏∫‰ªÄ‰πàÔºü"><a href="#0x01-‰∏∫‰ªÄ‰πàÔºü" class="headerlink" title="0x01 ‰∏∫‰ªÄ‰πàÔºü"></a>0x01 ‰∏∫‰ªÄ‰πàÔºü</h1><p>Â•ΩÁöÑÂ∑•Á®ãËßÑËåÉÊòØÂú®È°πÁõÆÂÆûË∑µ‰∏≠‰∏çÊñ≠Ë∏©ÂùëÊÄªÁªìÂá∫Êù•ÁöÑÔºåÊúüÈó¥Êàë‰ª¨‰πüÈÅáÂà∞ÂêÑÁßçÂÜôËµ∑Êù•‰∏çÂ§ü‰ºòÈõÖÁöÑÂú∞ÊñπÔºåËá™ÁÑ∂Â∞±ÈúÄË¶ÅÊÉ≥ÂäûÊ≥ïËß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢ò„ÄÇÁªèËøáËã•Âπ≤È°πÁõÆÁöÑÂÆûË∑µÔºåÁªìÂêàÈÅáÂà∞ÁöÑÈóÆÈ¢òÔºå‰πüÈÄ†‰∫Ü‰∫õËΩÆÂ≠ê‰æø‰∫éÊèêÂçá<strong>ÂºÄÂèëÂπ∏Á¶èÂ∫¶</strong>„ÄÇÊ≤âÊ∑ÄÂíåÊèêÁÇºÁöÑÁªìÊûúÔºå‰æøÊòØ‰∏ÄÂ•óÂèØ‰ª•Ê≤øË¢≠ÁöÑÈ°πÁõÆËÑöÊâãÊû∂ÔºåÈõÜÊàê‰∫Ü‰∏Ä‰∫õÊàë‰ª¨ËÆ§‰∏∫ÁöÑ„ÄåÊúÄ‰Ω≥ÂÆûË∑µ„Äç„ÄÇ</p>
<p>Á¨îËÄÖÁõ∏‰ø°‰∏çÂêåÁöÑÂõ¢ÈòüÊúâ‰∏çÂêåÁöÑÊÉ≥Ê≥ïÔºå‰ΩÜÊú¨Ë¥®‰∏äÈÉΩÊòØÊõ¥Â•ΩÁöÑÊúçÂä°‰∫é‰∏öÂä°„ÄÇÊàë‰ª¨Â∏åÊúõËÉΩÂ§ü‰ª•<strong>‰∏ÄËá¥</strong>„ÄÅ<strong>Ê∏ÖÊô∞</strong>ÁöÑÊñπÂºèÊù•ÁºñÂÜô‰ª£Á†ÅÔºåÂπ∂‰∏î‰øùËØÅÈ°πÁõÆÁªìÊûÑ‰∏çË¢´ÈöèÊÑèÁ†¥ÂùèÔºåÈ°πÁõÆÁöÑÂèØÁª¥Êä§ÊÄßÂ§ß‰∫é‰∏ÄÂàá„ÄÇÂè¶Â§ñÔºåÂØπ‰∫é‰∏öÂä°Ê°ÜÊû∂Ôºå‰πü‰∏çÂ∫îËØ•‰∏ÄÂë≥Âú∞ÊéíÊñ•„ÄÇÂêàÁêÜÂú∞‰ΩøÁî®‰∏öÂä°Ê°ÜÊû∂ÔºåÊó¢ÊúâÂà©‰∫éÁÆÄÂåñ‰∏öÂä°‰ª£Á†ÅÁºñÂÜôÔºåÂèàÊúâÂà©‰∫éÁêÜËß£ÂíåÁª¥Êä§„ÄÇ</p>
<h1 id="0x02-ÊòØ‰ªÄ‰πàÔºü"><a href="#0x02-ÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="0x02 ÊòØ‰ªÄ‰πàÔºü"></a>0x02 ÊòØ‰ªÄ‰πàÔºü</h1><p><a href="https://github.com/iFaceless/go-rest-api-starter" target="_blank" rel="noopener">go-rest-api-starter</a> ÊòØ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑ RESTful API È°πÁõÆÔºàÂïÜÂìÅÁÆ°ÁêÜÂêéÂè∞+ÂâçÂè∞Êé•Âè£ÔºåÊ∫êËá™ <a href="https://dev.aizoo.com" target="_blank" rel="noopener">aizoo</a> ÁÆ°ÁêÜÂêéÂè∞ÔºâÔºåÊºîÁ§∫‰∫ÜÊàë‰ª¨ÁõÆÂâçÁöÑÂ∑•Á®ãÂÆûË∑µÊòØ‰ªÄ‰πàÊ†∑ÁöÑ„ÄÇÂΩìÁÑ∂ÔºåÂõ¢ÈòüÂÜÖÈÉ®ÁâàÊú¨‰ΩøÁî®‰∫Ü‰∏Ä‰∫õÈùûÂºÄÊ∫êÊ°ÜÊû∂Ôºå‰∏çËøáÂêåÊ†∑ÁöÑÁêÜÂøµÊç¢ÊàêÂà´ÁöÑÊ°ÜÊû∂‰æùÁÑ∂ÂèØË°å„ÄÇÊâÄ‰ª•ÔºåÂú®ËØ•È°πÁõÆ‰∏≠ÔºåÁ¨îËÄÖÂ∞Ü‰∏Ä‰∫õÂÜÖÈÉ®Ê°ÜÊû∂Êç¢Êàê‰∫ÜÂºÄÊ∫êÊ°ÜÊû∂ÔºåÊñπ‰æøÂ§ßÂÆ∂ÂèÇËÄÉ„ÄÇ</p>
<p>‰ªéËøô‰∏™È°πÁõÆ‰∏≠ÂèØ‰ª•‰∫ÜËß£Âà∞‰ªÄ‰πàÔºü</p>
<ol>
<li>Êï¥‰ΩìÁöÑÈ°πÁõÆÁªìÊûÑÔºåÂàÜÂ±ÇÊÉÖÂÜµÔºõ</li>
<li>Model Â±ÇÊÄé‰πàÁºñÂÜôÔºåÂÖ≥ËÅîËµÑÊ∫êÂ¶Ç‰Ωï‰ª•Â±ûÊÄßÊñπÂºèÊö¥Èú≤Ôºõ</li>
<li>Schema Â±ÇÊÄé‰πàÁºñÂÜôÔºåË°®ÂçïÊ†°È™åÈÄªËæëÊîæÂú®‰ªÄ‰πà‰ΩçÁΩÆÔºõ</li>
<li>Â§çÊùÇ‰∏öÂä°ÈÄªËæëÂ¶Ç‰ΩïÂú® Controller Â±ÇÂÆûÁé∞Ôºõ</li>
<li>Â¶Ç‰Ωï‰øùËØÅ Handler Â±ÇÊï¥Ê¥ÅÊ∏ÖÊô∞Ôºõ</li>
<li><a href="https://github.com/ifaceless/portal" target="_blank" rel="noopener">portal</a> ÊâÄÊâÆÊºîÁöÑËßíËâ≤ÔºåÂ¶Ç‰ΩïÁÆÄÂåñÂ≠óÊÆµÊ†ºÂºèÂåñÈÄªËæë„ÄÇ</li>
</ol>
<p>È¶ñÂÖàÊù•Áúã‰∏ãÈ°πÁõÆÁªìÊûÑÔºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">‚îú‚îÄ‚îÄ .envÔºàÁéØÂ¢ÉÂèòÈáèÈÖçÁΩÆÔºåËµÑÊ∫êËøûÊé•‰∏≤Á≠âÔºâ</span><br><span class="line">‚îú‚îÄ‚îÄ .env_unittestÔºàË∑ëÂçïÂÖÉÊµãËØï‰ΩøÁî®ÁöÑÊµãËØïËµÑÊ∫êÈÖçÁΩÆÔºâ</span><br><span class="line">‚îú‚îÄ‚îÄ LICENSE</span><br><span class="line">‚îú‚îÄ‚îÄ Makefile</span><br><span class="line">‚îú‚îÄ‚îÄ README.md</span><br><span class="line">‚îú‚îÄ‚îÄ bin</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ starter-adminÔºàÈù¢ÂêëÁÆ°ÁêÜÂêéÂè∞ÁöÑ RESTful API ÊúçÂä°Âô®Ôºâ</span><br><span class="line">‚îÇ   ‚îî‚îÄ‚îÄ starter-webÔºàÈù¢ÂêëÂÆ¢Êà∑Á´Ø„ÄÅPC Á≠âÂâçÂè∞ÁöÑ RESTful API ÊúçÂä°Âô®Ôºâ</span><br><span class="line">‚îú‚îÄ‚îÄ cmdÔºàÂêÑ‰∏™ÊúçÂä°ÂêØÂä®ÁöÑÂÖ•Âè£Ôºâ</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ adminÔºàÁÆ°ÁêÜÂêéÂè∞Ôºâ</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.go</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ beeÔºàÁ¶ªÁ∫øÂºÇÊ≠•‰ªªÂä°Ôºâ</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.go</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ serviceÔºàRPC ÊúçÂä°Ôºâ</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.go</span><br><span class="line">‚îÇ   ‚îî‚îÄ‚îÄ webÔºàÂÆ¢Êà∑Á´Ø„ÄÅPC„ÄÅÂ∞èÁ®ãÂ∫èÁ≠âÂâçÂè∞Ôºâ</span><br><span class="line">‚îÇ       ‚îî‚îÄ‚îÄ main.go</span><br><span class="line">‚îú‚îÄ‚îÄ go.modÔºà‰æùËµñÂåÖ go modulesÔºâ</span><br><span class="line">‚îú‚îÄ‚îÄ pkg</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ adminÔºàÁÆ°ÁêÜÂêéÂè∞ÊúçÂä°Ôºâ</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handler</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router.go</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemaÔºàÂíåËøîÂõûÁöÑ JSON Êï∞ÊçÆÂÖ≥ËÅîÁöÑËµÑÊ∫êÁªìÊûÑ‰ΩìÂÆö‰πâÔºâ</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validatorÔºàÈÄöÁî®ÁöÑÊ†°È™å‰ª£Á†ÅÔºâ</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ configÔºàËµÑÊ∫êÈÖçÁΩÆÔºâ</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fixture.go</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ init.go</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mysql.go</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ constantÔºàÂ∏∏Èáè„ÄÅÊûö‰∏æÂÆö‰πâÔºâ</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ enum.go</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gen_enum.go</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ macro.go</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ controllerÔºàÂ§çÊùÇ‰∏öÂä°ÈÄªËæëÔºâ</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ company.go</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ company_test.go</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ product.go</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ jobÔºàÂºÇÊ≠•Á¶ªÁ∫ø‰ªªÂä°‰∏öÂä°ÈÄªËæëÔºâ</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ after_product_created.go</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ middlewareÔºàÂèØÂ§çÁî®ÁöÑ‰∏≠Èó¥‰ª∂Ôºâ</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cors.go</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ modelÔºàModelsÔºåÂèØËÉΩËøò‰ºöËÅöÂêàÊù•Ëá™ RPC Á≠âÊï∞ÊçÆÊ∫êÔºåÊï∞ÊçÆÊ®°ÂûãÊäΩË±°Ôºâ</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ company.go</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ doc.go</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ init.go</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ product.go</span><br><span class="line">‚îÇ   ‚îú‚îÄ‚îÄ utilÔºàÂ∑•ÂÖ∑ÈõÜÔºâ</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orderby.go</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pic</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rest</span><br><span class="line">‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ seqgen</span><br><span class="line">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ toolkit</span><br><span class="line">‚îÇ   ‚îî‚îÄ‚îÄ webÔºàÂâçÂè∞ÊúçÂä°Ôºâ</span><br><span class="line">‚îÇ       ‚îú‚îÄ‚îÄ handler</span><br><span class="line">‚îÇ       ‚îú‚îÄ‚îÄ router.go</span><br><span class="line">‚îÇ       ‚îî‚îÄ‚îÄ schema</span><br><span class="line">‚îú‚îÄ‚îÄ scriptÔºà‰∏Ä‰∫õËÑöÊú¨Êñá‰ª∂Ôºâ</span><br><span class="line">‚îÇ   ‚îî‚îÄ‚îÄ 20200101</span><br><span class="line">‚îî‚îÄ‚îÄ testdataÔºàÂçïÂÖÉÊµãËØïÊúâÂÖ≥ÊµãËØïÊï∞ÊçÆ„ÄÅË°®ÁªìÊûÑÂÆö‰πâÔºâ</span><br><span class="line">    ‚îú‚îÄ‚îÄ fixtures</span><br><span class="line">    ‚îÇ   ‚îú‚îÄ‚îÄ company.yml</span><br><span class="line">    ‚îÇ   ‚îú‚îÄ‚îÄ doc.yml</span><br><span class="line">    ‚îÇ   ‚îî‚îÄ‚îÄ product.yml</span><br><span class="line">    ‚îî‚îÄ‚îÄ schema.sql</span><br></pre></td></tr></table></figure>
<h1 id="0x03-ËØ¥-Handler"><a href="#0x03-ËØ¥-Handler" class="headerlink" title="0x03 ËØ¥ Handler"></a>0x03 ËØ¥ Handler</h1><p>Êàë‰ª¨Â∏åÊúõ Handler Â±ÇÁöÑÈÄªËæë‰∏çË¶ÅÂ§™ËøáÂ§çÊùÇÔºåÊõæÁªèÂú®ÁúãÊüêÂêéÂè∞È°πÁõÆÊó∂ÔºåÊüê Handler Ë∂≥Ë∂≥ËøëÁôæË°å‰ª£Á†ÅÔºåÁ≥ÖÊùÇ‰∫ÜÂ§ßÈáèÁöÑÂ≠óÊÆµÊ†°È™åÈÄªËæë„ÄÅ‰∏öÂä°ÈÄªËæë„ÄÅÊï∞ÊçÆÊ†ºÂºèÂåñÈÄªËæëÁ≠âÔºåÊûÅÂ∫¶Âï∞Âó¶ÔºåÈöæ‰ª•‰øÆÊîπÂíåÁª¥Êä§ÔºåËøô‰∏™ÊòØÊàë‰ª¨‰∏çÂ§™ÊÉ≥Ë¶ÅÁöÑ„ÄÇ</p>
<p>ÁêÜÊÉ≥ÊÉÖÂÜµ‰∏ãÔºåHandler Â±ÇÂ∫îËØ•‰øùËØÅË∂≥Â§üËΩªÈáèÔºåÂÆÉÂ∞±Â∫îËØ•ÂÉèÊòØËÉ∂Ê∞¥ÔºåË¥üË¥£Â∞Ü Model Â±Ç„ÄÅController Â±Ç‰ª•Âèä Schema Â±ÇÁ≤òÂú®‰∏ÄËµ∑„ÄÇÊàë‰ª¨Êù•ÁúãÁúã‰∏ãÈù¢ÁöÑÁ§∫‰æãÔºö</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetProducts</span><span class="params">(c *rest.Context)</span> <span class="params">(rest.Response, error)</span></span> &#123;</span><br><span class="line">    <span class="comment">// 1. Â§çÊùÇÈÄªËæë‰∏ãÊ≤âÂà∞ Controller Â±ÇÂÆûÁé∞</span></span><br><span class="line">    products, total, err := controller.GetProducts(</span><br><span class="line">        c.Query(<span class="string">"title"</span>),</span><br><span class="line">        c.QueryWithFallback(<span class="string">"order_by"</span>, <span class="string">"-created_at"</span>),</span><br><span class="line">        c.Offset(),</span><br><span class="line">        c.Limit(),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. Model -&gt; Schema Ê∏≤Êüì</span></span><br><span class="line">    <span class="keyword">var</span> schemas []schema.OutputProductSchema</span><br><span class="line">    <span class="comment">// ÂÄüÂä© portal.OnlyÔºåÂèØ‰ª•Âú®ËØ∑Ê±ÇÁöÑÊó∂ÂÄôÊåáÂÆöÂè™ÂêêÂá∫ÈúÄË¶ÅÁöÑÂ≠óÊÆµÂÄº</span></span><br><span class="line">     err = portal.Dump(&amp;schemas, products, portal.Only(strings.Split(c.QueryWithFallback(<span class="string">"only"</span>, <span class="string">""</span>), <span class="string">","</span>)...))</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. ËøîÂõûÁªìÊûú</span></span><br><span class="line">    <span class="keyword">return</span> rest.NewPage(c, schemas, total), <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateProduct</span><span class="params">(c *rest.Context)</span> <span class="params">(rest.Response, error)</span></span> &#123;</span><br><span class="line">    <span class="comment">// 1. Ë°®ÂçïÊ†°È™åÂíåÂ§ÑÁêÜ</span></span><br><span class="line">    <span class="keyword">var</span> input schema.InputProductSchema</span><br><span class="line">    err := c.BindJSON(&amp;input)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> product model.ProductModel</span><br><span class="line">    err = portal.Dump(&amp;product, input)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. ‰∏öÂä°ÈÄªËæëÂ§ÑÁêÜ</span></span><br><span class="line">    prodID, err := controller.CreateProduct(&amp;product, &amp;input)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. ËøîÂõûÂ§ÑÁêÜÁªìÊûú</span></span><br><span class="line">    <span class="keyword">return</span> gin.H&#123;<span class="string">"success"</span>: <span class="literal">true</span>, <span class="string">"product_id"</span>: cast.ToString(prodID)&#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÊÄªÁªìÊù•ÁúãÔºåHandler Â±ÇÊó†ÈùûÊâßË°åÂ¶Ç‰∏ãÂá†‰∏™Ê≠•È™§ÔºàKeep It Simple, StupidÔºâÔºö</p>
<ol>
<li>ËæìÂÖ•ÂèÇÊï∞Ê†°È™åÂíåÂ§ÑÁêÜÔºàÂÆûÈôÖÈÄªËæëË¶Å‰πàÂ∞ÅË£ÖÂú® Schema Â±ÇÔºåË¶Å‰πàÂú®Ê°ÜÊû∂Â±ÇËß£ÂÜ≥ÔºâÔºõ</li>
<li>‰∏öÂä°ÈÄªËæëÂ§ÑÁêÜÔºàController Â±ÇË¥üË¥£ÔºâÔºõ</li>
<li>ÁªìÊûúËøîÂõû„ÄÇ</li>
</ol>
<h1 id="0x04-ËÆ≤-Schema-‰∏é-Model"><a href="#0x04-ËÆ≤-Schema-‰∏é-Model" class="headerlink" title="0x04 ËÆ≤ Schema ‰∏é Model"></a>0x04 ËÆ≤ Schema ‰∏é Model</h1><p>Ëøô‰∏§‰∏™ÈÄÇÂêàÊîæÂú®‰∏ÄËµ∑ËÆ≤ÔºåÂõ†‰∏∫ Schema ÁöÑÂ≠óÊÆµÊò†Â∞ÑÁöÑÊ≠£ÊòØÂØπÂ∫îÁöÑ Model ‰∏≠Áõ∏ÂÖ≥Â≠óÊÆµ„ÄÇ‰πüËÆ∏ËøôÈáå‰ºöÊúâÁñëÊÉëÔºå‰∏∫‰ªÄ‰πàÊàë‰ª¨‰∏çÁõ¥Êé•Âú® Model Â±ÇÔºåÁªôÊüê‰∏™ Field Âä†‰∏™ Tag <code>json: field_name</code>ÔºåÁõ¥Êé•Â∫èÂàóÂåñËøîÂõûÂá∫ÂéªÂë¢Ôºü‰∏∫‰ΩïÈùûË¶ÅÁîüÁ°¨Âú∞ÂÜô‰∏Ä‰∏™ Schema ÁªìÊûÑ‰ΩìÂÜçÂÅöÊò†Â∞ÑÂë¢Ôºü</p>
<p>Êé•‰∏ãÊù•Â∞ÜÁªìÂêàÂÖ∑‰ΩìÁöÑÂú∫ÊôØÊù•ÂõûÁ≠îËøô‰∏™ÈóÆÈ¢òÔºö</p>
<ol>
<li>API Ë¶ÅÊ±ÇËøîÂõûÁöÑÂ≠óÊÆµÁ±ªÂûãÂíå Model ‰∏≠ÂÆûÈôÖÁ±ªÂûã‰∏ç‰∏ÄËá¥ÔºàÂ¶Ç model.ID ‰∏∫ int Á±ªÂûãÔºå‰ΩÜ API Ë¶ÅÊ±ÇËøîÂõû string Á±ªÂûãÔºâÔºõ</li>
<li>Êüê‰∫õÂ≠óÊÆµË¶ÅÊ±ÇÊòØÂèØÈÄâËøîÂõûÂ≠óÊÆµÔºàËøôÊó∂ÂèØ‰ª•ËΩªÊùæÂú∞‰øÆÊîπ Schema ‰∏≠ÁöÑÂ≠óÊÆµ‰∏∫ <code>*type</code> Âç≥ÂèØÔºâ„ÄÇ</li>
</ol>
<p>ÊÄª‰πãÔºåModel Â±Ç‰Ωú‰∏∫ Source of TruthÔºå‰øùÊåÅÊúÄÂéüÂßãÁöÑÊ†ºÂºèÊúÄÂ•Ω„ÄÇSchema Â±ÇÂàôÊ†πÊçÆÂÖ∑‰ΩìÁöÑ‰∏öÂä°Âú∫ÊôØËøõË°åÂèòÂä®ÔºåÂØπ‰∫é‰∏çÈÄÇÈÖçÁöÑÂú∫ÊôØÔºåËá™ÂÆö‰πâ format ÊñπÊ≥ïÂÆåÊàêËΩ¨Êç¢Âç≥ÂèØ„ÄÇËøôÊ†∑ÂèØ‰ª•Â∞ÜÊîπÂä®Âè™ËÅöÁÑ¶Âú®ËæÉÂ∞èÁöÑËåÉÂõ¥ÔºåÈÅøÂÖçÂà∞Â§Ñ‰øÆÊîπÁ±ªÂûãÔºåÊÉ≥ÊÉ≥‰πüÂøÉÁ¥Ø„ÄÇ</p>
<p>ÊúÄÂêéË¶ÅÊèêÁöÑ‰∏ÄÁÇπÊòØ Model ÁöÑÂÖ≥ËÅîËµÑÊ∫êÔºåÊàë‰ª¨Êé®ËçêÁöÑÂÜôÊ≥ïÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> ProductModel <span class="keyword">struct</span> &#123;</span><br><span class="line">    ID        <span class="keyword">int64</span></span><br><span class="line">    CompanyID <span class="keyword">int64</span></span><br><span class="line">    <span class="comment">// ... other fields ignored</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Company ËøîÂõûÂïÜÂìÅÂÖ≥ËÅîÁöÑÂÖ¨Âè∏ÔºàÊù•Ê∫ê‰∫éÂà´ÁöÑË°®Ôºâ</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(pd *ProductModel)</span> <span class="title">Company</span><span class="params">()</span> <span class="params">(*CompanyModel, error)</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> company CompanyModel</span><br><span class="line">    err := DB.Where(<span class="string">"id = ?"</span>, pd.CompanyID).Find(&amp;company).Error</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> gorm.IsRecordNotFoundError(err) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span>, <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>, errors.WithStack(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &amp;company, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Rate ËøîÂõûÂïÜÂìÅÂÖ≥ËÅîÁöÑËØÑÂàÜÔºàÊù•Ê∫ê‰∫é RPC Ë∞ÉÁî®Ôºâ</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(pd *ProductModel)</span> <span class="title">Rate</span><span class="params">()</span> <span class="params">(<span class="keyword">float64</span>, error)</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> rpc.GetProductRate(pd.ID)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ËøôÊ†∑Âú® Schema Â±ÇÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÂ£∞ÊòéÈúÄË¶ÅÊò†Â∞ÑÁöÑÂ≠óÊÆµÔºåÂú®ÁªèËøá <code>portal.Dump</code> Êó∂ÔºåÊ°ÜÊû∂‰ºöËá™Âä®ÂÆåÊàêÁõ∏ÂÖ≥Â≠óÊÆµÊò†Â∞ÑÔºåÂπ∂Â∞ÜËøîÂõûÁöÑÂÄºÂ°´ÂÖÖÂà∞ÂØπÂ∫îÁöÑ Schema Â≠óÊÆµ‰∏≠Ôºö</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> OutputCompanySchema <span class="keyword">struct</span> &#123;</span><br><span class="line">    ID        <span class="keyword">string</span>           <span class="string">`json:"id"`</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> OutputProductSchema <span class="keyword">struct</span> &#123;</span><br><span class="line">    ID            *<span class="keyword">string</span>               <span class="string">`json:"id,omitempty"`</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    Company       *OutputCompanySchema  <span class="string">`json:"company,omitempty" portal:"nested;async"`</span></span><br><span class="line">    CreatedAt     *field.Timestamp      <span class="string">`json:"created_at,omitempty"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> output OutputProductSchema</span><br><span class="line">portal.Dump(&amp;output, product)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Ê≠§Êó∂Â∞Ü output json Â∫èÂàóÂåñÔºåÂ∞±ÊòØÊÉ≥Ë¶ÅÂæóÂà∞ÁöÑÁªìÊûú</span></span><br></pre></td></tr></table></figure>
<h1 id="0x05-Á¢éÁ¢éÂøµ"><a href="#0x05-Á¢éÁ¢éÂøµ" class="headerlink" title="0x05 Á¢éÁ¢éÂøµ"></a>0x05 Á¢éÁ¢éÂøµ</h1><p>ÊúÄËøëÂá†Â§©Âú®Â∞ùËØïÈáçÊûÑÊüê‰∏™È°πÁõÆÁöÑÊüê‰∏™Â∑®ÈïøÁöÑÂáΩÊï∞ÔºàÊé•Ëøë 250 Ë°åÔºå‰ª£Á†ÅÂ∞±‰∏çË¥¥‰∫ÜÔºåÊÄïË¢´Êâì üòùÔºâÔºåÊØèÊ¨°‰øÆÊîπÂÆÉÁöÑÊó∂ÂÄôÂøÉÊÄÅÈÉΩË¶ÅÂ¥©„ÄÇ‰ΩÜËØ¥Ëµ∑Êù•ÔºåÂÆÉ‰πüÊ≤°ÊúâÂ§ö‰πàÂ§çÊùÇÁöÑ‰∏öÂä°ÈÄªËæëÔºåÂè™ÊòØ‰∫ßÂìÅÁ∫øÁ±ªÂûãËæÉÂ§öÔºåÁ≥ÖÊùÇ‰∫ÜËµÑÊ∫êËé∑ÂèñÈÄªËæë„ÄÅÂ≠óÊÆµÊ†ºÂºèÂåñÈÄªËæëÁ≠âÁ≠â„ÄÇ‰∏•Ê†ºÊù•ËØ¥ÔºåÂÆåÂÖ®ÂèØ‰ª•‰ΩøÁî®‰∏äËø∞ÁöÑ Model &amp; Schema ÂàÜÂ±ÇÊÄùË∑ØËøõË°åÈáçÊûÑÔºå‰ΩÜÊòØËØ•ÂáΩÊï∞ÂÅö‰∫Ü‰∫õ‰ºòÂåñÔºö</p>
<ol>
<li>‰ΩøÁî® <code>batch_get_resource</code> Êé•Âè£Êõø‰ª£ <code>get_resource</code> Êé•Âè£Ôºõ</li>
<li>Âπ∂ÂèëËé∑ÂèñÂ§ö‰∏™‰∫ßÂìÅÁ∫øÁöÑÁ´†ËäÇ‰ø°ÊÅØÁ≠â„ÄÇ</li>
</ol>
<p>Âõ†‰∏∫ËøôÁßç‰ºòÂåñÁöÑÂºïÂÖ•Ôºå‰ºöÂØºËá¥‰∏äËø∞ÂÜôÊ≥ï‰∏äÂ≠òÂú®‰∏Ä‰∫õ‰∏çÂ§™‰ºòÈõÖÁöÑÂú∞Êñπ„ÄÇÊé•‰∏ãÊù•‰∏æ‰∏™Ê†óÂ≠êüå∞ËÉΩÂ§üÊõ¥Â•ΩÂú∞ËØ¥ÊòéÁé∞Âú®ÈÅáÂà∞ÁöÑÈóÆÈ¢òÔºö</p>
<p>ÂÖàÁúãÁúãÂ∏∏ËßÑÁöÑ StudentModel &amp; StudentSchema ÂÆö‰πâÔºö</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> StudentModel <span class="keyword">struct</span> &#123;</span><br><span class="line">    MemberID <span class="keyword">int64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Member ËøîÂõûÂÖ≥ËÅîÁöÑË¥¶Âè∑ËØ¶ÊÉÖ</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *StudentModel)</span> <span class="title">Member</span><span class="params">(ctx context.Member)</span> *<span class="title">rpc</span>.<span class="title">Member</span></span> &#123;</span><br><span class="line">    <span class="comment">// Ê≥®ÊÑèÔºåËøôÈáå‰ΩøÁî®ÁöÑÊòØÂçïÊ¨°Ë∞ÉÁî®ÔºåËÄåÈùûÊâπÈáèË∞ÉÁî®</span></span><br><span class="line">    <span class="keyword">return</span> rpc.GetMemberByID(s.MemberID)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MemberSchema <span class="keyword">struct</span> &#123; <span class="comment">/*...*/</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> StudentSchema <span class="keyword">struct</span> &#123;</span><br><span class="line">    Member *MemberSchema <span class="string">`portal: nested`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÂÅáËÆæ‰∏ÄÈ°µÈúÄË¶ÅËé∑Âèñ 20 ‰∏™Â≠¶Áîü‰ø°ÊÅØÔºåportal Â∫èÂàóÂåñÊó∂Ôºå‰ºöÈªòËÆ§ÂêØÂä® 20 ‰∏™ goroutine ÂàÜÂà´Â§ÑÁêÜ 20 ‰∏™ StudentSchema ÁöÑÊ∏≤Êüì„ÄÇËøôÊ†∑ÁöÑËØùÔºåÂÖ∑‰ΩìÂà∞ StudentModel.Member Ëé∑ÂèñÊó∂ÔºåÂ∞±‰ºö‰∫ßÁîü 20 ‰∏™Âπ∂ÂèëÁöÑ <code>GetMemberByID</code> ËØ∑Ê±ÇÔºåÁõ∏ÂØπ‰∏≤Ë°åÊâßË°åÔºåËøôÁßçÊñπÂºèËá™ÁÑ∂ÂèØ‰ª•ÊèêÈ´òÈÄüÂ∫¶„ÄÇ‰ΩÜÊòØ‰ª£‰ª∑‰πüÂæàÊòéÊòæÔºå‰∫ßÁîüÁöÑËØ∑Ê±ÇËæÉÂ§ö„ÄÇÂØπ‰∫é‰∏Ä‰∫õÂêéÂè∞È°πÁõÆËøôÊ†∑ÂÅöËøòÂ•ΩÔºå‰ΩÜÊòØÂØπ‰∫é C Á´ØÊé•Âè£ÔºåÂ¶ÇÊûúËØ∑Ê±ÇÈáèËæÉÈ´òÔºåÈÇ£ËØ∑Ê±ÇÊîæÂ§ß‰ºöÊØîËæÉ‰∏•Èáç„ÄÇ</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">students := DBGetStudents(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> output []StudentSchema</span><br><span class="line">portal.Dump(&amp;output, students)</span><br></pre></td></tr></table></figure>
<p>ÂÅáËÆæ‰∏äÊ∏∏‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜÁ±ª‰ºº <code>func BatchGetMemberByID(memberIDs []int64) map[int64]*Member</code> ÊñπÊ≥ïÔºåÈÇ£‰πà‰ª¨ÂèØ‰ª•ÈÄöËøáÊâπÈáèË∞ÉÁî®ÁöÑÊñπÂºèËß£ÂÜ≥‰∏äÈù¢ÊèêÂà∞ÁöÑÈóÆÈ¢ò„ÄÇ‰∏çËøáÔºåÊ≠§Êó∂Êàë‰ª¨ÈúÄË¶ÅÂêåÊó∂‰øÆÊîπÂéüÊúâÁöÑ Model Â±ÇÂíå Schema Â±ÇÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> StudentModel <span class="keyword">struct</span> &#123;</span><br><span class="line">    MemberID <span class="keyword">int64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> StudentSchema <span class="keyword">struct</span> &#123;</span><br><span class="line">    Member *MemberSchema <span class="string">`portal: nested`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *StudentSchema)</span> <span class="title">GetMember</span><span class="params">(ctx context.Context, student *StudentModel)</span> *<span class="title">rpc</span>.<span class="title">Member</span></span> &#123;</span><br><span class="line">    <span class="comment">// ÂÅáËÆæÂ§ñÂ±ÇÊâπÈáèË∞ÉÁî®ÁªìÊûúÊîæÂú® ctx ‰∏≠‰º†ÂÖ•</span></span><br><span class="line">    v := ctx.Value(<span class="string">"members"</span>).(<span class="keyword">map</span>[<span class="keyword">int64</span>]*rpc.Member)</span><br><span class="line">    <span class="keyword">return</span> v[student.MemberID]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÁÑ∂ÂêéÂú® Handler Â±ÇÔºåÊàë‰ª¨ÈúÄË¶ÅÊâãÂä®Ë∞ÉÁî® <code>BatchGetMemberByID</code> Êé•Âè£Ôºö</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">students := DBGetStudents(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Êî∂ÈõÜ member_ids</span></span><br><span class="line">memberIDs := <span class="built_in">make</span>([]<span class="keyword">int64</span>, <span class="built_in">len</span>(students))</span><br><span class="line"><span class="keyword">for</span> i, s := <span class="keyword">range</span> students &#123;</span><br><span class="line">    memberIDs[i] = s.MemberID</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ÊâπÈáèË∞ÉÁî®‰∏ÄÊ¨°</span></span><br><span class="line">members := rpc.BatchGetMemberByID(memberIDs)</span><br><span class="line">ctx = context.WithValue(<span class="string">"members"</span>, members)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> output []StudentSchema</span><br><span class="line">portal.DumpWithContext(ctx, &amp;output, students)</span><br></pre></td></tr></table></figure>
<p>ÂóØÔºå‰ºº‰πéÁúãËµ∑Êù•Âπ∂Ê≤°ÊúâÂ§ö‰πàÁπÅÁêêÂòõ„ÄÇ‰∏çËøáËøôÊ†∑ÁöÑÂÜôÊ≥ïÂæàÂÆπÊòìÂØºËá¥ Handler Â±ÇËÜ®ËÉÄÔºåËØïÊÉ≥ÂÜçÂä†ÁÇπÂà´ÁöÑÂÖ≥ËÅîËµÑÊ∫êËé∑ÂèñÂë¢ÔºüÈÇ£ÂêÑÁßç <code>BatchGetShit</code> Â∞±ÊÄºËøõÂéª‰∫Ü„ÄÇ</p>
<p>ÊâÄ‰ª•ÔºåÊàë‰ª¨Á©∂Á´üÊÄé‰πàÊâçËÉΩÂÅöÂà∞ÂéüÊúâÁöÑ Model Â±Ç‰æùÁÑ∂‰øùÊåÅÁÆÄÂçïÁöÑ <code>rpc.GetResourceByID</code> ËøôÁßçÁÆÄÂçïÁöÑË∞ÉÁî®ÊñπÂºèÔºõSchema Â±Ç‰πü‰∏çÁî®ÂÅö‰æµÂÖ•Âºè‰øÆÊîπÔºõHandler Â±ÇÊõ¥‰∏çÁî®ÂøçÂèóÂèØËÉΩÂØºËá¥ÁöÑ‰ª£Á†ÅËÜ®ËÉÄÈóÆÈ¢òÂë¢Ôºü‰πüËÆ∏Êàë‰ª¨ÂèØ‰ª•ÂØπ <code>rpc.GetResourceByID</code> ÂÅöÁÇπÂåÖË£ÖÔºåÂú®Â∫ïÂ±ÇÊ°ÜÊû∂‰∏äÔºåËá™Âä®ÊîØÊåÅËØ∑Ê±ÇÂêàÂπ∂ÔºõËÄåÂØπ‰∫é‰∏äÂ±ÇË∞ÉÁî®ÊñπÊó†ÊÑüÁü•„ÄÇ</p>
<p>ÁÜüÊÇâ HTTP/2 ÁöÑÂêåÂ≠¶Â∫îËØ•‰∫ÜËß£Âà∞ÂÖ∂‰∏≠‰∏Ä‰∏™ÁâπËâ≤ÊòØÂ§öË∑ØÂ§çÁî®ÔºåÈÅøÂÖçÊØèÊ¨°Êñ∞ÁöÑËØ∑Ê±ÇÈÉΩË¶ÅËøõË°å TCP+TLS Êè°Êâã„ÄÇÈÇ£‰πàÂ¶ÇÊûúÊàë‰ª¨ËÉΩÂ§üÂÅöÂà∞Âú®Â∫ïÂ±ÇÂ∞Ü‰∏äÂ±ÇÁöÑ <code>rpc.GetResourceByID</code> Ëá™Âä®ÂêàÂπ∂‰∏∫ <code>rpc.BatchGetResourceByID</code>Ôºå‰πüËÉΩÂæàÂ§ßÁ®ãÂ∫¶‰∏äÊèêÈ´òËØ∑Ê±ÇÊïàÁéáÔºåÂáèÂ∞ë‰∏äÊ∏∏ÊúçÂä°ÁöÑËØ∑Ê±ÇÂéãÂäõ„ÄÇËôΩÁÑ∂Áõ∏ÂØπ‰∫éÂπ∂Âèë 20 ‰∏™ <code>rpc.GetResourceByID</code> ËØ∑Ê±ÇÔºåËá™Âä®ÂêàÂπ∂ÊäÄÊúØÂèØËÉΩÂõ†‰∏∫‰ºòÂåñ‰∏çÂà∞‰ΩçÊàñËÄÖÁ≠ñÁï•‰∏äÁöÑÈóÆÈ¢òÔºåÂìçÂ∫îÊó∂Èó¥ÂèØËÉΩÁ®çÈïøÔºå‰ΩÜÊòØÁõ∏ÂØπ‰∫é‰∏≤Ë°åË∞ÉÁî®ÔºåÈÄüÂ∫¶ÁêÜËÆ∫‰∏ä‰ºöÊúâÂæàÂ§ßÊèêÂçá„ÄÇ</p>
<p><img src="https://camo.githubusercontent.com/878e48b845b8e24e870c9ecd4642b0ae2ddd5dd0/68747470733a2f2f706963332e7a68696d672e636f6d2f76322d37303061333265333865316465303361633639393732343138303462356136622e706e67" alt=""></p>
<p>ÂÖ≥‰∫éËøô‰∏™ËØ∑Ê±ÇÂêàÂπ∂ÁöÑÁ≠ñÁï•Â¶Ç‰ΩïÂÆûÁé∞Âë¢ÔºüÂèØ‰ª•ÊÉ≥Ë±°‰∏ã <code>rpc.BatchGetResourceByID</code> Â∞±ÂÉè‰∏ÄËæÜÂæÄËøî‰∫é‰∏§Âú∞ÁöÑÂÖ¨ÂÖ±Ê±ΩËΩ¶ÔºåÂÅáËÆæÂÆÉÊúâ‰∏§‰∏™ÂÖ≥ÈîÆÂ±ûÊÄßÔºö</p>
<ol>
<li>ËΩ¶‰∏ä‰πòÂÆ¢‰∏ÄÊó¶ÂùêÊª°Á´ãÂàªÂá∫ÂèëÔºà‰∏çËÆ∏Âä†Â°ûÔºåÂí±‰ª¨Ë¶ÅÂêàÊ≥ïÁªèËê•ÔºâÔºõ</li>
<li>Âà∞Ëææ‰∏ÄÂÆöË∂ÖÊó∂Êó∂Èó¥Á´ãÂàªÂá∫ÂèëÔºàÂÆàÊó∂ÂæàÈáçË¶ÅÔºå‰øùËØÅÊúçÂä°Ë¥®ÈáèÔºâÔºõ</li>
<li>Âà∞ËææÁõÆÁöÑÂú∞ÂêéÔºåËøòË¶ÅÂú®ËøîÁ®ãÊó∂Â∞ÜÂêå‰∏ÄÊâπ‰πòÂÆ¢Â∞ΩÂèØËÉΩÂÖ®ÈÉ®Â∏¶ÂõûÊù•ÔºàÂÅáËÆæ‰πòÂÆ¢‰ª¨Ë¶Å‰πà‰π∞Âà∞‰∫ÜÊÉ≥Ë¶ÅÁöÑÁ§ºÁâ© <code>result</code> ÊàñËÄÖÂÉèÁ¨îËÄÖ‰∏ÄÊ†∑ÊØîËæÉÁ©∑Â∞±‰ªÄ‰πà‰πüÊ≤°‰π∞ <code>error</code>Ôºâ„ÄÇ</li>
</ol>
<p>Âü∫‰∫éËøôÊ†∑ÁöÑÂÅáËÆæÔºåÂ∞ùËØï‰ΩøÁî® Go ËØ≠Ë®ÄÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑ DemoÔºåÊÑüÂÖ¥Ë∂£ÁöÑÂêåÂ≠¶ÂèØ‰ª•ÂâçÂæÄ‰ªìÂ∫ì <a href="https://github.com/iFaceless/rpcx" target="_blank" rel="noopener">rpcx</a> Êü•Áúã„ÄÇÂ∞ùËØïÂºïÂÖ•‰∫Ü‰∏Ä‰∏™ Proxy Â±ÇÔºåÁî± Proxy Â±ÇÊî∂ÈõÜ‰∏öÂä°ÊñπÁöÑË∞ÉÁî®ÂèÇÊï∞ÔºåÂπ∂ÊâπÈáèÂèëËµ∑Ë∞ÉÁî®ÔºåÊúÄÂêéÂ∞ÜÁªìÊûúÂàÜÊ¥æÁªô‰∏öÂä°Êñπ„ÄÇÂΩìÁÑ∂ÔºåÁõÆÂâç Proxy ÊòØ‰ª•‰∏Ä‰∏™ÂçïÁã¨ÁöÑ goroutine ÈÉ®ÁΩ≤ÔºõÁêÜÊÉ≥ÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúËÉΩÁî® sidecar ÊñπÂºèÈÉ®ÁΩ≤ÔºåÁîöËá≥ÂèØ‰ª•ÂÅöÂà∞ËØ≠Ë®ÄÊó†ÂÖ≥ÔºåÁã¨Á´ãÂçáÁ∫ßÔºåÂÖ∂ÂÆÉËØ≠Ë®ÄÂÆûÁé∞ÁöÑÊúçÂä°‰πüÂèØ‰ª•‰∫´ÂèóÂà∞ÂêåÊ†∑ÁöÑ‰ºòÂåñ„ÄÇ</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ctx := context.Background()</span><br><span class="line">    rsdk.Init(<span class="number">10</span>, <span class="number">1</span>*time.Millisecond)</span><br><span class="line">    getMembersAutoAgg(ctx, <span class="number">20</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getMembersAutoAgg</span><span class="params">(ctx context.Context, max <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt;= max; i++ &#123;</span><br><span class="line">        wg.Add(<span class="number">1</span>)</span><br><span class="line">        <span class="comment">// Â∫ïÂ±ÇËá™Âä®Â∞ÜÂπ∂ÂèëÂçïÊ¨°Ë∞ÉÁî®ËΩ¨Êç¢ÊàêÊâπÈáèË∞ÉÁî®</span></span><br><span class="line">         <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(n <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">            r, err := rsdk.GetMember(ctx, <span class="keyword">int64</span>(n)+<span class="number">1</span>)</span><br><span class="line">            _, _ = r, err</span><br><span class="line">            wg.Done()</span><br><span class="line">        &#125;(i)</span><br><span class="line">    &#125;</span><br><span class="line">    wg.Wait()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÂΩìÁÑ∂ÔºåÊÉ≥Ë¶ÅÂú®Áîü‰∫ßÁéØÂ¢ÉÊêû‰∫ãÊÉÖÔºåËøòÊúâÂæàÈïøÁöÑË∑ØË¶ÅËµ∞„ÄÇÊØîÂ¶Ç Proxy ÁõëÊéßÊÄé‰πàÂÅöÔºüÂçïÁÇπÈóÆÈ¢òÊÄé‰πàËß£Ëß£ÂÜ≥ÔºüÊòØÂê¶‰ºöÊàê‰∏∫Êé•Âè£Ë∞ÉÁî®Áì∂È¢àÔºüÂ¶Ç‰Ωï‰∏éÂÖ¨Âè∏Áé∞ÊúâÁöÑ RPC Ê°ÜÊû∂ÁªìÂêàÔºüÊî∂ÁõäÊòØÂê¶ÁúüÁöÑËææÂà∞È¢ÑÊúüÔºàÂàÜÊûêÂÖ∑‰ΩìÂú∫ÊôØÔºâÔºü</p>
<h1 id="0x06-ÊÄªÁªì"><a href="#0x06-ÊÄªÁªì" class="headerlink" title="0x06 ÊÄªÁªì"></a>0x06 ÊÄªÁªì</h1><p>‰ª•‰∏äÂàÜ‰∫´‰∫Ü‰∏Ä‰∫õÂÖ≥‰∫éÂ∑•Á®ãÂÆûË∑µÊñπÈù¢ÁöÑÊÄùËÄÉÔºåÊ¨¢ËøéÊåáÊ≠£ÔºåÊúâ‰ªÄ‰πàÂ•ΩÁöÑÊÉ≥Ê≥ï‰πüÊ¨¢ËøéÁïôË®Ä‰∫§ÊµÅ~</p>

      
    </div>
    
    
    

    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Êú¨Êñá‰ΩúËÄÖÔºö</strong>
    iFaceless
  </li>
  <li class="post-copyright-link">
    <strong>Êú¨ÊñáÈìæÊé•Ôºö</strong>
    <a href="/2020/04/02/go-rest-api-for-beginners/" title="Go RESTful API È°πÁõÆÊ®°Êùø‰ªãÁªç">/2020/04/02/go-rest-api-for-beginners/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ÁâàÊùÉÂ£∞ÊòéÔºö </strong>
    Êú¨ÂçöÂÆ¢ÊâÄÊúâÊñáÁ´†Èô§ÁâπÂà´Â£∞ÊòéÂ§ñÔºåÂùáÈááÁî® <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> ËÆ∏ÂèØÂçèËÆÆ„ÄÇËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§ÑÔºÅ
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Go/" rel="tag"><i class="fa fa-tag"></i> Go</a>
          
            <a href="/tags/RESTful/" rel="tag"><i class="fa fa-tag"></i> RESTful</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/01/20/rust-async-std-intro/" rel="next" title="Rust async-std ÂÖ•Èó®">
                <i class="fa fa-chevron-left"></i> Rust async-std ÂÖ•Èó®
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/04/13/talent-plan-summary/" rel="prev" title="PingCAP Talent Plan ËØæÁ®ã‰ªãÁªç">
                PingCAP Talent Plan ËØæÁ®ã‰ªãÁªç <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            ÊñáÁ´†ÁõÆÂΩï
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Á´ôÁÇπÊ¶ÇËßà
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="iFaceless">
            
              <p class="site-author-name" itemprop="name">iFaceless</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">46</span>
                  <span class="site-state-item-name">Êó•Âøó</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">ÂàÜÁ±ª</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">75</span>
                  <span class="site-state-item-name">Ê†áÁ≠æ</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/ifaceless" target="_blank" title="GitHub">
                      GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:me#ifaceless.space" target="_blank" title="ÈÇÆÁÆ±">
                      ÈÇÆÁÆ±</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://zhuanlan.zhihu.com/0xe8551ccb" target="_blank" title="‰∏ìÊ†è">
                      ‰∏ìÊ†è</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Â∏∏Áî®ÈìæÊé•
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://xieyuanpeng.com" title="Lingering Fragments" target="_blank">Lingering Fragments</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://blog.acolyer.org/" title="The Morning Paper" target="_blank">The Morning Paper</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.freecodecamp.org" title="freeCodeCamp" target="_blank">freeCodeCamp</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://draveness.me/" title="Draveness's Blog" target="_blank">Draveness's Blog</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#0x00-ÂºïË®Ä"><span class="nav-number">1.</span> <span class="nav-text">0x00 ÂºïË®Ä</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x01-‰∏∫‰ªÄ‰πàÔºü"><span class="nav-number">2.</span> <span class="nav-text">0x01 ‰∏∫‰ªÄ‰πàÔºü</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x02-ÊòØ‰ªÄ‰πàÔºü"><span class="nav-number">3.</span> <span class="nav-text">0x02 ÊòØ‰ªÄ‰πàÔºü</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x03-ËØ¥-Handler"><span class="nav-number">4.</span> <span class="nav-text">0x03 ËØ¥ Handler</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x04-ËÆ≤-Schema-‰∏é-Model"><span class="nav-number">5.</span> <span class="nav-text">0x04 ËÆ≤ Schema ‰∏é Model</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x05-Á¢éÁ¢éÂøµ"><span class="nav-number">6.</span> <span class="nav-text">0x05 Á¢éÁ¢éÂøµ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x06-ÊÄªÁªì"><span class="nav-number">7.</span> <span class="nav-text">0x06 ÊÄªÁªì</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ÈªëÁôΩ‰πãÈô¢ÔºàiFacelessÔºâ</span>

  
</div>


  <div class="powered-by">Áî± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> Âº∫ÂäõÈ©±Âä®</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">‰∏ªÈ¢ò &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a></div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.4"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.4"></script>


  

</body>
</html>
