<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Redis 5 Ê∫êÁ†ÅÂàùÊé¢]]></title>
    <url>%2F2019%2F12%2F08%2Fprimitive-exploration-of-redis5%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄRedis, REmote DIctionary Server Âõ†ÂÖ∂È´òÊïà„ÄÅÁÆÄÂçï„ÄÅ‰∏∞ÂØåÁöÑÊï∞ÊçÆÁªìÊûÑÊîØÊåÅ„ÄÅÈ´òÊÄßËÉΩ„ÄÅÊåÅ‰πÖÂåñÂíåÈõÜÁæ§ÊîØÊåÅÁ≠âÁâπÊÄßÂæóÂà∞‰∫ÜÁ®ãÂ∫èÂëò‰ª¨ÁöÑÈùíÁùêÔºåÂπ∂Ë¢´ÂπøÊ≥õÈÉ®ÁΩ≤ÂíåÂ∫îÁî®Âú®‰ºóÂ§ö‰∫íËÅîÁΩëÂÖ¨Âè∏„ÄÇËÄåÂõ†‰∏∫ÂÆÉÈááÁî®‰∫ÜÊØîËæÉÁÆÄÂçïÁöÑÊñáÊú¨ÂçèËÆÆÔºå‰ΩøÂæóÂÆ¢Êà∑Á´ØÂÆûÁé∞ÊØîËæÉÁÆÄÂçïÔºåÂõ†Ê≠§‰πüÊã•Êúâ‰ºóÂ§öÁºñÁ®ãËØ≠Ë®ÄÂÆûÁé∞ÁöÑÂÆ¢Êà∑Á´ØÔºõÁîöËá≥‰πüÊúâ‰∏Ä‰∫õÂÖ∂ÂÆÉÁ±ªÂûãÁöÑ K-V Êï∞ÊçÆÂ∫ìÂÖºÂÆπ‰∫Ü Redis ÂçèËÆÆÔºÅ ÁªìÂêàÊàë‰ª¨ÁõÆÂâçÁöÑ‰∏öÂä°Êù•ÁúãÔºåÊúâÈùûÂ∏∏Â§öÁöÑÂú∫ÊôØ‰ΩøÁî®Âà∞‰∫Ü RedisÔºö ËÆ∞ÂΩïÁî®Êà∑ÈÄöÁü•„ÄÅÁü≠‰ø°ÂèëÈÄÅÊ†áÂøóÔºåÈÅøÂÖçÈáçÂ§çÂèëÈÄÅÔºõ ‰ΩøÁî® Redis ÈõÜÂêàÁª¥Êä§‰∏Ä‰∫õÁôΩÂêçÂçïÁî®Êà∑Ë°®Ôºõ ‰∏∫ÊîØÊåÅÂø´ÈÄüËé∑ÂæóÁî®Êà∑‰ºöÂëòÊó∂ÈïøÁ≠âÂü∫Êú¨‰ø°ÊÅØÔºåÂ∞ÜËøô‰∫õ‰ø°ÊÅØÂú® Redis ÈõÜÁæ§‰∏≠‰πüÁª¥Êä§‰∫Ü‰∏Ä‰ªΩÔºåÂπ∂ÈááÂèñÁõ∏ÂÖ≥Êé™ÊñΩÁª¥ÊåÅ‰∏é MySQL Êï∞ÊçÆÂ∫ìÁöÑÊúÄÁªà‰∏ÄËá¥ÊÄß„ÄÇ ÂΩìÁÑ∂ËøòÊúâÂæàÂ§öÂú∫ÊôØÂèØ‰ª•‰æã‰∏æÔºå‰ΩÜÂ∞±Êàë‰ª¨Â∏∏‰ΩøÁî®ÁöÑ Redis Êï∞ÊçÆÁªìÊûÑÊù•ÁúãÔºå‰∏ªË¶ÅÂ∞±ÊòØÂ≠óÁ¨¶‰∏≤„ÄÅÊó†Â∫èÈõÜÂêà„ÄÅÊúâÂ∫èÈõÜÂêà„ÄÅÂàóË°®„ÄÅÂ≠óÂÖ∏Á≠â„ÄÇËôΩËØ¥ Redis ÁªôÊàë‰ª¨Êèê‰æõ‰∫ÜÂÖ∂ÂÆÉ‰∏∞ÂØåÁöÑÂÜÖÂ≠òÊï∞ÊçÆÁªìÊûÑÔºå‰ΩÜÊòØÊàë‰ª¨Âú®Áîü‰∫ßÁéØÂ¢ÉÁî®Âà∞ÁöÑÂπ∂‰∏çÂ§ö„ÄÇ Êó¢ÁÑ∂ Redis Ëøô‰πàÈáçË¶ÅÔºåËá™ÁÑ∂ÂæàÊúâÂøÖË¶ÅËä±Êó∂Èó¥ÂéªÁ†îÁ©∂‰∏ã RedisÔºåÂπ∂ÈòÖËØªÂÆÉÁöÑÊ∫êÁ†ÅÊù•Â≠¶‰π†ÂÆÉÁöÑ‰∏Ä‰∫õËÆæËÆ°ÊÄùÊÉ≥ÔºåÁºñÁ®ãÈ£éÊ†ºÁ≠â„ÄÇ‰∏çÂæó‰∏çËØ¥ÔºåRedis ÂÆòÊñπÊñáÊ°£ÈùûÂ∏∏ÁªôÂäõÔºåÊ∫êÁ†ÅÊ≥®ÈáäÂæàÂÖÖÂàÜÔºå‰ª£Á†ÅÈ£éÊ†º„ÄÅË¥®ÈáèÈÉΩÊòØÈùûÂ∏∏‰∏ÄÊµÅÁöÑ„ÄÇ Êàë‰ª¨Â∑≤Áªè‰∫ÜËß£‰∫Ü Redis ÊòØ‰ªÄ‰πàÔºü‰∏∫‰ªÄ‰πàÈÇ£‰πàÈáçË¶ÅÔºüÊé•‰∏ãÊù•Â∞±ÊòØÊÄé‰πàÊù•Â≠¶‰π†ÂÆÉÔºüÁÑ∂ÂêéÊòØÊúüÊúõËææÊàê‰ªÄ‰πàÊ†∑ÁöÑÁõÆÊ†áÔºü È¶ñÂÖàÔºå„ÄäRedis ËÆæËÆ°‰∏éÂÆûÁé∞„Äã Âíå „ÄäRedis 5 ËÆæËÆ°‰∏éÊ∫êÁ†ÅÂàÜÊûê„Äã Â∞Ü‰Ωú‰∏∫Â≠¶‰π† Redis Ê∫êÁ†ÅÁöÑ‰∏ªË¶ÅÂèÇËÄÉ‰π¶Á±çÔºà„ÄåÁ´ôÂú®Â∑®‰∫∫ÁöÑËÇ©ËÜÄ‰∏ä„ÄçÔºâÔºõÂÖ∂Ê¨°ÊòØÈòÖËØª‰∏ã Redis ÂÆòÊñπÊñáÊ°£‰∏≠ÊØîËæÉÈáçË¶ÅÁöÑÈÉ®ÂàÜÔºõÂΩìÁÑ∂ÔºåÊúÄÂêé‰∏îÊúÄÈáçË¶ÅÁöÑÊòØËá™Â∑±Ë¶ÅËÆ§ÁúüÈòÖËØªÊ∫êÁ†Å„ÄÇ ÊúÄÂêé‰∏Ä‰∏™ÈóÆÈ¢òÔºåÊúüÊúõÂú®Â≠¶‰π†ÂÆå Redis ËææÊàêÁöÑÁõÆÊ†áÔºåÊàëÊÉ≥‰∏ªË¶ÅÊúâÂ¶Ç‰∏ãÂá†ÁÇπÔºö ÂüπÂÖªÈòÖËØªÁü•ÂêçÂºÄÊ∫êÈ°πÁõÆÊ∫êÁ†ÅÁöÑËÄêÂøÉÔºåÊéåÊè°ÈòÖËØªÊ∫êÁ†ÅÁöÑÊäÄÂ∑ßÂíåÂ∑•ÂÖ∑Ôºõ Âä†Ê∑±ÂØπ Redis ÁöÑÁêÜËß£Ôºå‰∫ÜËß£ÂÆÉÁöÑÊû∂ÊûÑËÆæËÆ°Ôºõ ÊéåÊè° Redis Â∏∏Áî®ÁöÑÊï∞ÊçÆÁªìÊûÑËÆæËÆ°ÊÄùÊÉ≥ÔºåÂπ∂ËÉΩÂú®ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÂêàÁêÜËøêÁî®ÂêÑÁßçÊï∞ÊçÆÁªìÊûÑÂÆûÁé∞ÈúÄÊ±ÇÔºõ Âê∏Êî∂Á≤æÈ´ìÔºåÊèêÂçáËá™Ë∫´ÁöÑÊäÄÊúØÊ∞¥Âπ≥Ôºå‰∏ö‰ΩôÊó∂Èó¥ËøòÂèØ‰ª•Â∞ùËØïÊäòËÖæ‰∏™ÁÆÄÂçïÁöÑÊï∞ÊçÆÂ∫ì„ÄÇ Redis ÁâπÁÇπÁ¨¨‰∏Ä‰∏™ÂÄºÂæóÁß∞ÈÅìÁöÑÁâπÁÇπÂ∞±ÊòØÈ´òÊÄßËÉΩÔºåRedis ÁöÑÈ´òÊÄßËÉΩÂæóÁõä‰∫éÂ¶Ç‰∏ãÂá†ÁÇπÂéüÂõ†Ôºö ÂÆÉÊòØÂü∫‰∫éÂÜÖÂ≠òÁöÑÊï∞ÊçÆÂ∫ìÔºåÂÜÖÂ≠òÁöÑËØªÂÜôÈÄüÂ∫¶ÂæàÂø´Ôºõ Êã•ÊúâÂêàÁêÜËÆæËÆ°ÁöÑÂÜÖÂ≠òÊï∞ÊçÆÁªìÊûÑÔºåÂ¢ûÂà†ÊîπÊü•ÂæàÁÆÄÂçïÔºåÂπ∂‰∏îËÉΩÂ§üÈ´òÊïàÂà©Áî®ÂÜÖÂ≠òÔºõ ‰ΩøÁî®‰∫Ü I/O Â§öË∑ØÂ§çÁî®ÁöÑÊú∫Âà∂Ôºàselect, poll, epoll, kqueueÔºâÔºåÈ´òÊïàÂ§ÑÁêÜÈ´òÂπ∂ÂèëÁöÑÁΩëÁªúËøûÊé•Ôºõ ÈááÁî®‰∫ÜÂçïËøõÁ®ãÊ®°ÂûãÔºàRedis Server ‰ºöÊúâÂ§ö‰∏™Á∫øÁ®ãÔºâÔºå‰∏îÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ã‰∏ìÈó®Â§ÑÁêÜÁΩëÁªúËØ∑Ê±ÇÔºåÈÅøÂÖçÁ∫øÁ®ãË∞ÉÂ∫¶Â∏¶Êù•ÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢ÂºÄÈîÄ„ÄÅÂ§öÁ∫øÁ®ãÂêåÊ≠•ÂºÄÈîÄÔºàÂ¶ÇÂä†ÈîÅ„ÄÅÈáäÊîæÈîÅÁ≠âÔºâ„ÄÇ Èô§Ê≠§‰πãÂ§ñÔºåËøòÊúâÂ¶Ç‰∏ãÁâπÁÇπÔºö key-value ‰∏≠ÁöÑ value Èô§‰∫ÜÊôÆÈÄöÁöÑÂ≠óÁ¨¶‰∏≤ÔºåËøòÊîØÊåÅÂ§çÊùÇÁöÑÊï∞ÊçÆÁ±ªÂûãÔºàÂ¶ÇÈõÜÂêà„ÄÅÂ≠óÂÖ∏„ÄÅ‰ΩçÂõæÁ≠âÔºâÔºõ ÊîØÊåÅÊï∞ÊçÆÊåÅ‰πÖÂåñÔºåÂèØÂú®ÈáçÂêØÂêéÊÅ¢Â§çÔºåÊîØÊåÅ AOF„ÄÅRDB Âíå AOF + RDB ‰∏âÁßçÊåÅ‰πÖÂåñÊñπÊ°àÔºõ ÊîØÊåÅ‰∏ª‰ªéÁªìÊûÑÔºå‰ªéËäÇÁÇπÂèØÂÅöÊï∞ÊçÆÂ§á‰ªΩÔºå‰πüÂèØÂØπÂ§ñÊèê‰æõËØªÊúçÂä°Ôºõ ÊîØÊåÅÈõÜÁæ§„ÄÇ Ê∫êÁ†ÅÊ¶ÇËßàÂêéÈù¢ÁöÑÊ∫êÁ†ÅÂ≠¶‰π†‰ºöÂü∫‰∫é Redis ÊúÄÊñ∞ÁöÑÁ®≥ÂÆöÁâà 5.0.7ÔºåÂèÇËßÅ‰ªìÂ∫ìÔºöhttps://github.com/iFaceless/redis/tree/5.0ÔºåÊ∫êÁ†ÅÊ≥®Èáä‰ºöÊé®ÈÄÅÂà∞ËØ•‰ªìÂ∫ìÁöÑ comment-src ÂàÜÊîØ‰∏ã„ÄÇ ÂÖ≥‰∫é Redis Ê∫êÁ†ÅÁöÑÁªìÊûÑÔºåÂú® Redis ÁöÑ README.md ‰∏≠ÊúâÊâÄ‰ªãÁªç„ÄÇÂÖ∑‰ΩìÊù•ËØ¥ÔºåÊúâÂ¶Ç‰∏ãÂá†‰∏™ÈáçË¶ÅÁöÑÁõÆÂΩïÔºö src: Redis Ê†∏ÂøÉÂÆûÁé∞ÔºàC ËØ≠Ë®ÄÔºâ tests: ÂçïÂÖÉÊµãËØï‰ª£Á†ÅÔºàTcl ËØ≠Ë®ÄÔºâ deps: Redis ‰æùËµñÁöÑ‰∏Ä‰∫õÂ∫ì„ÄÇÂÖ∂‰∏≠ÂåÖÂê´ jemalloc Ê∫êÁ†ÅÔºåÂÆÉÊòØ Redis Âú® Linux ‰∏ãÈªòËÆ§ÁöÑÂÜÖÂ≠òÂàÜÈÖçÂ∫ìÔºåÁî®Êù•Êõø‰ª£Ê†áÂáÜÂ∫ì mallocÔºå‰ª•ÊúüÂáèÂ∞ëÂÜÖÂ≠òÂàÜÈÖçÁ¢éÁâá server.hserver.h ‰∏≠ÂÆö‰πâ‰∫Ü Redis Server ÈúÄË¶ÅÁî®Âà∞ÁöÑ‰∏Ä‰∫õÊï∞ÊçÆÁªìÊûÑÔºåÂÖ∂‰∏≠ struct redisServer Áª¥Êä§‰∫Ü Redis ÊúçÂä°Á´ØÈÖçÁΩÆÂíåÂÖ±‰∫´Áä∂ÊÄÅÔºåÂá†‰∏™ÊØîËæÉÈáçË¶ÅÁöÑÂ≠óÊÆµÂ¶Ç‰∏ãÔºö db: Ë°®Á§∫ Redis Êï∞ÊçÆÂ∫ìÔºåÁî®Êù•Â≠òÂÇ®Êï∞ÊçÆ commands: ÂëΩ‰ª§Ë°® clients: ËøûÊé•Âà∞ÂΩìÂâçÊúçÂä°Âô®ÁöÑÂÆ¢Êà∑Á´ØÈìæË°® master: replica ËäÇÁÇπ master ÂÆ¢Êà∑Á´Ø Âè¶Â§ñ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÊï∞ÊçÆÁªìÊûÑÊòØ redisClientÔºåÁî®Êù•Ë°®Á§∫ÂÆ¢Êà∑Á´Ø„ÄÇËøôÈáåÁªô‰ªãÁªçÂá†‰∏™ÈáçË¶ÅÁöÑÂ≠óÊÆµÔºö 12345678910111213struct client &#123; int fd; // Â≠òÊîæÂÆ¢Êà∑Á´ØËØ∑Ê±Ç sds querybuf; int argc; robj **argv; redisDb *db; int flags; // reply &amp; buf Áª¥Êä§ÊúçÂä°Á´ØË¶ÅÂèëÁªôÂÆ¢Êà∑Á´ØÁöÑÂõûÂ§çÈòüÂàóÔºåÂΩìÂ∫ïÂ±ÇÁöÑ fd ÂèØÂÜôÊó∂Ôºå‰ºö‰ª•Ê∏êËøõÂú∞ÊñπÂºèÂèëÈÄÅÁºìÂÜ≤Âå∫Êï∞ÊçÆ list *reply; char buf[PROTO_REPLY_CHUNK_BYTES]; ... many other fields ...&#125; ËøòÊúâ‰∏Ä‰∏™ÊØîËæÉÈáçË¶ÅÁöÑÊï∞ÊçÆÁªìÊûÑÊòØ robjÔºåÂÆÉË°®Á§∫‰∏Ä‰∏™ Redis ÂØπË±°ÔºåÂú® Redis ÂÜÖÈÉ®ÂÆûÁé∞‰∏≠ÊúâÂæàÂ§öÂú∞ÊñπÂú®‰ΩøÁî®ÔºåÂÆÉÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºö 1234567891011// redisObject Âü∫Êú¨‰∏äÂèØ‰ª•Ë°®Á§∫ÊâÄÊúâÂ∏∏Áî®ÁöÑ Redis Êï∞ÊçÆÁ±ªÂûãÔºàlists, sets, strings Á≠âÔºâtypedef struct redisObject &#123; // type Ë°®Á§∫ÂÖ∑‰ΩìÁöÑÊï∞ÊçÆÁ±ªÂûã unsigned type:4; unsigned encoding:4; unsigned lru:LRU_BITS; /* lru time (relative to server.lruclock) */ // refcount Ë°®Á§∫ÂØπË±°ÂºïÁî®Ê¨°Êï∞ÔºåÂÄüÂä©ÂºïÁî®ËÆ°Êï∞ÁöÑÊñπÂºèÔºåÈÅøÂÖç‰∏∫ÈáçÂ§çÂØπË±°ÂàÜÈÖçÂÜÖÂ≠ò int refcount; // ptr ÊåáÂêëÂ∫ïÂ±ÇÁöÑÁúüÊ≠£ÁöÑÂØπË±°Ë°®Á§∫ÔºåÁªìÂêà `encoding` ËøõË°åËß£Êûê void *ptr;&#125; robj; server.cRedis Server ÂêØÂä®ÁöÑÂÖ•Âè£ÂÆö‰πâÂú®Ê≠§Â§ÑÔºàÂèÇËßÅ main ÂáΩÊï∞Ôºâ„ÄÇ‰∏ãÈù¢ÊòØ Redis Server ÂêØÂä®Êó∂ÈúÄË¶ÅËøõË°åÁöÑÈáçË¶ÅÊ≠•È™§Ôºö initServerConfig() Áî®Êù•ÈÖçÁΩÆ struct server ÁöÑÈªòËÆ§ÂÄº initServer() ÂàÜÈÖç‰∏Ä‰∫õÂøÖË¶ÅÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÅÈÖçÁΩÆÁõëÂê¨ÁöÑ socket Á≠â aeMain() ÂêØÂä® Event LoopÔºåÁõëÂê¨Êñ∞ÁöÑËøûÊé• Event Loop ‰∏≠‰ºöÂë®ÊúüË∞ÉÁî®ÁöÑ‰∏§‰∏™ÁâπÊÆäÂáΩÊï∞Â¶Ç‰∏ãÔºö serverCron() ‰ºöË¢´Âë®ÊúüË∞ÉÁî®ÔºàÂèÇËÄÉ server.hz ÈÖçÁΩÆÁöÑÈ¢ëÁéáÔºâÔºåÊâßË°å‰∏Ä‰∫õÂë®ÊúüÊÄßÁöÑ‰ªªÂä°ÔºåÂ¶ÇÊ£ÄÊü•ÂÆ¢Êà∑Á´ØË∂ÖÊó∂Á≠â beforeSleep() ‰ºöÂú®ÊØèÊ¨°ËøõÂÖ•‰∫ã‰ª∂È©±Âä®Â∫ì‰∏ªÂæ™ÁéØÊó∂Ë∞ÉÁî®Ôºå‰πüÂ∞±ÊòØÂú®Áù°Áú†Á≠âÂæÖ ready ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶‰πãÂâç Âú® server.c ‰∏≠ËøòÊúâÂá†‰∏™ÂáΩÊï∞‰∏ìÈó®Â§ÑÁêÜÂÖ∂ÂÆÉÁ±ªÂûãÁöÑÈáçË¶Å‰ªªÂä°Ôºö call() ‰ºöÂú®ÊåáÂÆöÁöÑÂÆ¢Êà∑Á´Ø‰∏ä‰∏ãÊñá‰∏≠ÊâßË°åÊåáÂÆöÂëΩ‰ª§Êó∂Ë¢´‰ΩøÁî® activeExpireCycle() Áî®Êù•Â§ÑÁêÜËøáÊúüÁöÑ keys freeMemoryIfNeeded() ÂΩì Redis ÂÜÖÂ≠ò‰ΩøÁî®Ë∂ÖËøá maxmemory ÊåáÂÆöÁöÑÂÄºÔºå‰∏îÊúâÊñ∞ÁöÑÂÜôÂÖ•ËøõÊù•Êó∂Ôºå‰ºöÊâßË°åËØ•ÂáΩÊï∞Ê∏ÖÁêÜÂÜÖÂ≠ò redisCommandTable Áª¥Êä§‰∫ÜÊâÄÊúâ Redis ÂëΩ‰ª§ÔºåÂÖ∂‰∏≠ÂåÖÂê´ÊØè‰∏™ÂëΩ‰ª§ÁöÑÂêçÁß∞„ÄÅÂõûË∞ÉÂáΩÊï∞„ÄÅÂèÇÊï∞‰∏™Êï∞ÂèäÂÖ∂ÂÆÉÂ±ûÊÄß networking.cÂú®Ëøô‰∏™Êñá‰ª∂‰∏≠ÂÆö‰πâ‰∫ÜÊâÄÊúâÁöÑ I/O ÂáΩÊï∞ÔºåÁî®Êù•ÂíåÂÆ¢Êà∑Á´Ø„ÄÅmaster Âèä replicas ‰∫§‰∫íÔºö createClient() ÂàùÂßãÂåñÊñ∞ÁöÑÂÆ¢Êà∑Á´Ø addReply*() ÂáΩÊï∞ÊóèÁî®‰∫éÁªôÂÆ¢Êà∑Á´ØÊ∑ªÂä†ÂìçÂ∫îÊï∞ÊçÆ writeToClient() Áî®‰∫éÂ∞ÜËæìÂá∫ÁºìÂÜ≤Âå∫ÁöÑÊï∞ÊçÆÂèëÈÄÅÁªôÂÆ¢Êà∑Á´ØÔºåÂÆÉ‰ºöË¢´ sendReplyToClient() Ë∞ÉÁî® readQueryFromClient() Áî®‰∫éËÅöÈõÜ‰ªéÂÆ¢Êà∑Á´ØËØªÂèñÁöÑÊï∞ÊçÆÂà∞Êü•ËØ¢ÁºìÂÜ≤Âå∫ processInputBuffer() ÊòØ‰ªéÂÆ¢Êà∑Á´ØÊü•ËØ¢ÁºìÂÜ≤Âå∫Ôºàquery bufferÔºâÊ†πÊçÆ Redis ÂçèËÆÆËß£ÊûêÊü•ËØ¢ÂëΩ‰ª§ÁöÑÂÖ•Âè£ÂáΩÊï∞„ÄÇ‰∏ÄÊó¶ÂëΩ‰ª§ÂèØ‰ª•Â§ÑÁêÜ‰∫ÜÔºåÂ∞±‰ºöË∞ÉÁî® processCommand() Êù•ÁúüÊ≠£ÊâßË°åÂëΩ‰ª§ freeClient() ÈáäÊîæÂÆ¢Êà∑Á´Ø aof.c Âíå rdb.cÈ°æÂêçÊÄù‰πâÔºåËøôÊòØ Redis ‰∏§ÁßçÊåÅ‰πÖÂåñÊñπÊ°àÁöÑÂÖ∑‰ΩìÂÆûÁé∞Êñá‰ª∂„ÄÇRedis ÁöÑÊåÅ‰πÖÂåñÊ®°ÂûãÊØîËæÉÊúâË∂£ÔºåÂÆÉ‰ºöÈÄöËøá fork() Á≥ªÁªüË∞ÉÁî®ÂàõÂª∫‰∏Ä‰∏™ÂçïÁã¨ÁöÑÁ∫øÁ®ãÔºåÂπ∂ËÉΩËÆøÈóÆ‰∏ªÁ∫øÁ®ãÂÖ±‰∫´ÁöÑÂÜÖÂ≠òÂå∫ÂüüÔºõÊé•‰∏ãÊù•Ëøô‰∏™Â§á‰ªΩÁ∫øÁ®ã‰ºöÂ∞ÜÂÜÖÂ≠òÂÜÖÂÆπÊåÅ‰πÖÂåñÂà∞Á£ÅÁõò‰∏≠„ÄÇrdb.c Âú®ÂàõÂª∫Âø´ÁÖßÊó∂‰ºö‰ΩøÁî®ËøôÁßçÊú∫Âà∂Ôºõaof.c Âú®ÊâßË°å AOF ÈáçÂÜôÔºàÈÅøÂÖç Append Only Êñá‰ª∂ËøáÂ§ßÔºâÊó∂‰πü‰ºöÁî®Âà∞Ëøô‰∏™Êú∫Âà∂„ÄÇ db.cdb.c ‰∏≠ÂÆö‰πâ‰∫Ü‰∏Ä‰∫õÈÄöÁî®ÁöÑÊìç‰ΩúÂëΩ‰ª§ÔºåÂÆÉ‰ª¨ÈÉΩÊòØÈíàÂØπ key ËøõË°åÁöÑÊìç‰ΩúÔºåËÄåÈùûÂØπÂ∫îÁöÑÊï∞ÊçÆÔºåÊØîÂ¶Ç DEL Âíå EXPIRE Á≠â„ÄÇÊ≠§Â§ñÔºådb.c ‰∏≠ËøòÊèê‰æõ‰∫Ü‰∏Ä‰∫õÁâπÊÆäÁöÑ API Áî®‰∫éÂú® Redis Êï∞ÊçÆÈõÜ‰∏äÊâßË°åÊüê‰∫õÊìç‰ΩúÊó∂Ôºå‰∏çÁî®ËÆøÈóÆÂÜÖÈÉ®ÂÖ∑‰ΩìÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇ ‰ª•‰∏ãÊòØËÆ∏Â§öÂëΩ‰ª§ÂÆûÁé∞‰∏≠ÈÉΩ‰ºöÁî®Âà∞ÁöÑÂáΩÊï∞Ôºö lookupKeyRead() Âíå lookupKeyWrite() Áî®‰∫éÂü∫‰∫éÊåáÂÆö key ÂæóÂà∞ÂØπÂ∫îÂÄºÁöÑÊåáÈíàÔºåÂ¶ÇÊûú key ‰∏çÂ≠òÂú®ÔºåÂàôËøîÂõû NULL dbAdd() ÂèäÊõ¥ÊäΩË±°ÁöÑÂáΩÊï∞ setKey() ÊòØÁî®Êù•Âú® Redis ‰∏≠ÂàõÂª∫Êñ∞ÁöÑ key dbDelete() ÁßªÈô§ key ÂèäÂÖ≥ËÅîÁöÑ value emptyDb() ÁßªÈô§ÊåáÂÆöÁöÑÊï∞ÊçÆÂ∫ìÊàñËÄÖÊâÄÊúâÁöÑÊï∞ÊçÆÂ∫ì object.cstruct robj ÊòØ Redis ÂØπË±°ÁöÑÂÆö‰πâÔºåÂú® object.c ‰∏≠ÊúâÂæàÂ§öÂ∫îÁî®‰∫é Redis ÂØπË±°ÁöÑÊìç‰ΩúÔºåÂÖ∂‰∏≠ÊØîËæÉÂÖ≥ÈîÆÁöÑÂáΩÊï∞Â¶Ç‰∏ãÔºö incrRefcount() Âíå decrRefCount() Áª¥Êä§ÂØπË±°ÁöÑÂºïÁî®ËÆ°Êï∞„ÄÇÂΩìÂºïÁî®ÂÄº‰∏∫ 0 Êó∂Êâç‰ºöÁúüÊ≠£ÈáäÊîæÂØπË±° createObject() Áî®‰∫éÂàÜÈÖçÊñ∞ÁöÑÂØπË±°„ÄÇÊ≠§Â§ñÔºåËøòÊúâ‰∏Ä‰∫õÈíàÂØπÁâπÊÆäÂÜÖÂÆπÂàÜÈÖçÂ≠óÁ¨¶‰∏≤ÂØπË±°ÁöÑÂáΩÊï∞ÔºåÂ¶Ç createStringObjectFromLongLong() Á≠â replication.creplication.c Êñá‰ª∂‰∏≠ÂÆûÁé∞‰∫Ü master Âíå replica ËßíËâ≤„ÄÇ‰ΩÜËøôÂùóÂÜÖÂÆπÊØîËæÉÂ§çÊùÇÔºåÂª∫ËÆÆÂØπ Redis ÂÖ∂ÂÆÉÈÉ®ÂàÜ‰ª£Á†ÅÊúâÊâÄ‰∫ÜËß£ÂêéÂÜçÊù•Â≠¶‰π†ÂÆÉ„ÄÇ ËØ•Êñá‰ª∂‰∏≠Êúâ‰∏™ÊØîËæÉÈáçË¶ÅÁöÑÂáΩÊï∞ replicationFeedSlaves()ÔºåÂÆÉÁî®Êù•Â∞ÜÂëΩ‰ª§ÂèëÈÄÅÁªô‰ªéËäÇÁÇπÔºå‰ªéËÄå‰øùËØÅÂíå‰∏ªËäÇÁÇπÊï∞ÊçÆÂêåÊ≠•„ÄÇÂú®ËØ•Êñá‰ª∂‰∏≠ËøòÂÆûÁé∞‰∫Ü SYNC Âíå PSYNC ÂëΩ‰ª§ÔºåÂÆÉ‰ª¨Áî®‰∫é‰ªéËäÇÁÇπÂàùÊ¨°ÂàùÂßãÂåñÂêåÊ≠•ÔºåÊàñËÄÖÂú®ËøûÊé•Êñ≠ÂºÄÂπ∂ÈáçËøûÂêéÁªßÁª≠‰øùÊåÅÂêåÊ≠•„ÄÇ ÂÖ∂ÂÆÉ t_hash.c, t_list.c, t_set.c, t_string.c Âíå t_zset.c ÊòØ Redis Êï∞ÊçÆÁ±ªÂûãÁöÑÂ∫ïÂ±ÇÂÆûÁé∞ ae.c Redis ‰∫ã‰ª∂Âæ™ÁéØÂÆûÁé∞ sds.c Redis Âä®ÊÄÅÂèòÈïøÂ≠óÁ¨¶‰∏≤ anet.c ÂØπÂÜÖÊ†∏Êèê‰æõÁöÑÁΩëÁªúÊé•Âè£ÂÅö‰∫ÜÂ∞ÅË£ÖÔºå‰ªéËÄåËÉΩÂ§ü‰ª•Êõ¥Âä†ÁÆÄÂçïÁöÑÊñπÂºè‰ΩøÁî® POSIX ÁΩëÁªúÊé•Âè£ dict.c ÈùûÈòªÂ°û„ÄÅÊ∏êËøõ rehash Â≠óÂÖ∏ÂÆûÁé∞ scripting.c ÂÆûÁé∞‰∫Ü Luc ËÑöÊú¨ cluster.c Redis ÈõÜÁæ§ÂÆûÁé∞„ÄÇÂú®‰∫ÜËß£ËøôÂùó‰ª£Á†ÅÂâçÔºåËÆ∞ÂæóÂèÇËÄÉ‰∏ã Redis ÈõÜÁæ§ËØ¥Êòé ÊÄùÁª¥ÂØºÂõæ ÊûÑÂª∫ &amp; Ë∞ÉËØïRedis ÂÆòÊñπÊñáÊ°£‰∏≠ÊúâÂÖ≥‰∫éÊûÑÂª∫ÂíåËøêË°åÂÆÉÁöÑËØ¶ÁªÜËØ¥ÊòéÔºåÊàë‰ª¨‰πüÂèØ‰ª•‰ΩøÁî® gdb ËøõË°åË∞ÉËØï„ÄÇ‰ΩÜÊòØÔºå‰Ωú‰∏∫‰∏Ä‰∏™ IDE Ê≠ªÂø†ÂÖöÔºåËá™ÁÑ∂ÊòØË¶ÅÂú® Clion ‰∏≠ÊûÑÂª∫ÂíåË∞ÉËØï Redis ÁöÑ„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåClion ‰ΩøÁî®‰∫Ü cmake Êù•ÁÆ°ÁêÜÈ°πÁõÆÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶ÅÂú® Redis Ê∫êÁ†ÅÊ†πÁõÆÂΩï‰∏ã‰∏∫ÂÆÉÂàõÂª∫Â•Ω CMakeLists.txt ÊâçËÉΩËøõË°åÊûÑÂª∫„ÄÇÂÖ∑‰ΩìÂèØÂèÇËÄÉ ‰ΩøÁî® Clion Êù•Ë∞ÉËØï Redis Ê∫êÁ†Å ËøôÁØáÊñáÁ´†~ Âú®ÂÆåÊàê‰∏ä‰∏ÄÊ≠•ÂêéÔºåÂàáÂà∞ src ÁõÆÂΩï‰∏ãÔºåÊâßË°å ./mkreleasehdr.sh ËÑöÊú¨ÁîüÊàê src/release.h Êñá‰ª∂ÔºåÂê¶ÂàôÊûÑÂª∫ÂèØËÉΩ‰ºöÂ§±Ë¥•„ÄÇÁÑ∂ÂêéÂú®Ê∫êÁ†ÅÁõÆÂΩï‰∏ãÊâßË°åÔºö 1cmake . Êé•‰∏ãÊù•ÔºåÊàë‰ª¨ÂèØ‰ª•Âú® Clion ÊâìÂºÄ src/server.c ÔºåÂπ∂ÊâæÂà∞ main ÂáΩÊï∞ÔºåÁÇπÂáªÂ∑•ÂÖ∑Ê†è‰∏≠ÁöÑËøêË°åÊàñË∞ÉËØïÊåâÈíÆÔºåÊàñËÄÖÁÇπÂáª main ÂáΩÊï∞Â∑¶‰æßÁöÑÊåâÈíÆÈÄâÊã©ËøêË°åÊàñË∞ÉËØï„ÄÇ Redis ÊúçÂä°ÂêØÂä®Êó∂ÔºåÈªòËÆ§‰ºö‰ΩøÁî® 6379 Á´ØÂè£Ôºå‰πüÂèØ‰ª•Âú® Clion ‰∏≠ÈÖçÁΩÆÂèÇÊï∞Ôºå‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑÁ´ØÂè£Á≠âÔºö Ëá≥Ê≠§ÔºåÊàë‰ª¨Â∑≤ÁªèÂèØ‰ª•‰ΩøÁî® Clion Êù•ÈòÖËØª„ÄÅËøêË°åÊàñËÄÖË∞ÉËØï Redis ‰ª£Á†ÅÂï¶„ÄÇÊúâ‰∫ÜÁ•ûÂô®Âä©ÊîªÔºå‰æø‰∫éÊàë‰ª¨ÈÄöËøáË∞ÉËØïÂ∑•ÂÖ∑ËøΩË∏™Ë∞ÉÁî®ÈìæÔºåÂπ∂‰∫ÜËß£ÊâßË°åÊ≠•È™§‰∏≠ÂêÑ‰∏™‰∏≠Èó¥Áä∂ÊÄÅ„ÄÇ ÂèÇËÄÉ Redis README Clion Ë∞ÉËØï Redis Ê∫êÁ†Å ‰ΩøÁî® Clion Êù•Ë∞ÉËØï Redis Ê∫êÁ†Å „ÄäRedis 5 ËÆæËÆ°‰∏éÊ∫êÁ†ÅÂàÜÊûê„Äã]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Ê∫êÁ†ÅÂ≠¶‰π†</tag>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gcache Ê∫êÁ†ÅÂ≠¶‰π†]]></title>
    <url>%2F2019%2F12%2F03%2Fgcache-code-analysis%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄRedis, REmote DIctionary Server Âõ†ÂÖ∂È´òÊïà„ÄÅÁÆÄÂçï„ÄÅ‰∏∞ÂØåÁöÑÊï∞ÊçÆÁªìÊûÑÊîØÊåÅ„ÄÅÈ´òÊÄßËÉΩ„ÄÅÊåÅ‰πÖÂåñÂíåÈõÜÁæ§ÊîØÊåÅÁ≠âÁâπÊÄßÂæóÂà∞‰∫ÜÁ®ãÂ∫èÂëò‰ª¨ÁöÑÈùíÁùêÔºåÂπ∂Ë¢´ÂπøÊ≥õÈÉ®ÁΩ≤ÂíåÂ∫îÁî®Âú®‰ºóÂ§ö‰∫íËÅîÁΩëÂÖ¨Âè∏„ÄÇËÄåÂõ†‰∏∫ÂÆÉÈááÁî®‰∫ÜÊØîËæÉÁÆÄÂçïÁöÑÊñáÊú¨ÂçèËÆÆÔºå‰ΩøÂæóÂÆ¢Êà∑Á´ØÂÆûÁé∞ÊØîËæÉÁÆÄÂçïÔºåÂõ†Ê≠§‰πüÊã•Êúâ‰ºóÂ§öÁºñÁ®ãËØ≠Ë®ÄÂÆûÁé∞ÁöÑÂÆ¢Êà∑Á´ØÔºõÁîöËá≥‰πüÊúâ‰∏Ä‰∫õÂÖ∂ÂÆÉÁ±ªÂûãÁöÑ K-V Êï∞ÊçÆÂ∫ìÂÖºÂÆπ‰∫Ü Redis ÂçèËÆÆÔºÅ ÁªìÂêàÊàë‰ª¨ÁõÆÂâçÁöÑ‰∏öÂä°Êù•ÁúãÔºåÊúâÈùûÂ∏∏Â§öÁöÑÂú∫ÊôØ‰ΩøÁî®Âà∞‰∫Ü RedisÔºö ËÆ∞ÂΩïÁî®Êà∑ÈÄöÁü•„ÄÅÁü≠‰ø°ÂèëÈÄÅÊ†áÂøóÔºåÈÅøÂÖçÈáçÂ§çÂèëÈÄÅÔºõ ‰ΩøÁî® Redis ÈõÜÂêàÁª¥Êä§‰∏Ä‰∫õÁôΩÂêçÂçïÁî®Êà∑Ë°®Ôºõ ‰∏∫ÊîØÊåÅÂø´ÈÄüËé∑ÂæóÁî®Êà∑‰ºöÂëòÊó∂ÈïøÁ≠âÂü∫Êú¨‰ø°ÊÅØÔºåÂ∞ÜËøô‰∫õ‰ø°ÊÅØÂú® Redis ÈõÜÁæ§‰∏≠‰πüÁª¥Êä§‰∫Ü‰∏Ä‰ªΩÔºåÂπ∂ÈááÂèñÁõ∏ÂÖ≥Êé™ÊñΩÁª¥ÊåÅ‰∏é MySQL Êï∞ÊçÆÂ∫ìÁöÑÊúÄÁªà‰∏ÄËá¥ÊÄß„ÄÇ ÂΩìÁÑ∂ËøòÊúâÂæàÂ§öÂú∫ÊôØÂèØ‰ª•‰æã‰∏æÔºå‰ΩÜÂ∞±Êàë‰ª¨Â∏∏‰ΩøÁî®ÁöÑ Redis Êï∞ÊçÆÁªìÊûÑÊù•ÁúãÔºå‰∏ªË¶ÅÂ∞±ÊòØ string, set, zset, list, hash map„ÄÇËôΩËØ¥ Redis ÁªôÊàë‰ª¨Êèê‰æõ‰∫ÜÂÖ∂ÂÆÉ‰∏∞ÂØåÁöÑÂÜÖÂ≠òÊï∞ÊçÆÁªìÊûÑÔºå‰ΩÜÊòØÊàë‰ª¨Âú®Áîü‰∫ßÁéØÂ¢ÉÁî®Âà∞ÁöÑÂπ∂‰∏çÂ§ö„ÄÇ Êó¢ÁÑ∂ Redis Ëøô‰πàÈáçË¶ÅÔºåËá™ÁÑ∂ÂæàÊúâÂøÖË¶ÅËä±Êó∂Èó¥ÂéªÁ†îÁ©∂‰∏ã RedisÔºåÂπ∂ÈòÖËØªÂÆÉÁöÑÊ∫êÁ†ÅÊù•Â≠¶‰π†ÂÆÉÁöÑ‰∏Ä‰∫õËÆæËÆ°ÊÄùÊÉ≥ÔºåÁºñÁ®ãÈ£éÊ†ºÁ≠â„ÄÇ‰∏çÂæó‰∏çËØ¥ÔºåRedis ÂÆòÊñπÊñáÊ°£ÈùûÂ∏∏ÁªôÂäõÔºåÊ∫êÁ†ÅÊ≥®ÈáäÂæàÂÖÖÂàÜÔºå‰ª£Á†ÅÈ£éÊ†º„ÄÅË¥®ÈáèÈÉΩÊòØÈùûÂ∏∏‰∏ÄÊµÅÁöÑ„ÄÇ Êàë‰ª¨Â∑≤Áªè‰∫ÜËß£‰∫Ü Redis ÊòØ‰ªÄ‰πàÔºü‰∏∫‰ªÄ‰πàÈÇ£‰πàÈáçË¶ÅÔºüÊé•‰∏ãÊù•Â∞±ÊòØÊÄé‰πàÊù•Â≠¶‰π†ÂÆÉÔºüÁÑ∂ÂêéÊòØÊúüÊúõËææÊàê‰ªÄ‰πàÊ†∑ÁöÑÁõÆÊ†áÔºü È¶ñÂÖàÔºå„ÄäRedis ËÆæËÆ°‰∏éÂÆûÁé∞„Äã Âíå „ÄäRedis 5 ËÆæËÆ°‰∏éÊ∫êÁ†ÅÂàÜÊûê„Äã Â∞Ü‰Ωú‰∏∫Â≠¶‰π† Redis Ê∫êÁ†ÅÁöÑ‰∏ªË¶ÅÂèÇËÄÉ‰π¶Á±çÔºà„ÄåÁ´ôÂú®Â∑®‰∫∫ÁöÑËÇ©ËÜÄ‰∏ä„ÄçÔºâÔºõÂÖ∂Ê¨°ÊòØÈòÖËØª‰∏ã Redis ÂÆòÊñπÊñáÊ°£‰∏≠ÊØîËæÉÈáçË¶ÅÁöÑÈÉ®ÂàÜÔºõÂΩìÁÑ∂ÔºåÊúÄÂêé‰∏îÊúÄÈáçË¶ÅÁöÑÊòØËá™Â∑±Ë¶ÅËÆ§ÁúüÈòÖËØªÊ∫êÁ†Å„ÄÇ ÊúÄÂêé‰∏Ä‰∏™ÈóÆÈ¢òÔºåÊúüÊúõÂú®Â≠¶‰π†ÂÆå Redis ËææÊàêÁöÑÁõÆÊ†áÔºåÊàëÊÉ≥‰∏ªË¶ÅÊúâÂ¶Ç‰∏ãÂá†ÁÇπÔºö ÂüπÂÖªÈòÖËØªÁü•ÂêçÂºÄÊ∫êÈ°πÁõÆÊ∫êÁ†ÅÁöÑËÄêÂøÉÔºåÊéåÊè°ÈòÖËØªÊ∫êÁ†ÅÁöÑÊäÄÂ∑ßÂíåÂ∑•ÂÖ∑Ôºõ Âä†Ê∑±ÂØπ Redis ÁöÑÁêÜËß£Ôºå‰∫ÜËß£ÂÆÉÁöÑÊû∂ÊûÑËÆæËÆ°Ôºõ ÊéåÊè° Redis Â∏∏Áî®ÁöÑÊï∞ÊçÆÁªìÊûÑËÆæËÆ°ÊÄùÊÉ≥ÔºåÂπ∂ËÉΩÂú®ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÂêàÁêÜËøêÁî®ÂêÑÁßçÊï∞ÊçÆÁªìÊûÑÂÆûÁé∞ÈúÄÊ±ÇÔºõ Âê∏Êî∂Á≤æÈ´ìÔºåÊèêÂçáËá™Ë∫´ÁöÑÊäÄÊúØÊ∞¥Âπ≥Ôºå‰∏ö‰ΩôÊó∂Èó¥ËøòÂèØ‰ª•Â∞ùËØïÊäòËÖæ‰∏™ÁÆÄÂçïÁöÑÊï∞ÊçÆÂ∫ì„ÄÇ Redis ÁâπÁÇπRedis ‰πãÊâÄ‰ª•ËÉΩÂ§üÊúâÂæàÈ´òÁöÑÊÄßËÉΩÔºå‰∏ªË¶ÅÊúâÂ¶Ç‰∏ãÂá†ÁÇπÂéüÂõ†Ôºö ÂÆÉÊòØÂü∫‰∫éÂÜÖÂ≠òÁöÑÊï∞ÊçÆÂ∫ìÔºåÂÜÖÂ≠òÁöÑËØªÂÜôÈÄüÂ∫¶ÂæàÂø´Ôºõ Êã•ÊúâÂêàÁêÜËÆæËÆ°ÁöÑÂÜÖÂ≠òÊï∞ÊçÆÁªìÊûÑÔºåÂ¢ûÂà†ÊîπÊü•ÂæàÁÆÄÂçïÔºåÂπ∂‰∏îËÉΩÂ§üÈ´òÊïàÂà©Áî®ÂÜÖÂ≠òÔºõ ‰ΩøÁî®‰∫Ü I/O Â§öË∑ØÂ§çÁî®ÁöÑÊú∫Âà∂Ôºàselect, poll, epoll, kqueueÔºâÔºåÈ´òÊïàÂ§ÑÁêÜÈ´òÂπ∂ÂèëÁöÑÁΩëÁªúËøûÊé•Ôºõ ÈááÁî®‰∫ÜÂçïËøõÁ®ãÊ®°ÂûãÔºàRedis Server ‰ºöÊúâÂ§ö‰∏™Á∫øÁ®ãÔºâÔºå‰∏îÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ã‰∏ìÈó®Â§ÑÁêÜÁΩëÁªúËØ∑Ê±ÇÔºåÈÅøÂÖçÁ∫øÁ®ãË∞ÉÂ∫¶Â∏¶Êù•ÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢ÂºÄÈîÄ„ÄÅÂ§öÁ∫øÁ®ãÂêåÊ≠•ÂºÄÈîÄÔºàÂ¶ÇÂä†ÈîÅ„ÄÅÈáäÊîæÈîÅÁ≠âÔºâ„ÄÇ Èô§Ê≠§‰πãÂ§ñÔºåËøòÊúâÂ¶Ç‰∏ãÁâπÁÇπÔºö &lt;key, value&gt; ‰∏≠ÁöÑ value Èô§‰∫ÜÊôÆÈÄöÁöÑÂ≠óÁ¨¶‰∏≤ÔºåËøòÊîØÊåÅÂ§çÊùÇÁöÑÊï∞ÊçÆÁ±ªÂûãÔºàÂ¶ÇÈõÜÂêà„ÄÅÂ≠óÂÖ∏„ÄÅ‰ΩçÂõæÁ≠âÔºâÔºõ ÊîØÊåÅÊï∞ÊçÆÊåÅ‰πÖÂåñÔºåÂèØÂú®ÈáçÂêØÂêéÊÅ¢Â§çÔºåÊîØÊåÅ AOF„ÄÅRDB Âíå AOF + RDB ‰∏âÁßçÊåÅ‰πÖÂåñÊñπÊ°àÔºõ ÊîØÊåÅ‰∏ª‰ªéÁªìÊûÑÔºå‰ªéËäÇÁÇπÂèØÂÅöÊï∞ÊçÆÂ§á‰ªΩÔºå‰πüÂèØÂØπÂ§ñÊèê‰æõËØªÊúçÂä°Ôºõ ÊîØÊåÅÈõÜÁæ§„ÄÇ Ê∫êÁ†ÅÊ¶ÇËßàÂêéÈù¢ÁöÑÊ∫êÁ†ÅÂ≠¶‰π†‰ºöÂü∫‰∫é Redis ÊúÄÊñ∞ÁöÑÁ®≥ÂÆöÁâà 5.0.7ÔºåÂèÇËßÅ‰ªìÂ∫ìÔºöhttps://github.com/iFaceless/redis/tree/5.0ÔºåÊ∫êÁ†ÅÊ≥®Èáä‰ºöÊé®ÈÄÅÂà∞ËØ•‰ªìÂ∫ìÁöÑ comment-src ÂàÜÊîØ‰∏ã„ÄÇ ÂÖ≥‰∫é Redis Ê∫êÁ†ÅÁöÑÁªìÊûÑÔºåÂú® Redis ÁöÑ README.md ‰∏≠ÊúâÊâÄ‰ªãÁªç„ÄÇÂÖ∑‰ΩìÊù•ËØ¥ÔºåÊúâÂ¶Ç‰∏ãÂá†‰∏™ÈáçË¶ÅÁöÑÁõÆÂΩïÔºö src: Redis Ê†∏ÂøÉÂÆûÁé∞ÔºàC ËØ≠Ë®ÄÔºâ tests: ÂçïÂÖÉÊµãËØï‰ª£Á†ÅÔºàTcl ËØ≠Ë®ÄÔºâ deps: Redis ‰æùËµñÁöÑ‰∏Ä‰∫õÂ∫ì„ÄÇÂÖ∂‰∏≠ÂåÖÂê´ jemalloc Ê∫êÁ†ÅÔºåÂÆÉÊòØ Redis Âú® Linux ‰∏ãÈªòËÆ§ÁöÑÂÜÖÂ≠òÂàÜÈÖçÂ∫ìÔºåÁî®Êù•Êõø‰ª£Ê†áÂáÜÂ∫ì mallocÔºå‰ª•ÊúüÂáèÂ∞ëÂÜÖÂ≠òÂàÜÈÖçÁ¢éÁâá server.hserver.h ‰∏≠ÂÆö‰πâ‰∫Ü Redis Server ÈúÄË¶ÅÁî®Âà∞ÁöÑ‰∏Ä‰∫õÊï∞ÊçÆÁªìÊûÑÔºåÂÖ∂‰∏≠ struct redisServer Áª¥Êä§‰∫Ü Redis ÊúçÂä°Á´ØÈÖçÁΩÆÂíåÂÖ±‰∫´Áä∂ÊÄÅÔºåÂá†‰∏™ÊØîËæÉÈáçË¶ÅÁöÑÂ≠óÊÆµÂ¶Ç‰∏ãÔºö db: Ë°®Á§∫ Redis Êï∞ÊçÆÂ∫ìÔºåÁî®Êù•Â≠òÂÇ®Êï∞ÊçÆ commands: ÂëΩ‰ª§Ë°® clients: ËøûÊé•Âà∞ÂΩìÂâçÊúçÂä°Âô®ÁöÑÂÆ¢Êà∑Á´ØÈìæË°® master: replica ËäÇÁÇπ master ÂÆ¢Êà∑Á´Ø Âè¶Â§ñ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÊï∞ÊçÆÁªìÊûÑÊòØ redisClientÔºåÁî®Êù•Ë°®Á§∫ÂÆ¢Êà∑Á´Ø„ÄÇËøôÈáåÁªô‰ªãÁªçÂá†‰∏™ÈáçË¶ÅÁöÑÂ≠óÊÆµÔºö 12345678910111213struct client &#123; int fd; // Â≠òÊîæÂÆ¢Êà∑Á´ØËØ∑Ê±Ç sds querybuf; int argc; robj **argv; redisDb *db; int flags; // reply &amp; buf Áª¥Êä§ÊúçÂä°Á´ØË¶ÅÂèëÁªôÂÆ¢Êà∑Á´ØÁöÑÂõûÂ§çÈòüÂàóÔºåÂΩìÂ∫ïÂ±ÇÁöÑ fd ÂèØÂÜôÊó∂Ôºå‰ºö‰ª•Ê∏êËøõÂú∞ÊñπÂºèÂèëÈÄÅÁºìÂÜ≤Âå∫Êï∞ÊçÆ list *reply; char buf[PROTO_REPLY_CHUNK_BYTES]; ... many other fields ...&#125; ËøòÊúâ‰∏Ä‰∏™ÊØîËæÉÈáçË¶ÅÁöÑÊï∞ÊçÆÁªìÊûÑÊòØ robjÔºåÂÆÉË°®Á§∫‰∏Ä‰∏™ Redis ÂØπË±°ÔºåÂú® Redis ÂÜÖÈÉ®ÂÆûÁé∞‰∏≠ÊúâÂæàÂ§öÂú∞ÊñπÂú®‰ΩøÁî®ÔºåÂÆÉÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºö 1234567891011// redisObject Âü∫Êú¨‰∏äÂèØ‰ª•Ë°®Á§∫ÊâÄÊúâÂ∏∏Áî®ÁöÑ Redis Êï∞ÊçÆÁ±ªÂûãÔºàlists, sets, strings Á≠âÔºâtypedef struct redisObject &#123; // type Ë°®Á§∫ÂÖ∑‰ΩìÁöÑÊï∞ÊçÆÁ±ªÂûã unsigned type:4; unsigned encoding:4; unsigned lru:LRU_BITS; /* lru time (relative to server.lruclock) */ // refcount Ë°®Á§∫ÂØπË±°ÂºïÁî®Ê¨°Êï∞ÔºåÂÄüÂä©ÂºïÁî®ËÆ°Êï∞ÁöÑÊñπÂºèÔºåÈÅøÂÖç‰∏∫ÈáçÂ§çÂØπË±°ÂàÜÈÖçÂÜÖÂ≠ò int refcount; // ptr ÊåáÂêëÂ∫ïÂ±ÇÁöÑÁúüÊ≠£ÁöÑÂØπË±°Ë°®Á§∫ÔºåÁªìÂêà `encoding` ËøõË°åËß£Êûê void *ptr;&#125; robj; server.cRedis Server ÂêØÂä®ÁöÑÂÖ•Âè£ÂÆö‰πâÂú®Ê≠§Â§ÑÔºàÂèÇËßÅ main ÂáΩÊï∞Ôºâ„ÄÇ‰∏ãÈù¢ÊòØ Redis Server ÂêØÂä®Êó∂ÈúÄË¶ÅËøõË°åÁöÑÈáçË¶ÅÊ≠•È™§Ôºö initServerConfig() Áî®Êù•ÈÖçÁΩÆ struct server ÁöÑÈªòËÆ§ÂÄº initServer() ÂàÜÈÖç‰∏Ä‰∫õÂøÖË¶ÅÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÅÈÖçÁΩÆÁõëÂê¨ÁöÑ socket Á≠â aeMain() ÂêØÂä® Event LoopÔºåÁõëÂê¨Êñ∞ÁöÑËøûÊé• Event Loop ‰∏≠‰ºöÂë®ÊúüË∞ÉÁî®ÁöÑ‰∏§‰∏™ÁâπÊÆäÂáΩÊï∞Â¶Ç‰∏ãÔºö serverCron() ‰ºöË¢´Âë®ÊúüË∞ÉÁî®ÔºàÂèÇËÄÉ server.hz ÈÖçÁΩÆÁöÑÈ¢ëÁéáÔºâÔºåÊâßË°å‰∏Ä‰∫õÂë®ÊúüÊÄßÁöÑ‰ªªÂä°ÔºåÂ¶ÇÊ£ÄÊü•ÂÆ¢Êà∑Á´ØË∂ÖÊó∂Á≠â beforeSleep() ‰ºöÂú®ÊØèÊ¨°ËøõÂÖ•‰∫ã‰ª∂È©±Âä®Â∫ì‰∏ªÂæ™ÁéØÊó∂Ë∞ÉÁî®Ôºå‰πüÂ∞±ÊòØÂú®Áù°Áú†Á≠âÂæÖ ready ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶‰πãÂâç Âú® server.c ‰∏≠ËøòÊúâÂá†‰∏™ÂáΩÊï∞‰∏ìÈó®Â§ÑÁêÜÂÖ∂ÂÆÉÁ±ªÂûãÁöÑÈáçË¶Å‰ªªÂä°Ôºö call() ‰ºöÂú®ÊåáÂÆöÁöÑÂÆ¢Êà∑Á´Ø‰∏ä‰∏ãÊñá‰∏≠ÊâßË°åÊåáÂÆöÂëΩ‰ª§Êó∂Ë¢´‰ΩøÁî® activeExpireCycle() Áî®Êù•Â§ÑÁêÜËøáÊúüÁöÑ keys freeMemoryIfNeeded() ÂΩì Redis ÂÜÖÂ≠ò‰ΩøÁî®Ë∂ÖËøá maxmemory ÊåáÂÆöÁöÑÂÄºÔºå‰∏îÊúâÊñ∞ÁöÑÂÜôÂÖ•ËøõÊù•Êó∂Ôºå‰ºöÊâßË°åËØ•ÂáΩÊï∞Ê∏ÖÁêÜÂÜÖÂ≠ò redisCommandTable Áª¥Êä§‰∫ÜÊâÄÊúâ Redis ÂëΩ‰ª§ÔºåÂÖ∂‰∏≠ÂåÖÂê´ÊØè‰∏™ÂëΩ‰ª§ÁöÑÂêçÁß∞„ÄÅÂõûË∞ÉÂáΩÊï∞„ÄÅÂèÇÊï∞‰∏™Êï∞ÂèäÂÖ∂ÂÆÉÂ±ûÊÄß networking.cÂú®Ëøô‰∏™Êñá‰ª∂‰∏≠ÂÆö‰πâ‰∫ÜÊâÄÊúâÁöÑ I/O ÂáΩÊï∞ÔºåÁî®Êù•ÂíåÂÆ¢Êà∑Á´Ø„ÄÅmaster Âèä replicas ‰∫§‰∫íÔºö createClient() ÂàùÂßãÂåñÊñ∞ÁöÑÂÆ¢Êà∑Á´Ø addReply*() ÂáΩÊï∞ÊóèÁî®‰∫éÁªôÂÆ¢Êà∑Á´ØÊ∑ªÂä†ÂìçÂ∫îÊï∞ÊçÆ writeToClient() Áî®‰∫éÂ∞ÜËæìÂá∫ÁºìÂÜ≤Âå∫ÁöÑÊï∞ÊçÆÂèëÈÄÅÁªôÂÆ¢Êà∑Á´ØÔºåÂÆÉ‰ºöË¢´ sendReplyToClient() Ë∞ÉÁî® readQueryFromClient() Áî®‰∫éËÅöÈõÜ‰ªéÂÆ¢Êà∑Á´ØËØªÂèñÁöÑÊï∞ÊçÆÂà∞Êü•ËØ¢ÁºìÂÜ≤Âå∫ processInputBuffer() ÊòØ‰ªéÂÆ¢Êà∑Á´ØÊü•ËØ¢ÁºìÂÜ≤Âå∫Ôºàquery bufferÔºâÊ†πÊçÆ Redis ÂçèËÆÆËß£ÊûêÊü•ËØ¢ÂëΩ‰ª§ÁöÑÂÖ•Âè£ÂáΩÊï∞„ÄÇ‰∏ÄÊó¶ÂëΩ‰ª§ÂèØ‰ª•Â§ÑÁêÜ‰∫ÜÔºåÂ∞±‰ºöË∞ÉÁî® processCommand() Êù•ÁúüÊ≠£ÊâßË°åÂëΩ‰ª§ freeClient() ÈáäÊîæÂÆ¢Êà∑Á´Ø aof.c Âíå rdb.cÈ°æÂêçÊÄù‰πâÔºåËøôÊòØ Redis ‰∏§ÁßçÊåÅ‰πÖÂåñÊñπÊ°àÁöÑÂÖ∑‰ΩìÂÆûÁé∞Êñá‰ª∂„ÄÇRedis ÁöÑÊåÅ‰πÖÂåñÊ®°ÂûãÊØîËæÉÊúâË∂£ÔºåÂÆÉ‰ºöÈÄöËøá fork() Á≥ªÁªüË∞ÉÁî®ÂàõÂª∫‰∏Ä‰∏™ÂçïÁã¨ÁöÑÁ∫øÁ®ãÔºåÂπ∂ËÉΩËÆøÈóÆ‰∏ªÁ∫øÁ®ãÂÖ±‰∫´ÁöÑÂÜÖÂ≠òÂå∫ÂüüÔºõÊé•‰∏ãÊù•Ëøô‰∏™Â§á‰ªΩÁ∫øÁ®ã‰ºöÂ∞ÜÂÜÖÂ≠òÂÜÖÂÆπÊåÅ‰πÖÂåñÂà∞Á£ÅÁõò‰∏≠„ÄÇrdb.c Âú®ÂàõÂª∫Âø´ÁÖßÊó∂‰ºö‰ΩøÁî®ËøôÁßçÊú∫Âà∂Ôºõaof.c Âú®ÊâßË°å AOF ÈáçÂÜôÔºàÈÅøÂÖç Append Only Êñá‰ª∂ËøáÂ§ßÔºâÊó∂‰πü‰ºöÁî®Âà∞Ëøô‰∏™Êú∫Âà∂„ÄÇ db.cdb.c ‰∏≠ÂÆö‰πâ‰∫Ü‰∏Ä‰∫õÈÄöÁî®ÁöÑÊìç‰ΩúÂëΩ‰ª§ÔºåÂÆÉ‰ª¨ÈÉΩÊòØÈíàÂØπ key ËøõË°åÁöÑÊìç‰ΩúÔºåËÄåÈùûÂØπÂ∫îÁöÑÊï∞ÊçÆÔºåÊØîÂ¶Ç DEL Âíå EXPIRE Á≠â„ÄÇÊ≠§Â§ñÔºådb.c ‰∏≠ËøòÊèê‰æõ‰∫Ü‰∏Ä‰∫õÁâπÊÆäÁöÑ API Áî®‰∫éÂú® Redis Êï∞ÊçÆÈõÜ‰∏äÊâßË°åÊüê‰∫õÊìç‰ΩúÊó∂Ôºå‰∏çÁî®ËÆøÈóÆÂÜÖÈÉ®ÂÖ∑‰ΩìÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇ ‰ª•‰∏ãÊòØËÆ∏Â§öÂëΩ‰ª§ÂÆûÁé∞‰∏≠ÈÉΩ‰ºöÁî®Âà∞ÁöÑÂáΩÊï∞Ôºö lookupKeyRead() Âíå lookupKeyWrite() Áî®‰∫éÂü∫‰∫éÊåáÂÆö key ÂæóÂà∞ÂØπÂ∫îÂÄºÁöÑÊåáÈíàÔºåÂ¶ÇÊûú key ‰∏çÂ≠òÂú®ÔºåÂàôËøîÂõû NULL dbAdd() ÂèäÊõ¥ÊäΩË±°ÁöÑÂáΩÊï∞ setKey() ÊòØÁî®Êù•Âú® Redis ‰∏≠ÂàõÂª∫Êñ∞ÁöÑ key dbDelete() ÁßªÈô§ key ÂèäÂÖ≥ËÅîÁöÑ value emptyDb() ÁßªÈô§ÊåáÂÆöÁöÑÊï∞ÊçÆÂ∫ìÊàñËÄÖÊâÄÊúâÁöÑÊï∞ÊçÆÂ∫ì object.cstruct robj ÊòØ Redis ÂØπË±°ÁöÑÂÆö‰πâÔºåÂú® object.c ‰∏≠ÊúâÂæàÂ§öÂ∫îÁî®‰∫é Redis ÂØπË±°ÁöÑÊìç‰ΩúÔºåÂÖ∂‰∏≠ÊØîËæÉÂÖ≥ÈîÆÁöÑÂáΩÊï∞Â¶Ç‰∏ãÔºö incrRefcount() Âíå decrRefCount() Áª¥Êä§ÂØπË±°ÁöÑÂºïÁî®ËÆ°Êï∞„ÄÇÂΩìÂºïÁî®ÂÄº‰∏∫ 0 Êó∂Êâç‰ºöÁúüÊ≠£ÈáäÊîæÂØπË±° createObject() Áî®‰∫éÂàÜÈÖçÊñ∞ÁöÑÂØπË±°„ÄÇÊ≠§Â§ñÔºåËøòÊúâ‰∏Ä‰∫õÈíàÂØπÁâπÊÆäÂÜÖÂÆπÂàÜÈÖçÂ≠óÁ¨¶‰∏≤ÂØπË±°ÁöÑÂáΩÊï∞ÔºåÂ¶Ç createStringObjectFromLongLong() Á≠â replication.creplication.c Êñá‰ª∂‰∏≠ÂÆûÁé∞‰∫Ü master Âíå replica ËßíËâ≤„ÄÇ‰ΩÜËøôÂùóÂÜÖÂÆπÊØîËæÉÂ§çÊùÇÔºåÂª∫ËÆÆÂØπ Redis ÂÖ∂ÂÆÉÈÉ®ÂàÜ‰ª£Á†ÅÊúâÊâÄ‰∫ÜËß£ÂêéÂÜçÊù•Â≠¶‰π†ÂÆÉ„ÄÇ ËØ•Êñá‰ª∂‰∏≠Êúâ‰∏™ÊØîËæÉÈáçË¶ÅÁöÑÂáΩÊï∞ replicationFeedSlaves()ÔºåÂÆÉÁî®Êù•Â∞ÜÂëΩ‰ª§ÂèëÈÄÅÁªô‰ªéËäÇÁÇπÔºå‰ªéËÄå‰øùËØÅÂíå‰∏ªËäÇÁÇπÊï∞ÊçÆÂêåÊ≠•„ÄÇÂú®ËØ•Êñá‰ª∂‰∏≠ËøòÂÆûÁé∞‰∫Ü SYNC Âíå PSYNC ÂëΩ‰ª§ÔºåÂÆÉ‰ª¨Áî®‰∫é‰ªéËäÇÁÇπÂàùÊ¨°ÂàùÂßãÂåñÂêåÊ≠•ÔºåÊàñËÄÖÂú®ËøûÊé•Êñ≠ÂºÄÂπ∂ÈáçËøûÂêéÁªßÁª≠‰øùÊåÅÂêåÊ≠•„ÄÇ ÂÖ∂ÂÆÉ t_hash.c, t_list.c, t_set.c, t_string.c Âíå t_zset.c ÊòØ Redis Êï∞ÊçÆÁ±ªÂûãÁöÑÂ∫ïÂ±ÇÂÆûÁé∞ ae.c Redis ‰∫ã‰ª∂Âæ™ÁéØÂÆûÁé∞ sds.c Redis Âä®ÊÄÅÂèòÈïøÂ≠óÁ¨¶‰∏≤ anet.c ÂØπÂÜÖÊ†∏Êèê‰æõÁöÑÁΩëÁªúÊé•Âè£ÂÅö‰∫ÜÂ∞ÅË£ÖÔºå‰ªéËÄåËÉΩÂ§ü‰ª•Êõ¥Âä†ÁÆÄÂçïÁöÑÊñπÂºè‰ΩøÁî® POSIX ÁΩëÁªúÊé•Âè£ dict.c ÈùûÈòªÂ°û„ÄÅÊ∏êËøõ rehash Â≠óÂÖ∏ÂÆûÁé∞ scripting.c ÂÆûÁé∞‰∫Ü Luc ËÑöÊú¨ cluster.c Redis ÈõÜÁæ§ÂÆûÁé∞„ÄÇÂú®‰∫ÜËß£ËøôÂùó‰ª£Á†ÅÂâçÔºåËÆ∞ÂæóÂèÇËÄÉ‰∏ã Redis ÈõÜÁæ§ËØ¥Êòé ÊÄùÁª¥ÂØºÂõæ ÊûÑÂª∫ &amp; Ë∞ÉËØïRedis ÂÆòÊñπÊñáÊ°£‰∏≠ÊúâÂÖ≥‰∫éÊûÑÂª∫ÂíåËøêË°åÂÆÉÁöÑËØ¶ÁªÜËØ¥ÊòéÔºåÊàë‰ª¨‰πüÂèØ‰ª•‰ΩøÁî® gdb ËøõË°åË∞ÉËØï„ÄÇ‰ΩÜÊòØÔºå‰Ωú‰∏∫‰∏Ä‰∏™ IDE Ê≠ªÂø†ÂÖöÔºåËá™ÁÑ∂ÊòØË¶ÅÂú® Clion ‰∏≠ÊûÑÂª∫ÂíåË∞ÉËØï Redis ÁöÑ„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåClion ‰ΩøÁî®‰∫Ü cmake Êù•ÁÆ°ÁêÜÈ°πÁõÆÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶ÅÂú® Redis Ê∫êÁ†ÅÊ†πÁõÆÂΩï‰∏ã‰∏∫ÂÆÉÂàõÂª∫Â•Ω CMakeLists.txt ÊâçËÉΩËøõË°åÊûÑÂª∫„ÄÇÂÖ∑‰ΩìÂèØÂèÇËÄÉ ‰ΩøÁî® Clion Êù•Ë∞ÉËØï Redis Ê∫êÁ†Å ËøôÁØáÊñáÁ´†~ Âú®ÂÆåÊàê‰∏ä‰∏ÄÊ≠•ÂêéÔºåÂàáÂà∞ src ÁõÆÂΩï‰∏ãÔºåÊâßË°å ./mkreleasehdr.sh ËÑöÊú¨ÁîüÊàê src/release.h Êñá‰ª∂ÔºåÂê¶ÂàôÊûÑÂª∫ÂèØËÉΩ‰ºöÂ§±Ë¥•„ÄÇÁÑ∂ÂêéÂú®Ê∫êÁ†ÅÁõÆÂΩï‰∏ãÊâßË°åÔºö 1cmake . Êé•‰∏ãÊù•ÔºåÊàë‰ª¨ÂèØ‰ª•Âú® Clion ÊâìÂºÄ src/server.c ÔºåÂπ∂ÊâæÂà∞ main ÂáΩÊï∞ÔºåÁÇπÂáªÂ∑•ÂÖ∑Ê†è‰∏≠ÁöÑËøêË°åÊàñË∞ÉËØïÊåâÈíÆÔºåÊàñËÄÖÁÇπÂáª main ÂáΩÊï∞Â∑¶‰æßÁöÑÊåâÈíÆÈÄâÊã©ËøêË°åÊàñË∞ÉËØï„ÄÇ Redis ÊúçÂä°ÂêØÂä®Êó∂ÔºåÈªòËÆ§‰ºö‰ΩøÁî® 6379 Á´ØÂè£Ôºå‰πüÂèØ‰ª•Âú® Clion ‰∏≠ÈÖçÁΩÆÂèÇÊï∞Ôºå‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑÁ´ØÂè£Á≠âÔºö Ëá≥Ê≠§ÔºåÊàë‰ª¨Â∑≤ÁªèÂèØ‰ª•‰ΩøÁî® Clion Êù•ÈòÖËØª„ÄÅËøêË°åÊàñËÄÖË∞ÉËØï Redis ‰ª£Á†ÅÂï¶„ÄÇÊúâ‰∫ÜÁ•ûÂô®Âä©ÊîªÔºå‰æø‰∫éÊàë‰ª¨ÈÄöËøáË∞ÉËØïÂ∑•ÂÖ∑ËøΩË∏™Ë∞ÉÁî®ÈìæÔºåÂπ∂‰∫ÜËß£ÊâßË°åÊ≠•È™§‰∏≠ÂêÑ‰∏™‰∏≠Èó¥Áä∂ÊÄÅ„ÄÇ ÂèÇËÄÉ Redis README Clion Ë∞ÉËØï Redis Ê∫êÁ†Å ‰ΩøÁî® Clion Êù•Ë∞ÉËØï Redis Ê∫êÁ†Å „ÄäRedis 5 ËÆæËÆ°‰∏éÊ∫êÁ†ÅÂàÜÊûê„Äã]]></content>
      <categories>
        <category>Go</category>
      </categories>
      <tags>
        <tag>ÁºìÂ≠ò</tag>
        <tag>LRU</tag>
        <tag>LFU</tag>
        <tag>ARC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Go ËØ≠Ë®Ä‰∏≠Â¶Ç‰Ωï‰ª•‰ºòÈõÖÁöÑÂßøÂäøÂÆûÁé∞ÂØπË±°Â∫èÂàóÂåñÔºü]]></title>
    <url>%2F2019%2F11%2F28%2Fportal%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄÂú®Êàë‰ª¨ÁöÑ Web ÂêéÁ´ØÈ°πÁõÆ‰∏≠ÔºåÈÄöÂ∏∏Â∞ÜÊï∞ÊçÆÊ∫êËé∑ÂèñÁõ∏ÂÖ≥ÁöÑÁªìÊûÑ‰ΩìÂÆö‰πâÊîæÂú® models.go ‰∏≠Ôºå‰∏çÁÆ°ÂÖ∂ÂÖ≥ËÅîÁöÑÊï∞ÊçÆÊòØÊù•Ëá™‰∫éÊï∞ÊçÆÂ∫ì„ÄÅRedis ËøòÊòØ RPCÔºåÊÄª‰πãÈÉΩÊòØÊî∂ÊïõÂú®Ëøô‰∏ÄÂ±Ç‰ª•Êèê‰æõÊõ¥Â•ΩÁöÑÂ§çÁî®ÊÄß„ÄÇ ËÄåÈíàÂØπ‰∏çÂêåÁöÑÂú∫ÊôØÔºåÂ¶Ç C Á´Ø HTTP API Ë¶ÅÊ±ÇËøîÂõûÁöÑÊï∞ÊçÆÔºåÂàôÂÆö‰πâÂØπÂ∫îÁöÑ Schema structÔºå‰ªéËÄåËÅöÂêàÈúÄË¶ÅÁöÑÊï∞ÊçÆ‰∏ãÂèëÂá∫Âéª„ÄÇÂΩìÁÑ∂ÔºåÂØπ‰∫é Admin API Âíå RPC API ‰πü‰ºöÊ†πÊçÆÈúÄË¶ÅÂÆö‰πâ‰∏çÂêåÁöÑ Schema struct„ÄÇ‰ΩÜÊòØÔºåÂÆÉ‰ª¨ÈÉΩ‰ºöÂ§çÁî®Áõ∏ÂêåÁöÑ models„ÄÇÊÉ≥ÂøÖËøô‰∫õÂ∫îËØ•ÈÉΩÊòØÊØîËæÉÂ∏∏ËßÑÁöÑÊìç‰Ωú‰∫ÜÂêß„ÄÇ‰ΩÜÂú®ÂÆûÈôÖ‰ΩøÁî®‰∏≠Ôºå‰πüÈÅáÂà∞‰∫ÜËØ∏Â§öÈóÆÈ¢òÔºö API Schema ÁöÑÂ≠óÊÆµÁ±ªÂûãÂíå Model ‰∏≠ÂÆö‰πâÁöÑ‰∏çÂêåÔºàÊØîÂ¶ÇÊàë‰ª¨‰ΩøÁî®ÂèëÂè∑Âô®Ëé∑ÂæóÁöÑ ID Âú® Model struct ‰∏≠ÂÆö‰πâÁöÑÊòØ int64Ôºå‰ΩÜÊòØ‰∏∫‰∫ÜÈÅøÂÖç json.Marshal Êó∂Ê∫¢Âá∫ÔºàÊµèËßàÂô®Êà™Êñ≠ÔºâÔºåÁªü‰∏ÄËøîÂõû‰∫Ü string Á±ªÂûãÁöÑ IDÔºâÔºåÂ∞±ÈúÄË¶ÅÊâãÂä®ËøõË°åÁ±ªÂûãËΩ¨Êç¢Ôºõ API Schema ÁöÑÂ≠óÊÆµÂêçÁß∞Âíå Model ‰∏≠ÂÆö‰πâÁöÑÂèØËÉΩ‰∏çÂêåÔºõ ÊîØÊåÅÁÅµÊ¥ªÁöÑ Schema Â≠óÊÆµËøáÊª§ÊØîËæÉÈ∫ªÁÉ¶Ôºå‰∏çÂêåÁöÑÈ°πÁõÆÂÆûÁé∞ÂèØËÉΩ‰∏çÂêåÔºõ Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇËØæÁ®ã API Schema ÂÖ≥ËÅîÁöÑ‰∏Ä‰∫õÊï∞ÊçÆÊù•Ëá™‰∫éÂÖ∂ÂÆÉÊúçÂä°ÔºàÈúÄË¶ÅÈÄöËøá RPC Ë∞ÉÁî®ÔºâÔºåËøôÊó∂Â¶ÇÊûúËÉΩÂ§üÂπ∂ÂèëÂä†ËΩΩÂ∞±ÊúâÊèêÈ´òÊé•Âè£ÂìçÂ∫îÈÄüÂ∫¶ÁöÑÂèØËÉΩÔºå‰ΩÜÊòØÈúÄË¶ÅÊØèÊ¨°Âú®Â∫îÁî®Â±ÇÈáçÊñ∞ÂÆûÁé∞ÔºàÂΩìÁÑ∂ÂèØ‰ª•ÂÜçÊäΩ‰∏ÄÂ±ÇÂá∫Êù•Ôºå‰∏çËøáËøòÊòØÂæàÈ∫ªÁÉ¶Ôºå‰ºöÊúâÂøÉÊô∫Ë¥üÊãÖÔºâ„ÄÇ ‚Ä¶‚Ä¶ ÈÇ£‰πàÔºåÊúâÊ≤°ÊúâÊõ¥Âä†‰ºòÈõÖÁöÑËß£ÂÜ≥ÂäûÊ≥ïÂë¢Ôºü ÊÄé‰πàËß£ÂÜ≥Ôºü ü§îÊàë‰ª¨‰πãÂâçÂú®‰ΩøÁî® Python È°πÁõÆÂºÄÂèëÊó∂Ôºå‰ΩøÁî®Âà∞‰∫Ü marshmallow Ëøô‰∏™ËΩªÈáèÁ∫ßÁöÑÂØπË±°Â∫èÂàóÂåñÊ°ÜÊû∂„ÄÇÂΩìÁÑ∂ÔºåÂÆÉ‰∏ç‰ªÖ‰ªÖÊèê‰æõÂ∫èÂàóÂåñÁöÑËÉΩÂäõÔºåËøòÊúâÂèçÂ∫èÂàóÂåñ‰ª•ÂèäÂ≠óÊÆµÊ†°È™åÁöÑËÉΩÂäõ„ÄÇÂ¶ÇÊûúËÉΩÂ§üÊÅ∞ÂΩìÁöÑ‰ΩøÁî®ÂÆÉÔºåÊòØÂèØ‰ª•ÊèêÂçáÂºÄÂèëÊïàÁéáÁöÑ„ÄÇÂ¶ÇÊûúÂú® Go ËØ≠Ë®ÄÁ§æÂå∫‰∏≠Â≠òÂú®ËøôÊ†∑‰∏Ä‰∏™Ê°ÜÊû∂ÁöÑËØùÔºåÂÆÉÊòØÂèØ‰ª•Ëß£ÂÜ≥‰∏äÈù¢ÊèêÂà∞ÁöÑ‰∏Ä‰∫õÈóÆÈ¢òÁöÑ„ÄÇ Âú®ÁªèËøá‰∏ÄÁï™ÊÄùÊÉ≥Êñó‰∫âÂêéÔºåÊñóËÉÜÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Á±ª‰ººÁöÑÊ°ÜÊû∂ portal Áî®‰∫éËß£ÂÜ≥‰∏äÈù¢ÊèêÂà∞ÁöÑ‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇportal ËÅöÁÑ¶‰∫é‰ª•‰ºòÈõÖ‰∏î‰∏ÄËá¥ÁöÑÊñπÂºèÂ§ÑÁêÜÂØπË±°Â∫èÂàóÂåñÁöÑÈóÆÈ¢òÔºõËÄåÂØπ‰∫é Struct Fields ÁöÑÊ†°È™åÈóÆÈ¢òÔºåÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Â∑≤ÊúâÁöÑÁ¨¨‰∏âÊñπÂ∫ìÂ¶Ç go-playground/validator Êàñ asaskevich/govalidator„ÄÇ ÁõÆÂâçÊù•ËØ¥ÔºåÊ†∏ÂøÉÂäüËÉΩÂùáÂ∑≤ÊåâÁÖßÊúÄÂàùÁöÑËÆæËÆ°ÂÆûÁé∞‰∫ÜÔºå‰∏ªË¶ÅÂäüËÉΩÂ¶Ç‰∏ãÔºö Êèê‰æõÁÆÄÊ¥ÅÊòìÁî®ÁöÑ API Êé•Âè£ ÊîØÊåÅÈùûÂ∏∏ÁÅµÊ¥ªÁöÑÂ≠óÊÆµËøáÊª§ËÉΩÂäõÔºà‰ªªÊÑèÊ∑±Â∫¶ÁöÑÂµåÂ•óÂ≠óÊÆµËøáÊª§Ôºâ Ëá™Âä®Â∞ùËØïÁ±ªÂûãËΩ¨Êç¢ÔºåËøúÁ¶ªÊâãÂä®ÁºñÂÜôÂ§™Â§öÊ≤°‰ªÄ‰πàÁÅµÈ≠ÇÁöÑÁ±ªÂûãËΩ¨Êç¢‰ª£Á†ÅÔºàÊó©ÁÇπ‰∏ãÁè≠‰∏çÂ•ΩÂêóÔºüÔºâ ÊîØÊåÅÂπ∂ÂèëÂ°´ÂÖÖÂ≠óÊÆµÂÄºÔºö ÂèØÊâãÂä®ÊåáÂÆöÂì™‰∫õÂ≠óÊÆµÂºÇÊ≠•Âä†ËΩΩ ÂèØËÆæÁΩÆÂÖ®Â±ÄÁöÑ goroutine Ê±†Â§ßÂ∞è ‰ΩøÁî® PORTALÂèØ‰ª•ÈÄöËøá‰∏ãÈù¢ÁöÑÊñπÂºèÂÆâË£ÖËØ•ÂåÖÔºö 1get get -u github.com/ifaceless/portal Á¨¨‰∏ÄÊ≠•ÔºöÂÆö‰πâ Model ÁªìÊûÑ‰Ωì 12345678910111213141516171819202122232425262728293031323334353637type NotificationModel struct &#123; ID int Title string Content string&#125;type UserModel struct &#123; ID int&#125;func (u *UserModel) Fullname() string &#123; // ÂêçÁß∞ÁîöËá≥ÂèØ‰ª•Êù•Ëá™ RPC Ë∞ÉÁî®Á≠âÔºåÂè™ÊòØ‰∏Ä‰∏™Á§∫‰æã return fmt.Sprintf("user:%d", u.ID)&#125;// Notifications ËøîÂõûÁî®Êà∑ÂÖ≥ËÅîÁöÑ‰∏Ä‰∫õÈÄöÁü•‰ø°ÊÅØÂàóË°®func (u *UserModel) Notifications() (result []*NotificationModel) &#123; for i := 0; i &lt; 1; i++ &#123; result = append(result, &amp;NotificationModel&#123; ID: i, Title: fmt.Sprintf("title_%d", i), Content: fmt.Sprintf("content_%d", i), &#125;) &#125; return&#125;type TaskModel struct &#123; ID int UserID int Title string&#125;// User ËøîÂõû Task ÂÖ≥ËÅîÁöÑÁî®Êà∑ÊòØË∞Åfunc (t *TaskModel) User() *UserModel &#123; return &amp;UserModel&#123;t.UserID&#125;&#125; Á¨¨‰∫åÊ≠•ÔºöÂÆö‰πâ API Schema ÁªìÊûÑ‰Ωì ‰ª•‰∏ã Schema Âú®ÂÆö‰πâÊó∂ÔºåÈÉΩÊ∑ªÂä†‰∫Ü json tagÔºåÂπ∂‰∏îÊ†áËÆ∞‰∏∫ omitempty„ÄÇËøôÊ†∑ÂÅöÁöÑÁõÆÁöÑÊòØÔºåÂΩìÊàë‰ª¨ÈÄâÊã©ËøáÊª§Êüê‰∫õÂ≠óÊÆµÁöÑÊó∂ÂÄôÔºåportal Â∞±‰∏ç‰ºöÂ°´ÂÖÖÂØπÂ∫îÁöÑ Schema Fields„ÄÇÂõ†Ê≠§ÔºåÊ†áËÆ∞‰∫Ü omitempty ÁöÑÂ≠óÊÆµÂú® json.Marshal ÂêéÂ∞±‰∏ç‰ºöÂá∫Áé∞Ôºå‰ªéËÄåËææÂà∞Â≠óÊÆµËøáÊª§ÁöÑÁõÆÁöÑ„ÄÇ 12345678910111213141516171819202122232425262728293031type NotiSchema struct &#123; ID string `json:"id,omitempty"` Title string `json:"title,omitempty"` Content string `json:"content,omitempty"`&#125;type UserSchema struct &#123; ID string `json:"id,omitempty"` // ÂêçÁß∞ÊòØ‰ªé User.Fullname() ÊñπÊ≥ï‰∏≠Ëé∑ÂèñÔºåÊàë‰ª¨ÊääÂÆÉÁß∞‰∏∫ User ÁöÑ‰∏Ä‰∏™Â±ûÊÄßÔºå‰ΩøÁî® `attr` Ê†áËÆ∞ Name string `json:"name,omitempty" portal:"attr:Fullname"` // nested Ë°®ÊòéËØ•Â≠óÊÆµÁöÑÂÄºÊòØ‰∏Ä‰∏™Â§çÂêàÁ±ªÂûãÔºåportal ‰ºöËá™Âä®Â∞Ü notifications Êï∞ÊçÆÂ°´ÂÖÖÂà∞ÂØπÂ∫îÁöÑ schema ÂàóË°® Notifications []*NotiSchema `json:"notifications,omitempty" portal:"nested"` AnotherNotifications []*NotiSchema `json:"another_notifications,omitempty" portal:"nested;attr:Notifications"`&#125;type TaskSchema struct &#123; ID string `json:"id,omitempty"` Title string `json:"title,omitempty"` Description string `json:"description,omitempty" portal:"meth:GetDescription"` // UserSchema is a nested schema User *UserSchema `json:"user,omitempty" portal:"nested"` // We just want `Name` field for `SimpleUser`. // Besides, the data source is the same with `UserSchema` SimpleUser *UserSchema `json:"simple_user,omitempty" portal:"nested;only:Name;attr:User"`&#125;// GetDescription Êàë‰ª¨ÂèØ‰ª•ÈÄöËøáËá™ÂÆö‰πâÊñπÊ≥ïÊù•Êèê‰æõÊÉ≥Ë¶ÅÁöÑÊï∞ÊçÆ// ‰∏Ä‰∏™Â∏∏ËßÅÁöÑÂú∫ÊôØÊòØÔºåÊàë‰ª¨ÂèØ‰ª•Âú®Ëá™ÂÆö‰πâÊñπÊ≥ï‰∏≠Ê†πÊçÆÁî®Êà∑Áä∂ÊÄÅËøîÂõû‰∏çÂêåÁöÑÊñáÊ°àfunc (ts *TaskSchema) GetDescription(model *model.TaskModel) string &#123; return "Custom description"&#125; Á¨¨‰∏âÊ≠•ÔºöÊåâÈúÄÂ∫èÂàóÂåñ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package mainimport ( "encoding/json" "github.com/ifaceless/portal")func main() &#123; // log debug info portal.SetDebug(true) // set max worker pool size portal.SetMaxPoolSize(1024) // make sure to clean up. defer portal.CleanUp() // write to a specified task schema var taskSchema schema.TaskSchema portal.Dump(&amp;taskSchema, &amp;taskModel) // data: &#123;"id":"1","title":"Finish your jobs.","description":"Custom description","user":&#123;"id":"1","name":"user:1","notifications":[&#123;"id":"0","title":"title_0","content":"content_0"&#125;],"another_notifications":[&#123;"id":"0","title":"title_0","content":"content_0"&#125;]&#125;,"simple_user":&#123;"name":"user:1"&#125;&#125; data, _ := json.Marshal(taskSchema) // select specified fields portal.Dump(&amp;taskSchema, &amp;taskModel, portal.Only("Title", "SimpleUser")) // data: &#123;"title":"Finish your jobs.","simple_user":&#123;"name":"user:1"&#125;&#125; data, _ := json.Marshal(taskSchema) // select fields with alias defined in the json tag. // actually, the default alias tag is `json`, `portal.FieldAliasMapTagName("json")` is optional. portal.Dump(&amp;taskSchema, &amp;taskModel, portal.Only("title", "SimpleUser"), portal.FieldAliasMapTagName("json")) // data: &#123;"title":"Finish your jobs.","simple_user":&#123;"name":"user:1"&#125;&#125; data, _ := json.Marshal(taskSchema) // you can keep any fields for any nested schemas // multiple fields are separated with ',' // nested fields are wrapped with '[' and ']' portal.Dump(&amp;taskSchema, &amp;taskModel, portal.Only("ID", "User[ID,Notifications[ID],AnotherNotifications[Title]]", "SimpleUser")) // data: &#123;"id":"1","user":&#123;"id":"1","notifications":[&#123;"id":"0"&#125;],"another_notifications":[&#123;"title":"title_0"&#125;]&#125;,"simple_user":&#123;"name":"user:1"&#125;&#125; data, _ := json.Marshal(taskSchema) // ignore specified fields portal.Dump(&amp;taskSchema, &amp;taskModel, portal.Exclude("Description", "ID", "User[Name,Notifications[ID,Content],AnotherNotifications], SimpleUser")) // data: &#123;"title":"Finish your jobs.","user":&#123;"id":"1","notifications":[&#123;"title":"title_0"&#125;]&#125;&#125; data, _ := json.Marshal(taskSchema) // dump multiple tasks var taskSchemas []schema.TaskSchema portal.Dump(&amp;taskSchemas, &amp;taskModels, portal.Only("ID", "Title", "User[Name]")) // data: [&#123;"id":"0","title":"Task #1","user":&#123;"name":"user:100"&#125;&#125;,&#123;"id":"1","title":"Task #2","user":&#123;"name":"user:101"&#125;&#125;] data, _ := json.Marshal(taskSchema)&#125; ‰ª•‰∏ä‰ªÖ‰ªÖÊòØ PORTAL ÁöÑ‰∏Ä‰∫õÁÆÄÂçïÂú∫ÊôØÁöÑÂ∫îÁî®ÔºåËØ¶ÁªÜÂèØ‰ª•Êü•ÁúãÂÆåÊï¥Á§∫‰æãÔºåÂú®‰ΩøÁî®ÊåáÂçó‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∫õËØ¶ÁªÜÁöÑ‰ΩøÁî®ËØ¥Êòé„ÄÇ Ê†∏ÂøÉ API123456func New(opts ...Option) (*Chell, error)func Dump(dst, src interface&#123;&#125;, opts ...Option) error func DumpWithContext(ctx context.Context, dst, src interface&#123;&#125;, opts ...Option)func SetDebug(v bool)func SetMaxPoolSize(size int)func CleanUp() ÂÖ≥‰∫éÂπ∂ÂèëÂä†ËΩΩÁöÑÁ≠ñÁï• ÂΩìÊüê‰∏™ Schema ÁªìÊûÑ‰ΩìÂ≠óÊÆµÊ†áËÆ∞‰∫Ü portal:&quot;async&quot; Ê†áÁ≠æÊó∂‰ºöÂºÇÊ≠•Â°´ÂÖÖÂ≠óÊÆµÂÄºÔºõ ÂΩìÂ∫èÂàóÂåñ Schema ÂàóË°®Êó∂Ôºå‰ºöÂàÜÊûê Schema ‰∏≠ÊúâÊó†Ê†áËÆ∞‰∫Ü async ÁöÑÂ≠óÊÆµÔºåÂ¶ÇÊûúÂ≠òÂú®ÁöÑËØùÔºåÂàô‰ΩøÁî®Âπ∂ÂèëÂ°´ÂÖÖÁ≠ñÁï•ÔºõÂê¶ÂàôÂè™Âú®ÂΩìÂâç goroutine ‰∏≠ÂÆåÊàêÂ∫èÂàóÂåñÔºõ ÂèØ‰ª•Âú® Dump Êó∂Ê∑ªÂä† portal.DisableConcurrency() Á¶ÅÁî®Âπ∂ÂèëÂ∫èÂàóÂåñÁöÑÂäüËÉΩ„ÄÇ FAQQ: ‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂÖ®Â±Ä worker pool Â≠òÂú®ÔºüA: ËÄÉËôëÂà∞Âú® Web ÊúçÂä°‰∏≠ÔºåÊØè‰∏™ËØ∑Ê±ÇËøáÊù•ÈÉΩ‰ºöÂêØÂä®‰∏Ä‰∏™Êñ∞ÁöÑ goroutine Â§ÑÁêÜ„ÄÇËÄåÂú®Â§ÑÁêÜËØ∑Ê±Ç‰∏≠ÔºåÂ¶ÇÊûú‰∏çÈôêÂà∂ PORTAL Âπ∂ÂèëÂä†ËΩΩÂ≠óÊÆµÂÄºÊó∂ÁöÑ goroutine Êï∞ÈáèÔºåÂèØËÉΩ‰ºöÂØºËá¥ÈùûÂ∏∏‰∏•ÈáçÁöÑËµÑÊ∫êÊ∂àËÄóÈóÆÈ¢ò„ÄÇÊâÄ‰ª•ËøôÈáå‰ΩøÁî®‰∫Ü ants Ê°ÜÊû∂„ÄÇ Q: ÊÄßËÉΩ v.s ÂºÄÂèëÊïàÁéáÔºüA:ÂÖ∂ÂÆûÂºïÂÖ•ËøôÁßçÊ°ÜÊû∂ÔºåÂäøÂøÖ‰ºöÂØπÊé•Âè£Â§ÑÁêÜÊó∂ÁöÑÂÜÖÂ≠òÂç†Áî®ÔºåÂ§ÑÁêÜÊÄßËÉΩ‰∫ßÁîüÂΩ±Âìç„ÄÇÂõ†‰∏∫ÂÜÖÈÉ®ÂÆûÁé∞‰∏≠‰πü‰∏çÂèØÈÅøÂÖçÂú∞Â§ßÈáè‰ΩøÁî®‰∫ÜÂèçÂ∞Ñ„ÄÇÊâÄ‰ª•ÔºåÂ¶ÇÊûú‰Ω†ËøΩÊ±ÇÁöÑÊòØÈ´òÊÄßËÉΩÁöÑËØùÔºåÈÇ£ËøòÊòØ‰∏çÊé®Ëçê‰ΩøÁî®‰∫Ü„ÄÇÂ∞±Êàë‰ª¨ÁöÑÂ∫îÁî®Âú∫ÊôØÊù•ËØ¥ÔºåÂæàÂ§öÊé•Âè£ÁöÑ QPS Âπ∂‰∏çÈ´òÔºàÂ∞§ÂÖ∂ÊòØ‰∏Ä‰∫õÂêéÂè∞Êé•Âè£ÔºâÔºå‰∏çÁÆ°ÊòØ CPU ËøòÊòØÂÜÖÂ≠òËµÑÊ∫êÈÉΩÊòØÂÖÖË∂≥ÁöÑ„ÄÇËøô‰∏™Êó∂ÂÄô‰ΩøÁî® PORTAL ÊòØÂèØ‰ª•ÊúâÊïàÊèêÈ´òÂºÄÂèëÊïàÁéáÁöÑÔºà‰∏™‰∫∫ÊÑöËßÅÔºâÔºåÊØïÁ´üÂèØ‰ª•Â∞ëÂÜô‰∏Ä‰∫õ‰ª£Á†ÅÔºåËÆ©Êú∫Âô®Âπ≤‰∫õË†¢Ê¥ªËÑèÊ¥ª„ÄÇ Q: ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÊòØÂ¶Ç‰Ωï‰ΩøÁî® portal ÁöÑÔºüÊúâ‰ªÄ‰πà‰Ωì‰ºöÔºüÂ∏¶Êù•‰∫Ü‰ªÄ‰πàÊî∂ÁõäÔºüA:ÂéÜÁªèÂ∞ÜËøë‰∏Ä‰∏™ÊúàÁöÑÂÆûÈôÖÈ°πÁõÆÂÆûË∑µÔºåportal ÁõÆÂâçÂ∑≤ÁªèË∂ã‰∫éÁ®≥ÂÆöÔºåÂπ∂‰∏î‰øÆÂ§ç‰∫ÜÂ§ßÈáèÈóÆÈ¢òÔºåÂèëÂ∏É‰∫Ü 22 ‰∏™ÁâàÊú¨„ÄÇÁõÆÂâçËØ•Â∑•ÂÖ∑ÂåÖÂ∫îÂ∫îÁî®Âú®Â§ö‰∏™Á∫ø‰∏äÊúçÂä°‰∏≠ÔºàÂåÖÊã¨ HTTP RESTful API Âíå RPC ‰∏≠ Model Âà∞ thrift ÂÆö‰πâÁ±ªÂûãÁöÑÊò†Â∞ÑÔºâÔºåÊï¥‰ΩìÊÑüÂèóÂ∞±ÊòØÂºÄÂèë‰ΩìÈ™åÊàêÂÄçÊèêÈ´òÔºåËÄå‰∏îÂ∏¶Êù•‰∫ÜÊÄßËÉΩÂΩ±ÂìçÂπ∂Ê≤°ÊúâÊúÄÂºÄÂßãËÆ§‰∏∫ÁöÑÈÇ£‰πàÂ§ß„ÄÇ ÊÄªÁªì‰∏™‰∫∫ËÆ§‰∏∫ÔºåÊ°ÜÊû∂ÁöÑÂºïÂÖ•Ê≠£ÊòØ‰∏∫‰∫ÜÊèêÈ´òÂºÄÂèëÊïàÁéáÔºåÊèêÂçáÈ°πÁõÆË¥®ÈáèÁöÑ„ÄÇÊ°ÜÊû∂Â±ÇÁöÑÊäΩË±°ÂíåÂ∞ÅË£ÖÂèØ‰ª•ËÆ©Êàë‰ª¨‰∏çÁî®ÊØèÊ¨°ÈÉΩÂú®‰∏öÂä°‰ª£Á†ÅÂ±ÇÁºñÂÜôÈáçÂ§çÊú∫Ê¢∞ÂºèÁöÑ‰ª£Á†ÅÔºåÂêåÊó∂ËÉΩÂ§ü‰øùËØÅÁºñÂÜôÊñπÂºèÁöÑ‰∏ÄËá¥ÊÄßÔºåÊèêÂçáÈ°πÁõÆÁöÑÂèØÁª¥Êä§ÊÄß„ÄÇÊâÄË∞ìÁöÑÊÄßËÉΩÈóÆÈ¢òÔºå‰πüËÆ∏Ê†πÊú¨‰∏çÊòØÈóÆÈ¢òÔºõÊâÄË∞ìÁöÑÊèêÂâç‰ºòÂåñÔºå‰πüËÆ∏Âè™ÊòØËøáÂ∫¶‰ºòÂåñ„ÄÇÊàë‰ª¨Â∫îËØ•Áî® 20% Êó∂Èó¥Ëß£ÂÜ≥ 80% ÁöÑÂ∏∏ËßÑÈóÆÈ¢òÔºåÂπ∂‰∏îÊòØÈ´òÊïàÁéáÈ´òË¥®ÈáèÁöÑÈÇ£Áßç„ÄÇËÄåÂâ©‰∏ã 20% ÁöÑÈöæÈ¢òÔºåÂÆåÂÖ®ÂèØ‰ª•Áî®Âà´ÁöÑÊñπÊ≥ïËß£ÂÜ≥„ÄÇÂàáÂãøÊú¨Êú´ÂÄíÁΩÆÔºÅ]]></content>
      <categories>
        <category>Web ÂºÄÂèë</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>ÂØπË±°Â∫èÂàóÂåñ</tag>
        <tag>Web API</tag>
        <tag>portal</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆ∫ÊñáÂ≠¶‰π†‰πã Linux Ë∞ÉÂ∫¶Âô®]]></title>
    <url>%2F2019%2F11%2F17%2Fguide-to-linux-scheduler%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄLinux Kernel Development ‰∏Ä‰π¶‰∏≠ÔºåÂÖ≥‰∫é Linux ÁöÑËøõÁ®ãË∞ÉÂ∫¶Âô®Âπ∂Ê≤°ÊúâËÆ≤Ëß£ÁöÑÂæàÊ∑±ÂÖ•ÔºåÂè™ÊòØÊèêÂà∞‰∫Ü CFS Ë∞ÉÂ∫¶Âô®ÁöÑÂü∫Êú¨ÊÄùÊÉ≥Âíå‰∏Ä‰∫õÂÆûÁé∞ÁªÜËäÇÔºõÂπ∂Ê≤°Êúâ Linux Êó©ÊúüÁöÑË∞ÉÂ∫¶Âô®‰ªãÁªçÔºå‰ª•ÂèäÊúÄËøëËøô‰∫õÂπ¥Êñ∞Â¢ûÁöÑÂú®ÂÜÖÊ†∏Ê∫êÁ†ÅÊ†ëÂ§ñÁª¥Êä§ÁöÑË∞ÉÂ∫¶Âô®ÊÄùÊÉ≥„ÄÇÊâÄ‰ª•Âú®ÁªèËøá‰∏ÄÁï™ÊêúÂØªÂêéÔºåÁúãÂà∞‰∫ÜËøôÁØáËÆ∫Êñá A complete guide to Linux process schedulingÔºåÂØπ Linux ÁöÑË∞ÉÂ∫¶Âô®ÂéÜÂè≤ËøõË°å‰∫ÜÂõûÈ°æÔºåÂπ∂‰∏îÁõ∏ÂØπÁªÜËá¥Âú∞ËÆ≤Ëß£‰∫Ü CFS Ë∞ÉÂ∫¶Âô®„ÄÇÊï¥‰ΩìÊù•ËØ¥ÔºåËôΩÁÑ∂ÊØîËæÉÂï∞Âó¶Ôºå‰ΩÜÊòØÂØπ‰∫éÊÉ≥Ë¶ÅÁü•ÈÅìÊõ¥Â§öÁªÜËäÇÁöÑÊàëÊù•ËØ¥ÈùûÂ∏∏ÈÄÇÂêàÔºåÊâÄ‰ª•Â∞±Êúâ‰∫ÜÁøªËØëÂÆÉÁöÑÂÜ≤Âä®„ÄÇÂΩìÁÑ∂ÔºåÂú®Â≠¶‰π†ËøáÁ®ã‰πüÂèÇËÄÉ‰∫ÜÂÖ∂ÂÆÉËÆ∫Êñá„ÄÇ‰∏ãÈù¢ÂºÄÂêØÂ≠¶‰π†‰πãÊóÖÂêß~ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂú® Linux ‰∏≠ÔºåÁ∫øÁ®ãÂíåËøõÁ®ãÈÉΩÊòØÁî±Âêå‰∏Ä‰∏™ÁªìÊûÑ‰ΩìÔºàtask_structÔºåÂç≥‰ªªÂä°ÊèèËø∞Á¨¶ÔºâË°®Á§∫ÁöÑÔºåÊâÄ‰ª•Êñá‰∏≠‰ºö‰∫§Âèâ‰ΩøÁî®ËøõÁ®ã„ÄÅÁ∫øÁ®ãÂíå‰ªªÂä°Á≠âÊúØËØ≠ÔºåÂèØ‰ª•Â∞ÜÂÆÉ‰ª¨ËßÜ‰ΩúÂêå‰πâËØç„ÄÇÂΩìÁÑ∂Ôºå‰πüÂèØ‰ª•Â∞ÜÁ∫øÁ®ãÔºà‰ªªÂä°ÔºâÁß∞‰∏∫ÊúÄÂ∞èÊâßË°åÂçïÂÖÉ„ÄÇ‰ΩÜ Linux ÁöÑË∞ÉÂ∫¶ÁÆóÊ≥ïÔºàÂ¶Ç CFSÔºâÂèØ‰ª•Â∫îÁî®Êõ¥Âä†ÈÄöÁî®ÁöÑË∞ÉÂ∫¶ÂçïÂÖÉÔºàÂ¶ÇÁ∫øÁ®ã„ÄÅcgroup„ÄÅÁî®Êà∑Á≠âÔºâ„ÄÇÊÄª‰πãÔºå‰∏çË¶ÅËøáÂ∫¶Á∫†ÁªìËøôÈáåÁöÑÊúØËØ≠ÔºåÈáçË¶ÅÁöÑÊòØ‰∫ÜËß£ÊØèÁßçË∞ÉÂ∫¶ÁÆóÊ≥ïÁöÑÊÄùÊÉ≥ÔºÅ ‰∏∫‰ªÄ‰πàÈúÄË¶ÅË∞ÉÂ∫¶Linux ÊòØ‰∏Ä‰∏™Â§ö‰ªªÂä°ÁöÑÊìç‰ΩúÁ≥ªÁªüÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄÂÆÉÂèØ‰ª•„ÄåÂêåÊó∂„ÄçÊâßË°åÂ§ö‰∏™‰ªªÂä°„ÄÇÂú®ÂçïÊ†∏Â§ÑÁêÜÂô®‰∏äÔºå‰ªªÊÑèÊó∂ÂàªÂè™ËÉΩÊúâ‰∏Ä‰∏™ËøõÁ®ãÂèØ‰ª•ÊâßË°åÔºàÂπ∂ÂèëÔºâÔºõËÄåÂú®Â§öÊ†∏Â§ÑÁêÜÂô®‰∏≠ÔºåÂàôÂÖÅËÆ∏‰ªªÂä°Âπ∂Ë°åÊâßË°å„ÄÇÁÑ∂ËÄåÔºå‰∏çÁÆ°ÊòØ‰ΩïÁßçÁ°¨‰ª∂Á±ªÂûãÁöÑÊú∫Âô®‰∏äÔºåÂèØËÉΩÂêåÊó∂ËøòÊúâÂæàÂ§öÂú®ÂÜÖÂ≠ò‰∏≠Êó†Ê≥ïÂæóÂà∞ÊâßË°åÁöÑËøõÁ®ãÔºåÂÆÉ‰ª¨Ê≠£Âú®Á≠âÂæÖËøêË°åÔºåÊàñËÄÖÊ≠£Âú®Áù°Áú†„ÄÇË¥üË¥£Â∞Ü CPU Êó∂Èó¥ÂàÜÈÖçÁªôËøõÁ®ãÁöÑÂÜÖÊ†∏ÁªÑ‰ª∂Â∞±ÊòØ„ÄåËøõÁ®ãË∞ÉÂ∫¶Âô®„Äç„ÄÇ Ë∞ÉÂ∫¶Âô®Ë¥üË¥£Áª¥Êä§ËøõÁ®ãË∞ÉÂ∫¶È°∫Â∫èÔºåÈÄâÊã©‰∏ã‰∏Ä‰∏™ÂæÖÊâßË°åÁöÑ‰ªªÂä°„ÄÇÂ¶ÇÂêåÂ§öÊï∞ÂÖ∂ÂÆÉÁöÑÁé∞‰ª£Êìç‰ΩúÁ≥ªÁªüÔºåLinux ÂÆûÁé∞‰∫ÜÊä¢Âç†ÂºèÂ§ö‰ªªÂä°Êú∫Âà∂„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåË∞ÉÂ∫¶Âô®ÂèØ‰ª•ÈöèÊó∂ÂÜ≥ÂÆö‰ªªÊÑèËøõÁ®ãÂÅúÊ≠¢ËøêË°åÔºåËÄåËÆ©ÂÖ∂ÂÆÉËøõÁ®ãËé∑Âæó CPU ËµÑÊ∫ê„ÄÇËøôÁßçËøùËÉåÊ≠£Âú®ËøêË°åÁöÑËøõÁ®ãÊÑèÊÑøÔºåÂÅúÊ≠¢ÂÖ∂ËøêË°åÁöÑË°å‰∏∫Â∞±ÊòØÊâÄË∞ìÁöÑ„ÄåÊä¢Âç†„Äç„ÄÇÊä¢Âç†ÈÄöÂ∏∏ÂèØ‰ª•Âú®ÂÆöÊó∂Âô®‰∏≠Êñ≠Êó∂ÂèëÁîüÔºåÂΩì‰∏≠Êñ≠ÂèëÁîüÊó∂ÔºåË∞ÉÂ∫¶Âô®‰ºöÊ£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÂàáÊç¢‰ªªÂä°ÔºåÂ¶ÇÊûúÊòØÔºåÂàô‰ºöÂÆåÊàêËøõÁ®ã‰∏ä‰∏ãÊñáÂàáÊç¢„ÄÇÊØè‰∏™ËøõÁ®ãÊâÄËé∑ÂæóÁöÑËøêË°åÊó∂Èó¥Âè´ÂÅöËøõÁ®ãÁöÑÊó∂Èó¥ÁâáÔºàtimesliceÔºâ„ÄÇ ‰ªªÂä°ÈÄöÂ∏∏ÂèØ‰ª•Âå∫ÂàÜ‰∏∫‰∫§‰∫íÂºèÔºàI/O ÂØÜÈõÜÂûãÔºâÂíåÈùû‰∫§‰∫íÂºèÔºàCPU ÂØÜÈõÜÂûãÔºâ‰ªªÂä°„ÄÇ‰∫§‰∫íÂºè‰ªªÂä°ÈÄöÂ∏∏‰ºöÈáçÂ∫¶‰æùËµñ I/O Êìç‰ΩúÔºàÂ¶Ç GUI Â∫îÁî®ÔºâÔºåÂπ∂‰∏îÈÄöÂ∏∏Áî®‰∏çÂÆåÂàÜÈÖçÁªôÂÆÉÁöÑÊó∂Èó¥Áâá„ÄÇËÄåÈùû‰∫§‰∫íÂºè‰ªªÂä°ÔºàÂ¶ÇÊï∞Â≠¶ËøêÁÆóÔºâÂàôÈúÄË¶Å‰ΩøÁî®Êõ¥Â§öÁöÑ CPU ËµÑÊ∫ê„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏‰ºöÁî®ÂÆåËá™Â∑±ÁöÑÊó∂Èó¥Áâá‰πãÂêéË¢´Êä¢Âç†ÔºåÂπ∂‰∏ç‰ºöË¢´ I/O ËØ∑Ê±ÇÈ¢ëÁπÅÈòªÂ°û„ÄÇ ÂΩìÁÑ∂ÔºåÁé∞ÂÆû‰∏≠ÁöÑÂ∫îÁî®Á®ãÂ∫èÂèØËÉΩÂêåÊó∂ÂåÖÂê´‰∏äËø∞‰∏§ÁßçÂàÜÁ±ª‰ªªÂä°„ÄÇ‰æãÂ¶ÇÔºåÊñáÊú¨ÁºñËæëÂô®ÔºåÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÂÆÉ‰ºöÁ≠âÂæÖÁî®Êà∑ËæìÂÖ•Ôºå‰ΩÜÊòØÂú®ÊâßË°åÊãºÂÜôÊ£ÄÊü•Êó∂‰πü‰ºöÈúÄË¶ÅÂç†Áî®Â§ßÈáè CPU ËµÑÊ∫ê„ÄÇ Êìç‰ΩúÁ≥ªÁªüÁöÑË∞ÉÂ∫¶Á≠ñÁï•Â∞±ÈúÄË¶ÅÂùáË°°Ëøô‰∏§ÁßçÁ±ªÂûãÁöÑ‰ªªÂä°ÔºåÂπ∂‰∏î‰øùËØÅÊØè‰∏™‰ªªÂä°ÈÉΩËÉΩÂæóÂà∞Ë∂≥Â§üÁöÑÊâßË°åËµÑÊ∫êÔºåËÄå‰∏ç‰ºöÂØπÂÖ∂ÂÆÉ‰ªªÂä°‰∫ßÁîüÊòéÊòæÁöÑÊÄßËÉΩÂΩ±Âìç„ÄÇ Linux ‰∏∫‰∫Ü‰øùËØÅ CPU Âà©Áî®ÁéáÊúÄÂ§ßÂåñÔºåÂêåÊó∂ÂèàËÉΩ‰øùËØÅÊõ¥Âø´ÁöÑÂìçÂ∫îÊó∂Èó¥ÔºåÂÄæÂêë‰∫é‰∏∫Èùû‰∫§‰∫íÂºè‰ªªÂä°ÂàÜÈÖçÊõ¥Â§ßÁöÑÊó∂Èó¥ÁâáÔºå‰ΩÜÊòØ‰ª•ËæÉ‰ΩéÁöÑÈ¢ëÁéáËøêË°åÂÆÉ‰ª¨ÔºõËÄåÈíàÂØπ I/O ÂØÜÈõÜÂûã‰ªªÂä°ÔºåÂàô‰ºöÂú®ËæÉÁü≠Âë®ÊúüÂÜÖÈ¢ëÁπÅÂú∞ÊâßË°å„ÄÇ Ë∞ÉÂ∫¶ÊúâÂÖ≥ÁöÑËøõÁ®ãÊèèËø∞Á¨¶ËøõÁ®ãÊèèËø∞Á¨¶Ôºàtask_structÔºâ‰∏≠ÁöÑÂæàÂ§öÂ≠óÊÆµ‰ºöË¢´Ë∞ÉÂ∫¶Êú∫Âà∂Áõ¥Êé•‰ΩøÁî®„ÄÇ‰ª•‰∏ã‰ªÖÂàóÂá∫‰∏Ä‰∫õÊ†∏ÂøÉÁöÑÈÉ®ÂàÜÔºåÂπ∂Âú®ÂêéÊñáËØ¶ÁªÜËÆ®ËÆ∫„ÄÇ1234567891011struct task_struct &#123; int prio, static_prio, normal_prio; unsigned int rt_priority; const struct sched_class *sched_class; struct sched_entity se; struct sched_rt_entity rt; ‚Ä¶ unsigned int policy; cpumask_t cpus_allowed; ‚Ä¶&#125;; ÂÖ≥‰∫éËøô‰∫õÂ≠óÊÆµÁöÑËØ¥ÊòéÂ¶Ç‰∏ãÔºö prio Ë°®Á§∫ËøõÁ®ãÁöÑ‰ºòÂÖàÁ∫ß„ÄÇËøõÁ®ãËøêË°åÊó∂Èó¥ÔºåÊä¢Âç†È¢ëÁéáÈÉΩ‰æùËµñ‰∫éËøô‰∫õÂÄº„ÄÇrt_priority ÂàôÁî®‰∫éÂÆûÊó∂Ôºàreal-timeÔºâ‰ªªÂä°Ôºõ sched_class Ë°®Á§∫ËøõÁ®ã‰Ωç‰∫éÂì™‰∏™Ë∞ÉÂ∫¶Á±ªÔºõ sched_entity ÁöÑÊÑè‰πâÊØîËæÉÁâπÊÆä„ÄÇÈÄöÂ∏∏Êää‰∏Ä‰∏™Á∫øÁ®ãÔºàLinux ‰∏≠ÁöÑËøõÁ®ã„ÄÅ‰ªªÂä°Âêå‰πâËØçÔºâÂè´‰ΩúÊúÄÂ∞èË∞ÉÂ∫¶ÂçïÂÖÉ„ÄÇ‰ΩÜÊòØ Linux Ë∞ÉÂ∫¶Âô®‰∏ç‰ªÖ‰ªÖÂè™ËÉΩÂ§üË∞ÉÂ∫¶Âçï‰∏™‰ªªÂä°ÔºåËÄå‰∏îËøòÂèØ‰ª•Â∞Ü‰∏ÄÁªÑËøõÁ®ãÔºåÁîöËá≥Â±û‰∫éÊüê‰∏™Áî®Êà∑ÁöÑÊâÄÊúâËøõÁ®ã‰Ωú‰∏∫Êï¥‰ΩìËøõË°åË∞ÉÂ∫¶„ÄÇËøôÂ∞±ÂÖÅËÆ∏Êàë‰ª¨ÂÆûÁé∞ÁªÑË∞ÉÂ∫¶Ôºå‰ªéËÄåÂ∞Ü CPU Êó∂Èó¥ÂÖàÂàÜÈÖçÂà∞ËøõÁ®ãÁªÑÔºåÂÜçÂú®ÁªÑÂÜÖÂàÜÈÖçÂà∞Âçï‰∏™Á∫øÁ®ã„ÄÇÂΩìÂºïÂÖ•ËøôÈ°πÂäüËÉΩÂêéÔºåÂèØ‰ª•Â§ßÂπÖÂ∫¶ÊèêÂçáÊ°åÈù¢Á≥ªÁªüÁöÑ‰∫§‰∫íÊÄß„ÄÇÊØîÂ¶ÇÔºåÂèØ‰ª•Â∞ÜÁºñËØë‰ªªÂä°ËÅöÈõÜÊàê‰∏Ä‰∏™ÁªÑÔºåÁÑ∂ÂêéËøõË°åË∞ÉÂ∫¶Ôºå‰ªéËÄå‰∏ç‰ºöÂØπ‰∫§‰∫íÊÄß‰∫ßÁîüÊòéÊòæÁöÑÂΩ±Âìç„ÄÇËøôÈáåÂÜçÊ¨°Âº∫Ë∞É‰∏ãÔºå**Linux Ë∞ÉÂ∫¶Âô®‰∏ç‰ªÖ‰ªÖËÉΩÁõ¥Êé•Ë∞ÉÂ∫¶ËøõÁ®ãÔºå‰πüËÉΩÂØπË∞ÉÂ∫¶ÂçïÂÖÉÔºàschedulable entitiesÔºâËøõË°åË∞ÉÂ∫¶„ÄÇËøôÊ†∑ÁöÑË∞ÉÂ∫¶ÂçïÂÖÉÊ≠£ÊòØÁî® struct sched_entity Êù•Ë°®Á§∫ÁöÑ„ÄÇÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÂÆÉÂπ∂Èùû‰∏Ä‰∏™ÊåáÈíàÔºåËÄåÊòØÁõ¥Êé•ÂµåÂ•óÂú®ËøõÁ®ãÊèèËø∞Á¨¶‰∏≠ÁöÑ„ÄÇÂΩìÁÑ∂ÔºåÂêéÈù¢ÁöÑË∞àËÆ∫Â∞ÜËÅöÁÑ¶Âú®ÂçïËøõÁ®ãË∞ÉÂ∫¶ËøôÁßçÁÆÄÂçïÂú∫ÊôØ„ÄÇÁî±‰∫éË∞ÉÂ∫¶Âô®ÊòØÈù¢ÂêëË∞ÉÂ∫¶ÂçïÂÖÉËÆæËÆ°ÁöÑÔºåÊâÄ‰ª•ÂÆÉ‰ºöÂ∞ÜÂçï‰∏™ËøõÁ®ã‰πüËßÜ‰∏∫Ë∞ÉÂ∫¶ÂçïÂÖÉÔºåÂõ†Ê≠§‰ºö‰ΩøÁî® sched_entity ÁªìÊûÑ‰ΩìÊìç‰ΩúÂÆÉ‰ª¨„ÄÇsched_rt_entity ÂàôÊòØÂÆûÊó∂Ë∞ÉÂ∫¶Êó∂‰ΩøÁî®ÁöÑ„ÄÇ policy Ë°®Êòé‰ªªÂä°ÁöÑË∞ÉÂ∫¶Á≠ñÁï•ÔºöÈÄöÂ∏∏ÊÑèÂë≥ÁùÄÈíàÂØπÊüê‰∫õÁâπÂÆöÁöÑËøõÁ®ãÁªÑÔºàÂ¶ÇÈúÄË¶ÅÊõ¥ÈïøÊó∂Èó¥ÁâáÔºåÊõ¥È´ò‰ºòÂÖàÁ∫ßÁ≠âÔºâÂ∫îÁî®ÁâπÊÆäÁöÑË∞ÉÂ∫¶ÂÜ≥Á≠ñ„ÄÇLinux ÂÜÖÊ†∏ÁõÆÂâçÊîØÊåÅÁöÑË∞ÉÂ∫¶Á≠ñÁï•Â¶Ç‰∏ãÔºö SCHED_NORMALÔºöÊôÆÈÄö‰ªªÂä°‰ΩøÁî®ÁöÑË∞ÉÂ∫¶Á≠ñÁï•Ôºõ SCHED_BATCHÔºö‰∏çÂÉèÊôÆÈÄö‰ªªÂä°ÈÇ£Ê†∑Ë¢´È¢ëÁπÅÊä¢Âç†ÔºåÂèØÂÖÅËÆ∏‰ªªÂä°ËøêË°åÂ∞ΩÂèØËÉΩÈïøÁöÑÊó∂Èó¥Ôºå‰ªéËÄåÊõ¥Â•ΩÂú∞Âà©Áî®ÁºìÂ≠òÔºå‰ΩÜÊòØ‰ª£‰ª∑Ëá™ÁÑ∂ÊòØÊçüÂ§±‰∫§‰∫íÊÄßËÉΩ„ÄÇËøôÁßçÈùûÂ∏∏ÈÄÇÂêàÊâπÈáè‰ªªÂä°Ë∞ÉÂ∫¶ÔºàÊâπÈáèÁöÑ CPU ÂØÜÈõÜÂûã‰ªªÂä°Ôºâ; SCHED_IDLEÔºöÂÆÉË¶ÅÊØî nice 19 ÁöÑ‰ªªÂä°‰ºòÂÖàÁ∫ßËøòË¶Å‰ΩéÔºå‰ΩÜÂÆÉÂπ∂ÈùûÁúüÁöÑÁ©∫Èó≤‰ªªÂä°; SCHED_FIFO Âíå SCHED_RR ÊòØËΩØÂÆûÊó∂ËøõÁ®ãË∞ÉÂ∫¶Á≠ñÁï•„ÄÇÂÆÉ‰ª¨ÊòØÁî± POSIX Ê†áÂáÜÂÆö‰πâÁöÑÔºåÁî± &lt;kernel/sched/rt.c&gt; ÈáåÈù¢ÂÆö‰πâÁöÑÂÆûÊó∂Ë∞ÉÂ∫¶Âô®Ë¥üË¥£Ë∞ÉÂ∫¶„ÄÇRR ÂÆûÁé∞ÁöÑÊòØÂ∏¶ÊúâÂõ∫ÂÆöÊó∂Èó¥ÁâáÁöÑËΩÆËΩ¨Ë∞ÉÂ∫¶ÊñπÂºèÔºõSCHED_FIFO Âàô‰ΩøÁî®ÁöÑÊòØÂÖàËøõÂÖàÂá∫ÁöÑÈòüÂàóÊú∫Âà∂„ÄÇ cpus_allowedÔºöÁî®Êù•Ë°®Á§∫‰ªªÂä°ÁöÑ CPU ‰∫≤ÂíåÊÄß„ÄÇÁî®Êà∑Á©∫Èó¥ÂèØ‰ª•ÈÄöËøá sched_setaffinity Á≥ªÁªüË∞ÉÁî®Êù•ËÆæÁΩÆ„ÄÇ ‰ºòÂÖàÁ∫ß PriorityËøõÁ®ã‰ºòÂÖàÁ∫ßÊôÆÈÄö‰ªªÂä°‰ºòÂÖàÁ∫ßÊâÄÊúâÁöÑÁ±ª Unix Êìç‰ΩúÁ≥ªÁªüÈÉΩÂÆûÁé∞‰∫Ü‰ºòÂÖàÁ∫ßË∞ÉÂ∫¶Êú∫Âà∂„ÄÇÂÆÉÁöÑÊ†∏ÂøÉÊÄùÊÉ≥Â∞±ÊòØÁªô‰ªªÂä°ËÆæÂÆö‰∏Ä‰∏™ÂÄºÔºåÁÑ∂ÂêéÈÄöËøáËØ•ÂÄºÂÜ≥ÂÆö‰ªªÂä°ÁöÑÈáçË¶ÅÁ®ãÂ∫¶„ÄÇÂ¶ÇÊûú‰ªªÂä°ÁöÑ‰ºòÂÖàÁ∫ß‰∏ÄËá¥ÔºåÂàô‰∏ÄÊ¨°ÈáçÂ§çËøêË°åÂÆÉ‰ª¨„ÄÇÂú® Linux ‰∏≠ÔºåÊØè‰∏Ä‰∏™ÊôÆÈÄö‰ªªÂä°ÈÉΩË¢´Ëµã‰∫à‰∫Ü‰∏Ä‰∏™ nice ÂÄºÔºåÂÆÉÁöÑËåÉÂõ¥ÊòØ -20 Âà∞ +19Ôºå‰ªªÂä°ÈªòËÆ§ nice ÂÄºÊòØ 0„ÄÇ nice ÂÄºË∂äÈ´òÔºå‰ªªÂä°‰ºòÂÖàÁ∫ßË∂ä‰ΩéÔºàit‚Äôs nice to othersÔºâ„ÄÇLinux ‰∏≠ÂèØ‰ª•‰ΩøÁî® nice(int increment) Á≥ªÁªüË∞ÉÁî®Êù•‰øÆÊîπÂΩìÂâçËøõÁ®ãÁöÑ‰ºòÂÖàÁ∫ß„ÄÇËØ•Á≥ªÁªüË∞ÉÁî®ÁöÑÂÆûÁé∞‰Ωç‰∫é &lt;kernel/shced/core.c&gt; ‰∏≠„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÁî®Êà∑Âè™ËÉΩ‰∏∫ËØ•Áî®Êà∑ÂêØÂä®ÁöÑËøõÁ®ãÂ¢ûÂä† nice ÂÄºÔºàÂç≥Èôç‰Ωé‰ºòÂÖàÁ∫ßÔºâ„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂ¢ûÂä†‰ºòÂÖàÁ∫ßÔºàÂáèÂ∞ë nice ÂÄºÔºâÔºåÊàñËÄÖ‰øÆÊîπÂÖ∂ÂÆÉÁî®Êà∑ËøõÁ®ã‰ºòÂÖàÁ∫ßÔºåÂàôÂøÖÈ°ª‰ª• root Ë∫´‰ªΩÊìç‰Ωú„ÄÇ ÂÆûÊó∂‰ªªÂä°‰ºòÂÖàÁ∫ßÂú® Linux ‰∏≠ÔºåÈô§‰∫ÜÊôÆÈÄö‰ªªÂä°Â§ñÔºåËøòÊúâ‰∏ÄÁ±ª‰ªªÂä°Â±û‰∫éÂÆûÊó∂‰ªªÂä°„ÄÇÂÆûÊó∂‰ªªÂä°ÊòØÁ°Æ‰øùÂÆÉ‰ª¨ËÉΩÂ§üÂú®‰∏ÄÂÆöÊó∂Èó¥ËåÉÂõ¥ÂÜÖÊâßË°åÁöÑ‰ªªÂä°ÔºåÊúâ‰∏§Á±ªÂÆûÊó∂‰ªªÂä°ÔºåÂàó‰∏æÂ¶Ç‰∏ãÔºö Á°¨ÂÆûÊó∂‰ªªÂä°Ôºö‰ºöÊúâ‰∏•Ê†ºÁöÑÊó∂Èó¥ÈôêÂà∂Ôºå‰ªªÂä°ÂøÖÈ°ªÂú®Êó∂ÈôêÂÜÖÂÆåÊàê„ÄÇÊØîÂ¶ÇÁõ¥ÂçáÊú∫ÁöÑÈ£ûÊéßÁ≥ªÁªüÔºåÂ∞±ÈúÄË¶ÅÂèäÊó∂ÂìçÂ∫îÈ©æÈ©∂ÂëòÁöÑÊìçÊéßÔºåÂπ∂ÂÅöÂá∫È¢ÑÊúüÁöÑÂä®‰Ωú„ÄÇÁÑ∂ËÄåÔºåLinux Êú¨Ë∫´Âπ∂‰∏çÊîØÊåÅÁ°¨ÂÆûÊó∂‰ªªÂä°Ôºå‰ΩÜÊòØÊúâ‰∏Ä‰∫õÂü∫‰∫éÂÆÉ‰øÆÊîπÁöÑÁâàÊú¨ÔºåÂ¶Ç RTLinuxÔºàÂÆÉ‰ª¨ÈÄöÂ∏∏Ë¢´Áß∞‰∏∫ RTOSÔºâÂàôÊòØÊîØÊåÅÁ°¨ÂÆûÊó∂Ë∞ÉÂ∫¶ÁöÑ„ÄÇ ËΩØÂÆûÊó∂‰ªªÂä°ÔºöËΩØÂÆûÊó∂‰ªªÂä°ÂÖ∂ÂÆû‰πü‰ºöÊúâÊó∂Èó¥ÈôêÂà∂Ôºå‰ΩÜ‰∏çÊòØÈÇ£‰πà‰∏•Ê†º„ÄÇ‰πüÂ∞±ÊòØËØ¥Ôºå‰ªªÂä°Êôö‰∏ÄÁÇπËøêË°å‰ªªÂä°ÔºåÂπ∂‰∏ç‰ºöÈÄ†Êàê‰∏çÂèØÊåΩÂõûÁöÑÁÅæÈöæÊÄß‰∫ãÊïÖ„ÄÇÂÆûË∑µ‰∏≠ÔºåËΩØÂÆûÊó∂‰ªªÂä°‰ºöÊèê‰æõ‰∏ÄÂÆöÁöÑÊó∂Èó¥ÈôêÂà∂‰øùÈöúÔºå‰ΩÜÊòØ‰∏çË¶ÅËøáÂ∫¶‰æùËµñËøôÁßçÁâπÊÄß„ÄÇ‰æãÂ¶ÇÔºåVOIP ËΩØ‰ª∂‰ºö‰ΩøÁî®ËΩØÂÆûÊó∂‰øùÈöúÁöÑÂçèËÆÆ‰º†Êù•ÈÄÅÈü≥ËßÜÈ¢ë‰ø°Âè∑Ôºå‰ΩÜÊòØÂç≥‰æøÂõ†‰∏∫Êìç‰ΩúÁ≥ªÁªüË¥üËΩΩËøáÈ´òÔºåËÄå‰∫ßÁîü‰∏ÄÁÇπÂª∂ËøüÔºå‰πü‰∏ç‰ºöÈÄ†ÊàêÂæàÂ§ßÂΩ±Âìç„ÄÇÊó†ËÆ∫Â¶Ç‰ΩïÔºåËΩØÂÆûÊó∂‰ªªÂä°ÊÄª‰ºöÊØîÊôÆÈÄö‰ªªÂä°ÁöÑ‰ºòÂÖàÁ∫ßÊõ¥È´ò„ÄÇ Linux ‰∏≠ÂÆûÊó∂‰ªªÂä°ÁöÑ‰ºòÂÖàÁ∫ßËåÉÂõ¥ÊòØ 0~99Ôºå‰ΩÜÊòØÊúâË∂£ÁöÑÊòØÔºåÂÆÉÂíå nice ÂÄºÁöÑ‰ΩúÁî®ÂàöÂ•ΩÁõ∏ÂèçÔºåËøôÈáåÁöÑ‰ºòÂÖàÁ∫ßÂÄºË∂äÂ§ßÔºåÂ∞±ÊÑèÂë≥ÁùÄ‰ºòÂÖàÁ∫ßË∂äÈ´ò„ÄÇ Á±ª‰ººÂÖ∂ÂÆÉÁöÑ Unix Á≥ªÁªüÔºåLinux ‰πüÊòØÂü∫‰∫é POSIX 1b Ê†áÂáÜÂÆö‰πâÁöÑ „ÄåReal-time Extensions„ÄçÂÆûÁé∞ÂÆûÊó∂‰ºòÂÖàÁ∫ß„ÄÇÂèØ‰ª•ÈÄöËøáÂ¶Ç‰∏ãÁöÑÂëΩ‰ª§Êü•ÁúãÁ≥ªÁªü‰∏≠ÁöÑÂÆûÊó∂‰ªªÂä°Ôºö 1$ ps -eo pid, rtprio, cmd ‰πüÂèØÈÄöËøá chrt -p pid Êü•ÁúãÂçï‰∏™ËøõÁ®ãÁöÑËØ¶ÊÉÖ„ÄÇLinux ‰∏≠ÂèØ‰ª•ÈÄöËøá chrt -p prio pid Êõ¥ÊîπÂÆûÊó∂‰ªªÂä°‰ºòÂÖàÁ∫ß„ÄÇËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂ¶ÇÊûúÊìç‰ΩúÁöÑÊòØ‰∏Ä‰∏™Á≥ªÁªüËøõÁ®ãÔºàÈÄöÂ∏∏Âπ∂‰∏ç‰ºöÂ∞ÜÊôÆÈÄöÁî®Êà∑ÁöÑËøõÁ®ãËÆæÁΩÆ‰∏∫ÂÆûÊó∂ÁöÑÔºâÔºåÂàôÂøÖÈ°ªÊúâ root ÊùÉÈôêÊâçÂèØ‰ª•‰øÆÊîπÂÆûÊó∂‰ºòÂÖàÁ∫ß„ÄÇ ÂÜÖÊ†∏ËßÜËßí‰∏ãÁöÑËøõÁ®ã‰ºòÂÖàÁ∫ßÂÆûÊó∂‰∏äÔºåÂÜÖÊ†∏ÁúãÂà∞ÁöÑ‰ªªÂä°‰ºòÂÖàÁ∫ßÂíåÁî®Êà∑ÁúãÂà∞ÁöÑÂπ∂‰∏çÁõ∏ÂêåÔºåÂú®ËÆ°ÁÆóÂíåÁÆ°ÁêÜ‰ºòÂÖàÁ∫ßÊó∂‰πüÈúÄË¶ÅËÄÉËôëÂæàÂ§öÊñπÈù¢„ÄÇLinux ÂÜÖÊ†∏‰∏≠‰ΩøÁî® 0~139 Ë°®Á§∫‰ªªÂä°ÁöÑ‰ºòÂÖàÁ∫ßÔºåÂπ∂‰∏îÔºåÂÄºË∂äÂ∞èÔºå‰ºòÂÖàÁ∫ßË∂äÈ´òÔºàÊ≥®ÊÑèÂíåÁî®Êà∑Á©∫Èó¥ÁöÑÂå∫Âà´Ôºâ„ÄÇÂÖ∂‰∏≠ 0~99 ‰øùÁïôÁªôÂÆûÊó∂ËøõÁ®ãÔºå100~139ÔºàÊò†Â∞ÑÊàê nice ÂÄºÂ∞±ÊòØ -20~19Ôºâ‰øùÁïôÁªôÊôÆÈÄöËøõÁ®ã„ÄÇ Êàë‰ª¨ÂèØ‰ª•Âú® &lt;include/linux/sched/prio.h&gt; Â§¥Êñá‰ª∂‰∏≠ÁúãÂà∞ÂÜÖÊ†∏Ë°®Á§∫ËøõÁ®ã‰ºòÂÖàÁ∫ßÁöÑÂçï‰ΩçÔºàscaleÔºâÂíåÂÆèÂÆö‰πâÔºàmacrosÔºâÔºåÂÆÉ‰ª¨Áî®Êù•Â∞ÜÁî®Êà∑Á©∫Èó¥‰ºòÂÖàÁ∫ßÊò†Â∞ÑÂà∞Âà∞ÂÜÖÊ†∏Á©∫Èó¥„ÄÇ1234567891011121314151617181920212223#define MAX_NICE 19#define MIN_NICE -20#define NICE_WIDTH (MAX_NICE - MIN_NICE + 1)‚Ä¶#define MAX_USER_RT_PRIO 100#define MAX_RT_PRIO MAX_USER_RT_PRIO#define MAX_PRIO (MAX_RT_PRIO + NICE_WIDTH)#define DEFAULT_PRIO (MAX_RT_PRIO + NICE_WIDTH / 2)/** Convert user-nice values [ -20 ... 0 ... 19 ]* to static priority [ MAX_RT_PRIO..MAX_PRIO-1 ],* and back.*/#define NICE_TO_PRIO(nice) ((nice) + DEFAULT_PRIO)#define PRIO_TO_NICE(prio) ((prio) - DEFAULT_PRIO)/** 'User priority' is the nice value converted to something we* can work with better when scaling various scheduler parameters,* it's a [ 0 ... 39 ] range.*/#define USER_PRIO(p) ((p)-MAX_RT_PRIO)#define TASK_USER_PRIO(p) USER_PRIO((p)-&gt;static_prio)#define MAX_USER_PRIO (USER_PRIO(MAX_PRIO)) ‰ºòÂÖàÁ∫ßËÆ°ÁÆóÂú® task_struct ‰∏≠ÊúâÂá†‰∏™Â≠óÊÆµÁî®Êù•Ë°®Á§∫ËøõÁ®ã‰ºòÂÖàÁ∫ßÔºö12int prio, static_prio, normal_prio;unsigned int rt_priority; static_prio ÊòØÁî±Áî®Êà∑ÊàñÁ≥ªÁªüËÆæÂÆöÁöÑ„ÄåÈùôÊÄÅ„Äç‰ºòÂÖàÁ∫ßÊò†Â∞ÑÊàêÂÜÖÊ†∏Ë°®Á§∫ÁöÑ‰ºòÂÖàÁ∫ßÔºö1p-&gt;static_prio = NICE_TO_PRIO(nice_value); normal_prio Â≠òÊîæÁöÑÊòØÂü∫‰∫é static_prio ÂíåËøõÁ®ãË∞ÉÂ∫¶Á≠ñÁï•ÔºàÂÆûÊó∂ÊàñÊôÆÈÄöÔºâÂÜ≥ÂÆöÁöÑ‰ºòÂÖàÁ∫ßÔºåÁõ∏ÂêåÁöÑÈùôÊÄÅ‰ºòÂÖàÁ∫ßÔºåÂú®‰∏çÂêåÁöÑË∞ÉÂ∫¶Á≠ñÁï•‰∏ãÔºåÂæóÂà∞ÁöÑÊ≠£Â∏∏‰ºòÂÖàÁ∫ßÊòØ‰∏çÂêåÁöÑ„ÄÇÂ≠êËøõÁ®ãÂú® fork Êó∂Ôºå‰ºöÁªßÊâøÁà∂ËøõÁ®ãÁöÑ normal_prio„ÄÇ prio ÂàôÊòØ„ÄåÂä®ÊÄÅ‰ºòÂÖàÁ∫ß„ÄçÔºåÂú®Êüê‰∫õÂú∫ÊôØ‰∏ã‰ºòÂÖàÁ∫ß‰ºöÂèëÁîüÂèòÂä®„ÄÇ‰∏ÄÁßçÂú∫ÊôØÂ∞±ÊòØÔºåÁ≥ªÁªüÂèØ‰ª•ÈÄöËøáÁªôÊüê‰∏™‰ªªÂä°‰ºòÂÖàÁ∫ßÊèêÂçá‰∏ÄÊÆµÊó∂Èó¥Ôºå‰ªéËÄåÊä¢Âç†ÂÖ∂ÂÆÉÈ´ò‰ºòÂÖàÁ∫ß‰ªªÂä°Ôºå‰∏ÄÊó¶ static_prio Á°ÆÂÆöÔºåprio Â≠óÊÆµÂ∞±ÂèØ‰ª•ÈÄöËøá‰∏ãÈù¢ÁöÑÊñπÂºèËÆ°ÁÆóÔºö12345678910111213141516171819202122232425262728293031p-&gt;prio = effective_prio(p);// kernel/sched/core.c ‰∏≠ÂÆö‰πâ‰∫ÜËÆ°ÁÆóÊñπÊ≥ïstatic int effective_prio(struct task_struct *p)&#123; p-&gt;normal_prio = normal_prio(p); /* * If we are RT tasks or we were boosted to RT priority, * keep the priority unchanged. Otherwise, update priority * to the normal priority: */ if (!rt_prio(p-&gt;prio)) return p-&gt;normal_prio; return p-&gt;prio;&#125;static inline int normal_prio(struct task_struct *p)&#123; int prio; if (task_has_dl_policy(p)) prio = MAX_DL_PRIO-1; else if (task_has_rt_policy(p)) prio = MAX_RT_PRIO-1 - p-&gt;rt_priority; else prio = __normal_prio(p); return prio;&#125;static inline int __normal_prio(struct task_struct *p)&#123; return p-&gt;static_prio;&#125; Ë¥üËΩΩÊùÉÈáçÔºàLoad WeightsÔºâ‰ºòÂÖàÁ∫ß‰ºöËÆ©‰∏Ä‰∫õ‰ªªÂä°ÊØîÂà´ÁöÑ‰ªªÂä°Êõ¥ÈáçË¶ÅÔºåÂõ†Ê≠§‰πü‰ºöËé∑ÂæóÊõ¥Â§öÁöÑ CPU ‰ΩøÁî®Êó∂Èó¥„ÄÇnice ÂÄºÂíåÊó∂Èó¥ÁâáÁöÑÊØî‰æãÂÖ≥Á≥ªÊòØÈÄöËøáË¥üËΩΩÊùÉÈáçÔºàLoad WeightsÔºâËøõË°åÁª¥Êä§ÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•Âú® task_struct-&gt;se.load ‰∏≠ÁúãÂà∞ËøõÁ®ãÁöÑÊùÉÈáçÔºåÂÆö‰πâÂ¶Ç‰∏ãÔºö12345678struct sched_entity &#123; struct load_weight load; /* for load-balancing */ ‚Ä¶&#125;struct load_weight &#123; unsigned long weight; u32 inv_weight;&#125;; ‰∏∫‰∫ÜËÆ© nice ÂÄºÁöÑÂèòÂåñÂèçÊò†Âà∞ CPU Êó∂Èó¥ÂèòÂåñÁâá‰∏äÊõ¥Âä†ÂêàÁêÜÔºåLinux ÂÜÖÊ†∏‰∏≠ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Êï∞ÁªÑÔºåÁî®‰∫éÊò†Â∞Ñ nice ÂÄºÂà∞ÊùÉÈáçÔºö12345678910static const int prio_to_weight[40] = &#123; /* -20 */ 88761, 71755, 56483, 46273, 36291, /* -15 */ 29154, 23254, 18705, 14949, 11916, /* -10 */ 9548, 7620, 6100, 4904, 3906, /* -5 */ 3121, 2501, 1991, 1586, 1277, /* 0 */ 1024, 820, 655, 526, 423, /* 5 */ 335, 272, 215, 172, 137, /* 10 */ 110, 87, 70, 56, 45, /* 15 */ 36, 29, 23, 18, 15,&#125;; Êù•ÁúãÁúãÂ¶Ç‰Ωï‰ΩøÁî®‰∏äÈù¢ÁöÑÊò†Â∞ÑË°®ÔºåÂÅáËÆæÊúâ‰∏§‰∏™‰ºòÂÖàÁ∫ßÈÉΩÊòØ 0 ÁöÑ‰ªªÂä°ÔºåÊØè‰∏™ÈÉΩËÉΩËé∑Âæó 50% ÁöÑ CPU Êó∂Èó¥Ôºà1024 / (1024 + 1024) = 0.5Ôºâ„ÄÇÂ¶ÇÊûúÁ™ÅÁÑ∂ÁªôÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™‰ªªÂä°‰ºòÂÖàÁ∫ßÊèêÂçá‰∫Ü 1 Ôºànice ÂÄº -1Ôºâ„ÄÇÊ≠§Êó∂Ôºå‰∏Ä‰∏™‰ªªÂä°Â∫îËØ•‰ºöËé∑ÂæóÈ¢ùÂ§ñ 10% Â∑¶Âè≥ÁöÑ CPU Êó∂Èó¥ÔºåËÄåÂè¶‰∏Ä‰∏™Âàô‰ºöÂáèÂ∞ë 10% CPU Êó∂Èó¥„ÄÇÊù•ÁúãÁúãËÆ°ÁÆóÁªìÊûúÔºö1277 / (1024 + 1277) ‚âà 0.55Ôºå1024 / (1024 + 1277) ‚âà 0.45Ôºå‰∫åËÄÖÂ∑ÆË∑ùÂàöÂ•ΩÂú® 10% Â∑¶Âè≥ÔºåÁ¨¶ÂêàÈ¢ÑÊúü„ÄÇÂÆåÊï¥ÁöÑËÆ°ÁÆóÂáΩÊï∞ÂÆö‰πâÂú® &lt;kernel/sched/core.c&gt; ‰∏≠Ôºö123456789101112131415static void set_load_weight(struct task_struct *p)&#123; int prio = p-&gt;static_prio - MAX_RT_PRIO; struct load_weight *load = &amp;p-&gt;se.load; /* * SCHED_IDLE tasks get minimal weight: */ if (p-&gt;policy == SCHED_IDLE) &#123; load-&gt;weight = scale_load(WEIGHT_IDLEPRIO); load-&gt;inv_weight = WMULT_IDLEPRIO; return; &#125; load-&gt;weight = scale_load(prio_to_weight[prio]); load-&gt;inv_weight = prio_to_wmult[prio];&#125; Ë∞ÉÂ∫¶Á±ª Scheduling ClassesËôΩËØ¥ Linux ÂÜÖÊ†∏‰ΩøÁî®ÁöÑ C ËØ≠Ë®ÄÂπ∂ÈùûÊâÄË∞ìÁöÑ OOP ËØ≠Ë®ÄÔºàÊ≤°ÊúâÁ±ª‰ºº C++/Java ‰∏≠ÁöÑ class Ê¶ÇÂøµÔºâÔºå‰ΩÜÊòØÊàë‰ª¨ÂèØ‰ª•Âú®ÂÜÖÊ†∏‰ª£Á†Å‰∏≠ÁúãÂà∞‰∏Ä‰∫õ‰ΩøÁî® C ËØ≠Ë®ÄÁªìÊûÑ‰Ωì + ÂáΩÊï∞ÊåáÈíàÔºàHooksÔºâÁöÑÊñπÂºèÊù•Ê®°ÊãüÈù¢ÂêëÂØπË±°ÁöÑÊñπÂºèÔºåÊäΩË±°Ë°å‰∏∫ÂíåÊï∞ÊçÆ„ÄÇË∞ÉÂ∫¶Á±ª‰πüÊòØËøôÊ†∑ÂÆûÁé∞ÁöÑÔºàÊ≠§Â§ñÔºåËøòÊúâ inode_operations, super_block_operations Á≠âÔºâÔºåÂÆÉÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºà‰Ωç‰∫é &lt;kernel/shced/sched.h&gt;ÔºâÔºö1234567891011121314151617181920212223242526// ‰∏∫‰∫ÜÁÆÄÂçïËµ∑ËßÅÔºåÈöêËóè‰∫ÜÈÉ®ÂàÜ‰ª£Á†ÅÔºàÂ¶Ç SMP Áõ∏ÂÖ≥ÁöÑÔºâstruct sched_class &#123; // Â§ö‰∏™ sched_class ÊòØÈìæÊé•Âú®‰∏ÄËµ∑ÁöÑ const struct sched_class *next; // ËØ• hook ‰ºöÂú®‰ªªÂä°ËøõÂÖ•ÂèØËøêË°åÁä∂ÊÄÅÊó∂Ë∞ÉÁî®„ÄÇÂÆÉ‰ºöÂ∞ÜË∞ÉÂ∫¶ÂçïÂÖÉÔºàÂ¶Ç‰∏Ä‰∏™‰ªªÂä°ÔºâÊîæÂà∞ // ÈòüÂàó‰∏≠ÔºåÂêåÊó∂ÈÄíÂ¢û `nr_running` ÂèòÈáèÔºàËØ•ÂèòÈáèË°®Á§∫ËøêË°åÈòüÂàó‰∏≠ÂèØËøêË°åÁöÑ‰ªªÂä°Êï∞Ôºâ void (*enqueue_task) (struct rq *rq, struct task_struct *p, int flags); // ËØ• hook ‰ºöÂú®‰ªªÂä°‰∏çÂèØËøêË°åÊó∂Ë∞ÉÁî®„ÄÇÂÆÉ‰ºöÂ∞Ü‰ªªÂä°ÁßªÂá∫ÈòüÂàóÔºåÂêåÊó∂ÈÄíÂáè `nr_running` void (*dequeue_task) (struct rq *rq, struct task_struct *p, int flags); // ËØ• hook ÂèØ‰ª•Âú®‰ªªÂä°ÈúÄË¶Å‰∏ªÂä®ÊîæÂºÉ CPU Êó∂Ë∞ÉÁî®Ôºå‰ΩÜÊòØÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂÆÉ‰∏ç‰ºöÊîπÂèò // ‰ªªÂä°ÁöÑÂèØËøêË°åÁä∂ÊÄÅÔºå‰πüÂ∞±ÊòØËØ¥‰æùÁÑ∂‰ºöÂú®ÈòüÂàó‰∏≠Á≠âÂæÖ‰∏ãÊ¨°Ë∞ÉÂ∫¶„ÄÇÁ±ª‰ºº‰∫éÂÖà dequeue_taskÔºå // ÂÜç enqueue_task void (*yield_task) (struct rq *rq); // ËØ• hook ‰ºöÂú®‰ªªÂä°ËøõÂÖ•ÂèØËøêË°åÁä∂ÊÄÅÊó∂Ë∞ÉÁî®Âπ∂Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÊä¢Âç†ÂΩìÂâç‰ªªÂä° void (*check_preempt_curr) (struct rq *rq, struct task_struct *p, int flags); // ËØ• hook Áî®Êù•ÈÄâÊã©ÊúÄÈÄÇÂêàËøêË°åÁöÑ‰∏ã‰∏Ä‰∏™‰ªªÂä° struct task_struct * (*pick_next_task) (struct rq *rq, struct task_struct *prev); // ËØ• hook ‰ºöÂú®‰ªªÂä°‰øÆÊîπËá™Ë∫´ÁöÑË∞ÉÂ∫¶Á±ªÊàñËÄÖ‰ªªÂä°ÁªÑÊó∂Ë∞ÉÁî® void (*set_curr_task) (struct rq *rq); // ÈÄöÂ∏∏ÊòØÂú®Êó∂Èíü‰∏≠Êñ≠Êó∂Ë∞ÉÁî®ÔºåÂèØËÉΩ‰ºöÂØºËá¥‰ªªÂä°ÂàáÊç¢ void (*task_tick) (struct rq *rq, struct task_struct *p, int queued); // ÂΩì‰ªªÂä°Ë¢´ fork Êó∂ÈÄöÁü•Ë∞ÉÂ∫¶Âô® void (*task_fork) (struct task_struct *p); // ÂΩì‰ªªÂä°ÊåÇÊéâÊó∂ÈÄöÁü•Ë∞ÉÂ∫¶Âô® void (*task_dead) (struct task_struct *p);&#125;; ÂÖ≥‰∫éË∞ÉÂ∫¶Á≠ñÁï•ÁöÑÂÖ∑‰ΩìÁªÜËäÇÁöÑÂÆûÁé∞ÊúâÂ¶Ç‰∏ãÂá†‰∏™Ê®°ÂùóÔºö core.c ÂåÖÂê´Ë∞ÉÂ∫¶Âô®ÁöÑÊ†∏ÂøÉÈÉ®ÂàÜÔºõ fair.c ÂÆûÁé∞‰∫Ü CFSÔºàComple Faire SchedulerÔºåÂÆåÂÖ®ÂÖ¨Âπ≥‰ªªÂä°Ë∞ÉÂ∫¶Âô®Ôºâ Ë∞ÉÂ∫¶Âô®ÔºåÂ∫îÁî®‰∫éÊôÆÈÄö‰ªªÂä°Ôºõ rt.c ÂÆûÁé∞‰∫ÜÂÆûÊó∂Ë∞ÉÂ∫¶ÔºåÂ∫îÁî®‰∫éÂÆûÊó∂‰ªªÂä°Ôºõ idle_task.c ÂΩìÊ≤°ÊúâÂÖ∂ÂÆÉÂèØËøêË°åÁöÑ‰ªªÂä°Êó∂Ôºå‰ºöËøêË°åÁ©∫Èó≤‰ªªÂä°„ÄÇÂÜÖÊ†∏ÊòØÂü∫‰∫é‰ªªÂä°ÁöÑË∞ÉÂ∫¶Á≠ñÁï•ÔºàSCHED_*ÔºâÊù•ÂÜ≥ÂÆö‰ΩøÁî®‰ΩïÁßçË∞ÉÂ∫¶Á±ªÂÆûÁé∞ÔºåÂπ∂‰ºöË∞ÉÁî®Áõ∏Â∫îÁöÑÊñπÊ≥ï„ÄÇSCHED_NORMAL, SCHED_BATCH Âíå SCHED_IDLE ËøõÁ®ã‰ºöÊò†Â∞ÑÂà∞ fair_sched_class ÔºàÁî± CFS ÂÆûÁé∞ÔºâÔºõSCHED_RR Âíå SCHED_FIFO ÂàôÊò†Â∞ÑÁöÑ rt_sched_class ÔºàÂÆûÊó∂Ë∞ÉÂ∫¶Âô®Ôºâ„ÄÇ ËøêË°åÈòüÂàó Run QueueÊâÄÊúâÂèØËøêË°åÁöÑ‰ªªÂä°ÊòØÊîæÂú®ËøêË°åÈòüÂàó‰∏≠ÁöÑÔºåÂπ∂‰∏îÁ≠âÂæÖ CPU ËøêË°å„ÄÇÊØè‰∏™ CPU Ê†∏ÂøÉÈÉΩÊúâËá™Â∑±ÁöÑËøêË°åÈòüÂàóÔºåÊØè‰∏™‰ªªÂä°‰ªªÊÑèÊó∂ÂàªÂè™ËÉΩÂ§Ñ‰∫éÂÖ∂‰∏≠‰∏Ä‰∏™ÈòüÂàó‰∏≠„ÄÇÂú®Â§öÂ§ÑÁêÜÂô®Êú∫Âô®‰∏≠Ôºå‰ºöÊúâË¥üËΩΩÂùáË°°Á≠ñÁï•Ôºå‰ªªÂä°Â∞±‰ºöËΩ¨ÁßªÂà∞ÂÖ∂ÂÆÉ CPU ‰∏äËøêË°åÁöÑÂèØËÉΩ„ÄÇ ËøêË°åÈòüÂàóÊï∞ÊçÆÁªìÊûÑÂÆö‰πâÂ¶Ç‰∏ãÔºà‰Ωç‰∫é &lt;kernel/sched/sched.h&gt;Ôºâ:1234567891011121314151617181920// ‰∏∫‰∫ÜÁÆÄÂçïËµ∑ËßÅÔºåÈöêËóè‰∫ÜÈÉ®ÂàÜ‰ª£Á†ÅÔºàSMP Áõ∏ÂÖ≥Ôºâ// Ëøô‰∏™ÊòØÊØè‰∏™ CPU ÈÉΩ‰ºöÊúâÁöÑ‰∏Ä‰∏™‰ªªÂä°ËøêË°åÈòüÂàóstruct rq&#123; // Ë°®Á§∫ÂΩìÂâçÈòüÂàó‰∏≠ÊÄªÂÖ±ÊúâÂ§öÂ∞ë‰∏™ÂèØËøêË°åÁöÑ‰ªªÂä°ÔºàÂåÖÂê´ÊâÄÊúâÁöÑ sched classÔºâ unsigned int nr_running;#define CPU_LOAD_IDX_MAX 5 unsigned long cpu_load[CPU_LOAD_IDX_MAX]; // ËøêË°åÈòüÂàóË¥üËΩΩËÆ∞ÂΩï struct load_weight load; // ÂµåÂ•óÁöÑ CFS Ë∞ÉÂ∫¶Âô®ËøêË°åÈòüÂàó struct cfs_rq cfs; // ÂµåÂ•óÁöÑÂÆûÊó∂‰ªªÂä°Ë∞ÉÂ∫¶Âô®ËøêË°åÈòüÂàó struct rt_rq rt; // curr ÊåáÂêëÂΩìÂâçÊ≠£Âú®ËøêË°åÁöÑËøõÁ®ãÊèèËø∞Á¨¶ // idle ÂàôÊåáÂêëÁ©∫Èó≤ËøõÁ®ãÊèèËø∞Á¨¶ÔºàÂΩìÊ≤°ÊúâÂÖ∂ÂÆÉÂèØËøêË°å‰ªªÂä°Êó∂ÔºåËØ•‰ªªÂä°Êâç‰ºöÂêØÂä®Ôºâ struct task_struct *curr, *idle; u64 clock; int cpu;&#125; ‰ΩïÊó∂ËøêË°åË∞ÉÂ∫¶Âô®ÔºüÂÆûÊó∂‰∏äÔºåË∞ÉÂ∫¶ÂáΩÊï∞ schedule() ‰ºöÂú®ÂæàÂ§öÂú∫ÊôØ‰∏ãË¢´Ë∞ÉÁî®„ÄÇÊúâÁöÑÊòØÁõ¥Êé•Ë∞ÉÁî®ÔºåÊúâÁöÑÂàôÊòØÈöêÂºèË∞ÉÁî®ÔºàÈÄöËøáËÆæÁΩÆ TIF_NEED_RESCHED Êù•ÊèêÁ§∫Êìç‰ΩúÁ≥ªÁªüÂ∞ΩÂø´ËøêË°åË∞ÉÂ∫¶ÂáΩÊï∞Ôºâ„ÄÇ‰ª•‰∏ã‰∏â‰∏™Ë∞ÉÂ∫¶Êó∂Êú∫ÂÄºÂæóÂÖ≥Ê≥®‰∏ãÔºö Êó∂Èíü‰∏≠Êñ≠ÂèëÁîüÊó∂Ôºå‰ºöË∞ÉÁî® scheduler_tick() ÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞‰ºöÊõ¥Êñ∞‰∏Ä‰∫õÂíåË∞ÉÂ∫¶ÊúâÂÖ≥ÁöÑÊï∞ÊçÆÁªüËÆ°ÔºåÂπ∂Ëß¶ÂèëË∞ÉÂ∫¶Á±ªÁöÑÂë®ÊúüË∞ÉÂ∫¶ÊñπÊ≥ïÔºå‰ªéËÄåÈó¥Êé•Âú∞ËøõË°åË∞ÉÂ∫¶„ÄÇ‰ª• 2.6.39 Ê∫êÁ†Å‰∏∫‰æãÔºåÂèØËÉΩÁöÑË∞ÉÁî®ÈìæË∑ØÂ¶Ç‰∏ãÔºö 123456scheduler_tick‚îî‚îÄ‚îÄ task_tick ‚îî‚îÄ‚îÄ entity_tick ‚îî‚îÄ‚îÄ check_preempt_tick ‚îî‚îÄ‚îÄ resched_task ‚îî‚îÄ‚îÄ set_tsk_need_resched ÂΩìÂâçÊ≠£Âú®ËøêË°åÁöÑ‰ªªÂä°ËøõÂÖ•Áù°Áú†Áä∂ÊÄÅ„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰ªªÂä°‰ºö‰∏ªÂä®ÈáäÊîæ CPU„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåËØ•‰ªªÂä°‰ºöÂõ†‰∏∫Á≠âÂæÖÊåáÂÆöÁöÑ‰∫ã‰ª∂ËÄåÁù°Áú†ÔºåÂÆÉÂèØ‰ª•Â∞ÜËá™Â∑±Ê∑ªÂä†Âà∞Á≠âÂæÖÈòüÂàóÔºåÂπ∂ÂêØÂä®Âæ™ÁéØÊ£ÄÊü•ÊúüÊúõÁöÑÊù°‰ª∂ÊòØÂê¶Êª°Ë∂≥„ÄÇÂú®ËøõÂÖ•Áù°Áú†ÂâçÔºå‰ªªÂä°ÂèØ‰ª•Â∞ÜËá™Â∑±ÁöÑÁä∂ÊÄÅËÆæÁΩÆ‰∏∫ TASK_INTERRUPTABLEÔºàÈô§‰∫Ü‰ªªÂä°Ë¶ÅÁ≠âÂæÖÁöÑ‰∫ã‰ª∂ÂèØÂî§ÈÜíÂ§ñÔºå‰πüÂèØ‰ª•Ë¢´‰ø°Âè∑Âî§ÈÜíÔºâÊàñËÄÖ TASK_UNINTERRUPTABLEÔºàËá™ÁÑ∂ÊòØ‰∏ç‰ºöÁêÜ‰ºö‰ø°Âè∑ÂíØÔºâÔºåÁÑ∂ÂêéË∞ÉÁî® schedule() ÈÄâÊã©‰∏ã‰∏Ä‰∏™‰ªªÂä°ËøêË°å„ÄÇ Áù°Áú†ÁöÑ‰ªªÂä°Ë¢´Âî§ÈÜí„ÄÇ‰ªªÂä°Á≠âÂæÖÁöÑ‰∫ã‰ª∂ÂèØ‰ª•Âú®ÂÖ≥ËÅîÁöÑÁ≠âÂæÖÈòüÂàó‰∏äË∞ÉÁî® wake_up() ÂáΩÊï∞Âî§ÈÜí‰ªªÂä°ÔºöÁõ∏ÂÖ≥‰ªªÂä°‰ºöÂ∞ÜËá™Â∑±ËÆæÁΩÆ‰∏∫ÂèØËøêË°åÁä∂ÊÄÅÔºåÂπ∂Âä†ÂÖ•ËøêË°åÈòüÂàó„ÄÇÂ¶ÇÊûúÂΩìÂâçÂî§ÈÜíÁöÑ‰ªªÂä°‰ºòÂÖàÁ∫ßÊØîËøêË°åÈòüÂàó‰∏≠ÁöÑ‰ªª‰Ωï‰ªªÂä°ÈÉΩÈ´òÔºåÂàô‰ºöËÆæÁΩÆ TIF_NEED_RESCHED Ê†áÂøóÔºå‰ªéËÄåËÆ©Êìç‰ΩúÁ≥ªÁªüÂ∞ΩÂø´Ë∞ÉÁî® schedule() ÂáΩÊï∞„ÄÇ Linux Ë∞ÉÂ∫¶Âô®Êó©ÊúüÁâàÊú¨Linux 0.0.1 ÁâàÊú¨Â∞±Â∑≤ÁªèÊúâ‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑË∞ÉÂ∫¶Âô®ÔºåÂΩìÁÑ∂Âπ∂ÈùûÈÄÇÂêàÊã•ÊúâÁâπÂà´Â§öÂ§ÑÁêÜÂô®ÁöÑÁ≥ªÁªü„ÄÇËØ•Ë∞ÉÂ∫¶Âô®Âè™Áª¥Êä§‰∫Ü‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑËøõÁ®ãÈòüÂàóÔºåÊØèÊ¨°ÈÉΩÈúÄË¶ÅÈÅçÂéÜËØ•ÈòüÂàóÊù•ÂØªÊâæÊñ∞ÁöÑËøõÁ®ãÊâßË°åÔºåËÄå‰∏îÂØπ‰ªªÂä°Êï∞ÈáèËøòÊúâ‰∏•Ê†ºÈôêÂà∂ÔºàNR_TASKS Âú®ÊúÄÂàùÁöÑÁâàÊú¨‰∏≠Âè™Êúâ 32Ôºâ„ÄÇ‰∏ãÈù¢Êù•ÁúãÁúãËøô‰∏™Ë∞ÉÂ∫¶Âô®ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÂêßÔºö1234567891011121314151617181920212223242526272829303132333435363738394041// 'schedule()' is the scheduler function. // This is GOOD CODE! There probably won't be any reason to change // this, as it should work well in all circumstances (ie gives // IO-bound processes good response etc)...void schedule(void)&#123; int i, next, c; struct task_struct **p; // ÈÅçÂéÜÊâÄÊúâ‰ªªÂä°ÔºåÂ¶ÇÊûúÊúâ‰ø°Âè∑ÔºåÂàôÈúÄË¶ÅÂî§ÈÜí `TASK_INTERRUPTABLE` ÁöÑ‰ªªÂä° for (p = &amp;LAST_TASK; p &gt; &amp;FIRST_TASK; --p) if (*p) &#123; if ((*p)-&gt;alarm &amp;&amp; (*p)-&gt;alarm &lt; jiffies) &#123; (*p)-&gt;signal |= (1 &lt;&lt; (SIGALRM - 1)); (*p)-&gt;alarm = 0; &#125; if ((*p)-&gt;signal &amp;&amp; (*p)-&gt;state == TASK_INTERRUPTIBLE) (*p)-&gt;state = TASK_RUNNING; &#125; while (1) &#123; c = -1; next = 0; i = NR_TASKS; p = &amp;task[NR_TASKS]; // ÈÅçÂéÜÊâÄÊúâ‰ªªÂä°ÔºåÊâæÂà∞Êó∂Èó¥ÁâáÊúÄÈïøÁöÑÈÇ£‰∏™ while (--i) &#123; if (!*--p) continue; if ((*p)-&gt;state == TASK_RUNNING &amp;&amp; (*p)-&gt;counter &gt; c) c = (*p)-&gt;counter, next = i; &#125; if (c) break; // ÈÅçÂéÜ‰ªªÂä°ÔºåÈáçÊñ∞ËÆæÂÄºÊó∂Èó¥Áâá for (p = &amp;LAST_TASK; p &gt; &amp;FIRST_TASK; --p) if (*p) (*p)-&gt;counter = ((*p)-&gt;counter &gt;&gt; 1) + (*p)-&gt;priority; &#125; // ÂàáÊç¢Âà∞‰∏ã‰∏Ä‰∏™ÈúÄË¶ÅÊâßË°åÁöÑ‰ªªÂä° switch_to(next);&#125; O(n)2.4 ÁâàÊú¨ÁöÑ Linux ÂÜÖÊ†∏‰ΩøÁî®ÁöÑË∞ÉÂ∫¶ÁÆóÊ≥ïÈùûÂ∏∏ÁÆÄÂçïÂíåÁõ¥Êé•ÔºåÁî±‰∫éÊØèÊ¨°Âú®ÂØªÊâæ‰∏ã‰∏Ä‰∏™‰ªªÂä°Êó∂ÈúÄË¶ÅÈÅçÂéÜÁ≥ªÁªü‰∏≠ÊâÄÊúâÁöÑ‰ªªÂä°ÔºàÈìæË°®ÔºâÔºåÂõ†Ê≠§Ë¢´Áß∞‰∏∫ O(n) Ë∞ÉÂ∫¶Âô®ÔºàÊó∂Èó¥Â§çÊùÇÂ∫¶Ôºâ„ÄÇ ÂΩìÁÑ∂ÔºåËØ•Ë∞ÉÂ∫¶Âô®Ë¶ÅÊØî 0.01 ÁâàÊú¨ÂÜÖÊ†∏‰∏≠ÁöÑË∞ÉÂ∫¶ÁÆóÊ≥ïÁ®çÂæÆÂ§çÊùÇÁÇπÔºåÂÆÉÂºïÂÖ•‰∫Ü epoch Ê¶ÇÂøµ„ÄÇ‰πüÂ∞±ÊòØÂ∞ÜÊó∂Èó¥ÂàÜÊàêÁ∫™ÂÖÉÔºàepochsÔºâÔºå‰πüÂ∞±ÊòØÊØè‰∏™ËøõÁ®ãÁöÑÁîüÂëΩÂë®Êúü„ÄÇÁêÜËÆ∫‰∏äÊù•ËØ¥ÔºåÊØè‰∏™Á∫™ÂÖÉÁªìÊùüÔºåÊØè‰∏™ËøõÁ®ãÈÉΩÂ∫îËØ•ËøêË°åËøá‰∏ÄÊ¨°‰∫ÜÔºåËÄå‰∏îÈÄöÂ∏∏Áî®ÂÖâ‰∫ÜÂÆÉÂΩìÂâçÁöÑÊó∂Èó¥Áâá„ÄÇ‰ΩÜÂÆûÈôÖ‰∏äÔºåÊúâ‰∫õ‰ªªÂä°Âπ∂Ê≤°ÊúâÂÆåÂÖ®Áî®ÂÆåÊó∂Èó¥ÁâáÔºåÈÇ£‰πàÂÆÉÂâ©‰ΩôÊó∂Èó¥ÁâáÁöÑ‰∏ÄÂçäÂ∞Ü‰ºöÂíåÊñ∞ÁöÑÊó∂Èó¥ÁâáÁõ∏Âä†Ôºå‰ªéËÄåÂú®‰∏ã‰∏Ä‰∏™Á∫™ÂÖÉËøêË°åÊõ¥ÈïøÁöÑÊó∂Èó¥„ÄÇ Êàë‰ª¨Êù•Áúã‰∏ã schedule() ÁÆóÊ≥ïÁöÑÊ†∏ÂøÉÊ∫êÁ†ÅÔºö123456789101112131415161718192021222324// schedule() ÁÆóÊ≥ï‰ºöÈÅçÂéÜÊâÄÊúâÁöÑ‰ªªÂä°ÔºàO(N)ÔºâÔºåÂπ∂‰∏îËÆ°ÁÆóÂá∫ÊØè‰∏™‰ªªÂä°ÁöÑ// goodness ÂÄºÔºå‰∏îÊåëÈÄâÂá∫„ÄåÊúÄÂ•Ω„ÄçÁöÑ‰ªªÂä°Êù•ËøêË°å„ÄÇ// ‰ª•‰∏ãÊòØÈÉ®ÂàÜÊ†∏ÂøÉÊ∫êÁ†ÅÔºå‰∏ªË¶ÅÊòØ‰∫ÜËß£‰∏ãÂÆÉÁöÑÊÄùË∑Ø„ÄÇasmlinkage void schedule(void)&#123; // ‰ªªÂä°ÔºàËøõÁ®ãÔºâÊèèËø∞Á¨¶Ôºö // 1. prev: ÂΩìÂâçÊ≠£Âú®ËøêË°åÁöÑ‰ªªÂä° // 2. next: ‰∏ã‰∏Ä‰∏™Â∞ÜËøêË°åÁöÑ‰ªªÂä° // 3. p: ÂΩìÂâçÊ≠£Âú®ÈÅçÂéÜÁöÑ‰ªªÂä° struct task_struct *prev, *next, *p; int this_cpu, c; // c Ë°®Á§∫ÊùÉÈáçÂÄºrepeat_schedule: // ÈªòËÆ§ÈÄâ‰∏≠ÁöÑ‰ªªÂä° next = idle_task(this_cpu); c = -1000; list_for_each(tmp, &amp;runqueue_head) &#123; p = list_entry(tmp, struct task_struct, run_list); if (can_schedule(p, this_cpu)) &#123; int weight = goodness(p, this_cpu, prev-&gt;active_mm); if (weight &gt; c) c = weight, next = p; &#125; &#125;&#125; Ê∫êÁ†Å‰∏≠ÁöÑ goodness() ÂáΩÊï∞‰ºöËÆ°ÁÆóÂá∫‰∏Ä‰∏™ÊùÉÈáçÂÄºÔºåÂÆÉÁöÑÁÆóÊ≥ïÂü∫Êú¨ÊÄùÊÉ≥Â∞±ÊòØÂü∫‰∫éËøõÁ®ãÊâÄÂâ©‰ΩôÁöÑÊó∂ÈíüËäÇÊãçÊï∞ÔºàÊó∂Èó¥ÁâáÔºâÔºåÂÜçÂä†‰∏äÂü∫‰∫éËøõÁ®ã‰ºòÂÖàÁ∫ßÁöÑÊùÉÈáçÂÄº„ÄÇËøîÂõûÂÄºÂ¶Ç‰∏ãÔºö -1000 Ë°®Á§∫‰∏çË¶ÅÈÄâÊã©ËØ•ËøõÁ®ãËøêË°å 0 Ë°®Á§∫Êó∂Èó¥ÁâáÁî®ÂÆå‰∫ÜÔºåÈúÄË¶ÅÈáçÊñ∞ËÆ°ÁÆó countersÔºàÂèØËÉΩ‰ºöË¢´ÈÄâ‰∏≠ËøêË°åÔºâ Ê≠£Êï¥Êï∞ÔºöË°®Á§∫ goodness ÂÄºÔºàË∂äÂ§ßË∂äÂ•ΩÔºâ +1000 Ë°®Á§∫ÂÆûÊó∂ËøõÁ®ãÔºåÊé•‰∏ãÊù•Â∞±Ë¶ÅÈÄâÊã©ÂÆÉËøêË°å ÊúÄÂêéÔºåÈíàÂØπ O(n) Ë∞ÉÂ∫¶Âô®ÂÅö‰∏ãÊÄªÁªìÔºö ÁÆóÊ≥ïÂÆûÁé∞ÈùûÂ∏∏ÁÆÄÂçïÔºå‰ΩÜÊòØ‰∏çÈ´òÊïàÔºà‰ªªÂä°Ë∂äÂ§öÔºåÈÅçÂéÜËÄóË¥πÊó∂Èó¥Ë∂ä‰πÖÔºâ Ê≤°ÊúâÂæàÂ•ΩÁöÑÊâ©Â±ïÊÄßÔºåÂ§öÊ†∏Â§ÑÁêÜÂô®ÊÄé‰πàÂäûÔºü ÂØπ‰∫éÂÆûÊó∂‰ªªÂä°Ë∞ÉÂ∫¶ÊîØÊåÅËæÉÂº±ÔºàÊó†ËÆ∫Â¶Ç‰Ωï‰Ωú‰∏∫‰ºòÂÖàÁ∫ßÈ´òÁöÑÂÆûÊó∂‰ªªÂä°ÈÉΩÈúÄË¶ÅÂú®ÈÅçÂéÜÂÆåÂàóË°®ÂêéÊâçÂèØ‰ª•Áü•ÈÅìÔºâ O(1)Ingo Moln√°r Â§ß‰Ω¨Âú® 2.6 ÁâàÊú¨ÁöÑÂÜÖÊ†∏‰∏≠Âä†ÂÖ•‰∫ÜÂÖ®Êñ∞ÁöÑË∞ÉÂ∫¶ÁÆóÊ≥ïÔºåÂÆÉËÉΩÂ§üÂú®Â∏∏Êï∞Êó∂Èó¥ÂÜÖË∞ÉÂ∫¶‰ªªÂä°ÔºåÂõ†Ê≠§Ë¢´Áß∞‰∏∫ O(1) Ë∞ÉÂ∫¶Âô®„ÄÇÊàë‰ª¨Êù•ÁúãÁúãÂÆÉÂºïÂÖ•ÁöÑ‰∏Ä‰∫õÊñ∞ÁâπÊÄßÔºö ÂÖ®Â±Ä‰ºòÂÖàÁ∫ßÂçï‰ΩçÔºåËåÉÂõ¥ÊòØ 0~139ÔºåÊï∞ÂÄºË∂ä‰ΩéÔºå‰ºòÂÖàÁ∫ßË∂äÈ´ò Â∞Ü‰ªªÂä°ÊãÜÂàÜÊàêÂÆûÊó∂Ôºà0~99ÔºâÂíåÊ≠£Â∏∏Ôºà100~139Ôºâ‰∏§ÈÉ®ÂàÜ„ÄÇÊõ¥È´ò‰ºòÂÖàÁ∫ß‰ªªÂä°Ëé∑ÂæóÊõ¥Â§öÊó∂Èó¥Áâá Âç≥ÂàªÊä¢Âç†Ôºàearly preemptionÔºâ„ÄÇÂΩì‰ªªÂä°Áä∂ÊÄÅÂèòÊàê TASK_RUNNING Êó∂ÔºåÂÜÖÊ†∏‰ºöÊ£ÄÊü•ÂÖ∂‰ºòÂÖàÁ∫ßÊòØÂê¶ÊØîÂΩìÂâçËøêË°åÁöÑ‰ªªÂä°‰ºòÂÖàÁ∫ßÊõ¥È´òÔºåÂ¶ÇÊûúÊòØÁöÑËØùÔºåÂàôÊä¢Âç†ÂΩìÂâçÊ≠£Âú®ËøêË°åÁöÑ‰ªªÂä°ÔºåÂàáÊç¢Âà∞ËØ•‰ªªÂä° ÂÆûÊó∂‰ªªÂä°‰ΩøÁî®ÈùôÊÄÅ‰ºòÂÖàÁ∫ß ÊôÆÈÄö‰ªªÂä°‰ΩøÁî®‰ΩøÁî®Âä®ÊÄÅ‰ºòÂÖàÁ∫ß„ÄÇ‰ªªÂä°‰ºòÂÖàÁ∫ß‰ºöÂú®ÂÖ∂‰ΩøÁî®ÂÆåËá™Â∑±ÁöÑÊó∂Èó¥ÁâáÂêéÈáçÊñ∞ËÆ°ÁÆóÔºåÂÜÖÊ†∏‰ºöËÄÉËôëÂÆÉËøáÂéªÁöÑË°å‰∏∫ÔºåÂÜ≥ÂÆöÂÆÉÁöÑ‰∫§‰∫íÊÄßÁ≠âÁ∫ß„ÄÇ‰∫§‰∫íÂûã‰ªªÂä°Êõ¥ÂÆπÊòìÂæóÂà∞Ë∞ÉÂ∫¶ O(n) ÁöÑË∞ÉÂ∫¶Âô®‰ºöÂú®ÊØè‰∏™Á∫™ÂÖÉÁªìÊùüÂêéÔºàÊâÄÊúâ‰ªªÂä°ÁöÑÊó∂Èó¥ÁâáÈÉΩ‰ΩøÁî®ËøáÔºâÔºåÊâç‰ºöÈáçÊñ∞ËÆ°ÁÆó‰ªªÂä°‰ºòÂÖàÁ∫ß„ÄÇËÄå O(1) ÂàôÊòØÂú®ÊØè‰∏™‰ªªÂä°Êó∂Èó¥ÁâáÈÖçÈ¢ùÁî®ÂÆåÂêéÂ∞±ÈáçÊñ∞ËÆ°ÁÆó‰ºòÂÖàÁ∫ß„ÄÇO(1) Ë∞ÉÂ∫¶Âô®‰∏∫ÊØè‰∏™ CPU Áª¥Êä§‰∫Ü‰∏§‰∏™ÈòüÂàóÔºåÂç≥ active Âíå expired„ÄÇactive ÈòüÂàóÂ≠òÊîæÁöÑÊòØÊó∂Èó¥ÁâáÂ∞öÊú™Áî®ÂÆåÁöÑ‰ªªÂä°ÔºåËÄå expired ÂàôÊòØÊó∂Èó¥ÁâáÂ∑≤ÁªèËÄóÂ∞ΩÁöÑ‰ªªÂä°„ÄÇÂΩì‰∏Ä‰∏™‰ªªÂä°ÁöÑÊó∂Èó¥ÁâáÁî®ÂÆåÂêéÔºåÂ∞±‰ºöË¢´ËΩ¨Âà∞ expired ÈòüÂàóÔºåËÄå‰∏î‰ºöÈáçÊñ∞ËÆ°ÁÆóÂÆÉÁöÑ‰ºòÂÖàÁ∫ß„ÄÇÂΩì active ÈòüÂàó‰ªªÂä°ÂÖ®ÈÉ®ËΩ¨ÁßªÂà∞ expired ÈòüÂàóÂêéÔºå‰ºö‰∫§Êç¢‰∫åËÄÖÔºàËÆ© active ÊåáÂêë expired ÈòüÂàóÔºåexpired ÊåáÂêë active ÈòüÂàóÔºâ„ÄÇÂèØ‰ª•ÁúãÂà∞Ôºå‰ºòÂÖàÁ∫ßÁöÑËÆ°ÁÆóÔºåÈòüÂàóÂàáÊç¢ÈÉΩÂíå‰ªªÂä°Êï∞ÈáèÂ§öÂØ°Êó†ÂÖ≥ÔºåËÉΩÂ§üÂú® O(1) Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏ãÂÆåÊàê„ÄÇ Âú®ÂÖàÂâç‰ªãÁªçÁöÑË∞ÉÂ∫¶ÁÆóÊ≥ï‰∏≠ÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅÂèñ‰∏Ä‰∏™‰ºòÂÖàÁ∫ßÊúÄÈ´òÁöÑ‰ªªÂä°ÔºåËøòÈúÄË¶ÅÈÅçÂéÜÊï¥‰∏™‰ªªÂä°ÈìæË°®ÊâçÂèØ‰ª•„ÄÇËÄå O(1) Ë∞ÉÂ∫¶Âô®ÂàôÂæàÁâπÂà´ÔºåÂÆÉ‰∏∫ÊØèÁßç‰ºòÂÖàÁ∫ßÊèê‰æõ‰∫Ü‰∏Ä‰∏™‰ªªÂä°ÈìæË°®„ÄÇÊâÄÊúâÁöÑÂèØËøêË°å‰ªªÂä°‰ºöË¢´ÂàÜÊï£Âú®‰∏çÂêå‰ºòÂÖàÁ∫ßÈòüÂ∫îÁöÑÈìæË°®‰∏≠„ÄÇ Êé•‰∏ãÊù•ÁúãÁúãÂÖ®Êñ∞ÁöÑ runqueue ÊòØÊÄé‰πàÂÆö‰πâÁöÑÂêßÔºö123456struct runqueue &#123; unsigned long nr_running; /* ÂèØËøêË°åÁöÑ‰ªªÂä°ÊÄªÊï∞ÔºàÊüê‰∏™ CPUÔºâ */ struct prio_array *active; /* ÊåáÂêë active ÁöÑÈòüÂàóÁöÑÊåáÈíà */ struct prio_array *expired; /* ÊåáÂêë expired ÁöÑÈòüÂàóÁöÑÊåáÈíà */ struct prio_array arrays[2]; /* ÂÆûÈôÖÂ≠òÊîæ‰∏çÂêå‰ºòÂÖàÁ∫ßÂØπÂ∫îÁöÑ‰ªªÂä°ÈìæË°® */&#125; ÈÄöËøá‰∏ãÈù¢ÁöÑÂõæÂèØ‰ª•Áõ¥ËßÇÊÑüÂèó‰∏ã‰ªªÂä°ÈòüÂàóÔºö Êé•‰∏ãÊù•ÁúãÁúã prio_array ÊòØÊÄé‰πàÂÆö‰πâÁöÑÔºö12345struct prio_array &#123; int nr_active; /* ÂàóË°®‰∏≠ÁöÑ‰ªªÂä°ÊÄªÊï∞ */ unsigned long bitmap[BITMAP_SIZE]; /* ‰ΩçÂõæË°®Á§∫ÂØπÂ∫î‰ºòÂÖàÁ∫ßÈìæË°®ÊòØÂê¶Êúâ‰ªªÂä°Â≠òÂú® */ struct list_head queue[MAX_PRIO]; /* ‰ªªÂä°ÈòüÂàóÔºàÊØèÁßç‰ºòÂÖàÁ∫ßÂØπÂ∫î‰∏Ä‰∏™ÂèåÂêëÈìæË°®Ôºâ */&#125;; ÂèØ‰ª•ÁúãÂà∞ÔºåÂú® prio_array ‰∏≠Â≠òÂú®‰∏Ä‰∏™‰ΩçÂõæÔºåÂÆÉÊòØÁî®Êù•Ê†áËÆ∞ÊØè‰∏™ priority ÂØπÂ∫îÁöÑ‰ªªÂä°ÈìæË°®ÊòØÂê¶Â≠òÂú®‰ªªÂä°ÁöÑ„ÄÇÊé•‰∏ãÊù•ÁúãÁúã‰∏∫‰Ωï O(1) Ë∞ÉÂ∫¶Âô®ÂèØ‰ª•Âú®Â∏∏Êï∞Êó∂Èó¥ÊâæÂà∞ÈúÄË¶ÅËøêË°åÁöÑ‰ªªÂä°Ôºö Â∏∏Êï∞Êó∂Èó¥Á°ÆÂÆö‰ºòÂÖàÁ∫ßÔºöÈ¶ñÂÖà‰ºöÂú®‰ΩçÂõæ‰∏≠Êü•ÊâæÂà∞Á¨¨‰∏Ä‰∏™ËÆæÁΩÆ‰∏∫ 1 ÁöÑ‰ΩçÔºàÊÄªÂÖ±Êúâ 140 bitsÔºå‰ªéÁ¨¨‰∏Ä‰∏™ bit ÂºÄÂßãÊêúÁ¥¢ÔºåËøôÊ†∑ÂèØ‰ª•‰øùËØÅÈ´ò‰ºòÂÖàÁ∫ßÁöÑ‰ªªÂä°ÂÖàÂæóÂà∞Êú∫‰ºöËøêË°åÔºâÔºåÂ¶ÇÊûúÊâæÂà∞‰∫ÜÂ∞±ÂèØ‰ª•Á°ÆÂÆöÂì™‰∏™‰ºòÂÖàÁ∫ßÊúâ‰ªªÂä°ÔºåÂÅáËÆæÊâæÂà∞ÂêéÁöÑÂÄº‰∏∫ priorityÔºõ Â∏∏Êï∞Êó∂Èó¥Ëé∑Âæó‰∏ã‰∏Ä‰∏™‰ªªÂä°ÔºöÂú® queue[priority] ÂØπÂ∫îÁöÑ‰ªªÂä°ÈìæË°®‰∏≠ÊèêÂèñÁ¨¨‰∏Ä‰∏™‰ªªÂä°Êù•ÊâßË°åÔºàÂ§ö‰∏™‰ªªÂä°‰ºöËΩÆËΩ¨ÊâßË°åÔºâ„ÄÇ Â•Ω‰∫ÜÔºåÊòØÊó∂ÂÄôÊÄªÁªì‰∏ã O(1) Ë∞ÉÂ∫¶Âô®ÁöÑ‰ºòÁº∫ÁÇπ‰∫ÜÔºö ËÆæËÆ°‰∏äË¶ÅÊØî O(n) Ë∞ÉÂ∫¶Âô®Êõ¥Âä†Â§çÊùÇÁ≤æÂ¶ôÔºõ Áõ∏ÂØπÊù•ËØ¥Êâ©Â±ïÊÄßÊõ¥Â•ΩÔºåÊÄßËÉΩÊõ¥‰ºòÔºåÂú®‰ªªÂä°ÂàáÊç¢‰∏äÁöÑÂºÄÈîÄÊõ¥Â∞èÔºõ Áî®Êù•Ê†áËÆ∞‰ªªÂä°ÊòØÂê¶‰∏∫‰∫§‰∫íÁ±ªÂûãÁöÑÁÆóÊ≥ïËøòÊòØËøá‰∫éÂ§çÊùÇÔºå‰∏îÂÆπÊòìÂá∫Èîô„ÄÇ StaircaseStaircase Scheduler ÊòØ Con Kolivas ‰∏∫‰∫ÜÊîπÂñÑÊ°åÈù¢Á≥ªÁªü‰∫§‰∫íÂ∫îÁî®ÁöÑÂìçÂ∫îÊó∂Èó¥ËÄåÂÆûÁé∞ÁöÑË∞ÉÂ∫¶Âô®Ôºå‰ΩÜÂÆÉÂπ∂ÈùûÂÜÖÊ†∏ÂÆòÊñπÊîØÊåÅÁöÑË∞ÉÂ∫¶Âô®„ÄÇÂÆÉÁöÑÊï¥‰ΩìËÆæËÆ°ÊÄùÊÉ≥Á±ª‰ºº‰∫é Operating Systems: The Three Easy Pieces ‰∏≠ÊèêÂà∞ÁöÑ MLFQÔºàMultilevel Feedback QueueÔºåÂ§öÁ∫ßÂèçÈ¶àÈòüÂàóÔºâ„ÄÇ Êàë‰ª¨Êù•Áúã‰∏ãÂÆÉÁöÑËÆæËÆ°ÊÄùÊÉ≥Ôºö È¶ñÂÖàÔºåÂÆÉ‰πüÊòØÂ∞Ü‰ªªÂä°ÊåâÁÖß‰ºòÂÖàÁ∫ßÊîæÂú®‰∏çÂêåÁöÑ‰ªªÂä°ÈìæË°®‰∏≠ÔºàÁ±ª‰ºº‰∏äÈù¢ÁöÑ active ÈòüÂàóÔºâ Ë∞ÉÂ∫¶Âô®ÊØèÊ¨°‰ºö‰ªéÊúÄÈ´ò‰ºòÂÖàÁ∫ßÁöÑ‰ªªÂä°ÈìæË°®‰∏≠Ëé∑Âèñ‰∏Ä‰∏™Ë¶ÅÂàáÊç¢ÊâßË°åÁöÑ‰ªªÂä°ÔºåÂΩì‰ªªÂä°Êó∂Èó¥Áâá‰ΩøÁî®ÂÆåÊØïÂêéÔºå‰ºöÂ∞ÜÂÖ∂‰ºòÂÖàÁ∫ßË∞É‰Ωé‰∏Ä‰∏™Á≠âÁ∫ßÔºåÁõ¥Âà∞ÂÖ∂‰ºòÂÖàÁ∫ßÈôçÂà∞ÊúÄ‰Ωé„ÄÇ ÂΩìÂ§Ñ‰∫éÊúÄ‰Ωé‰ºòÂÖàÁ∫ßÁöÑ‰ªªÂä°Áî®ÂÖâ‰∫ÜÊó∂Èó¥ÁâáÂêéÔºåÂÆÉ‰ºöË¢´ÈáçÊñ∞ÊîæÂà∞Êõ¥È´ò‰ºòÂÖàÁ∫ßÁöÑ‰ªªÂä°ÈìæË°®‰∏≠ÔºàËøô‰∏™Êñ∞ÁöÑ‰ºòÂÖàÁ∫ßÊòØÂÆÉ‰πãÂâçÊúÄÈ´ò‰ºòÂÖàÁ∫ßÂáè 1 ÂêéÁöÑÂÄºÔºâÔºåÂêåÊó∂‰ºöËé∑Âæó‰∏§ÂÄç‰∫é‰πãÂâçÁöÑÊó∂Èó¥Áâá ÂØπ‰∫éÈïøÊó∂Èó¥Áù°Áú†ÁöÑ‰ªªÂä°Ôºå‰ºöË¢´ÊîæÂà∞ÊúÄÈ´ò‰ºòÂÖàÁ∫ß‰ªªÂä°ÈìæË°®„ÄÇÊâÄ‰ª•‰∫§‰∫íÂºè‰ªªÂä°ÂèØ‰ª•‰øùÊåÅÂú®ÊúÄÈ´ò‰ºòÂÖàÁ∫ß‰ΩçÁΩÆÔºå‰ªéËÄå‰øùÊåÅËâØÂ•ΩÁöÑÂìçÂ∫îÊÄßËÉΩÔºõËÄåÊâπÂ§ÑÁêÜ‰ªªÂä°ÂàôÂ§Ñ‰∫é‰Ωé‰ºòÂÖàÁ∫ßÔºå‰ΩÜÊòØ‰ºöËé∑ÂæóÊõ¥Â§öÁöÑÊâßË°åÊó∂Èó¥„ÄÇ CFSÂçïÊ†∏Ë∞ÉÂ∫¶CFS ÁöÑÂÖ®Áß∞ÊòØ Complete Fair SchedulerÔºå‰πüÂ∞±ÊòØÂÆåÂÖ®ÂÖ¨Âπ≥Ë∞ÉÂ∫¶Âô®„ÄÇÂÆÉÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Âü∫‰∫éÊùÉÈáçÁöÑÂÖ¨Âπ≥ÈòüÂàóÁÆóÊ≥ïÔºå‰ªéËÄåÂ∞Ü CPU Êó∂Èó¥ÂàÜÈÖçÁªôÂ§ö‰∏™‰ªªÂä°ÔºàÊØè‰∏™‰ªªÂä°ÁöÑÊùÉÈáçÂíåÂÆÉÁöÑ nice ÂÄºÊúâÂÖ≥Ôºånice ÂÄºË∂ä‰ΩéÔºåÊùÉÈáçÂÄºË∂äÈ´òÔºâ„ÄÇÊØè‰∏™‰ªªÂä°ÈÉΩÊúâ‰∏Ä‰∏™ÂÖ≥ËÅîÁöÑËôöÊãüËøêË°åÊó∂Èó¥ vruntimeÔºåÂÆÉË°®Á§∫‰∏Ä‰∏™‰ªªÂä°ÊâÄ‰ΩøÁî®ÁöÑ CPU Êó∂Èó¥Èô§‰ª•ÂÖ∂‰ºòÂÖàÁ∫ßÂæóÂà∞ÁöÑÂÄº„ÄÇÁõ∏Âêå‰ºòÂÖàÁ∫ßÂíåÁõ∏Âêå vruntime ÁöÑ‰∏§‰∏™‰ªªÂä°ÂÆûÈôÖËøêË°åÁöÑÊó∂Èó¥‰πüÊòØÁõ∏ÂêåÁöÑÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄ CPU ËµÑÊ∫êÊòØÁî±ÂÆÉ‰ª¨ÂùáÂàÜ‰∫Ü„ÄÇ‰∏∫‰∫Ü‰øùËØÅÊâÄÊúâ‰ªªÂä°ËÉΩÂ§üÂÖ¨Âπ≥Êé®ËøõÔºåÊØèÂΩìÈúÄË¶ÅÊä¢Âç†ÂΩìÂâç‰ªªÂä°Êó∂ÔºåCFS ÊÄª‰ºöÊåëÈÄâÂá∫ vruntime ÊúÄÂ∞èÁöÑÈÇ£‰∏™‰ªªÂä°ËøêË°å„ÄÇ ÂÜÖÊ†∏ÁâàÊú¨Âú® 2.6.38 ‰πãÂâçÔºåÊØè‰∏™Á∫øÁ®ãÔºà‰ªªÂä°Ôºâ‰ºöË¢´ÂΩìÊàêÁã¨Á´ãÁöÑË∞ÉÂ∫¶ÂçïÂÖÉÔºåÂπ∂‰∏îÂíåÁ≥ªÁªü‰∏≠ÂÖ∂ÂÆÉÁ∫øÁ®ãÂÖ±‰∫´ËµÑÊ∫êÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄ‰∏Ä‰∏™Â§öÁ∫øÁ®ãÁöÑÂ∫îÁî®‰ºöÊØîÂçïÁ∫øÁ®ãÁöÑÂ∫îÁî®Ëé∑ÂæóÊõ¥Â§öÁöÑËµÑÊ∫ê„ÄÇ‰πãÂêéÔºåCFS ‰∏çÊñ≠ÊîπËøõÔºåÁõÆÂâçÂ∑≤ÁªèÊîØÊåÅÂ∞Ü‰∏Ä‰∏™Â∫îÁî®‰∏≠ÁöÑÁ∫øÁ®ãÊâìÂåÖÂà∞ cgroup ÁªìÊûÑ‰∏≠Ôºåcgroup ÁöÑ vruntime ÊòØÂÖ∂‰∏≠ÊâÄÊúâÁ∫øÁ®ãÁöÑ vuntime ‰πãÂíå„ÄÇÁÑ∂Âêé CFS Â∞±ÂèØ‰ª•Â∞ÜÂÆÉÁöÑÁÆóÊ≥ïÂ∫îÁî®‰∫écgroup ‰πãÈó¥Ôºå‰ªéËÄå‰øùËØÅÂÖ¨Âπ≥ÊÄß„ÄÇÂΩìÊüê‰∏™ cgroup Ë¢´ÈÄâ‰∏≠ÂêéÔºåÂÖ∂‰∏≠Êã•ÊúâÊúÄÂ∞è vruntime ÁöÑÁ∫øÁ®ã‰ºöË¢´ÊâßË°åÔºå‰ªéËÄå‰øùËØÅ cgroup ‰∏≠ÁöÑÁ∫øÁ®ã‰πãÈó¥ÁöÑÂÖ¨Âπ≥ÊÄß„ÄÇcgroup ËøòÂèØ‰ª•ÂµåÂ•óÔºå‰æãÂ¶Ç systemd ‰ºöËá™Âä®ÈÖçÁΩÆ cgroup Êù•‰øùËØÅ‰∏çÂêåÁî®Êà∑‰πãÈó¥ÁöÑÂÖ¨Âπ≥ÊÄßÔºåÁÑ∂ÂêéÂú®Áî®Êà∑ËøêË°åÁöÑÂ§ö‰∏™Â∫îÁî®‰πãÈó¥Áª¥ÊåÅÂÖ¨Âπ≥ÊÄß„ÄÇ CFS ÈÄöËøáÂú®‰∏ÄÂÆöÊó∂Èó¥ÂÜÖËøêË°åË∞ÉÂ∫¶ÊâÄÊúâÁöÑÁ∫øÁ®ãÊù•ÈÅøÂÖçÈ••È•øÈóÆÈ¢ò„ÄÇÂΩìËøêË°åÁöÑ Á∫øÁ®ãÊï∞Âú® 8 ‰∏™Âèä‰ª•‰∏ãÊó∂ÔºåÈªòËÆ§ÁöÑÊó∂Èó¥Âë®ÊúüÊòØ 48msÔºõËÄåÂΩìÂ§ö‰∫é 8 ‰∏™Á∫øÁ®ãÊó∂ÔºåÊó∂Èó¥Âë®ÊúüÂ∞±‰ºöÈöèÁùÄÁ∫øÁ®ãÊï∞ÈáèËÄåÂ¢ûÂä†Ôºà6ms * Á∫øÁ®ãÊï∞Ôºå‰πãÊâÄ‰ª•ÈÄâÊã© 6msÔºåÊòØ‰∏∫‰∫ÜÈÅøÂÖçÈ¢ëÁπÅÊä¢Âç†ÔºåÂØºËá¥‰∏ä‰∏ãÊñáÂàáÊç¢È¢ëÁπÅÂàáÊç¢ÁöÑÂºÄÈîÄÔºâ„ÄÇÁî±‰∫é CFS ÊÄªÊòØ‰ºöÊåëÈÄâ vruntime ÊúÄÂ∞èÁöÑÁ∫øÁ®ãÊâßË°åÔºåÂÆÉÂ∞±ÈúÄË¶ÅÈÅøÂÖçÊüê‰∏™Á∫øÁ®ãÁöÑ vruntime Â§™Â∞èÔºå‰ª•Ëá≥‰∫éÂÖ∂ÂÆÉÁ∫øÁ®ãÈúÄË¶ÅÁ≠âÂæÖÂæà‰πÖÊâçËÉΩÂæóÂà∞Ë∞ÉÂ∫¶Ôºà‰ºöÊúâÈ••È•øÈóÆÈ¢òÔºâ„ÄÇÊâÄ‰ª•Âú®ÂÆûË∑µ‰∏≠ÔºåCFS ‰ºö‰øùËØÅÊâÄÊúâÁ∫øÁ®ã‰πãÈó¥ÁöÑ vruntime ‰πãÂ∑Æ‰Ωé‰∫éÊä¢Âç†Êó∂Èó¥Ôºà6msÔºâÔºåÂÆÉÊòØÈÄöËøáÂ¶Ç‰∏ã‰∏§ÁÇπÊù•‰øùËØÅÁöÑÔºö ÂΩìÁ∫øÁ®ãÂàõÂª∫Êó∂ÔºåÂÆÉÁöÑ vruntime ÂÄºÁ≠â‰∫éËøêË°åÈòüÂàó‰∏≠Á≠âÂæÖÊâßË°åÁ∫øÁ®ãÁöÑÊúÄÂ§ß vruntimeÔºõ ÂΩìÁ∫øÁ®ã‰ªéÁù°Áú†‰∏≠Âî§ÈÜíÊó∂ÔºåÂÆÉÁöÑ vruntime ÂÄº‰ºöË¢´Êõ¥Êñ∞‰∏∫Â§ß‰∫éÊàñÁ≠â‰∫éÊâÄÊúâÂæÖË∞ÉÂ∫¶Á∫øÁ®ã‰∏≠ÊúÄÂ∞èÁöÑ vruntime„ÄÇ‰ΩøÁî®ÊúÄÂ∞è vruntime ËøòÂèØ‰ª•‰øùËØÅÈ¢ëÁπÅÁù°Áú†ÁöÑÁ∫øÁ®ã‰ºòÂÖàË¢´Ë∞ÉÂ∫¶ÔºåËøôÂØπ‰∫éÊ°åÈù¢Á≥ªÁªüÈùûÂ∏∏ÈÄÇÂêàÔºåÂÆÉ‰ºöÂáèÂ∞ë‰∫§‰∫íÂ∫îÁî®ÁöÑÂìçÂ∫îÂª∂Ëøü„ÄÇ CFS ËøòÂºïÂÖ•‰∫ÜÂêØÂèëÂºèË∞ÉÂ∫¶ÊÄùÊÉ≥Êù•ÊîπÂñÑÈ´òÈÄüÁºìÂ≠òÂà©Áî®Áéá„ÄÇ‰æãÂ¶ÇÔºåÂΩìÁ∫øÁ®ãË¢´Âî§ÈÜíÊó∂ÔºåÂÆÉ‰ºöÊ£ÄÊü•ËØ•Á∫øÁ®ãÁöÑ vruntime ÂíåÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ã vruntime ‰πãÂ∑ÆÊòØÂê¶ÈùûÂ∏∏ÊòæËëóÔºà‰∏¥ÁïåÂÄºÊòØ 1msÔºâÔºåÂ¶ÇÊûú‰∏çÊòØÁöÑËØùÔºåÂàô‰∏ç‰ºöÊä¢Âç†ÂΩìÂâçÊ≠£Âú®ËøêË°åÁöÑ‰ªªÂä°„ÄÇ‰ΩÜÊòØËøôÁßçÂÅöÊ≥ïËøòÊòØ‰ª•Áâ∫Áâ≤Ë∞ÉÂ∫¶Âª∂Ëøü‰∏∫‰ª£‰ª∑ÁöÑÔºåÁÆóÊòØ‰∏ÄÁßçÊùÉË°°Âêß„ÄÇ Â§öÊ†∏Ë¥üËΩΩÂùáË°°Âú®Â§öÊ†∏ÁéØÂ¢É‰∏≠ÔºåLinux CFS ‰ºöÂ∞ÜÂ∑•‰ΩúÔºàworkÔºâÂàÜÊëäÂà∞Â§ö‰∏™Â§ÑÁêÜÂô®Ê†∏ÂøÉ‰∏≠ÊâßË°å„ÄÇ‰ΩÜÊòØËøô‰∏çÁ≠âÂêå‰∫éÂ∞ÜÁ∫øÁ®ãÂùáÂàÜÂà∞Â§ö‰∏™Â§ÑÁêÜÂô®„ÄÇÊØîÂ¶ÇÔºå‰∏Ä‰∏™ CPU ÂØÜÈõÜÂûãÁöÑÁ∫øÁ®ãÂíå 10 ‰∏™È¢ëÁπÅÁù°Áú†ÁöÑÁ∫øÁ®ãÂèØËÉΩÂàÜÂà´Âú®‰∏§‰∏™Ê†∏‰∏äÊâßË°åÔºåÂÖ∂‰∏≠‰∏Ä‰∏™‰∏ìÈó®ÊâßË°å CPU ÂØÜÈõÜÂûãÁ∫øÁ®ãÔºõËÄåÂè¶‰∏Ä‰∏™ÂàôÂ§ÑÁêÜÈÇ£ 10 ‰∏™È¢ëÁπÅÁù°Áú†ÁöÑÁ∫øÁ®ã„ÄÇ ‰∏∫‰∫ÜÂ§ö‰∏™Â§ÑÁêÜÂô®‰∏äÁöÑÂ∑•‰ΩúÈáèÂùáË°°ÔºåCFS ‰ΩøÁî®‰∫Ü load ÊåáÊ†áÊù•Ë°°ÈáèÁ∫øÁ®ãÂíåÂ§ÑÁêÜÂô®ÁöÑË¥üËΩΩÊÉÖÂÜµ„ÄÇÁ∫øÁ®ãÁöÑË¥üËΩΩÂíåÁ∫øÁ®ãÁöÑ CPU Âπ≥Âùá‰ΩøÁî®ÁéáÁõ∏ÂÖ≥ÔºöÁªèÂ∏∏Áù°Áú†ÁöÑÁ∫øÁ®ãË¥üËΩΩË¶Å‰Ωé‰∫é‰∏çÁù°Áú†ÁöÑÁ∫øÁ®ãË¥üËΩΩ„ÄÇÁ±ª‰ºº vruntimeÔºåÁ∫øÁ®ãÁöÑË¥üËΩΩ‰πüÊòØÁ∫øÁ®ãÁöÑ‰ºòÂÖàÁ∫ßÂä†ÊùÉÂæóÂà∞ÁöÑ„ÄÇËÄåÂ§ÑÁêÜÂô®ÁöÑË¥üËΩΩÊòØÂú®ËØ•Â§ÑÁêÜÂô®‰∏äÂèØËøêË°åÁ∫øÁ®ãÁöÑË¥üËΩΩ‰πãÂíå„ÄÇCFS ‰ºöÂ∞ùËØïÂùáË°°Â§ÑÁêÜÂô®ÁöÑË¥üËΩΩ„ÄÇ CFS ‰ºöÂú®Á∫øÁ®ãÂàõÂª∫ÂíåÂî§ÈÜíÊó∂ÂÖ≥Ê≥®Â§ÑÁêÜÂô®ÁöÑË¥üËΩΩÊÉÖÂÜµÔºåË∞ÉÂ∫¶Âô®È¶ñÂÖàË¶ÅÂÜ≥ÂÆöÂ∞Ü‰ªªÂä°ÊîæÂú®Âì™‰∏™Â§ÑÁêÜÂô®ÁöÑËøêË°åÈòüÂàó‰∏≠„ÄÇËøôÈáå‰πü‰ºöÊ∂âÂèäÂà∞ÂêØÂèëÂºèÊÄùÊÉ≥ÔºåÊØîÂ¶ÇÔºåÂ¶ÇÊûú CFS Ê£ÄÊü•Âà∞Áîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÊ®°ÂûãÔºåÈÇ£‰πàÂÆÉ‰ºöÂ∞ÜÊ∂àË¥πËÄÖÁ∫øÁ®ãÂ∞ΩÂèØËÉΩÂú∞ÂàÜÊï£Âà∞Êú∫Âô®ÁöÑÂ§ö‰∏™Â§ÑÁêÜÂô®‰∏äÔºåÂõ†‰∏∫Â§öÊï∞Ê†∏ÂøÉÈÉΩÈÄÇÂêàÂ§ÑÁêÜÂî§ÈÜíÁöÑÁ∫øÁ®ã„ÄÇ Ë¥üËΩΩÂùáË°°Ëøò‰ºöÂë®ÊúüÊÄßÂèëÁîüÔºåÊØèÈöî 4msÔºåÊØè‰∏™Â§ÑÁêÜÂô®ÈÉΩ‰ºöÂ∞ùËØï‰ªéÂÖ∂ÂÆÉÂ§ÑÁêÜÂô®ÂÅ∑Âèñ‰∏Ä‰∫õÂ∑•‰Ωú„ÄÇÂΩìÁÑ∂ÔºåËøôÁßç work-stealing ÂùáË°°ÊñπÊ≥ïËøò‰ºöËÄÉËôëÊú∫Âô®ÁöÑÊãìÊâëÁªìÊûÑÔºöÂ§ÑÁêÜÂô®‰ºöÂ∞ùËØï‰ªéË∑ùÁ¶ªÂÆÉ‰ª¨„ÄåÊõ¥Ëøë„ÄçÁöÑÂÖ∂ÂÆÉÂ§ÑÁêÜÂô®‰∏äÂ∞ùËØïÁ™ÉÂèñÂ∑•‰ΩúÔºåËÄåÈùûË∑ùÁ¶ª„ÄåÊõ¥Ëøú„ÄçÁöÑÂ§ÑÁêÜÂô®ÔºàÂ¶ÇËøúÁ®ã NUMA ËäÇÁÇπÔºâ„ÄÇÂΩìÂ§ÑÁêÜÂô®ÂÜ≥ÂÆöË¶Å‰ªéÂÖ∂ÂÆÉÂ§ÑÁêÜÂô®Á™ÉÂèñ‰ªªÂä°Êó∂ÔºåÂÆÉ‰ºöÂ∞ùËØïÂú®‰∫åËÄÖ‰πãÈó¥ÂùáË°°Ë¥üËΩΩÔºåÂπ∂‰∏î‰ºöÁ™ÉÂèñÂ§öËææ 32 ‰∏™Á∫øÁ®ã„ÄÇÊ≠§Â§ñÔºåÂΩìÂ§ÑÁêÜÂô®ËøõÂÖ•Á©∫Èó≤Áä∂ÊÄÅÊó∂ÔºåÂÆÉ‰πü‰ºöÁ´ãÂàªË∞ÉÁî®Ë¥üËΩΩÂùáË°°Âô®„ÄÇ Âú®Â§ßÂûãÁöÑ NUMA Êú∫Âô®‰∏äÔºåCFS Âπ∂‰∏ç‰ºöÁ≤óÊö¥Âú∞ÊØîËæÉÊâÄÊúâ CPU ÁöÑË¥üËΩΩÔºåËÄåÊòØ‰ª•ÂàÜÂ±ÇÁöÑÊñπÂºèËøõË°åË¥üËΩΩÂùáË°°„ÄÇ‰ª•‰∏ÄÂè∞Êúâ‰∏§‰∏™ NUMA ËäÇÁÇπÁöÑÊú∫Âô®‰∏∫‰æãÔºåCFS ‰ºöÂÖàÂú® NUMA ËäÇÁÇπÂÜÖÈÉ®ÁöÑÂ§ÑÁêÜÂô®‰πãÈó¥ËøõË°åË¥üËΩΩÂùáË°°ÔºåÁÑ∂ÂêéÊØîËæÉ NUMA ËäÇÁÇπ‰πãÈó¥ÁöÑË¥üËΩΩÔºàÈÄöËøáËäÇÁÇπÂÜÖÈÉ®Â§ÑÁêÜÂô®Ë¥üËΩΩËÆ°ÁÆóÂæóÂà∞ÔºâÔºåÂÜçÂÜ≥ÂÆöË¶Å‰∏çË¶ÅÂú®‰∏§‰∏™ËäÇÁÇπ‰πãÈó¥ËøõË°åË¥üËΩΩÂùáË°°„ÄÇÂ¶ÇÊûú NUMA ËäÇÁÇπ‰πãÈó¥ÁöÑË¥üËΩΩÂ∑ÆË∑ùÂú® 25% ‰ª•ÂÜÖÔºåÂàô‰∏ç‰ºöËøõË°åË¥üËΩΩÂùáË°°„ÄÇÊÄªÁªìÊù•ËØ¥ÔºåÂ¶ÇÊûú‰∏§‰∏™Â§ÑÁêÜÂô®ÔºàÊàñÂ§ÑÁêÜÂô®ÁªÑÔºâ‰πãÈó¥ÁöÑË∑ùÁ¶ªË∂äËøúÔºåÈÇ£‰πàÂè™ÊúâÂú®‰∏çÂπ≥Ë°°ÊÄßÂ∑ÆË∑ùË∂äÂ§ßÁöÑÊÉÖÂÜµ‰∏ãÊâç‰ºöËÄÉËôëË¥üËΩΩÂùáË°°„ÄÇ ËøêË°åÈòüÂàóCFS ÂºïÂÖ•‰∫ÜÁ∫¢ÈªëÊ†ëÔºàÊú¨Ë¥®‰∏äÊòØ‰∏ÄÊ£µÂçäÂπ≥Ë°°‰∫åÂèâÊ†ëÔºåÂØπ‰∫éÊèíÂÖ•ÂíåÊü•ÊâæÈÉΩÊúâ O(log(N)) ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÔºâÊù•Áª¥Êä§ËøêË°åÈòüÂàóÔºåÊ†ëÁöÑËäÇÁÇπÂÄºÊòØË∞ÉÂ∫¶ÂçïÂÖÉÁöÑ vruntimeÔºåÊã•ÊúâÊúÄÂ∞è vruntime ÁöÑËäÇÁÇπ‰Ωç‰∫éÊ†ëÁöÑÊúÄÂ∑¶‰∏ãËæπ„ÄÇ Êé•‰∏ãÊù•ÁúãÁúã cfs_rq Êï∞ÊçÆÁªìÊûÑÁöÑÂÆö‰πâÔºà‰Ωç‰∫é &lt;kernel/sched/sched.h&gt;ÔºâÔºö123456789101112131415struct cfs_rq&#123; // ÊâÄÊúâ‰ªªÂä°ÁöÑÁ¥ØËÆ°ÊùÉÈáçÂÄº struct load_weight load; // Ë°®Á§∫ËØ•ÈòüÂàó‰∏≠ÊúâÂ§öÂ∞ë‰∏™ÂèØËøêË°åÁöÑ‰ªªÂä° unsigned int nr_running; // ËøêË°åÈòüÂàó‰∏≠ÊúÄÂ∞èÁöÑ vruntime u64 min_vruntime; // Á∫¢ÈªëÊ†ëÁöÑÊ†πËäÇÁÇπÔºåÊåáÂêëËøêË°å‰ªªÂä°ÈòüÂàó struct rb_root tasks_timeline; // ‰∏ã‰∏Ä‰∏™Âç≥Â∞ÜË¢´Ë∞ÉÂ∫¶ÁöÑ‰ªªÂä° struct rb_node *rb_leftmost; // ÊåáÂêëÂΩìÂâçÊ≠£Âú®ËøêË°åÁöÑË∞ÉÂ∫¶ÂçïÂÖÉ struct sched_entity *curr;&#125; CFS ÁÆóÊ≥ïÂÆûÈôÖÂ∫îÁî®‰∫éË∞ÉÂ∫¶ÂçïÂÖÉÔºàËøôÊòØ‰∏Ä‰∏™Êõ¥ÈÄöÁî®ÁöÑÊäΩË±°ÔºåÂèØ‰ª•ÊòØÁ∫øÁ®ã„ÄÅcgroups Á≠âÔºâÔºåË∞ÉÂ∫¶ÂçïÂÖÉÊï∞ÊçÆÁªìÊûÑÂÆö‰πâÂ¶Ç‰∏ãÔºà‰Ωç‰∫é &lt;include/linux/sched.h&gt;ÔºâÔºö123456789101112131415161718struct sched_entity&#123; // Ë°®Á§∫Ë∞ÉÂ∫¶ÂçïÂÖÉÁöÑË¥üËΩΩÊùÉÈáçÔºàÊØîÂ¶ÇËØ•Ë∞ÉÂ∫¶ÂçïÂÖÉÊòØ‰∏Ä‰∏™ÁªÑÔºåÂàôËØ•ÂÄºÂ∞±ÊòØËØ•ÁªÑ‰∏ãÊâÄÊúâÁ∫øÁ®ãÁöÑË¥üËΩΩÊùÉÈáçÁöÑÁªÑÂêàÔºâ struct load_weight load; /* for load-balancing */ // Ë°®Á§∫Á∫¢ÈªëÊ†ëÁöÑËäÇÁÇπ struct rb_node run_node; // Ë°®Á§∫ÂΩìÂâçË∞ÉÂ∫¶ÂçïÂÖÉÊòØÂê¶‰Ωç‰∫éËøêË°åÈòüÂàó unsigned int on_rq; // ÂºÄÂßãÊâßË°åÊó∂Èó¥ u64 exec_start; // ÊÄªÂÖ±ËøêË°åÁöÑÊó∂Èó¥ÔºåËØ•ÂÄºÊòØÈÄöËøá `update_curr()` Êõ¥Êñ∞ÁöÑ„ÄÇ u64 sum_exec_runtime; // Âü∫‰∫éËôöÊãüÊó∂ÈíüËÆ°ÁÆóÂá∫ËØ•Ë∞ÉÂ∫¶ÂçïÂÖÉÂ∑≤ËøêË°åÁöÑÊó∂Èó¥ u64 vruntime; // Áî®‰∫éËÆ∞ÂΩï‰πãÂâçËøêË°åÁöÑÊó∂Èó¥‰πãÂíå u64 prev_sum_exec_runtime;&#125;; ËôöÊãüÊó∂ÈíüÂâçÈù¢ÊèêÂà∞ÁöÑ vruntime Á©∂Á´üÊòØ‰ªÄ‰πàÂë¢Ôºü‰∏∫‰ªÄ‰πàÂè´‰ΩúËôöÊãüËøêË°åÊó∂Èó¥Âë¢ÔºüÊé•‰∏ãÊù•Â∞±Ë¶ÅÊè≠ÂºÄÂÆÉÁöÑÁ•ûÁßòÈù¢Á∫±„ÄÇ‰∏∫‰∫ÜÊõ¥Â•ΩÂú∞ÂÆûÁé∞ÂÖ¨Âπ≥ÊÄßÔºåCFS ‰ΩøÁî®‰∫ÜËôöÊãüÊó∂ÈíüÊù•ÊµãÈáè‰∏Ä‰∏™Á≠âÂæÖÁöÑË∞ÉÂ∫¶ÂçïÂÖÉÂú®‰∏Ä‰∏™ÂÆåÂÖ®ÂÖ¨Âπ≥ÁöÑÂ§ÑÁêÜÂô®‰∏äÂÖÅËÆ∏ÊâßË°åÁöÑÊó∂Èó¥„ÄÇÁÑ∂ËÄåÔºåËôöÊãüÊó∂ÈíüÂπ∂Ê≤°ÊúâÁúüÂÆûÁöÑÂÆûÁé∞ÔºåÂÆÉÂè™ÊòØ‰∏Ä‰∏™ÊäΩË±°Ê¶ÇÂøµ„ÄÇ Êàë‰ª¨ÂèØ‰ª•Âü∫‰∫éÁúüÂÆûÊó∂Èó¥Âíå‰ªªÂä°ÁöÑË¥üËΩΩÊùÉÈáçÊù•ËÆ°ÁÆóÂá∫ËôöÊãüËøêË°åÊó∂Èó¥ÔºåËØ•ÁÆóÊ≥ïÊòØÂú® update_cur() ÂáΩÊï∞‰∏≠ÂÆûÁé∞ÁöÑÔºåÂÆÉ‰ºöÊõ¥Êñ∞Ë∞ÉÂ∫¶ÂçïÂÖÉÁöÑÊó∂Èó¥ËÆ∞Ë¥¶‰ø°ÊÅØÔºå‰ª•Âèä CFS ËøêË°åÈòüÂàóÁöÑ min_vruntimeÔºàÂÆåÊï¥ÂÆö‰πâ‰Ωç‰∫é &lt;kernel/sched/fair.c&gt;ÔºâÔºö1234567891011121314151617181920212223242526272829303132333435363738394041424344454647static void update_curr(struct cfs_rq *cfs_rq)&#123; struct sched_entity *curr = cfs_rq-&gt;curr; u64 now = rq_clock_task(rq_of(cfs_rq)); u64 delta_exec; if (unlikely(!curr)) return; // ËÆ°ÁÆóÂá∫Ë∞ÉÂ∫¶ÂçïÂÖÉÂºÄÂßãÊâßË°åÊó∂Èó¥ÂíåÂΩìÂâç‰πãÈó¥ÁöÑÂ∑ÆÂÄºÔºåÂç≥ÁúüÂÆûËøêË°åÊó∂Èó¥ delta_exec = now - curr-&gt;exec_start; curr-&gt;vruntime += calc_delta_fair(delta_exec, curr); update_min_vruntime(cfs_rq);&#125;static inline u64 calc_delta_fair(u64 delta, struct sched_entity *se)&#123; // Â¶ÇÊûú‰ªªÂä°ÁöÑ‰ºòÂÖàÁ∫ßÊòØÈªòËÆ§ÁöÑ‰ºòÂÖàÁ∫ßÔºàÂÜÖÈÉ® nice ÂÄºÊòØ 120ÔºâÔºåÈÇ£‰πàËôöÊãüËøêË°åÊó∂Èó¥ // Â∞±ÊòØÁúüÂÆûËøêË°åÊó∂Èó¥„ÄÇÂê¶ÂàôÔºå‰ºöÂü∫‰∫é `__calc_delta` ËÆ°ÁÆóÂá∫ËôöÊãüËøêË°åÊó∂Èó¥„ÄÇ if (unlikely(se-&gt;load.weight != NICE_0_LOAD)) // ËØ•ËÆ°ÁÆóËøáÁ®ãÂü∫Êú¨Á≠âÂêå‰∫éÔºö // delta = delta_exec * NICE_0_LOAD / cur-&gt;load.weight; delta = __calc_delta(delta, NICE_0_LOAD, &amp;se-&gt;load); return delta;&#125;static void update_min_vruntime(struct cfs_rq *cfs_rq)&#123; u64 vruntime = cfs_rq-&gt;min_vruntime; if (cfs_rq-&gt;curr) // Â¶ÇÊûúÊ≠§Êó∂Êúâ‰ªªÂä°Âú®ËøêË°åÔºåÂ∞±Êõ¥Êñ∞ÊúÄÂ∞èËøêË°åÊó∂Èó¥‰∏∫ÂΩìÂâç‰ªªÂä°ÁöÑ vruntime vruntime = cfs_rq-&gt;curr-&gt;vruntime; if (cfs_rq-&gt;rb_leftmost) &#123; // Ëé∑Âæó‰∏ã‰∏Ä‰∏™Ë¶ÅËøêË°åÁöÑË∞ÉÂ∫¶ÂçïÂÖÉ struct sched_entity *se = rb_entry(cfs_rq-&gt;rb_leftmost, struct sched_entity, run_node); if (!cfs_rq-&gt;curr) vruntime = se-&gt;vruntime; else // ‰øùËØÅ min_vruntime ÊòØ‰∫åËÄÖ‰πãÈó¥ËæÉÂ∞èÁöÑÈÇ£‰∏™ÂÄº vruntime = min_vruntime(vruntime, se-&gt;vruntime); &#125; // ËøôÈáå‰πãÊâÄ‰ª•Âéª‰∫åËÄÖ‰πãÈó¥ÁöÑÊúÄÂ§ßÂÄºÔºåÊòØ‰∏∫‰∫Ü‰øùËØÅ min_vruntime ËÉΩÂ§üÂçïË∞ÉÂ¢ûÈïø // ÂèØ‰ª•ÊÉ≥ÊÉ≥‰∏∫‰ªÄ‰πàÈúÄË¶ÅËøôÊ†∑ÂÅöÔºü cfs_rq-&gt;min_vruntime = max_vruntime(cfs_rq-&gt;min_vruntime, vruntime);&#125; ÊúÄÂêéÔºåÊù•ÊÄªÁªì‰∏ã‰ΩøÁî®ËôöÊãüÊó∂ÈíüÁöÑÊÑè‰πâÔºö ÂΩì‰ªªÂä°ËøêË°åÊó∂ÔºåÂÆÉÁöÑËôöÊãüÊó∂Èó¥ÊÄªÊòØ‰ºöÂ¢ûÂä†Ôºå‰ªéËÄå‰øùËØÅÂÆÉ‰ºöË¢´ÁßªÂä®Âà∞Á∫¢ÈªëÊ†ëÁöÑÂè≥‰æßÔºõ ÂØπ‰∫éÈ´ò‰ºòÂÖàÁ∫ßÁöÑ‰ªªÂä°ÔºåËôöÊãüÊó∂ÈíüÁöÑËäÇÊãçÊõ¥ÊÖ¢Ôºå‰ªéËÄåËÆ©ÂÆÉÁßªÂä®Âà∞Á∫¢ÈªëÊ†ëÂè≥‰æßÁöÑÈÄüÂ∫¶Â∞±Ë∂äÊÖ¢ÔºåÂõ†Ê≠§ÂÆÉ‰ª¨Ë¢´ÂÜçÊ¨°Ë∞ÉÂ∫¶ÁöÑÊú∫‰ºöÂ∞±Êõ¥Â§ß‰∫õ„ÄÇ ÈÄâÊã©‰∏ã‰∏Ä‰∏™‰ªªÂä°CFS ÂèØ‰ª•Âú®Á∫¢ÈªëÊ†ë‰∏≠‰∏ÄÁõ¥ÊâæÂà∞ÊúÄÂ∑¶ÔºàleftmostÔºâËæπÁöÑËäÇÁÇπ‰Ωú‰∏∫‰∏ã‰∏Ä‰∏™ËøêË°åÁöÑ‰ªªÂä°„ÄÇ‰ΩÜÊòØÁúüÊ≠£ÂÆûÁé∞ __pick_first_entity() ÁöÑÂáΩÊï∞ÂÖ∂ÂÆûÂπ∂Ê≤°ÊúâÁúüÊ≠£Âú∞ÊâßË°åÊü•ÊâæÔºàËôΩÁÑ∂ÂèØ‰ª•Âú® O(log(N)) Êó∂Èó¥ÂÜÖÊâæÂà∞ÔºâÔºåÊàë‰ª¨ÂèØ‰ª•Áúã‰∏ãÂÆÉÁöÑÂÆö‰πâÔºàÂÆåÊï¥ÂÆö‰πâ‰Ωç‰∫é &lt;kernel/sched/fair.c&gt;ÔºâÔºö123456789struct sched_entity *__pick_first_entity(struct cfs_rq *cfs_rq)&#123; // ÂÖ∂ÂÆûËøôÈáåÂèñÁöÑÊòØÁºìÂ≠òÁöÑ leftmost ËäÇÁÇπ // ÊâÄ‰ª•ÊâßË°åÂ∞±‰ºöÊõ¥Âø´‰∫Ü struct rb_node *left = cfs_rq-&gt;rb_leftmost; if (!left) return NULL; return rb_entry(left, struct sched_entity, run_node);&#125; ÂÆûÊó∂Ë∞ÉÂ∫¶Âô®Linux ÂÆûÊó∂‰ªªÂä°Ë∞ÉÂ∫¶Âô®ÂÆûÁé∞‰Ωç‰∫é &lt;kernel/sched/rt.cÔºåÂØπ‰∫éÁ≥ªÁªüËÄåË®ÄÔºåÂÆûÊó∂‰ªªÂä°Â±û‰∫éË¥µÂÆ¢Ôºå‰∏ÄÊó¶Â≠òÂú®ÂÆûÊó∂‰ªªÂä°ÈúÄË¶ÅË∞ÉÂ∫¶ÔºåÈÇ£Â∞±Â∫îÂΩìÂ∞ΩÂèØËÉΩÂèäÊó∂Âú∞‰∏∫ÂÆÉ‰ª¨ÊúçÂä°„ÄÇÂØπ‰∫éÂÆûÊó∂‰ªªÂä°ËÄåË®ÄÔºåÊúâ‰∏§ÁßçË∞ÉÂ∫¶Á≠ñÁï•Â≠òÂú®Ôºö SCHED_FIFO: Ëøô‰∏™ÂÖ∂ÂÆûÂ∞±ÊòØ‰∏Ä‰∏™ÂÖàÂà∞ÂÖàÊúçÂä°ÁöÑË∞ÉÂ∫¶ÁÆóÊ≥ï„ÄÇËøôÁ±ª‰ªªÂä°Ê≤°ÊúâÊó∂Èó¥ÁâáÈôêÂà∂ÔºåÂÆÉ‰ª¨‰ºö‰∏ÄÁõ¥ËøêË°åÁõ¥Âà∞ÈòªÂ°ûÊàñËÄÖ‰∏ªÂä®ÊîæÂºÉ CPUÔºå‰∫¶ÊàñËÄÖË¢´Êõ¥È´ò‰ºòÂÖàÁ∫ßÁöÑÂÆûÊó∂‰ªªÂä°Êä¢Âç†„ÄÇËØ•Á±ª‰ªªÂä°ÊÄª‰ºöÊä¢Âç† SCHED_NORMAL ‰ªªÂä°„ÄÇÂ¶ÇÊûúÂ§ö‰∏™‰ªªÂä°ÂÖ∑ÊúâÁõ∏ÂêåÁöÑ‰ºòÂÖàÁ∫ßÔºåÈÇ£ÂÆÉ‰ª¨‰ºö‰ª•ËΩÆËØ¢ÁöÑÊñπÂºèË∞ÉÂ∫¶Ôºà‰πüÂ∞±ÊòØÂΩì‰∏Ä‰∏™‰ªªÂä°ÂÆåÊàêÂêéÔºå‰ºöË¢´ÊîæÂà∞ÈòüÂàóÂ∞æÈÉ®Á≠âÂæÖ‰∏ãÊ¨°ÊâßË°åÔºâÔºõ SCHED_RR: ËøôÁßçÁ≠ñÁï•Á±ª‰ºº‰∫é SCHED_FIFOÔºåÂè™ÊòØÂ§ö‰∫ÜÊó∂Èó¥ÁâáÈôêÂà∂„ÄÇÁõ∏Âêå‰ºòÂÖàÁ∫ßÁöÑ‰ªªÂä°‰ºö‰ª•ËΩÆËØ¢ÁöÑÊñπÂºèË¢´Ë∞ÉÂ∫¶ÔºåÊØè‰∏™ËøêË°åÁöÑ‰ªªÂä°ÈÉΩ‰ºö‰∏ÄÁõ¥ËøêË°åÔºåÁõ¥Âà∞ÂÖ∂Áî®ÂÖâËá™Â∑±ÁöÑÊó∂Èó¥ÁâáÔºåÊàñËÄÖË¢´Êõ¥È´ò‰ºòÂÖàÁ∫ßÁöÑ‰ªªÂä°Êä¢Âç†„ÄÇÂΩì‰ªªÂä°ÁöÑÊó∂Èó¥ÁâáÁî®ÂÖâÂêéÔºåÂÆÉ‰ºöÈáçÊñ∞Ë°•ÂÖÖËÉΩÈáèÔºåÂπ∂Ë¢´Âä†ÂÖ•Âà∞ÈòüÂàóÂ∞æÈÉ®„ÄÇÈªòËÆ§ÁöÑÊó∂Èó¥ÁâáÊòØ 100msÔºåÂèØ‰ª•Âú® &lt;include/linux/sched/rt.h&gt; ÊâæÂà∞ÂÖ∂ÂÆö‰πâ„ÄÇ ÂÆûÊó∂‰ªªÂä°ÁöÑ‰ºòÂÖàÁ∫ßÊòØÈùôÊÄÅÁöÑÔºå‰∏ç‰ºöÂÉè‰πãÂâçÊèêÂà∞ÁöÑÁÆóÊ≥ïÔºå‰ºöÈáçÊñ∞ËÆ°ÁÆó‰ªªÂä°‰ºòÂÖàÁ∫ß„ÄÇÁî®Êà∑ÂèØ‰ª•ÈÄöËøá chrt ÂëΩ‰ª§Êõ¥Êîπ‰ªªÂä°‰ºòÂÖàÁ∫ß„ÄÇ ÂÆûÁé∞ÁªÜËäÇÂÆûÊó∂‰ªªÂä°ÊúâËá™Â∑±ÁöÑË∞ÉÂ∫¶ÂçïÂÖÉÊï∞ÊçÆÁªìÊûÑÔºà‰Ωç‰∫é &lt;include/linux/sched.h&gt;ÔºâÔºåÂÖ∂ÂÆö‰πâÂ¶Ç‰∏ãÔºö1234567891011struct sched_rt_entity&#123; struct list_head run_list; unsigned long timeout; unsigned long watchdog_stamp; unsigned int time_slice; struct sched_rt_entity *back; struct sched_rt_entity *parent; /* rq on which this entity is (to be) queued: */ struct rt_rq *rt_rq;&#125;; SCHED_FIFO ÁöÑÊó∂Èó¥ÁâáÊòØ 0ÔºåÂèØ‰ª•Âú® &lt;kernel/sched/rt.c&gt; ‰∏≠ÁúãÂà∞ÂÖ∑‰ΩìÂÆö‰πâÔºö1234567891011121314151617181920212223242526272829303132int sched_rr_timeslice = RR_TIMESLICE;static unsigned int get_rr_interval_rt(struct rq *rq, struct task_struct *task)&#123; if (task-&gt;policy == SCHED_RR) return sched_rr_timeslice; else return 0;&#125;``` ËÄåÂÖ≥‰∫éËøêË°åÈòüÂàóÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºö```c/* Real-Time classes' related field in a runqueue: */struct rt_rq&#123; // ÊâÄÊúâÁõ∏Âêå‰ºòÂÖàÁ∫ßÁöÑÂÆûÊó∂‰ªªÂä°ÈÉΩ‰øùÂ≠òÂú® `active.queue[prio]` ÈìæË°®‰∏≠ struct rt_prio_array active; unsigned int rt_nr_running; struct rq *rq; /* main runqueue */&#125;;/** This is the priority-queue data structure of the RT scheduling class:*/struct rt_prio_array&#123; /* include 1 bit for delimiter */ // Á±ª‰ºº O(1) Ë∞ÉÂ∫¶Âô®Ôºå‰ΩøÁî®‰ΩçÂõæÊù•Ê†áËÆ∞ÂØπÂ∫î‰ºòÂÖàÁ∫ßÁöÑÈìæË°®ÊòØÂê¶‰∏∫Á©∫ DECLARE_BITMAP(bitmap, MAX_RT_PRIO + 1); struct list_head queue[MAX_RT_PRIO];&#125;; Á±ª‰ºº‰∫é CFS ‰∏≠ÁöÑ update_curr() ÂáΩÊï∞Ôºåupdate_curr_rt() ÂáΩÊï∞Áî®Êù•Ë∑üË∏™ÂÆûÊó∂‰ªªÂä°ÁöÑ CPU Âç†Áî®ÊÉÖÂÜµÔºåÊî∂ÈõÜ‰∏Ä‰∫õÁªüËÆ°‰ø°ÊÅØÔºåÊõ¥Êñ∞Êó∂Èó¥ÁâáÁ≠âÔºå‰ΩÜËøôÈáå‰ΩøÁî®ÁöÑÊòØÁúüÂÆûÊó∂Èó¥ÔºåËÄåÊ≤°ÊúâËôöÊãüÊó∂Èó¥ÁöÑÊ¶ÇÂøµ„ÄÇÂÆåÊï¥ÂÆö‰πâÂèØ‰ª•ÂèÇËÄÉ kernel/sched/rt.c#L955„ÄÇ BFS &amp; MuqSSÂÖ≥‰∫é BFS Âíå MuqSS ÁöÑÁ≤æÂΩ©‰ªãÁªçÂèØ‰ª•ÂèÇËÄÉ ËøôÁØáÊñáÁ´†ÔºåËøôÈáå‰∏çÂÜçËµòËø∞„ÄÇÊÄª‰ΩìÊù•ËØ¥ÔºåBFS ÊòØ‰∏Ä‰∏™ÈÄÇÁî®‰∫éÊ°åÈù¢ÊàñÁßªÂä®ËÆæÂ§áÁöÑË∞ÉÂ∫¶Âô®ÔºåËÆæËÆ°Âú∞ÊØîËæÉÁÆÄÊ¥ÅÔºåÁî®‰∫éÊîπÂñÑÊ°åÈù¢Â∫îÁî®ÁöÑ‰∫§‰∫íÊÄßÔºåÂáèÂ∞èÂìçÂ∫îÊó∂Èó¥ÔºåÊèêÂçáÁî®Êà∑‰ΩìÈ™å„ÄÇÂÆÉÈááÁî®‰∫ÜÂÖ®Â±ÄÂçï‰ªªÂä°ÈòüÂàóËÆæËÆ°Ôºå‰∏çÂÜçËÆ©ÊØè‰∏™ CPU ÈÉΩÊúâÁã¨Á´ãÁöÑËøêË°åÈòüÂàó„ÄÇËôΩÁÑ∂‰ΩøÁî®Âçï‰∏™ÂÖ®Â±ÄÈòüÂàóÔºåÈúÄË¶ÅÂºïÂÖ•ÈòüÂàóÈîÅÊù•‰øùËØÅÂπ∂ÂèëÂÆâÂÖ®ÊÄßÔºå‰ΩÜÊòØÂØπ‰∫éÊ°åÈù¢Á≥ªÁªüËÄåË®ÄÔºåÂ§ÑÁêÜÂô®ÈÄöÂ∏∏ÈÉΩÊØîËæÉÂ∞ëÔºåÈîÅÁöÑÂºÄÈîÄÂü∫Êú¨ÂèØ‰ª•ÂøΩÁï•„ÄÇBFS ÊØèÊ¨°‰ºöÂú®‰ªªÂä°ÈìæË°®‰∏≠ÈÄâÊã©ÂÖ∑ÊúâÊúÄÂ∞è virtual deadline ÁöÑ‰ªªÂä°ËøêË°å„ÄÇ MuqSS ÊòØ‰ΩúËÄÖÂêéÊù•Âü∫‰∫é BFS ÊîπËøõÁöÑ‰∏ÄÊ¨æË∞ÉÂ∫¶Âô®ÔºåÂêåÊ†∑ÊòØÁî®‰∫éÊ°åÈù¢ÁéØÂ¢É‰ªªÂä°Ë∞ÉÂ∫¶„ÄÇÂÆÉ‰∏ªË¶ÅËß£ÂÜ≥‰∫Ü BFS ÁöÑ‰∏§‰∏™ÈóÆÈ¢òÔºö ÊØèÊ¨°ÈúÄË¶ÅÂú®ÂØπÂ∫î‰ºòÂÖàÁ∫ßÈìæË°®‰∏≠ÈÅçÂéÜÊü•ÊâæÈúÄË¶ÅÊâßË°å‰ªªÂä°ÔºåËøô‰∏™Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n)„ÄÇÊâÄ‰ª•Êñ∞ÁöÑË∞ÉÂ∫¶Âô®ÂºïÂÖ•‰∫ÜË∑≥Ë°®Êù•Ëß£ÂÜ≥ËØ•ÈóÆÈ¢òÔºå‰ªéËÄåÂ∞ÜÊó∂Èó¥Â§çÊùÇÂ∫¶Èôç‰ΩéÂà∞ O(1)„ÄÇ ÂÖ®Â±ÄÈîÅ‰∫âÂ§∫ÁöÑÂºÄÈîÄ‰ºòÂåñÔºåÈááÁî® try_lock Êõø‰ª£ lock„ÄÇ Ê∑±ÂÖ•Â≠¶‰π† „ÄäLinux ËÆæËÆ°‰∏éÂÆûÁé∞ Á¨¨‰∏âÁâà„ÄãËøõÁ®ãË∞ÉÂ∫¶Á´†ËäÇ A complete guide to Linux process scheduling Process Scheduling in Linux ÂÜÖÊ†∏ÊñáÊ°£ÔºöCFS Scheduler ËÆæËÆ° Linux ËøõÁ®ã‰∏éÁ∫øÁ®ãÔºö„ÄäLinux Á≥ªÁªüÁºñÁ®ãÊâãÂÜå Á¨¨ 28 Á´†ÂèäÂêéÁª≠„Äã ÂèØ‰ª•ÂÖ≥Ê≥®‰∏ãÂíåËøõÁ®ãÁ∫øÁ®ãÊúâÂÖ≥ÁöÑÁ≥ªÁªüË∞ÉÁî® Pthread Á∫øÁ®ãÊòØÊÄé‰πàÂú® Linux ‰∏≠ÂÆûÁé∞ÁöÑ Linux ÂÖ¨Âπ≥Ë∞ÉÂ∫¶ ÂØπÊØî‰∫Ü‰º†ÁªüË∞ÉÂ∫¶Âô®Âíå CFS ÁöÑÂå∫Âà´ ÁÆÄÂçï‰ªãÁªç‰∫Ü CFS ÁöÑÂÆûÁé∞ The Battle of Schedulers: FreeBSD ULE vs Linux CFS ÈáçÁÇπÂèØ‰ª•Áúã‰∏ãÂÖ≥‰∫é CFS ÁöÑÁÆÄËø∞ &amp; Ë¥üËΩΩÂùáË°°ÈÉ®ÂàÜ ÂèØ‰ª•ÁÆÄÂçïÁúãÁúã ULE ÊòØÁöÑÂÆûÁé∞ÂéüÁêÜÔºàinteractive, batch queueÔºâÔºå‰∏∫‰ªÄ‰πàÂèØËÉΩ‰ºöÊúâÈ•øÊ≠ªÁöÑÊÉÖÂÜµ NUMA Êû∂ÊûÑÊ∑±Á©∂ Êó©ÊúüÁöÑ x86 ÊòØ Universal Memory Arch, UMA Êû∂ÊûÑ NUMA Êû∂ÊûÑÂá∫Êù•ÂêéÔºåËÆøÈóÆ‰∏çÂêåÂÜÖÂ≠òÂú∞ÂùÄÔºåÈÄüÂ∫¶ÊòØÊúâÂ∑ÆÂà´‰∫ÜÔºåÂíåÁ°¨‰ª∂Êû∂ÊûÑÊúâÂæàÂ§ßÂÖ≥Á≥ª Kernel Ë∞ÉÂ∫¶Á≥ªÁªü ÈáçÁÇπÂÖ≥Ê≥®‰ΩúËÄÖÂÖ≥‰∫é CFS ÂàóÂá∫ÁöÑÂá†‰∏™ÁÅµÈ≠ÇÊã∑ÈóÆ vruntime Âú®‰ªÄ‰πàÊó∂ÂÄôÂèëÁîüÊîπÂèòÔºü vruntime ÂàùÂßãÂÄºÊòØÊÄé‰πàËÆæÂÆöÁöÑÔºü ‰∏§‰∏™ÈùûÂ∏∏ÊúâÊÑèÊÄùÁöÑÈÄÇÂêàÊ°åÈù¢‰ΩøÁî®ÁöÑ Linux task Ë∞ÉÂ∫¶Âô®: BFS Âíå MuqSS]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Ë∞ÉÂ∫¶Âô®</tag>
        <tag>CFS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux Ë∞ÉÂ∫¶Âô®Â≠¶‰π†ËµÑÊñôÊï¥ÁêÜ]]></title>
    <url>%2F2019%2F11%2F05%2Flinux-kernel-scheduler-papers%2F</url>
    <content type="text"><![CDATA[ÂºïË®Ä Á≥ªÁªü‰∏≠ÁöÑ CPU Êï∞ÈáèÊúâÈôêÔºåËÄåÁî®Êà∑Â∏åÊúõ„ÄåÂêåÊó∂„ÄçÂæóÂà∞ÊúçÂä°ÁöÑËøõÁ®ãÔºà‰ªªÂä°ÔºâÂ∏∏Â∏∏‰ºöÂ§ö‰∫éÂèØÁî®ÁöÑ CPU Ê†∏Êï∞ÔºåËøôÊó∂Â∞±ÈúÄË¶ÅËÅ™ÊòéÁöÑ‰ªªÂä°Ë∞ÉÂ∫¶Âô®Êù•‰∏∫Êàë‰ª¨ÂÆûÁé∞ CPU ËôöÊãüÂåñÔºåËÆ©ÊØè‰∏™ËøõÁ®ãÈÉΩËÉΩÂæóÂà∞ÊúçÂä°„ÄÇË∞ÉÂ∫¶Âô®ÈúÄË¶ÅÁÖßÈ°æÂà∞‰ªªÂä°ÁöÑÂìçÂ∫îÊó∂Èó¥ÔºàÂê¶ÂàôÁî®Êà∑‰ºöÂú®Êï≤ÂáªÈîÆÁõòÂêéÁ≠âÂæà‰πÖÔºå‰ΩìÈ™åÂæàÊ∏£ÔºâÔºåËøòË¶Å‰øùËØÅ‰∏ÄÂÆöÁöÑÂë®ËΩ¨Êó∂Èó¥ÔºàCPU ÂØÜÈõÜÂûãÁöÑ‰ªªÂä°ÊúüÊúõËé∑ÂæóÊõ¥Â§öÁöÑËøûÁª≠ËøêË°åÊó∂Èó¥Ôºå‰ªéËÄåÂà©Áî® CPU ÁºìÂ≠ò‰∫≤ÂíåÊÄßÔºåÈ¢ëÁπÅÁöÑ‰ªªÂä°ÂàáÊç¢‰ºöÂØºËá¥‰∏Ä‰∫õÊÄßËÉΩÊçüÂ§±ÔºåÂ∞§ÂÖ∂ÊòØÁé∞‰ª£Á≥ªÁªü TLB miss, Page Fault ÊÉ©ÁΩöÈùûÂ∏∏‰∏•ÈáçÔºâÔºåÂêåÊó∂Ëøò‰∏çËÉΩËÆ©Êüê‰∫õ‰Ωé‰ºòÂÖàÁ∫ßÁöÑ‰ªªÂä°È•øÊ≠ª„ÄÇÂèØËßÅË∞ÉÂ∫¶Âô®ÊòØÂÆûÁé∞Â§ö‰ªªÂä°ÁöÑÊ†∏ÂøÉÔºåÁé∞‰ª£Êìç‰ΩúÁ≥ªÁªüÂøÖÂ§á„ÄÇ‰∏ÄÁõ¥‰ª•Êù•ÔºåÂêÑË∑Ø Linux Hackers ÈÉΩÂ∏åÊúõËÉΩ‰∏∫ Linux Êèê‰æõËøôÊ†∑‰∏Ä‰∏™Ë∞ÉÂ∫¶Âô®ÔºåÂÆÉËÉΩÂ§üÂú®Ê°åÈù¢Á≥ªÁªü‰∏äÊúâËæÉÂ•ΩÁöÑ‰∫§‰∫íÊÄßÔºåËÄåÂú®È´òË¥üËΩΩÁöÑÊúçÂä°Âô®‰∏äÊúâËæÉÂ•ΩÁöÑÂêûÂêêÈáè„ÄÇ ‰ª•‰∏ãÂàó‰∏æ‰∏Ä‰∫õÂ≠¶‰π†ËµÑÊñôÔºåÂèØ‰ª•Ëøõ‰∏ÄÊ≠•‰∫ÜËß£ÔºÅ Â≠¶‰π†ËµÑÊñô ËÆ∫ÊñáÔºöA complete guide to Linux process schedulingÔºåËøôÁØáËÆ∫ÊñáËÆ≤ÂæóÊØîËæÉÂ•ΩÔºåÂáÜÂ§áÁøªËØëÂá∫Êù•‰ª•‰æõÊ¨£Ëµè GitBook: Process Scheduling in Linux ÂÜÖÊ†∏ÊñáÊ°£ÔºöLinux scheduler doc, CFS Linux ËøõÁ®ã‰∏éÁ∫øÁ®ãÔºö„ÄäLinux Á≥ªÁªüÁºñÁ®ãÊâãÂÜå Á¨¨ 28 Á´†ÂèäÂêéÁª≠„Äã ÂèØ‰ª•ÂÖ≥Ê≥®‰∏ãÂíåËøõÁ®ãÁ∫øÁ®ãÊúâÂÖ≥ÁöÑÁ≥ªÁªüË∞ÉÁî® Pthread Á∫øÁ®ãÊòØÊÄé‰πàÂú® Linux ‰∏≠ÂÆûÁé∞ÁöÑ Linux ÂÖ¨Âπ≥Ë∞ÉÂ∫¶ The Battle of Schedulers: FreeBSD ULE vs Linux CFS ÈáçÁÇπÂèØ‰ª•Áúã‰∏ãÂÖ≥‰∫é CFS ÁöÑÁÆÄËø∞ &amp; Ë¥üËΩΩÂùáË°°ÈÉ®ÂàÜ ÂèØ‰ª•ÁÆÄÂçïÁúãÁúã ULE ÊòØÁöÑÂÆûÁé∞ÂéüÁêÜÔºàinteractive, batch queueÔºâÔºå‰∏∫‰ªÄ‰πàÂèØËÉΩ‰ºöÊúâÈ•øÊ≠ªÁöÑÊÉÖÂÜµ NUMA Êû∂ÊûÑÊ∑±Á©∂ Êó©ÊúüÁöÑ x86 ÊòØ Universal Memory Arch, UMA Êû∂ÊûÑ NUMA Êû∂ÊûÑÂá∫Êù•ÂêéÔºåËÆøÈóÆ‰∏çÂêåÂÜÖÂ≠òÂú∞ÂùÄÔºåÈÄüÂ∫¶ÊòØÊúâÂ∑ÆÂà´‰∫ÜÔºåÂíåÁ°¨‰ª∂Êû∂ÊûÑÊúâÂæàÂ§ßÂÖ≥Á≥ª Kernel Ë∞ÉÂ∫¶Á≥ªÁªü ÈáçÁÇπÂÖ≥Ê≥®‰ΩúËÄÖÂÖ≥‰∫é CFS ÂàóÂá∫ÁöÑÂá†‰∏™ÁÅµÈ≠ÇÊã∑ÈóÆ vruntime Âú®‰ªÄ‰πàÊó∂ÂÄôÂèëÁîüÊîπÂèòÔºü vruntime ÂàùÂßãÂÄºÊòØÊÄé‰πàËÆæÂÆöÁöÑÔºü]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Ë∞ÉÂ∫¶Âô®</tag>
        <tag>CFS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux Kernel Development Â≠¶‰π†‰∏éÊÄªÁªì]]></title>
    <url>%2F2019%2F10%2F30%2Flinux-kernel-dev-notes%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄÊúÄËøëÊäΩÊó∂Èó¥Êää Operating Systems: Three Easy Pieces Áªà‰∫éÁúãÂÆå‰∫ÜÔºàÂÖ∂ÂÆû 2017 Âπ¥Â∞±Áü•ÈÅìÂÆÉ‰∫ÜÔºåÊ≤°ÊÉ≥Âà∞ÊãñÂà∞‰∫Ü 2019 Âπ¥ üòÖÔºâÔºåÂÖ®‰π¶ÂàÜ‰∏â‰∏™ÈÉ®ÂàÜÔºàËôöÊãüÂåñ„ÄÅÂπ∂Âèë„ÄÅÊåÅ‰πÖÂåñÔºâÂØπÊìç‰ΩúÁ≥ªÁªüÁöÑ‰∏Ä‰∫õÈÄöÁî®ËÆæËÆ°ÊÄùÊÉ≥ËøõË°å‰∫Ü‰ªãÁªçÔºåÂ≠¶ÂÆåÂêéÔºåÂØπ‰∫éËøõÁ®ã„ÄÅÂÜÖÂ≠òËôöÊãüÂåñ„ÄÅÂπ∂Âèë„ÄÅÊñá‰ª∂Á≥ªÁªüÊúâ‰∫ÜÊõ¥Âä†Ê∑±ÂàªÁöÑËÆ§ËØÜ„ÄÇ‰ΩÜÊòØÔºåÁúüÂÆûÁöÑ‰∏ñÁïåÊòØ‰ªÄ‰πàÊ†∑Â≠êÁöÑÂë¢ÔºüËøôÂ∞±ÊòØÂ∏åÊúõÂú®ÈòÖËØª„ÄäLinux ËÆæËÆ°‰∏éÂÆûÁé∞„ÄãÔºàLinux Kernel DevelopmentÔºâÂêéÊâæÂà∞ÊÉ≥Ë¶ÅÁöÑÁ≠îÊ°à„ÄÇÂΩìÁÑ∂ÔºåÂú®Â≠¶‰π†‰∏≠‰πüÈíàÂØπÂæàÂ§öÈÉ®ÂàÜÊêúÈõÜ‰∫Ü‰∏çÂ∞ëÂ≠¶‰π†ËµÑÊñôÔºåÊï¥ÁêÜÂú®ÊñáÂêéÔºåÊñπ‰æøÂä†Ê∑±ÁêÜËß£„ÄÇÂú®Â≠¶‰π†‰πãÂâçÔºåÊÄùËÄÉ‰∫Ü‰∏Ä‰∫õÈóÆÈ¢òÔºåÂèØ‰ª•Âú®Â≠¶‰π†‰∏≠Êé¢Á¥¢Ëøô‰∫õÈóÆÈ¢òÁöÑÁ≠îÊ°àÔºö Linux ‰∏≠ËøõÁ®ã„ÄÅÁ∫øÁ®ãÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºüÂêÑÁßçË∞ÉÂ∫¶Á≠ñÁï•ÊòØ‰ªÄ‰πàÊ†∑ÁöÑÔºüÂèàÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÂë¢Ôºü Âπ∂ÂèëÈóÆÈ¢òËÇØÂÆöÈúÄË¶ÅÊ≥®ÊÑèÔºåLinux ‰∏≠Â¶Ç‰ΩïÂ∫îÂØπÁ´ûÊÄÅÊù°‰ª∂ &amp; Êï∞ÊçÆÁ´û‰∫âÂë¢ÔºüÂêÑÁßçÂ∏∏ËßÅÁöÑÂêåÊ≠•ÂéüËØ≠ÂèàÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü Linux ÁöÑÂÜÖÂ≠òËôöÊãüÂåñÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºüÂÜÖÂ≠òÂ∏ÉÂ±ÄÔºüËôöÊãüÂú∞ÂùÄÁ©∫Èó¥Ôºü Êñá‰ª∂Á≥ªÁªüÊúâÂæàÂ§öÔºåÊìç‰ΩúÁ≥ªÁªüÊòØÊÄé‰πàËøõË°åÊäΩË±°ÔºåÂπ∂ÂØπÁî®Êà∑Êèê‰æõ‰∏ÄËá¥‰ºòÈõÖÁöÑÁ≥ªÁªüË∞ÉÁî®Êé•Âè£ÁöÑÂë¢Ôºü Linux ÂÜÖÊ†∏‰∏≠ÊúâÂì™‰∫õÈùûÂ∏∏ÁªèÂÖ∏ÁöÑÁÆóÊ≥ïÂíåÊï∞ÊçÆÁªìÊûÑÁöÑÂ∫îÁî®ÔºüÂÆÉ‰ª¨‰ΩøÁî®Âú∫ÊôØÊòØ‰ªÄ‰πàÔºüÊÄé‰πàÂÆûÁé∞ÁöÑÂë¢Ôºü Linux ÂÜÖÊ†∏ÁÆÄ‰ªã ËØ¥Âà∞ LinuxÔºåÂ∞±‰∏çÂæó‰∏çÊèêÂà∞ÂÆÉÁöÑÁ•ñÂÖà Unix Á≥ªÁªü„ÄÇUnix Âú® 1970 Âπ¥Â∑¶Âè≥Ë¢´ Ken Thompson È¶ñÂÖàÂú®‰∏ÄÂè∞ PDP-7 Êú∫Âûã‰∏äÂÆûÁé∞ÔºåËÄåÂêéÁßªÊ§çÂà∞ PDP-11 Êú∫Âô®‰∏äÔºå1973 Âπ¥ÂÆÉË¢´‰ΩøÁî® C ËØ≠Ë®ÄÈáçÂÜôÔºåÊèê‰æõ‰∫ÜÊõ¥Âä†Âº∫Â§ßÁöÑÂèØÁßªÊ§çÊÄß„ÄÇ ÁªèËøáÂ§öÂπ¥ÂèëÂ±ïÔºåUnix Á≥ªÁªüÊàê‰∏∫‰∫Ü‰∏Ä‰∏™Âº∫Â§ß„ÄÅÂÅ•Â£Æ‰∏îÁ®≥ÂÆöÁöÑÊìç‰ΩúÁ≥ªÁªü„ÄÇÂÖ∂Âº∫Â§ßÁöÑÊ†πÊú¨ÂéüÂõ†Â¶Ç‰∏ãÔºö ÁÆÄÊ¥ÅÔºå‰ªÖÊèê‰æõÊï∞Áôæ‰∏™ËÆæËÆ°ÁõÆÊ†áÊòéÁ°ÆÁöÑÁ≥ªÁªüË∞ÉÁî®Ôºõ ÊâÄÊúâÁöÑ‰∏úË•øÈÉΩË¢´ÂΩì‰ΩúÊñá‰ª∂ÁúãÂæÖ ÂæàÂº∫ÁöÑÁßªÊ§çËÉΩÂäõ ËøõÁ®ãÂàõÂª∫ÈùûÂ∏∏ËøÖÈÄüÔºåÊã•ÊúâÁã¨ÁâπÁöÑ fork() Á≥ªÁªüË∞ÉÁî® Êã•ÊúâÁÆÄÂçï‰∏îÁ®≥ÂÆöÁöÑËøõÁ®ãÈó¥ÈÄö‰ø°ÂéüËØ≠ Linux ÊòØÁ±ª Unix Á≥ªÁªüÔºåÂÆÉÁöÑÂÆûÁé∞Âíå Unix ‰πüÊúâ‰∏Ä‰∫õÂ§ßÁõ∏ÂæÑÂ∫≠ÁöÑÊñπÈù¢Ôºå‰ΩÜÊòØÂÆÉ‰æùÁÑ∂ÁªßÊâø‰∫Ü Unix ÁöÑËÆæËÆ°ÁõÆÊ†áÔºå‰øùËØÅ‰∫Ü API ÁöÑ‰∏ÄËá¥ÊÄßÔºàÊúâÂìÅ‰ΩçÁöÑÁ®ãÂ∫èÂëòÈÉΩÂ∫îËØ•Ë¶ÅÂ≠¶‰π†Ëøô‰∏ÄÊÄùÊÉ≥Ôºâ„ÄÇ Linux ËØçÊ±á‰∏ÄËà¨Áî®Êù•Êåá‰ª£ÂÜÖÊ†∏„ÄÇÂÆÉÁöÑÂü∫Á°ÄÂåÖÊã¨Ôºö ÂÜÖÊ†∏ C Â∫ì Â∑•ÂÖ∑ÈõÜ Á≥ªÁªüÁöÑÂü∫Êú¨Â∑•ÂÖ∑ÔºåÂ¶Ç Shell ‰ªÄ‰πàÊòØÊìç‰ΩúÁ≥ªÁªüÔºüÂÆΩÊ≥õÁöÑÊìç‰ΩúÁ≥ªÁªüÊòØÊåáÊï¥‰∏™Á≥ªÁªü‰∏≠Ë¥üË¥£ÂÆåÊàêÊúÄÂü∫Êú¨ÂäüËÉΩÂíåÁ≥ªÁªüÁÆ°ÁêÜÁöÑÈÉ®ÂàÜÔºåÂåÖÊã¨ÂÜÖÊ†∏„ÄÅËÆæÂ§áÈ©±Âä®„ÄÅÂêØÂä®ÂºïÂØºÁ®ãÂ∫è„ÄÅÂëΩ‰ª§Ë°å Shell ÊàñÁî®Êà∑ÁïåÈù¢„ÄÅÊñá‰ª∂ÁÆ°ÁêÜÂ∑•ÂÖ∑ÂíåÁ≥ªÁªüÂ∑•ÂÖ∑„ÄÇÂÜÖÊ†∏ÂàôÊòØÈÇ£‰∏™ÊúÄ‰∫ÆÁöÑ‰ªîÔºåÂÆÉÈÄöÂ∏∏Áî±Â¶Ç‰∏ãÂá†‰∏™ÈáçË¶ÅÈÉ®ÂàÜÁªÑÊàêÔºö ‰∏≠Êñ≠ÊúçÂä° ‰ªªÂä°Ë∞ÉÂ∫¶Á®ãÂ∫è ÂÜÖÂ≠òÁÆ°ÁêÜÁ®ãÂ∫è ÁΩëÁªú ËøõÁ®ãÈó¥ÈÄö‰ø°Á≠âÁ≥ªÁªüÊúçÂä° Linux ÁöÑ‰∏≠Êñ≠ÊúçÂä°ÊòØ‰∏çÂú®ËøõÁ®ã‰∏ä‰∏ãÊñáÊâßË°åÁöÑÔºåËÄåÊòØÂú®‰∏Ä‰∏™‰∏éÊâÄÊúâËøõÁ®ãÊó†ÂÖ≥„ÄÅ‰∏ìÈó®ÁöÑ‰∏≠Êñ≠‰∏ä‰∏ãÊñáÊâßË°å„ÄÇËøôÊ†∑ÂèØ‰ª•‰øùËØÅÁ¨¨‰∏ÄÊó∂Èó¥ËÉΩÂ§üÂìçÂ∫îÂíåÂ§ÑÁêÜ‰∏≠Êñ≠ËØ∑Ê±ÇÔºåÁÑ∂ÂêéÂø´ÈÄüÈÄÄÂá∫„ÄÇ Â§ÑÁêÜÂô®Âú®‰ªªÊÑèÊó∂Èó¥ÁÇπÊ¥ªÂä®ÂèØÊ¶ÇÊã¨‰∏∫‰ª•‰∏ã‰∏âÁßç‰πã‰∏ÄÔºö ËøêË°åÂú®Áî®Êà∑Á©∫Èó¥ÔºåÊâßË°åÁî®Êà∑ËøõÁ®ã ËøêË°åÂú®ÂÜÖÊ†∏Á©∫Èó¥ÔºåÂ§Ñ‰∫éËøõÁ®ã‰∏ä‰∏ãÊñáÔºå‰ª£Ë°®Êüê‰∏™ÁâπÂÆöÁöÑËøõÁ®ãÊâßË°åÔºàÂ¶ÇÊüê‰∏™Á≥ªÁªüË∞ÉÁî®Ôºâ ËøêË°åÂú®ÂÜÖÊ†∏Á©∫Èó¥ÔºåÂ§Ñ‰∫é‰∏≠Êñ≠‰∏ä‰∏ãÊñáÔºå‰∏éËøõÁ®ãÊó†ÂÖ≥ÔºåÂ§ÑÁêÜÁâπÂÆöÁöÑ‰∏≠Êñ≠ ÂæÆÂÜÖÊ†∏ÂíåÂÆèÂÜÖÊ†∏Ëøô‰∏™ÊòØÊØîËæÉÊúâË∂£ÁöÑÂéÜÂè≤‰∫ÜÔºåÊìç‰ΩúÁ≥ªÁªüËÆæËÆ°Êúâ‰∏§Â§ß‰∏ªË¶ÅÈòµËê•ÔºöÂæÆÂÜÖÊ†∏ÂíåÂÆèÂÜÖÊ†∏„ÄÇ ÂæÆÂÜÖÊ†∏ÁöÑÂäüËÉΩÂàíÂàÜÊàêÂ§ö‰∏™Áã¨Á´ãÁöÑËøáÁ®ãÔºåÊØè‰∏™ËøáÁ®ãÈÉΩÊòØ‰∏Ä‰∏™ÊúçÂä°ÔºàC/S Ê®°ÂûãÔºåÊúçÂä°‰∏éÂÜÖÊ†∏‰∫§‰∫íÔºâ„ÄÇÁ≥ªÁªüÈááÁî® IPC Á¶ÅÊ≠¢‰∫íÈÄöÊ∂àÊÅØÔºå‰∫íÊç¢„ÄåÊúçÂä°„Äç„ÄÇÊúçÂä°ÁöÑÁã¨Á´ãÊÄßÂèØ‰ª•ÈÅøÂÖç‰∏Ä‰∏™ÊúçÂä°Â§±Ë¥•ÊÆÉÂèäÂÖ∂ÂÆÉÊúçÂä°„ÄÇÊ®°ÂùóÂåñËÆæËÆ°‰πüÈùûÂ∏∏ÈÄÇÂêàÁÉ≠ÊèíÊãî„ÄÇ‰ΩÜÊòØÁº∫ÁÇπÂ∞±ÊòØ IPC ÁöÑÂºÄÈîÄÂ§ö‰∫éÂáΩÊï∞Ë∞ÉÁî®ÔºàÁ±ªÊØîÂæÆÊúçÂä°ÁöÑÁΩëÁªúÂºÄÈîÄÂíåÂú®Êú¨Âú∞Ë∞ÉÁî®ÂáΩÊï∞ÁöÑÂºÄÈîÄÔºâ„ÄÇ ÂÆèÂÜÖÊ†∏ÂàôÊòØÂÆûÁî®‰∏ª‰πâËÄÖÂñúÊ¨¢ÁöÑËÆæËÆ°ÔºåÂÆÉÊòØÊØîËæÉÁÆÄÂçïÁöÑËÆæËÆ°ÔºåÊï¥‰Ωì‰∏äÂ∞±ÊòØ‰∏Ä‰∏™ÂçïÁã¨ÁöÑËøáÁ®ãÔºåËøêË°åÂú®‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂú∞ÂùÄÁ©∫Èó¥„ÄÇÂÜÖÊ†∏‰πãÈó¥ÁöÑÈÄö‰ø°ÂæÆ‰∏çË∂≥ÈÅìÔºåÊÄßËÉΩÈ´ò„ÄÇ Linux Ëá™ÁÑ∂ÊòØÂÆèÂÜÖÊ†∏ËÆæËÆ°ÔºåLinux ÂÜÖÊ†∏ËøêË°åÂú®ÂçïÁã¨ÁöÑÂÜÖÊ†∏Âú∞ÂùÄÁ©∫Èó¥‰∏ä„ÄÇÂêåÊó∂ÂÆÉ‰πüÈááÁ∫≥‰∫ÜÂæÆÂÜÖÊ†∏ÁöÑÁ≤æÂçéÔºå‰ΩøÂÆÉÊàê‰∏∫Ê®°ÂùóÂåñÁöÑ„ÄÅÂ§öÁ∫øÁ®ãÁöÑ‰ª•ÂèäÂÜÖÊ†∏Êú¨Ë∫´ÂèØË∞ÉÂ∫¶ÁöÑÊìç‰ΩúÁ≥ªÁªü„ÄÇ ‰∏é‰º†Áªü Unix Âå∫Âà´ ÊîØÊåÅÂä®ÊÄÅÂä†ËΩΩÂÜÖÊ†∏Ê®°ÂùóÔºàËøô‰∏™‰∏çÊòØÂæÆÂÜÖÊ†∏ÂÆ£Áß∞ÁöÑÂ•ΩÂ§ÑÂêóÔºüÂí±‰πüÊúâÔºâ ÊîØÊåÅÂØπÁß∞Â§öÂ§ÑÁêÜÊú∫Âà∂ÔºàSMPÔºâ ÂÜÖÊ†∏ÂèØ‰ª•Êä¢Âç†ÔºàpreemptiveÔºâÔºö‰ªªÂä°ÂèØ‰ª•Êúâ‰ºòÂÖàÁ∫ß ÂØπÂ§öÁ∫øÁ®ãÁöÑÊîØÊåÅÂæàÁâπÂà´ÔºöÂÜÖÊ†∏‰∏çÂå∫ÂàÜÁ∫øÁ®ãÂíå‰∏ÄËà¨ÁöÑËøõÁ®ãÔºåÂØπ‰∫éÂÜÖÊ†∏ËÄåË®ÄÔºåÊâÄÊúâÁöÑËøõÁ®ãÈÉΩ‰∏ÄÊ†∑ÔºåÂè™ÊòØÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∫õÂÖ±‰∫´ËµÑÊ∫êËÄåÂ∑≤ ÂÖ∑ÊúâËÆæÂ§áÁ±ªÁöÑÈù¢ÂêëÂØπË±°ÁöÑËÆæÂ§áÊ®°Âûã„ÄÅÁÉ≠ÊèíÊãî‰∫ã‰ª∂ÔºåÁî®Êà∑Á©∫Èó¥ÁöÑËÆæÂ§áÊñá‰ª∂Á≥ªÁªüÔºàsysfsÔºâ ÂøΩÁï•‰∫Ü‰∏Ä‰∫õÊãôÂä£ÁâπÊÄß Ëá™Áî±Ôºö‰ªª‰ΩïÊîπÂèòÈÉΩÂøÖÈ°ªË¶ÅËÉΩÈÄöËøáÁÆÄÊ¥ÅÁöÑËÆæËÆ°ÂèäÊ≠£Á°ÆÂèØÈù†ÁöÑÂÆûÁé∞Êù•Ëß£ÂÜ≥Áé∞ÂÆû‰∏≠Á°ÆÂÆûÂ≠òÂú®ÁöÑÈóÆÈ¢ò ÂÜÖÊ†∏ÁâàÊú¨&lt;‰∏ªÁâàÊú¨&gt;.&lt;‰ªéÁâàÊú¨&gt;.&lt;‰øÆËÆ¢&gt;[.&lt;Á®≥ÂÆöÁâàÊú¨Âè∑&gt;]ÔºåÂÖ∂‰∏≠‰ªéÁâàÊú¨Âè∑‰∏∫ÂÅ∂Êï∞ÔºåÂàô‰∏∫Á®≥ÂÆöÁâàÊú¨ÔºåÂê¶Âàô‰∏∫ÂºÄÂèëÁâàÊú¨„ÄÇ ÂÜÖÊ†∏ÁºñËØëÈÖçÁΩÆÂèØ‰ª•‰ΩøÁî®ÁöÑÈÖçÁΩÆÊñπÂºèÂ¶Ç‰∏ãÔºö make config make menuconfig1 make gconfig ÈªòËÆ§ÈÖçÁΩÆÔºömake defconfig È™åËØÅÂíåÊõ¥Êñ∞ÈÖçÁΩÆÔºömake oldconfig ÁºñËØë Áõ¥Êé•ÁºñËØëÔºömake ÂØºÂá∫‰∏çÂÖ≥ÂøÉÁöÑ infoÔºömake &gt;/dev/null ÊåáÂÆöÂπ∂Ë°åÁºñËØëÊï∞ÈáèÔºömake -j4 &gt;/dev/null ÂÜÖÊ†∏ÂºÄÂèëÁâπÁÇπ ‰∏çËÉΩ‰ΩøÁî®Ê†áÂáÜ C Â∫ì ÂøÖÈ°ª‰ΩøÁî® GNU CÔºàÈúÄË¶ÅÁî®Âà∞ÂÆÉÁöÑ‰∏Ä‰∫õÊâ©Â±ïÁâπÊÄßÔºâ inlineÔºöÈÄöÂ∏∏Â∞ÜÂØπÊó∂Èó¥Ë¶ÅÊ±ÇÊØîËæÉÈ´òÔºåÂáΩÊï∞Êú¨Ë∫´ÊØîËæÉÁü≠ÁöÑÂÆö‰πâÊàêÂÜÖËÅîÂáΩÊï∞„ÄÇÂú®ÂÜÖÊ†∏‰∏≠Ôºå‰∏∫‰∫ÜÁ±ªÂûãÂÆâÂÖ®ÂíåÊòìËØªÊÄßÔºå‰ºòÂÖà‰ΩøÁî® inline ÂáΩÊï∞ÔºåËÄåÈùûÂ§çÊùÇÁöÑÂÆè ÂÜÖËÅîÁºñËØëÔºöÊîØÊåÅ‰ΩøÁî® asm() ÂµåÂÖ•Ê±áÁºñ‰ª£Á†Å ÂàÜÊîØÂ£∞ÊòéÔºöÂèØ‰ª•‰ΩøÁî® likely() Âíå unlikely() Â£∞ÊòéÂàÜÊîØÊòØÂê¶ÁªèÂ∏∏Âá∫Áé∞ÊàñÂæàÂ∞ëÂá∫Áé∞ÔºåÊåáÂØºÁºñËØëÂô®ËøõË°å‰ºòÂåñÔºàË¶ÅÊêûÊ∏ÖÊ•öÔºåÂê¶Âàô‰ºòÂåñÂèçËÄåÂèòÊàê‰∫ÜÊãñÁ¥ØÔºâ Áº∫‰πèÂÉèÁî®Êà∑Á©∫Èó¥‰∏≠ÁöÑÂÜÖÂ≠ò‰øùÊä§Êú∫Âà∂ ÂÜÖÊ†∏‰∏≠ÂèëÁîüÂÜÖÂ≠òÈîôËØØ‰ºöÂØºËá¥ oopsÔºåÂÜÖÊ†∏ÂèØËÉΩ‰ºöÊ≠ªÊéâ ÂÜÖÊ†∏‰∏≠ÁöÑÂÜÖÂ≠òÊòØ‰∏çÂàÜÈ°µÁöÑÔºåÊØèÁî®Êéâ‰∏Ä‰∏™Â≠óËäÇÔºåÁâ©ÁêÜÂÜÖÂ≠òÂ∞±ÂáèÂ∞ë‰∏Ä‰∏™Â≠óËäÇ Èöæ‰ª•ÊâßË°åÊµÆÁÇπÊï∞ËÆ°ÁÆó ‰∏çËÉΩÂÉèÁî®Êà∑Á©∫Èó¥ÊâßË°åÊµÆÁÇπÊï∞ËÆ°ÁÆóÈÇ£Ê†∑ÔºåÂèØ‰ª•ÈÄöËøá trap ÁöÑÊñπÂºèÂ∞ÜÊï¥Êï∞Ê®°ÂºèËΩ¨Êç¢Âà∞ÊµÆÁÇπÊï∞Ê®°ÂºèËÆ°ÁÆó ÂÜÖÊ†∏‰∏çËÉΩÂÆåÁæéÊîØÊåÅÊµÆÁÇπÊï∞ËÆ°ÁÆóÔºåÊú¨Ë∫´‰πüÊó†Ê≥ïÈô∑ÂÖ•„ÄÇÈùûË¶ÅÊâßË°åÁöÑËØùÔºåÂ∞±ÈúÄË¶ÅÊâãÂä®‰øùÂ≠òÂíåÊÅ¢Â§çÊµÆÁÇπÂØÑÂ≠òÂô®ÔºåÈùûÂ∏∏È∫ªÁÉ¶ ÂÜÖÊ†∏ÁªôÊØè‰∏™ËøõÁ®ãÂè™Êúâ‰∏Ä‰∏™ÂæàÂ∞èÁöÑÂÆöÈïøÂ†ÜÊ†à Áî®Êà∑Á©∫Èó¥ÁöÑÊ†àÂèØ‰ª•Âä®ÊÄÅÂ¢ûÈïøÔºåÂèØÊîØÊåÅÈùûÂ∏∏Â§ßÁöÑÊï∞ÊçÆÁªìÊûÑ ÂÜÖÊ†∏Ê†àÁöÑÂ§ßÂ∞èÂíå‰ΩìÁ≥ªÁªìÊûÑÊúâÂÖ≥ÔºàÂ¶Ç x86 ÂèØ‰ª•ÊòØ 4KB/8KBÔºâ ÂéÜÂè≤‰∏äÊù•ËØ¥ÔºåÂÜÖÊ†∏Ê†àÂ§ßÂ∞èÊòØ‰∏§È°µÔºå32 ‰ΩçÊòØ 8KBÔºå64 ‰ΩçÊòØ 16KBÔºõÊØè‰∏™Â§ÑÁêÜÂô®ÈÉΩÊúâËá™Â∑±ÁöÑÊ†à Áî±‰∫éË¶ÅÊîØÊåÅÂºÇÊ≠•‰∏≠Êñ≠„ÄÅÊä¢Âç†Âíå SMPÔºåÊó∂ÂàªÈúÄË¶ÅÊ≥®ÊÑèÂπ∂ÂèëÂÆâÂÖ®ÂíåÂêåÊ≠• ËÄÉËôëÂèØÁßªÊ§çÊÄß ‰øùÊåÅÂ≠óËäÇÂ∫è 64 ‰ΩçÂØπÈΩê ‰∏çÂÅáÂÆöÂ≠óÈïøÂíåÈ°µÈù¢ÈïøÂ∫¶ ËøõÁ®ãÁÆ°ÁêÜËøõÁ®ã ÂÜÖÊ†∏ÊääËøõÁ®ãÁöÑÂàóË°®Â≠òÊîæÂú® task list ÂèåÂêëÈìæË°®‰∏≠ÔºåÊØè‰∏™ entry ÁöÑÁ±ªÂûãÊòØ task_structÔºåË¢´Áß∞‰∏∫ process descriptor ÈÄöËøá slabÔºàÊõ¥Êñ∞ÁöÑÂ∫îËØ•ÊòØ SLUBÔºâ ÂàÜÈÖçÂô®ÂàÜÈÖç task_struct ÁªìÊûÑ‰ΩìÔºàÂØπË±°Â§çÁî®ÂíåÁºìÂ≠òÁùÄËâ≤ÔºâÔºåÊØè‰∏™‰ªªÂä°ÁöÑ thread_info ‰Ωç‰∫éÂÜÖÊ†∏Ê†àÁöÑÂ∞æÁ´ØÔºåÂÖ∂‰∏≠ÂåÖÂê´ÊåáÂêë task_struct ÁöÑÊåáÈíàÂèäÂÖ∂ÂÆÉ‰ø°ÊÅØ ËøõÁ®ãÈÄöËøá PID ËøõË°åÂå∫ÂàÜÔºåÂÖ∂ÂÄºÂ≠òÊîæÂú® process descriptor ‰∏≠„ÄÇÁî±‰∫éËøõÁ®ãÂ§ÑÁêÜ‰ª£Á†ÅÈúÄË¶ÅÈ¢ëÁπÅËÆøÈóÆ task_struct ‰ø°ÊÅØÔºåÊâÄ‰ª•Âú® PowerPC Á≠âÊú∫Âô®‰∏äÔºåÊúâ‰∏ìÈó®ÁöÑÂØÑÂ≠òÂô®Â≠òÂÇ®‰∫ÜÁõ∏Â∫îÁöÑÊåáÈíàÔºõËÄåÂú® x86 ‰ΩìÁ≥ª‰∏ãÔºåÂàôÊòØÂà©Áî®ÂÜÖÊ†∏Ê†àÂ∞æÂàõÂª∫ÁöÑ thread_infoÔºåÂπ∂ÂÄüÂä©ÂÅèÁßªËÆ°ÁÆóÈó¥Êé•Êü•Êâæ task_struct ÁªìÊûÑ‰Ωì ËøõÁ®ãÁä∂ÊÄÅÔºö TASK_RUNNING TASK_INTERRUPTABLE TASK_UNINTERRUPTABLE __TASK_TRACED: Ë¢´ÂÖ∂ÂÆÉËøõÁ®ãË∑üË∏™ÁöÑËøõÁ®ãÔºàÂ¶Ç ptrace ÂØπË∞ÉËØïÁ®ãÂ∫èËøõË°åË∑üË∏™Ôºâ __TASK_STOPPED: ËøõÁ®ãÂÅúÊ≠¢ÊâßË°åÔºåÊ≤°ÊúâÊäïÂÖ•ËøêË°å‰πüÊó†Ê≥ïÊäïÂÖ•ËøêË°å ÊâÄÊúâÁöÑËøõÁ®ãÈÉΩÊòØ PID ‰∏∫ 1 ÁöÑ init ËøõÁ®ãÁöÑÂêé‰ª£Ôºåinit ËøõÁ®ãÁöÑÊèèËø∞Á¨¶ÊòØ‰Ωú‰∏∫ init_task ÈùôÊÄÅÂàÜÈÖçÁöÑÔºàÊØîËæÉÁâπÊÆäÔºâ Unix Á≥ªÁªüËøõÁ®ãÂàõÂª∫Ôºö ÈÄöËøá fork() Êã∑Ë¥ùÂΩìÂâçËøõÁ®ãÂàõÂª∫‰∏Ä‰∏™Â≠êËøõÁ®ãÔºàÂå∫Âà´Áà∂ËøõÁ®ãÔºöÊúâÊñ∞ÁöÑ PIDÔºåÊúâÊüê‰∫õËµÑÊ∫êÂíåÁªüËÆ°ÈáèÔºâ exec() ÂáΩÊï∞Ë¥üË¥£ËØªÂèñÂèØÊâßË°åÊñá‰ª∂Âπ∂Â∞ÜÂÖ∂ËΩΩÂÖ•Âú∞ÂùÄÁ©∫Èó¥ÂºÄÂßãËøêË°å ÂÜôÊó∂Êã∑Ë¥ùÔºöÂÜÖÊ†∏Âπ∂ÈùûÂºÄÂßãÂ∞±Â§çÂà∂Êï¥‰∏™ËøõÁ®ãÂú∞ÂùÄÁ©∫Èó¥ÔºåËÄåÊòØËÆ©Áà∂ËøõÁ®ãÂíåÂ≠êËøõÁ®ãÂÖ±‰∫´Âêå‰∏Ä‰∏™Êã∑Ë¥ùÔºåÂè™ÊúâÂú®ÈúÄË¶ÅÂÜôÂÖ•ÁöÑÊó∂ÂÄôÔºåÊï∞ÊçÆÊâç‰ºöË¢´Â§çÂà∂Ôºå‰ªéËÄåÊã•ÊúâÂêÑËá™ÁöÑÊã∑Ë¥ù„ÄÇfork() ÂÆûÈôÖÂºÄÈîÄÔºöÂ§çÂà∂Áà∂ËøõÁ®ãÁöÑÈ°µË°®ÔºåÁªôÂ≠êËøõÁ®ãÂàõÂª∫ÂîØ‰∏ÄÁöÑËøõÁ®ãÊèèËø∞Á¨¶ Linux ‰∏≠ÁöÑ fork() Âíå vfork() ÈÉΩÊòØÈÄöËøá clone() Á≥ªÁªüË∞ÉÁî®ÂÆûÁé∞ÁöÑ„ÄÇvfork() ÁöÑÁâπÁÇπÊòØÔºö‰∏çÊã∑Ë¥ùÁà∂ËøõÁ®ãÁöÑÈ°µË°®Ôºå‰∏îÂ≠êËøõÁ®ã‰Ωú‰∏∫Áà∂ËøõÁ®ãÁöÑÂçïÁã¨Á∫øÁ®ãÂú®ÂÆÉÁöÑÂú∞ÂùÄÁ©∫Èó¥ÊâßË°åÔºåÁà∂ËøõÁ®ãÈòªÂ°ûÁõ¥Âà∞Â≠êËøõÁ®ãÈÄÄÂá∫ÊàñÊâßË°å exec() Linux ‰∏≠ÁöÑÁ∫øÁ®ãÂÆûÁé∞Ôºö ‰ªéÂÜÖÊ†∏ËßíÂ∫¶ÁúãÔºåÊ≤°ÊúâÁ∫øÁ®ãÁöÑÊ¶ÇÂøµÔºåÊâÄÊúâÁöÑÁ∫øÁ®ãÈÉΩÂΩì‰ΩúËøõÁ®ãÁúãÂæÖÔºåÂè™ÊòØ‰∏éÂÖ∂ÂÆÉËøõÁ®ãÂÖ±‰∫´Êüê‰∫õËµÑÊ∫ê„ÄÇÊØè‰∏™Á∫øÁ®ãÈÉΩÊã•ÊúâÂ±û‰∫éËá™Â∑±ÁöÑ task_struct ÂÖ∂ÂÆÉÁ≥ªÁªü‰∏≠ÔºåÁ∫øÁ®ãË¢´ÊäΩË±°Êàê‰∏ÄÁßçËÄóË¥πËµÑÊ∫êËæÉÂ∞ëÁöÑËµÑÊ∫êÔºåËøêË°åËøÖÈÄüÁöÑÊâßË°åÂçïÂÖÉ ÈÄöËøá clone(CLONE_VM | CLONE_FS | CLONE_FILES | CLONE_SIGHAND, 0); ÂàõÂª∫Á∫øÁ®ã ÂØπÊØî fork() ÂÆûÁé∞Ôºöclone(SIGCHLD, 0) ÂØπÊØî vfork() ÂÆûÁé∞Ôºöclone(CLONE_VFORK | CLONE_VM | SIGCHLD, 0) ÂÜÖÊ†∏Á∫øÁ®ãÔºö ÂÜÖÊ†∏ÈÄöÂ∏∏ÈúÄË¶ÅÂú®ÂêéÂè∞ÊâßË°å‰∏Ä‰∫õÊìç‰ΩúÔºåËøô‰∫õ‰ªªÂä°ÂèØÈÄöËøá kernel thread ÂÆåÊàê„ÄÇËøôÁßçÊòØËøêË°åÂú®ÂÜÖÊ†∏Á©∫Èó¥ÁöÑÊ†áÂáÜËøõÁ®ã ÂÜÖÊ†∏Á∫øÁ®ãÊ≤°ÊúâÁã¨Á´ãÁöÑÂú∞ÂùÄÁ©∫Èó¥ÔºåÂèØË¢´Ë∞ÉÂ∫¶ÔºåÂèØË¢´Êä¢Âç† ËøõÁ®ãÁªàÁªìÔºö ÈÄöÂ∏∏ÈÄöËøá do_exit() ÂÆåÊàêÈÄÄÂá∫ÔºåÊúüÈó¥‰ºöÈáäÊîæÁõ∏ÂÖ≥ÁöÑËµÑÊ∫êÔºåÊúÄÁªàÂ∞ÜËøõÁ®ãÁä∂ÊÄÅËÆæÁΩÆ‰∏∫ EXIT_ZOMBIEÔºå‰ΩÜÊòØÊ≠§Êó∂ÁöÑÂÜÖÊ†∏Ê†à„ÄÅthread_info Âíå task_struct ÁªìÊûÑ‰ΩìËøòÊòØÂ≠òÂú®ÁöÑÔºå‰ªéËÄåÁªôÁà∂ËøõÁ®ãÊèê‰æõ‰ø°ÊÅØ Áà∂ËøõÁ®ãËé∑ÂæóÂ∑≤ÁªàÁªìÁöÑÂ≠êËøõÁ®ã‰ø°ÊÅØÂêéÔºàÁà∂ËøõÁ®ãÂèØÈÄöËøá wait() Á≥ªÁªüË∞ÉÁî®Êî∂ÈõÜ‰ø°ÊÅØÔºâÔºåÊàñËÄÖÈÄöÁü•ÂÜÖÊ†∏ÂÆÉ‰∏çÂÖ≥Ê≥®Ëøô‰∫õ‰ø°ÊÅØÔºåÊâç‰ºöÈáäÊîæÂâ©‰ΩôÁöÑÂÜÖÂ≠òÁ©∫Èó¥ Â≠§ÂÑøËøõÁ®ãÔºö ÈÄÄÂá∫Êó∂Ê∞∏ËøúÂ§Ñ‰∫éÂÉµÊ≠ªÁä∂ÊÄÅÔºåÁôΩÁôΩÊµ™Ë¥πÂÜÖÂ≠ò Ëß£ÂÜ≥ÂäûÊ≥ïÂ∞±ÊòØÂú®ÂΩìÂâçÁ∫øÁ®ãÁªÑÂØªÊâæÊüê‰∏™Á∫øÁ®ã‰Ωú‰∏∫Áà∂‰∫≤ÔºåÂÆûÂú®‰∏çË°åÔºåÂ∞±ËÆ© init Êé•Áõò Ë∞ÉÂ∫¶ËøõÁ®ã Â§ö‰ªªÂä°Á≥ªÁªüÂàÜ‰∏∫‰∏§Á±ªÔºö ÈùûÊä¢Âç†ÂºèÂ§ö‰ªªÂä°Ôºàcooperative multitaskingÔºâ Êä¢Âç†ÂºèÂ§ö‰ªªÂä°Ôºàpreemptive multitaskingÔºâ ËøõÁ®ãË∞ÉÂ∫¶Á≠ñÁï•‰ºöÂÖ≥ÂøÉËøõÁ®ãÁöÑ‰ºòÂÖàÁ∫ß„ÄÅÊó∂Èó¥Áâá Linux ‰∏≠ÁöÑËøõÁ®ãÂàÜ‰∏∫ÊôÆÈÄöËøõÁ®ãÂíåÂÆûÊó∂ËøõÁ®ãÔºåÂÖ∂‰∏≠ÂâçËÄÖÁöÑ‰ºòÂÖàÁ∫ßÂú® (-20, +19ÔºâÔºåËÄåÂêéËÄÖÂàôÊòØ (0, 99)„ÄÇÊ≠§Â§ñÔºåÂÆûÊó∂ËøõÁ®ãÁöÑ‰ºòÂÖàÁ∫ßÊÄªÊòØÈ´ò‰∫éÊôÆÈÄöËøõÁ®ã‰ºòÂÖàÁ∫ßÁöÑÔºåÊâÄ‰ª•ÊôÆÈÄöËøõÁ®ãÁöÑ‰ºòÂÖàÁ∫ßÊò†Â∞ÑËøáÊù•Â∞±ÊòØ (100, 139) Linux ‰∏≠ÂèØ‰ª•ÈÄöËøá nice Ë∞ÉÊï¥ËøõÁ®ãÁöÑ‰ºòÂÖàÁ∫ßÔºåË∂äÂ∞èÁöÑÂÄºÊã•ÊúâË∂äÈ´òÁöÑÊùÉÈáçÔºõÂèç‰πãÔºåÂàôÊùÉÈáçË∂ä‰ΩéÔºà‰ΩìÁé∞Âú®Êó∂Èó¥Áâá‰∏äÔºâ CFS Ë∞ÉÂ∫¶Âô® Linux 2.6 ÂÜÖÊ†∏ÂºïÂÖ•‰∫Ü CFS Ë∞ÉÂ∫¶Âô®Ôºà‰Ωç‰∫é sched/fair.cÔºâ‰Ωú‰∏∫ÊôÆÈÄöËøõÁ®ãÁöÑË∞ÉÂ∫¶Âô®ÔºåÂÆÉÊòØ‰∏Ä‰∏™Ëøë‰πéÂÆåÁæéÁöÑÂÖ¨Âπ≥Ë∞ÉÂ∫¶Âô®ÔºàÊùÉË°°Âë®ËΩ¨Êó∂Èó¥ÂíåÂìçÂ∫îÊó∂Èó¥Ôºâ„ÄÇÂπ∂ÈùûÈááÁî®Êó∂Èó¥ÁâáËøõË°åÂàÜÈÖçÔºåËÄåÊòØÁªôËøõÁ®ãÂàÜÈÖç‰∫ÜÂ§ÑÁêÜÂô®‰ΩøÁî®ÁöÑÊØîÈáçÔºå‰ªéËÄåÁ°Æ‰øùËøõÁ®ãË∞ÉÂ∫¶‰∏≠ËÉΩÂ§üÊúâÊÅíÂÆöÁöÑÂÖ¨Âπ≥ÊÄßÔºå‰ªéËÄåÂ∞ÜÂàáÊç¢È¢ëÁéáÁΩÆ‰∫é‰∏çÊñ≠ÂèòÂä®‰∏≠ CFS Âü∫‰∫é‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁêÜÂøµÔºöËøõÁ®ãË∞ÉÂ∫¶ÁöÑÊïàÊûúÂ∫îËØ•Á≠âÂêå‰∫éÁ≥ªÁªüÊã•Êúâ‰∏Ä‰∏™ÂÆåÁæéÁöÑÂ§ö‰ªªÂä°Â§ÑÁêÜÂô®ÔºåÊØè‰∏™ËøõÁ®ãÈÉΩËÉΩËé∑Âæó 1/n_running Â§ÑÁêÜÂô®Êó∂Èó¥ CFS ÂÖÅËÆ∏ÊØè‰∏™ËøõÁ®ãËøêË°å‰∏ÄÊÆµÊó∂Èó¥ÔºåÂæ™ÁéØËΩÆËΩ¨ÔºåÊÄªÊòØÈÄâÊã© vruntime ÊúÄÂ∞èÁöÑËøõÁ®ã‰Ωú‰∏∫‰∏ã‰∏Ä‰∏™ÊâßË°å„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÊòØÈÄöËøáÊâÄÊúâÂèØËøêË°åÁªèÂ∏∏ÊÄªÊï∞‰∏∫Âü∫Á°ÄÊù•ËÆ°ÁÆóÂá∫ËøõÁ®ãÂ∫îËØ•ËøêË°åÂ§ö‰πÖÔºåËÄåÈùû‰æùÈù† nice ÂÄºÊù•ËÆ°ÁÆóÊó∂Èó¥ÁâáÔºà‰º†ÁªüÁöÑÂÅöÊ≥ïÂ∞±ÊòØËøôÁßçÔºâ Ë∞ÉÂ∫¶Âô®ÂÆûÁé∞Ê¶ÇË¶ÅÔºö sched_entity ÁªìÊûÑ‰ΩìË∑üË∏™ËøêË°åËÆ∞Ë¥¶ÔºàÂÖ∂‰∏≠ÂåÖÂê´ vruntimeÔºâ ÊâÄÊúâÂèØËøêË°åÁöÑËøõÁ®ãÈÉΩ‰Ωç‰∫é‰∏ÄÊ£µÈªëÁ∫¢Ê†ë‰∏≠ÔºàO(logN) Êó∂Èó¥Â§çÊùÇÂ∫¶Êü•ÊâæÔºâÔºåÂπ∂‰∏îÊØèÊ¨°ÈÉΩ‰ºö‰ªéÊ†ëÁöÑÊúÄÂ∑¶Âè∂Â≠êËäÇÁÇπ‰∏äÔºàleftmostÔºâÊâæÂà∞ vruntime ÊúÄÂ∞èÁöÑÈÇ£‰∏™ËøõÁ®ãËøêË°åÔºàÂÆûÊó∂‰∏äÔºåËøô‰∏™ÂÄºÊòØÊèêÂâçÁºìÂ≠òÂ•ΩÁöÑÔºâ Ë∞ÉÂ∫¶Âô®ÂÖ•Âè£Â§Ñ‰ºöÊâæÂà∞ÊúÄÈ´ò‰ºòÂÖàÁ∫ßÁöÑË∞ÉÂ∫¶Á±ªÔºåÁÑ∂ÂêéËé∑ÂèñÂà∞Ë∞ÅÊòØ‰∏ã‰∏Ä‰∏™ËØ•ËøêË°åÁöÑËøõÁ®ã Áù°Áú†ÔºöËøõÁ®ã‰ºöÊääËá™Â∑±Ê†áËÆ∞Êàê‰ºëÁú†Áä∂ÊÄÅÔºå‰ªéÂèØÊâßË°åÁ∫¢ÈªëÊ†ë‰∏≠Ê∫¢Âá∫ÔºåÂπ∂ÊîæÂÖ•Á≠âÂæÖÈòüÂàóÔºåË∞ÉÁî® schedule() ÊâßË°å‰∏Ä‰∏™ÂÖ∂‰ªñËøõÁ®ã Âî§ÈÜíÔºöËøõÁ®ãË¢´ËÆæÁΩÆ‰∏∫ÂèØÊâßË°åÁä∂ÊÄÅÔºå‰ªéÁ≠âÂæÖÈòüÂàóÁßªÈô§ÔºåÊ∑ªÂä†Âà∞ÂèØÊâßË°åÁ∫¢ÈªëÊ†ë CFS ÂÆûÁé∞‰∫ÜÂ¶Ç‰∏ãÂá†ÁßçË∞ÉÂ∫¶Á≠ñÁï•Ôºö SCHED_NORMALÔºà‰ª•ÂâçÂè´ÂÅö SCHED_OTHERÔºâÔºöÁî®‰∫éÊôÆÈÄö‰ªªÂä°Ë∞ÉÂ∫¶ SCHED_BATCHÔºöÂπ∂ÈùûÂÉèÊôÆÈÄö‰ªªÂä°ÈÇ£Ê†∑Ë¢´È¢ëÁπÅÊä¢Âç†Ôºå‰ºöÂ∞ΩÂèØËÉΩÂÖÅËÆ∏‰ªªÂä°ËøêË°åË∂≥Â§üÈïøÊó∂Èó¥Ôºå‰ªéËÄåÂà©Áî®‰∏ä CPU ‰∫≤ÂíåÊÄß‰ª•ÂèäÊõ¥Â•ΩÂú∞Â§çÁî®ÁºìÂ≠ò SCHED_IDLEÔºöËøôÁßç‰ªªÂä°‰ºòÂÖàÁ∫ßÊØî nice 19 ËøòË¶Å‰Ωé Êä¢Âç† Áî®Êà∑Êä¢Âç†ÔºàÊ£ÄÊü• need_resched Ê†áËØÜÁ¨¶ÔºâÔºö‰ªéÁ≥ªÁªüË∞ÉÁî®ËøîÂõûÁî®Êà∑Á©∫Èó¥Êó∂Ôºõ‰ªé‰∏≠Êñ≠Â§ÑÁêÜËøîÂõûÁî®Êà∑Á©∫Èó¥Êó∂ ÂÜÖÊ†∏Êä¢Âç†Ôºàthread_info ‰∏≠Â≠òÂú® preemt_count ËÆ°Êï∞Âô®ÔºåË°®Á§∫ÊúâÊ≤°ÊúâÈîÅË¢´ÊåÅÊúâÔºâÔºöÂ∞±ÊòØË∞ÉÂ∫¶Á®ãÂ∫èËÉΩÂ§üÂú®ÂÜÖÊ†∏‰ªªÂä°ÊâßË°åÊúüÈó¥Ë¢´ÊâßË°å Âè™Ë¶ÅÈáçÊñ∞Ë∞ÉÂ∫¶ÊòØÂÆâÂÖ®ÁöÑÔºàÊ≤°ÊúâÊåÅÊúâÈîÅÔºâÔºåÂÜÖÊ†∏Â∞±ÂèØ‰ª•Âú®‰ªª‰ΩïÊó∂Èó¥Êä¢Âç†Ê≠£Âú®ÊâßË°åÁöÑ‰ªªÂä° ÂÜÖÊ†∏Êä¢Âç†Êó∂Êú∫Ôºö ‰∏≠Êñ≠Â§ÑÁêÜÁ®ãÂ∫èÊ≠£Âú®ÊâßË°åÔºå‰∏îËøîÂõûÂÜÖÊ†∏Á©∫Èó¥‰πãÂâç ÂÜÖÊ†∏‰ª£Á†ÅÂÜçÊ¨°ÂÖ∑ÊúâÂèØÊä¢Âç†ÊÄßÊó∂ ÂÜÖÊ†∏‰ªªÂä°ÊòæÂºèË∞ÉÁî® schedule() ÂÜÖÊ†∏‰∏≠ÁöÑ‰ªªÂä°ÈòªÂ°ûÔºàÊ≠§Êó∂‰ºöÂØºËá¥Ë∞ÉÁî® schedule()Ôºâ ÂÆûÊó∂Ë∞ÉÂ∫¶Âô® ÂÆûÊó∂Ë∞ÉÂ∫¶Âô®ÊòØÂú® sched/rt.c ‰∏≠ÂÆûÁé∞ÁöÑÔºåÂÆÉ‰ΩøÁî®‰∫Ü 100 ‰∏™ËøêË°åÈòüÂàóÔºàÂØπÂ∫î 1~99 ‰ªªÂä°‰ºòÂÖàÁ∫ßÔºâÔºåÂÆûÁé∞‰∫Ü SCHED_FIFO Âíå SCHED_RR Á≠ñÁï•„ÄÇ SCHED_FIFO: ÁÆÄÂçïÁöÑÂÖàÂÖ•ÂÖàÂá∫Ë∞ÉÂ∫¶ÁÆóÊ≥ïÔºå‰∏ç‰æùËµñÊó∂Èó¥Áâá ËØ•Á∫ßÂà´‰ªªÂä°ÊØî SCHED_NORMAL Á∫ßÂà´ÁöÑËøõÁ®ãÂÖàÂæóÂà∞Ë∞ÉÂ∫¶ ‰∏ÄÊó¶‰ªªÂä°Â§Ñ‰∫éÊâßË°åÊúüÈó¥ÔºåÂ∞±‰ºö‰∏ÄÁõ¥ÊâßË°å‰∏ãÂéªÔºõÂè™ÊúâÊõ¥È´ò‰ºòÂÖàÁ∫ßÁöÑ SCHED_FIFO/SCHED_RR ‰ªªÂä°ÊâçÂèØ‰ª•Êä¢Âç† SCHED_RR: Á±ª‰ºº FIFOÔºå‰ΩÜÊòØÊØè‰∏™‰ªªÂä°‰ºöÊúâÂàÜÈÖçÁöÑÊó∂Èó¥ÁâáÔºåÊó∂Èó¥ÁâáËÄóÂ∞ΩÂêéÂ∞±Ë¶ÅÊç¢ÂÖ∂ÂÆÉ‰ªªÂä°ÊâßË°å ÂØπ‰∫é FIFO ËøõÁ®ãÔºåÈ´ò‰ºòÂÖàÁ∫ßÂßãÁªàÊä¢Âç†‰Ωé‰ºòÂÖàÁ∫ßËøõÁ®ãÔºõ‰Ωé‰ºòÂÖàÁ∫ßËøõÁ®ã‰∏çËÉΩÊä¢Âç† SCHED_RR ËøõÁ®ãÔºåÂç≥‰æøÂÖ∂ËÄóÂ∞Ω‰∫ÜÊó∂Èó¥Áâá Linux Êèê‰æõÁöÑÊòØËΩØÂÆûÊó∂Â∑•‰ΩúÊñπÂºèÔºåÂ∞ΩÂäõ‰ΩøÂæóËøõÁ®ãËÉΩÂ§üÂú®ÈôêÂÆöÁöÑÊó∂Èó¥Âà∞Êù•ÂâçÊâßË°åÔºå‰ΩÜÂÜÖÊ†∏‰∏ç‰øùËØÅÊÄªËÉΩÊª°Ë∂≥Ëøô‰∫õËøõÁ®ãÁöÑË¶ÅÊ±Ç Ë∞ÉÂ∫¶Âô®Á±ªË∞ÉÂ∫¶Âô®Á±ªÈúÄË¶ÅÂÆûÁé∞‰∏Ä‰∫õ hooksÔºåËøôÊ†∑ÂèØ‰ª•Âú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÂÅöÂêàÈÄÇÁöÑÊìç‰Ωú„ÄÇÈÉ®ÂàÜ hooks Â¶Ç‰∏ãÔºö enqueue_task dequeue_task yield_task check_preempt_cur pick_next_task set_curr_task task_tick Ë∞ÉÂ∫¶Áõ∏ÂÖ≥ÁöÑ syscall Á≥ªÁªüË∞ÉÁî® ÊèèËø∞ nice() ËÆæÁΩÆËøõÁ®ãÁöÑ nice ÂÄº sched_setscheduler() ËÆæÁΩÆË∞ÉÂ∫¶Á≠ñÁï• sched_getscheduler() Ëé∑ÂèñË∞ÉÂ∫¶Á≠ñÁï• sched_setparam() ËÆæÁΩÆÂÆûÊó∂‰ºòÂÖàÁ∫ß sched_getparam() sched_rr_get_interval() Êó∂Èó¥ÁâáÂÄº sched_setaffinity() ËÆæÁΩÆÂ§ÑÁêÜÂô®‰∫≤ÂíåÂäõ sched_getaffinity() Ëé∑ÂèñËøõÁ®ãÂ§ÑÁêÜÂô®‰∫≤ÂíåÂäõ shced_yield() ÊöÇÊó∂ËÆ©Âá∫Â§ÑÁêÜÂô® Á≥ªÁªüË∞ÉÁî®‰ºóÊâÄÂë®Áü•ÔºåËøõÁ®ãÊòØÂú®Êìç‰ΩúÁ≥ªÁªüÊèê‰æõÁöÑÁî®Êà∑Á©∫Èó¥ËøêË°åÁöÑÔºåËÄåÂ¶ÇÊûúÈúÄË¶ÅÊâìÂºÄÊñá‰ª∂Á≠âÊìç‰ΩúÔºåÈúÄË¶ÅÈÄöËøáÁ≥ªÁªüË∞ÉÁî®ÔºåÈô∑ÂÖ•Âà∞ÂÜÖÊ†∏ÊÄÅÔºåÁî±Êìç‰ΩúÁ≥ªÁªü‰ª£ÊõøÂÆåÊàêÂíåÁ°¨‰ª∂ÁöÑ‰∫§‰∫íÔºå‰ªéËÄå‰∏∫ËøõÁ®ãÊèê‰æõÊúçÂä°„ÄÇÊâÄ‰ª•ËØ¥ÔºåÁ≥ªÁªüË∞ÉÁî®Êó∂Âú®Áî®Êà∑Á©∫Èó¥ÂíåËøõÁ®ãÂíåÁ°¨‰ª∂ËÆæÂ§á‰πãÈó¥ÁöÑ‰∏Ä‰∏™‰∏≠Èó¥Â±Ç„ÄÇËøô‰∏™‰∏≠Èó¥Â±ÇÁöÑ‰∏ªË¶Å‰ΩúÁî®Â¶Ç‰∏ãÔºö ‰∏∫Áî®Êà∑Á©∫Èó¥Êèê‰æõÁ°¨‰ª∂Êé•Âè£ÊäΩË±° Á≥ªÁªüË∞ÉÁî®‰øùËØÅÁ≥ªÁªüÁöÑÂÆâÂÖ®ÂíåÁ®≥ÂÆö Êìç‰ΩúÁ≥ªÁªüÂèØ‰ª•ÊéåÊéßËøõÁ®ãÁöÑÁ°¨‰ª∂ËÆøÈóÆÊÑèÂõæÔºåÂπ∂‰∏î‰ª£Âä≥ ÈÇ£‰πàÁ≥ªÁªüË∞ÉÁî®ÂèàÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÂë¢Ôºü‰∏ÄÂè•ËØùÊÄªÁªì‰∏∫ÔºöÂΩìÁ≥ªÁªüË∞ÉÁî®ÊâßË°åÊó∂Ôºå‰ºöÈô∑ÂÖ•Âà∞ÂÜÖÊ†∏Ôºå‰º†ÈÄíÁ≥ªÁªüË∞ÉÁî®Âè∑ÂíåÂèÇÊï∞ÔºåÊâßË°åÊ≠£Á°ÆÁöÑÁ≥ªÁªüË∞ÉÁî®ÂáΩÊï∞ÔºåÂπ∂‰∏îÊääËøîÂõûÂÄºÂ∏¶ÂõûÁî®Êà∑Á©∫Èó¥„ÄÇÂèØËßÅÔºåÁ≥ªÁªüË∞ÉÁî®ÈùûÂ∏∏ÁâπÊÆäÔºåÂÆåÂÖ®‰∏çÂêå‰∫éÂ∏∏ËßÑÁöÑÂáΩÊï∞Ë∞ÉÁî®ÔºåÁúãËµ∑Êù•ÈùûÂ∏∏ Hack„ÄÇ Êé•‰∏ãÊù•ÔºåÈÄöËøáÂá†‰∏™ÈóÆÈ¢òÔºåÂä†Ê∑±ÂØπ‰∏äËø∞ÊèèËø∞ÁöÑÁêÜËß£Ôºö Â¶Ç‰ΩïÈô∑ÂÖ•Âà∞ÂÜÖÊ†∏ÔºüÈÄöËøáËΩØ‰∏≠Êñ≠ÁöÑÊñπÂºèÂÆûÁé∞ÔºåÈÄöËøáÂºïÂèë‰∏Ä‰∏™ÂºÇÂ∏∏Ëß¶ÂèëÁ≥ªÁªüÂàáÊç¢Âà∞ÂÜÖÊ†∏ÊÄÅÊâßË°åÂºÇÂ∏∏Â§ÑÁêÜÁ®ãÂ∫è„ÄÇ ‰ªÄ‰πàÊòØÁ≥ªÁªüË∞ÉÁî®Âè∑ÔºüÂú® Linux ‰∏≠ÔºåÊØè‰∏™Á≥ªÁªüË∞ÉÁî®ÈÉΩË¢´Ëµã‰∫à‰∫Ü‰∏Ä‰∏™ÁºñÂè∑ÔºåËøõÁ®ãÂÖ∂ÂÆûÊòØÈÄöËøáÁ≥ªÁªüË∞ÉÁî®Âè∑ËÄå‰∏çÊòØÂêçÁß∞Êù•ÂëäÁü•ÂÜÖÊ†∏Ëá™Â∑±‰∏≠ÊÑèÂì™‰∏™Á≥ªÁªüË∞ÉÁî®ÁöÑ„ÄÇ Â¶Ç‰Ωï‰º†ÈÄíÁ≥ªÁªüË∞ÉÁî®Âè∑ÔºüÈÄöËøáÂØÑÂ≠òÂô®‰º†ÈÄíÔºåÂú® x86 ‰∏≠ÔºåÂ∞±ÊòØÂ∞ÜÁ≥ªÁªüË∞ÉÁî®Âè∑ÊîæÂú® eax ÂØÑÂ≠òÂô®‰º†ÈÄíÁªôÂÜÖÊ†∏ÁöÑ„ÄÇ ÂèÇÊï∞ÊòØÂ¶Ç‰Ωï‰º†ÈÄíÁöÑÔºü Á¨¨‰∏ÄÁßçÊñπÂºèÂ∞±ÊòØÂ∞ÜÂèÇÊï∞ÊîæÂú®ÂØÑÂ≠òÂô®‰∏≠Ôºå‰∏ÄËà¨Êù•ËØ¥Á≥ªÁªüË∞ÉÁî®ÂèÇÊï∞‰∏ç‰ºöÂæàÂ§ö„ÄÇÂú® x86 ‰∏≠ÔºåÂèØ‰ª•Áî® ebx, ecx, edx, esi Âíå edi ÊåâÈ°∫Â∫èÂ≠òÊîæ‰∫î‰∏™ÂèÇÊï∞„ÄÇ Á¨¨‰∫åÁßçÊñπÂºèÂ∞±ÊòØÂ∞ÜÂèÇÊï∞Â≠òÊîæÂú®Áî®Êà∑Á©∫Èó¥ÂÜÖÂ≠ò‰∏≠ÔºåÂπ∂Â∞ÜÂèÇÊï∞ÊåáÈíàÂ≠òÊîæÂú®ÂØÑÂ≠òÂô®‰∏≠„ÄÇËøôÁßçÊòØ‰∏∫‰∫ÜÂ∫î‰ªòÂèÇÊï∞Ë∂ÖËøá 6 ‰∏™ÊÉÖÂÜµ„ÄÇ ËøîÂõûÂÄºÂ¶Ç‰ΩïÂ∏¶ÁªôÁî®Êà∑Á©∫Èó¥ÔºüÂΩìÁÑ∂‰πüÊòØÈÄöËøáÂØÑÂ≠òÂô®Êù•‰º†ÈÄíÁöÑÔºåÂú® x86 ‰∏≠ÔºåÂèØ‰ª•‰ΩøÁî® eax ÂØÑÂ≠òÂô®„ÄÇ ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑ Linux ÂÜÖÊ†∏ÈìæË°®ÂÆûÁé∞Áã¨Ê†ë‰∏ÄÂ∏ú„ÄÇÂÆÉÊòØÂ∞ÜÈìæË°®Â°ûÂÖ•Âà∞Êï∞ÊçÆÁªìÊûÑÔºåËÄåÈùûÂ∏∏ËßÑÁöÑÈÇ£ÁßçÂú®Êï∞ÊçÆÁªìÊûÑ‰∏≠Â°ûÂÖ•ÈìæË°®„ÄÇ ÂèØ‰ª•Áúã‰∏ãÂØπÊØîÂ∞±Áü•ÈÅì‰∏∫‰ΩïÁâπÂà´‰∫ÜÔºö 1234567891011121314151617// Â∏∏ËßÑÂÆö‰πâÊñπÊ≥ïstruct node &#123; void *data; struct node *prev; struct node *next;&#125;// Linux ÂÜÖÊ†∏ÈìæË°®ÂÆö‰πâstruct list_head &#123; struct list_head *prev; struct list_head *next;&#125;struct node &#123; void *data; struct list_head list; // ÊâÄÊúâÁöÑ node ÂΩ¢ÊàêÈìæË°®&#125; ËøôÊ†∑ÔºåÈÄöÁî®ÁöÑÈìæË°®Êìç‰ΩúÂ∞±ÂèØ‰ª•Âü∫‰∫é struct list_head Êù•ÂÆûÁé∞‰∫Ü„ÄÇÈÇ£Â¶Ç‰ΩïÂíåÊ†πÊçÆÈìæË°®ÊåáÈíàËé∑ÂæóÂØπÂ∫îÁöÑ node Âë¢ÔºüÁ≠îÊ°àÊòØÈÄöËøá container_of() ÂÆèÔºåÂÆûÈôÖ‰∏ä C ËØ≠Ë®Ä‰∏≠Ôºå‰∏Ä‰∏™ÁªôÂÆöÁªìÊûÑ‰Ωì‰∏≠ÁöÑÂèòÈáèÂÅèÁßªÂú®ÁºñËØëÊó∂Â∞±Â∑≤ÁªèÁ°ÆÂÆö‰∫ÜÔºåÊâÄ‰ª•ÂèØ‰ª•ÂÄüÊ≠§Ëé∑ÂæóÁà∂ÁªìÊûÑ‰∏≠ÁöÑ‰ªªÊÑèÂèòÈáèÔºö123#define container_of(ptr, type, member) (&#123; \ const typeof( ((type *)0)-&gt;member) *__mptr = (ptr); \ (type *)( (char *)__mptr - offsetof(type, member) );&#125;) ‰∏≠Êñ≠Âíå‰∏≠Êñ≠Â§ÑÁêÜ ‰∏≠Êñ≠ÊòØÂêÑÁßçÁ°¨‰ª∂ËÆæÂ§á‰∏éÂ§ÑÁêÜÂô®ÂçèÂêåÈ´òÊïàÂ∑•‰ΩúÁöÑÊñπÂºè‰πã‰∏Ä„ÄÇÂ§ÑÁêÜÂô®ÊâßË°åÊåá‰ª§ÁöÑÈÄüÂ∫¶ÈùûÂ∏∏Âø´ÔºåËÄå‰∏Ä‰∫õÂ§ñÈÉ®ËÆæÂ§áÂàô‰ºöÊÖ¢ÂæàÂ§öÔºõ‰∏∫‰∫ÜËÉΩÂ§ü‰øùËØÅ CPU ‰∏çÊµ™Ë¥πÊó∂Èó¥ËΩÆËØ¢ËÆæÂ§áÁä∂ÊÄÅÔºåËÄåÈôç‰ΩéÂà©Áî®ÁéáÔºåÊâÄ‰ª•ÈúÄË¶Å‰∏≠Êñ≠Êú∫Âà∂Êù•ÈÄöÁü• CPU„ÄÇÂΩìÂ§ÑÁêÜÂô®Êé•Êî∂Âà∞‰∏≠Êñ≠ÂêéÔºå‰ºöÂéªÊâßË°åÂ∑≤Ê≥®ÂÜåÁöÑÁõ∏ÂÖ≥‰∏≠Êñ≠Â§ÑÁêÜÁ®ãÂ∫è„ÄÇ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå‰∏≠Êñ≠ÂíåÂâçÈù¢ÊèêÂà∞ÁöÑÂºÇÂ∏∏ÔºàFaultÔºâÊòØ‰∏çÂêåÁöÑÔºö ‰∏≠Êñ≠ÈÄöÂ∏∏ÊòØÂºÇÊ≠•ÂèëÁîüÁöÑÔºå‰∏çËÄÉËôëÊó∂ÈíüÂêåÊ≠•Ôºõ ÂºÇÂ∏∏ÂàôÂøÖÈ°ª‰∏éÂ§ÑÁêÜÂô®Êó∂ÈíüÂêåÊ≠•ÔºåÊâÄ‰ª•‰πüË¢´Áß∞‰∏∫ÂêåÊ≠•‰∏≠Êñ≠ÔºàÂ¶ÇÈô§ 0 ÈîôËØØ„ÄÅÁº∫È°µÔºâ„ÄÇ Linux ‰∏≠ÂØπ‰∫é‰∏≠Êñ≠ÁöÑÂìçÂ∫îÂíåÂ§ÑÁêÜÂàÜÊàê‰∏äÂçäÈÉ®Âíå‰∏ãÂçäÈÉ®„ÄÇÂÖ∂‰∏≠‰∏äÂçäÈÉ®‰ºöÂú®Êé•Êî∂Âà∞‰∏≠Êñ≠‰ø°Âè∑ÂêéÂø´ÈÄüÂÆåÊàêÂøÖË¶ÅÂ∑•‰ΩúÁöÑÔºàÊúâ‰∏•Ê†ºÁöÑÊó∂ÈôêÔºâÔºåËÄåÊõ¥Âä†ÁπÅÈáçÁöÑ‰ªªÂä°Âàô‰ºöÂú®‰∏ãÂçäÈÉ®ÊâßË°å„ÄÇÂú®‰∏äÂçäÈÉ®ÈúÄË¶ÅÂø´ÈÄüÊâßË°åÔºå‰∏îÊó†Ê≥ïÁù°Áú†Ôºõ‰ΩÜ‰∏ãÂçäÈÉ®ÂàôÊ≤°ÊúâËøôÊ†∑ÁöÑÈôêÂà∂„ÄÇ Êó†È°ªÈáçÂÖ•Linux ‰∏≠ÁöÑ‰∏≠Êñ≠Â§ÑÁêÜ‰∏çÁî®ËÄÉËôëÈáçÂÖ•ÔºåÂõ†‰∏∫ÂΩìÁªôÂÆö‰∏≠Êñ≠Â§ÑÁêÜÁ®ãÂ∫èÂú®ÊâßË°åÊó∂ÔºåÂØπÂ∫î‰∏≠Êñ≠Á∫øÂú®ÊâÄÊúâÂ§ÑÁêÜÂô®‰∏äË¢´Â±èËîΩÔºåÈÅøÂÖçÂêå‰∏Ä‰∏≠Êñ≠Á∫øÊé•Êî∂Âè¶Â§ñÁöÑ‰∏≠Êñ≠„ÄÇËøôÊ†∑ÂÅöÁÆÄÂåñ‰∫Ü‰∏≠Êñ≠Â§ÑÁêÜÁ®ãÂ∫èÁöÑÁºñÂÜô„ÄÇ ‰∏≠Êñ≠‰∏ä‰∏ãÊñáÊâÄË∞ìÁöÑ‰∏≠Êñ≠‰∏ä‰∏ãÊñáÔºàinterrupt contextÔºâÔºåÂ∞±ÊòØÂú®ÊâßË°å‰∏≠Êñ≠Â§ÑÁêÜÁ®ãÂ∫èÊó∂ÔºåÂÜÖÊ†∏ÊâÄÂ§ÑÁöÑ‰∏ä‰∏ãÊñá„ÄÇ‰∏≠Êñ≠‰∏ä‰∏ãÊñáÂíåËøõÁ®ã‰∏ä‰∏ãÊñáÊ≤°ÊúâÂçäÊØõÈí±ÂÖ≥Á≥ªÔºåÊàë‰ª¨ÂèØ‰ª•ÊääÂÆÉÂíåËøõÁ®ã‰∏ä‰∏ãÊñáËøõË°å‰∏ÄÁï™ÂØπÊØîÔºö ‰∏≠Êñ≠‰∏ä‰∏ãÊñá ËøõÁ®ã‰∏ä‰∏ãÊñá ÊâßË°å‰∏≠Êñ≠Â§ÑÁêÜÁ®ãÂ∫èÊó∂ÔºåÂÜÖÊ†∏ÊâÄÂ§ÑÁöÑ‰∏ä‰∏ãÊñá ÂÜÖÊ†∏‰ª£Ë°®ËøõÁ®ãÊâßË°åÔºàÁ≥ªÁªüË∞ÉÁî®„ÄÅËøêË°åÂÜÖÊ†∏Á∫øÁ®ãÔºâÊó∂ÔºåÊâÄÂ§ÑÁöÑÊìç‰ΩúÊ®°Âºè ‰∏éËøõÁ®ãÊó†ÁìúÔºå‰∏é current ÂÆèÊó†Áìú ÂèØÈÄöËøá current ÂÆèÂÖ≥ËÅîÂΩìÂâçËøõÁ®ã Ê≤°ÊúâÂêéÂ§áËøõÁ®ãÔºåÊó†Ê≥ïÁù°Áú†Ôºå‰πü‰∏çËÉΩË∞ÉÁî®‰ºöÂØºËá¥Áù°Áú†ÁöÑÂáΩÊï∞ ÂèØÁù°Áú†ÔºåÂèØË∞ÉÁî®Ë∞ÉÂ∫¶Á®ãÂ∫è Êúâ‰∏•Ê†ºÁöÑÊâßË°åÊó∂Èôê Ê≤°ÊúâÈùûÂ∏∏‰∏•Ê†ºÁöÑË¶ÅÊ±Ç ‰∏ãÂçäÈÉ®ÂèäÊé®ÂêéÊâßË°åÁöÑÂ∑•‰Ωú‰∏ãÂçäÈÉ®Â∞±ÊòØÊâßË°åÂíå‰∏≠Êñ≠Â§ÑÁêÜÁõ∏ÂÖ≥Ôºå‰ΩÜÊòØ‰∏≠Êñ≠Â§ÑÁêÜÁ®ãÂ∫è‰∏≠‰∏ç‰ºöÊâßË°åÁöÑÂ∑•‰Ωú„ÄÇÂºïÂÖ•‰∏ãÂçäÈÉ®ÁöÑÁõÆÁöÑÂ∞±ÊòØËÆ©‰∏≠Êñ≠Â§ÑÁêÜÁ®ãÂ∫èÂ∞ΩÂèØËÉΩÂú∞ÁÆÄÁü≠„ÄÅÂø´ÈÄüÔºåÈÅøÂÖçÂ±èËîΩ‰∏≠Êñ≠Â§™‰πÖÔºåÂØºËá¥Á≥ªÁªüÁöÑÂìçÂ∫îËÉΩÂäõÂíåÊÄßËÉΩÂèóÂà∞ÂΩ±ÂìçÔºõËÄåÊØîËæÉÁπÅÈáçÁöÑÂ∑•‰ΩúÂèØ‰ª•Âú®‰∏ãÂçäÈÉ®ÊâßË°å„ÄÇ ‰∏ãÂçäÈÉ®‰∏ªË¶ÅÂÆûÁé∞ÊñπÂºèÔºö ËΩØ‰∏≠Êñ≠ ÂØπ‰∫éÊó∂Èó¥Ë¶ÅÊ±Ç‰∏•Ê†ºÔºå‰∏îËÉΩËá™Â∑±È´òÊïàÂÆåÊàêÂä†ÈîÅÁöÑÂ∑•‰ΩúÔºåÂèØ‰ΩøÁî®ËΩØ‰∏≠Êñ≠ÔºàÂ¶ÇÁΩëÁªú„ÄÅSCSIÔºâ ËΩØ‰∏≠Êñ≠ÊâßË°åÊúüÈó¥ÔºåÂÖÅËÆ∏ÂìçÂ∫î‰∏≠Êñ≠Ôºå‰ΩÜÂÆÉËá™Ë∫´‰∏çËÉΩÁù°Áú† tasklet Âü∫‰∫éËΩØ‰∏≠Êñ≠ÂÆûÁé∞ÔºåÂêå‰∏Ä‰∏™Â§ÑÁêÜÁ®ãÂ∫èÁöÑÂ§ö‰∏™ÂÆû‰æã‰∏çËÉΩÂÜçÂ§ö‰∏™Â§ÑÁêÜÂô®ÂêåÊó∂ËøêË°å Áî®ÈÄîÂπøÊ≥õÔºåÊé•Âè£ÁÆÄÂçïÔºåÊÄßËÉΩ‰∏çÈîô ‰∏çËÉΩÁù°Áú† Â∑•‰ΩúÈòüÂàó‰∏≠ÁöÑÂ∑•‰ΩúÂèØ‰ª•‰∫§ÁªôÂÜÖÊ†∏Á∫øÁ®ãÊé®ÂêéÊâßË°åÔºà‰ºöÂú®ËøõÁ®ã‰∏ä‰∏ãÊñáÊâßË°åÔºâÔºåÂèØ‰ª•Âà©Áî®ËøõÁ®ã‰∏ä‰∏ãÊñáÁöÑ‰ºòÂäøÔºå‰∏îÂèØ‰ª•ÈáçÊñ∞Ë∞ÉÂ∫¶ÂíåÁù°Áú† ÂÜÖÊ†∏ÂêåÊ≠•Âú®ËøõË°åÂÜÖÊ†∏ÁºñÁ®ãÊó∂ÔºåÊó∂ÂàªÈúÄË¶ÅÊ≥®ÊÑèÂπ∂ÂèëÂ∏¶Êù•ÁöÑÈóÆÈ¢òÔºåÈúÄË¶ÅËÉΩÂ§üÊ≠£Á°ÆËØÜÂà´‰∏¥ÁïåÂå∫ÔºåÊ≠£Á°ÆÂä†ÈîÅ„ÄÅËß£ÈîÅÔºå‰øùËØÅÂÖ≥ÈîÆÊï∞ÊçÆÁªìÊûÑ‰∏çË¢´ÈîôËØØ‰øÆÊîπ„ÄÇÈÇ£‰πàÊúâÂì™‰∫õÊÉÖÂÜµËÉΩÈÄ†ÊàêÂπ∂ÂèëÈóÆÈ¢òÂë¢Ôºü ‰∏≠Êñ≠ÔºöÂºÇÊ≠•ÂèëÁîüÔºå‰ºö‰∏≠Êñ≠ÂΩìÂâçÊ≠£Âú®ÊâßË°åÁöÑ‰ª£Á†Å ËΩØ‰∏≠Êñ≠Âíå taskletÔºöÂÜÖÊ†∏‰ºöÂú®‰ªªÊÑèÊó∂ÂàªÂî§ÈÜíËΩØ‰∏≠Êñ≠Âíå taskletÔºåÊâìÊñ≠ÂΩìÂâçÊ≠£Âú®ÊâßË°åÁöÑ‰ª£Á†Å ÂÜÖÊ†∏Êä¢Âç†ÔºöÂÜÖÊ†∏‰∏≠ÁöÑ‰ªªÂä°ÂèØËÉΩË¢´ÂÖ∂ÂÆÉ‰ªªÂä°Êä¢Âç† Áù°Áú†Âèä‰∏éÁî®Êà∑Á©∫Èó¥ÂêåÊ≠•ÔºöÂú®ÂÜÖÊ†∏‰∏≠ÊâßË°åÁöÑËøõÁ®ãÂèØËÉΩ‰ºöÁù°Áú†Ôºå‰ªéËÄåÂØºËá¥Ë∞ÉÂ∫¶Á®ãÂ∫èË¢´Âî§ÈÜíÔºåÂπ∂ËøêË°åÊñ∞ÁöÑÁî®Êà∑ËøõÁ®ã SMPÔºöÂ§ö‰∏™Â§ÑÁêÜÂô®‰ºöÂπ∂Ë°åÊâßË°å ÂÆöÊó∂Âô®ÂíåÊó∂Èó¥ÁÆ°ÁêÜÂÜÖÊ†∏ÈúÄË¶ÅÂú®Á°¨‰ª∂ÔºàRTC Âíå TimerÔºâÁöÑÂ∏ÆÂä©‰∏ãÊâçËÉΩËÆ°ÁÆóÂíåÁÆ°ÁêÜÊó∂Èó¥ÔºåÂÜÖÊ†∏ÈÄöËøáÂ∑≤Áü•ÁöÑÔºàËøô‰∏™Êó∂ÈíüÂë®ÊúüÊòØÂèØÁºñÁ®ãÁöÑÔºåÂèØÁ°ÆÂÆöÁöÑÔºâÊó∂Èíü‰∏≠Êñ≠Èó¥ÈöîÊù•ËÆ°ÁÆó wall time Âíå jiffiesÔºàÁ≥ªÁªüÂêØÂä®‰ª•Êù•ÁöÑËäÇÊãçÊÄªÊï∞Ôºâ„ÄÇÈÇ£‰πàÔºåÂú®Êó∂Èíü‰∏≠Êñ≠ÂèëÁîüÊó∂Á©∂Á´ü‰ºöÂÅöÂì™‰∫õÂ∑•‰ΩúÂë¢Ôºü‰ª•‰∏ãÁªôÂá∫‰∏Ä‰∫õ‰ºöÂë®ÊúüÊâßË°åÁöÑÂ∑•‰ΩúÔºö Êõ¥Êñ∞Á≥ªÁªüËøêË°åÊó∂Èó¥ÂíåÂÆûÈôÖÊó∂Èó¥ ÂØπ‰∫é SMP Á≥ªÁªüÔºåÈúÄË¶ÅÂùáË°°ÂêÑÂ§ÑÁêÜÂô®‰∏äÁöÑ‰ªªÂä°ÈòüÂàóÔºåÂ¶ÇÊûúËøêË°åÈòüÂàóË¥üËΩΩ‰∏çÂùáË°°ÔºåÈúÄË¶ÅÂ∞ΩÈáèËÆ©ÂÆÉ‰ª¨ÂùáË°° Ê£ÄÊü•ÂΩìÂâçËøõÁ®ãÊòØÂê¶Áî®Â∞Ω‰∫ÜËá™Â∑±ÁöÑÊó∂Èó¥ÁâáÔºåÂ¶ÇÊûúÊó∂ÔºåÂàôÈáçÊñ∞ËøõË°åË∞ÉÂ∫¶ ËøêË°åË∂ÖÊó∂ÁöÑÂä®ÊÄÅÂÆöÊó∂Âô® Êõ¥Êñ∞ËµÑÊ∫êÊ∂àËÄóÂíåÂ§ÑÁêÜÂô®Êó∂Èó¥ÁªüËÆ°ÂÄº ÂÜÖÂ≠òÁÆ°ÁêÜÈ°µÂÜÖÊ†∏ÊòØÊääÁâ©ÁêÜÂÜÖÂ≠òÂàÜÈ°µÁÆ°ÁêÜÁöÑÔºå‰πüÂ∞±ÊòØËØ¥È°µÔºàpageÔºâÊòØÊúÄÂü∫Êú¨ÁöÑÁÆ°ÁêÜÂçïÂÖÉ„ÄÇMMU ‰πüÊòØ‰ª•È°µÂ§ßÂ∞è‰∏∫Âçï‰ΩçËΩ¨Êç¢ËôöÊãüÂú∞ÂùÄÂà∞Á°¨‰ª∂Âú∞ÂùÄÁöÑ„ÄÇ‰∏çÂêåÁöÑ‰ΩìÁ≥ªÁªìÊûÑÔºåÈ°µÂ§ßÂ∞è‰∏çÂêåÔºå‰∏ÄËà¨ 32 ‰ΩçÁ≥ªÁªüÊòØ 4KBÔºå64 ‰ΩçÁ≥ªÁªüÊòØ 8KB„ÄÇ Âå∫Âõ†‰∏∫Á°¨‰ª∂Â≠òÂú®ÈôêÂà∂ÔºåÂÜÖÊ†∏Êó†Ê≥ïÂØπÊâÄÊúâÁöÑÈ°µ‰∏ÄËßÜÂêå‰ªÅ„ÄÇÂõ†Ê≠§ÈúÄË¶ÅÊääÈ°µÂàíÂàÜÊàê‰∏çÂêåÁöÑÂå∫ÔºàzoneÔºâÔºåÂÜÖÊ†∏ÈúÄË¶ÅÂ§ÑÁêÜÂ¶Ç‰∏ãÂõ†‰∏∫Á°¨‰ª∂Áº∫Èô∑ËÄåÂºïËµ∑ÁöÑÂÜÖÂ≠òÂØªÂùÄÈóÆÈ¢òÔºö ‰∏Ä‰∫õÁ°¨‰ª∂Âè™ËÉΩÁî®ÁâπÂÆöÁöÑÂÜÖÂ≠òÂú∞ÂùÄÊâßË°å DMA Êìç‰Ωú ‰∏Ä‰∫õ‰ΩìÁ≥ªÁªìÊûÑÁöÑÂÜÖÂ≠òÁâ©ÁêÜÂØªÂùÄËåÉÂõ¥ÊØîËôöÊãüÂú∞ÂùÄËåÉÂõ¥Â§ß ÂÜÖÊ†∏ÁöÑÂàÜÂå∫ÊúâÂõõÁßçÔºö ZONE_DMAÔºöÂèØÊâßË°å DMA Êìç‰ΩúÁöÑÈ°µÈõÜÂêà ZONE_DMA32ÔºöÂêå‰∏äÔºå‰ΩÜ‰ªÖÈôê‰∫é 32 ‰ΩçËÆæÂ§á ZONE_NORMALÔºöËÉΩÂ§üÊ≠£Â∏∏Êò†Â∞ÑÁöÑÈ°µ ZONE_HIGHMEMÔºöÈ´òÁ´ØÂÜÖÂ≠òÂå∫ÂüüÔºåÂÖ∂‰∏≠ÁöÑÈ°µ‰∏çËÉΩÊ∞∏‰πÖÊò†Â∞ÑÂà∞ÂÜÖÊ†∏Âú∞ÂùÄÁ©∫Èó¥ÔºàËøôÈáåÈôê‰∫é 32 ‰ΩçÂú∞ÂùÄÁ©∫Èó¥Ôºå64 ‰ΩçÂ∞±‰∏ç‰ºöÊúâÈóÆÈ¢ò‰∫ÜÔºâ È°µÁî≥ËØ∑ÂíåÈáäÊîæ alloc_page(gfp_mask)ÔºöÂè™ÂàÜÈÖç‰∏ÄÈ°µÔºåËøîÂõûÊåáÂêëÈ°µÁªìÊûÑÁöÑÊåáÈíà alloc_pages(gfp_mask, order)ÔºöÂàÜÈÖç 2^order ‰∏™ËøûÁª≠È°µ __get_free_page(gfp_mask)ÔºöÂè™ÂàÜÈÖç‰∏ÄÈ°µÔºåËøîÂõûÊåáÂêëÂÖ∂ÈÄªËæëÂú∞ÂùÄÁöÑÊåáÈíà __get_free_pages(gfp_mask, order)ÔºöÂàÜÈÖç 2^order ‰∏™ËøûÁª≠Áâ©ÁêÜÈ°µÔºåËøîÂõûÈÄªËæëÂú∞ÂùÄÊåáÈíà get_zeroed_page(gfp_mask)ÔºöÂè™ÂàÜÈÖç‰∏ÄÈ°µÔºå‰∏îÂ°´ÂÖÖ 0 ÔºåËøîÂõûÈÄªËæëÂú∞ÂùÄÊåáÈíà __free_pages(struct page *page, unsinged int order) free_pages(unsigned long addr, unsinged int order) free_page(unsigned long addr) kmallocvoid *kmalloc(size_t size, gfp_t flags)Ôºåkmalloc() Á±ª‰ºº‰∫é malloc()ÔºåÂèØ‰ª•Ëé∑ÂæóÊåáÂÆöÂ≠óËäÇÂ§ßÂ∞èÁöÑÂÜÖÊ†∏ÂÜÖÂ≠òÔºåÂÆÉÂàÜÈÖçÂæóÂà∞ÁöÑÈ°µÁöÑÁâ©ÁêÜÂú∞ÂùÄÊòØËøûÁª≠ÁöÑÔºåÊâÄ‰ª•ËôöÊãüÂú∞ÂùÄ‰πüÊòØËøûÁª≠ÁöÑ„ÄÇvoid kfree(const void *ptr) ÈáäÊîæÂàÜÈÖçÁöÑÂÜÖÂ≠òÁ©∫Èó¥ ÂÖ≥‰∫éÊ†áËÆ∞‰ΩçÔºåÂ∏∏Áî®ÁöÑÊòØ GFP_KERNELÔºåÂÖÅËÆ∏Áù°Áú†ÔºåÁî®‰∫éËøõÁ®ã‰∏ä‰∏ãÊñáÁ©∫Èó¥ÔºõÂè¶Â§ñÁöÑ GFP_ATOMICÔºåÂàô‰∏çÂèØ‰ª•Áù°Áú†ÔºåÂèØÁî®‰∫éËøõÁ®ã‰∏ä‰∏ãÊñá„ÄÅ‰∏≠Êñ≠Â§ÑÁêÜÁ®ãÂ∫è„ÄÅËΩØ‰∏≠Êñ≠„ÄÅtasklet„ÄÇ vmallocvmalloc() Á±ª‰ºº kmalloc()Ôºå‰∏çÂêåÁöÑÊòØÔºåÂÆÉÂàÜÈÖçÁöÑÂÜÖÂ≠òËôöÊãüÂú∞ÂùÄËôΩÁÑ∂ÊòØËøûÁª≠ÁöÑÔºå‰ΩÜÊòØÂÆûÈôÖÁöÑÁâ©ÁêÜÂú∞ÂùÄÊó†ÈúÄËøûÁª≠„ÄÇÂÆÉÈÄöËøáÂàÜÈÖçÈùûËøûÁª≠ÁöÑÁâ©ÁêÜÂÜÖÂ≠òÔºåÂÜç„Äå‰øÆÊ≠£„ÄçÈ°µË°®Ôºå‰ªéËÄåÊääÂÜÖÂ≠òÊò†Â∞ÑÂà∞ÈÄªËæëÂú∞ÂùÄÁ©∫Èó¥ËøûÁª≠ÁöÑÂå∫Âüü„ÄÇÂÆÉÈúÄË¶Å‰∏ìÈó®ÁöÑÈ°µË°®Êù•ÂÆåÊàêËøûÁª≠ËôöÊãüÂú∞ÂùÄÂà∞ÂÆûÈôÖÈùûËøûÁª≠Áâ©ÁêÜÂú∞ÂùÄÁöÑÊò†Â∞ÑÔºåÂºÄÈîÄËæÉÂ§ßÔºå‰∏îÂÆπÊòìÂºïËµ∑ TLB ÊäñÂä®ÔºåÈÄöÂ∏∏Âú®ÂÜÖÊ†∏‰∏≠Êõ¥ÂÄæÂêë‰∫é‰ΩøÁî® kmalloc()„ÄÇ slab Â±Çslab Â±ÇÂÖÖÂΩìÈÄöÁî®Êï∞ÊçÆÁªìÊûÑÁöÑÁºìÂ≠òÂ±ÇÁöÑËßíËâ≤ÔºåÂÆÉ‰ºö‰∏∫‰∏çÂêåÁöÑÂØπË±°ÂàíÂàÜÊàê‰∏çÂêåÁöÑÈ´òÈÄüÁºìÂ≠òÁªÑÔºåÊØèÁªÑÂ≠òÊîæ‰∏çÂêåÁ±ªÂûãÁöÑÂØπË±°„ÄÇÊØîÂ¶ÇÔºåÂ≠òÊîæ task_struct Âíå inode Â∞±ÂàÜÂ±û‰∫é‰∏çÂêåÁöÑÁªÑ„ÄÇkmalloc() ‰πüÊòØÂü∫‰∫é slab Â±Ç‰πã‰∏äÔºå‰ΩøÁî®‰∫Ü‰∏ÄÁªÑÈÄöÁî®È´òÈÄüÁºìÂ≠ò„ÄÇ slab ÂàÜÈÖçÂô®ÂºïÂÖ•ÁöÑÁõÆÁöÑÔºö ÈÅøÂÖçÈ¢ëÁπÅ‰ΩøÁî®ÁöÑÂØπË±°ÈúÄË¶ÅÈ¢ëÁπÅÂàÜÈÖçÂíåÈáäÊîæÔºåÈôç‰ΩéÂºÄÈîÄ È¢ëÁπÅÂàÜÈÖçÂõûÊî∂ÂÆπÊòìÂØºËá¥ÂÜÖÂ≠òÁ¢éÁâáÔºåÂáèÂ∞ëÁ¢éÁâáÈóÆÈ¢ò ÊèêÈ´òÊÄßËÉΩ ÈÉ®ÂàÜÁºìÂ≠ò‰∏ìÂ±û‰∫éÊüê‰∏™Â§ÑÁêÜÂô®Êó∂ÔºåÂèØ‰ª•ÂÆûÁé∞Êó†ÈîÅÂàÜÈÖçÂíåÈáäÊîæÔºàtcmallocÔºâ ËôöÊãüÊñá‰ª∂Á≥ªÁªüÔºàVFSÔºâVFS ÊòØ Linux Êèê‰æõÁöÑ‰∏Ä‰∏™Êñá‰ª∂Á≥ªÁªüÊäΩË±°Â±ÇÔºåÊ∂µÁõñ‰∫Ü‰ªª‰ΩïÊñá‰ª∂Á≥ªÁªüÁöÑÂ∏∏Áî®ÂäüËÉΩÈõÜÂíåË°å‰∏∫Ôºå‰ªéËÄåÊîØÊåÅÂêÑÁßçÂÆûÈôÖÁöÑÊñá‰ª∂Á≥ªÁªüÔºàÂ¶Ç NTFS, FAT, EXT4Ôºâ„ÄÇ1Áî®Êà∑Á©∫Èó¥ write() -&gt; VFS sys_write() -&gt; Êñá‰ª∂Á≥ªÁªüÁöÑÂÜôÊñπÊ≥ï -&gt; Â≠òÂÇ®ËÆæÂ§á Unix Êñá‰ª∂Á≥ªÁªü‰º†ÁªüÊäΩË±°Ê¶ÇÂøµÔºöFile, DirectoryEntry, Index Node Âíå Mount Point„ÄÇUnix Êñá‰ª∂ÁöÑÁâπÁÇπÊòØÈù¢ÂêëÂ≠óËäÇÊµÅÊäΩË±°ËÆæËÆ°ÁöÑÔºåÂÖ∑ÊúâÁÆÄÂçï„ÄÅÁÅµÊ¥ªÁöÑÁâπÊÄß„ÄÇÂú® Unix ‰∏≠ÔºåÁõÆÂΩï‰πüÊòØÊôÆÈÄöÊñá‰ª∂ÔºåÂÖ∂ÂàóÂá∫‰∫ÜÂåÖÂê´Âú®ÁõÆÂΩï‰∏≠ÊâÄÊúâÊñá‰ª∂„ÄÇ VFS ‰∏≠ÁöÑ‰∏ªË¶ÅÂØπË±°Ôºö Ë∂ÖÁ∫ßÂùóÂØπË±°Ôºå‰ª£Ë°®ÂÖ∑‰ΩìÂ∑≤ÂÆâË£ÖÁöÑÊñá‰ª∂Á≥ªÁªü Á¥¢ÂºïËäÇÁÇπÂØπË±°Ôºå‰ª£Ë°®‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÊñá‰ª∂ ÁõÆÂΩïÈ°πÂØπË±°Ôºå‰ª£Ë°®‰∏Ä‰∏™ÁõÆÂΩïÈ°πÔºåÊòØË∑ØÂæÑÁöÑÁªÑÊàêÈÉ®ÂàÜ Êñá‰ª∂ÂØπË±°Ôºå‰ª£Ë°®Áî±ËøõÁ®ãÊâìÂºÄÁöÑÊñá‰ª∂ÔºàÂÖ∂ÂÆûÂÆÉ‰ºöÊåáÂêëÁõÆÂΩïÈ°πÂØπË±°ÔºåËÄåÁõÆÂΩïÈ°πÂØπË±°ÊâçÊòØÁúüÊ≠£Ë°®Á§∫Â∑≤ÊâìÂºÄÁöÑÂÆûÈôÖÊñá‰ª∂ÔºåÂõ†‰∏∫ÂÖ∂‰∏≠ÂåÖÂê´‰∫ÜÊåáÂêë inode ÁöÑÊåáÈíàÔºâ Âùó I/OLinux ‰∏≠ÔºåËÆæÂ§áÂàÜ‰∏∫‰∏âÁ±ªÔºö ÂùóËÆæÂ§áÔºöÊîØÊåÅÈöèÊú∫ËÆøÈóÆÂõ∫ÂÆöÂ§ßÂ∞èÁöÑÊï∞ÊçÆÂùóÔºåÂ¶ÇÁ°¨Áõò„ÄÅÈó™Â≠ò Â≠óÁ¨¶ËÆæÂ§áÔºö‰ª•Â≠óÁ¨¶ÊµÅÁöÑÂΩ¢ÂºèË¢´ËÆøÈóÆÔºåÂ¶ÇÈîÆÁõò ÁΩëÁªúËÆæÂ§á ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÈíàÂØπÂùóËÆæÂ§áÁöÑËØ∑Ê±Ç‰ºöË¢´Êìç‰ΩúÁ≥ªÁªüÊåÇËµ∑Âú® I/O ËØ∑Ê±ÇÈòüÂàó‰∏äÔºåÂπ∂‰∏îÁî± I/O Ë∞ÉÂ∫¶Á®ãÂ∫èÊù•ÁÆ°ÁêÜËØ∑Ê±ÇÈòüÂàó„ÄÇÂÆÉ‰ºöÂÜ≥ÂÆöËØ∑Ê±ÇÈòüÂàó‰∏≠ÁöÑËØ∑Ê±ÇÂ¶Ç‰ΩïÊéíÂ∫èÔºå‰ª•Âèä‰ΩïÊó∂ÂèëÈÄÅÂà∞ÂÖ∑‰ΩìÁöÑÂùóËÆæÂ§á„ÄÇ‰πãÊâÄ‰ª•Ëøô‰πàÂÅöÔºåÂ∞±ÊòØÊúüÊúõÂÄüÂä© I/O Ë∞ÉÂ∫¶Á®ãÂ∫èÔºåÂØπËØ∑Ê±ÇËøõË°åÂêàÂπ∂ÂíåÊéíÂ∫èÔºå‰ªéËÄåÊúâÊïàÊèêÈ´òÁ≥ªÁªüÁöÑÊï¥‰ΩìÊÄßËÉΩÔºà‰πüÂèØËÉΩÈÄ†ÊàêÊüê‰∫õËØ∑Ê±ÇÂæó‰∏çÂà∞ÂÖ¨Âπ≥ÂØπÂæÖÔºåÁîöËá≥Âá∫Áé∞È••È•øÁöÑÊÉÖÂÜµÔºâ„ÄÇ‰ª•‰∏ãËÆ∞ÂΩïÁöÑÊòØ Linux ‰∏≠Â∑≤ÁªèÂÆûÁé∞ÁöÑÂá†Áßç I/O Ë∞ÉÂ∫¶ÁÆóÊ≥ïÔºö Linus ÁîµÊ¢Ø ÊîØÊåÅÂêëÂâçÂíåÂêëÂêéÂêàÂπ∂ÔºàÈÄöÂ∏∏ÈÉΩÊòØËøôÁßçÂ±ÖÂ§öÔºâ ÊúâËæÉÂ•ΩÁöÑÂÖ®Â±ÄÂêûÂêêÈáè ‰ºöÂèëÁîüËØ∑Ê±ÇÈ••È•øÈóÆÈ¢ò ÊúÄÁªàÊúüÈôêÔºàdeadlineÔºâ I/O Ë∞ÉÂ∫¶ Èôç‰Ωé‰∫ÜÁ≥ªÁªüÁöÑÂÖ®Â±ÄÂêûÂêêÈáè ËØªËØ∑Ê±ÇË∂ÖÊó∂ 500msÔºåÂÜôËØ∑Ê±ÇË∂ÖÊó∂ 5sÔºåË∂ÖÊó∂ÂøÖÁÑ∂ÂæóÂà∞ÊúçÂä°ÔºåÈÅøÂÖçÈïøÊó∂Èó¥È••È•øÁöÑÈóÆÈ¢ò È¢ÑÊµãÔºàanticipatoryÔºâ I/O Ë∞ÉÂ∫¶ ÁõÆÊ†áÊòØ‰øùÊåÅËæÉÂ•ΩÁöÑËØªÂìçÂ∫îÂêåÊó∂ÔºåÊèê‰æõËâØÂ•ΩÁöÑÂÖ®Â±ÄÂêûÂêêÈáè„ÄÇËßÜÂõæÂáèÂ∞ëÂú®ËøõË°å I/O Êìç‰ΩúÊúüÈó¥ÔºåÂ§ÑÁêÜÊñ∞Âà∞ÁöÑËØªËØ∑Ê±ÇÂ∏¶Êù•ÁöÑÂØªÂùÄÊï∞Èáè ËØ∑Ê±ÇÊèê‰∫§Âêé‰∏ç‰ºöÁõ¥Êé•ËøîÂõûÂ§ÑÁêÜÂÖ∂ÂÆÉËØ∑Ê±ÇÔºåËÄå‰ºöÁ©∫Èó≤ÁâáÂàªÔºàÂá†ÊØ´ÁßíÔºâÔºåÁ≠âÂæÖÂ∫îÁî®Êèê‰∫§ÂÖ∂ÂÆÉËØªËØ∑Ê±Ç ÂÆåÂÖ®ÂÖ¨Âπ≥ÊéíÈòü I/O Ë∞ÉÂ∫¶ÔºàCFQÔºâ ‰∏∫ÁâπÊÆäÂ∑•‰ΩúË¥üËΩΩÁöÑÂú∫ÊôØËÆæËÆ°ÔºåÊØè‰∏™ËøõÁ®ãÈÉΩÊúâËá™Â∑±ÁöÑËØ∑Ê±ÇÈòüÂàó ‰ª•Êó∂Èó¥ÁâáËΩÆËΩ¨Ë∞ÉÂ∫¶ÈòüÂàóÔºåÂ§ÑÁêÜÈòüÂàó‰∏≠ÁöÑËØ∑Ê±Ç ËøõÁ®ãÂú∞ÂùÄÁ©∫Èó¥Áé∞‰ª£Êìç‰ΩúÁ≥ªÁªüÈÄöËøáÈááÁî®ËôöÊãüÂÜÖÂ≠òÊäÄÊúØÔºå‰∏∫ÊØè‰∏™ËøõÁ®ãÊèê‰æõ‰∫ÜÁã¨Á´ãÁöÑÂú∞ÂùÄÁ©∫Èó¥Ôºå‰ªéËÄåÁªôÊØè‰∏™ËøõÁ®ãËê•ÈÄ†‰∫ÜÁã¨‰∫´ÂÜÖÂ≠òÁöÑÂÅáË±°ÔºåËøôÊòØÂÜÖÂ≠òËôöÊãüÂåñÁöÑÈáçË¶ÅÊú∫Âà∂„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÁé∞‰ª£ÈááÁî®ËôöÊãüÂÜÖÂ≠òÁöÑÁ≥ªÁªüÈÄöÂ∏∏ÈÉΩ‰ΩøÁî®Âπ≥Âù¶Âú∞ÂùÄÁ©∫Èó¥ÔºåËÄåÈùûÂàÜÊÆµÂºèÁöÑÂÜÖÂ≠òÊ®°Âºè„ÄÇ ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåÂÜÖÂ≠òÂú∞ÂùÄÁ©∫Èó¥‰ºöÊ†πÊçÆÈúÄË¶ÅÂàíÂàÜÊàê‰∏çÂêåÁöÑÂå∫Âüü„ÄÇÂÜÖÊ†∏ÂèØ‰ª•ÁªôËøõÁ®ãÂú∞ÂùÄÁ©∫Èó¥Âä®ÊÄÅÊ∑ªÂä†ÊàñÂáèÂ∞ëÂÜÖÂ≠òÂå∫Âüü„ÄÇÊØè‰∏™ËøõÁ®ãÂè™ËÉΩËÆøÈóÆÊúâÊïàÂÜÖÂ≠òÂå∫ÂüüÂÜÖÁöÑÂÜÖÂ≠òÂú∞ÂùÄÔºåÊØè‰∏™ÂÜÖÂ≠òÂå∫Âüü‰ºöÂåÖÂê´ÊùÉÈôêÁ≠âÂ±ûÊÄß„ÄÇËøõÁ®ã‰∏≠‰ªªÊÑèÊúâÊïàÂú∞ÂùÄÂè™ËÉΩ‰Ωç‰∫éÂîØ‰∏ÄÁöÑÂå∫ÂüüÔºå‰∏îËøô‰∫õÂå∫Âüü‰∏çËÉΩÁõ∏‰∫íË¶ÜÁõñ„ÄÇ ÂÜÖÂ≠òÂå∫ÂüüÂèØ‰ª•ÂåÖÂê´ÂêÑÁßçÂÜÖÂ≠òÂØπË±°Ôºö ÂèØÊâßË°åÊñá‰ª∂‰ª£Á†ÅÁöÑÂÜÖÂ≠òÊò†Â∞ÑÔºåtext section ÂèØÊâßË°åÊñá‰ª∂Â∑≤ÂàùÂßãÂåñÂÖ®Â±ÄÂèòÈáèÁöÑÂÜÖÂ≠òÊò†Â∞ÑÔºådata section ÂåÖÂê´Êú™ÂàùÂßãÂåñÁöÑÂÖ®Â±ÄÂèòÈáèÔºåBSS ÊÆµÁöÑÈõ∂È°µÁöÑÂÜÖÂ≠òÊò†Â∞Ñ ËøõÁ®ãÁî®Êà∑Á©∫Èó¥Ê†àÁöÑÈõ∂È°µÂÜÖÂ≠òÊò†Â∞Ñ ÊØè‰∏™‰∏Ä‰∏™ËØ∏Â¶Ç C Â∫ìÊàñÂä®ÊÄÅËøûÊé•Á®ãÂ∫èÁ≠âÂÖ±‰∫´ÁöÑ text section, data section Âíå bss ‰πüË¢´ËΩΩÂÖ•Âà∞ËøõÁ®ãÂú∞ÂùÄÁ©∫Èó¥ ÂÜÖÂ≠òÊò†Â∞ÑÊñá‰ª∂ ÂÖ±‰∫´ÂÜÖÂ≠òÊÆµ ÂåøÂêçÊò†Â∞ÑÔºåÂ¶Ç malloc() ÂàÜÈÖçÁöÑÂÜÖÂ≠ò 1mm_struct -&gt; vm_area_struct 64 ‰ΩçÁ≥ªÁªüËøõÁ®ãÂú∞ÂùÄÁ©∫Èó¥Â∏ÉÂ±ÄÊØè‰∏Ä‰∏™ËøõÁ®ãÈÉΩÊúâ 64bit ÁöÑÂú∞ÂùÄÁ©∫Èó¥ÔºåÂÖ∂‰∏≠Áî®Êà∑Á©∫Èó¥ÂèØ‰ª•‰ΩøÁî®‰∏ÄÂçäÁöÑÂú∞ÂùÄÁ©∫Èó¥Ôºà128 TiBÔºâÔºåËÄåÂè¶‰∏ÄÂçäÂàôÊòØÂÜÖÊ†∏Á©∫Èó¥‰ΩøÁî®„ÄÇÂÜÖÊ†∏ÈÄöÂ∏∏È©ªÁïôÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂπ∂‰∏î‰ºöË¢´Êò†Â∞ÑÂà∞ÊØè‰∏™ËøõÁ®ãÁöÑËôöÊãüÂÜÖÂ≠òÂΩì‰∏≠„ÄÇËÄåÂú®ÂÜÖÊ†∏‰∏≠ÔºåÊâÄÊúâÁöÑÂÜÖÊ†∏Á∫øÁ®ãÈÉΩÂÖ±‰∫´‰∏Ä‰∏™Âú∞ÂùÄÁ©∫Èó¥„ÄÇËØ¶ÁªÜÁöÑÂÜÖÂ≠òÂ∏ÉÂ±ÄÂèØ‰ª•ÂèÇËÄÉÂêéÈù¢ÁöÑÂ≠¶‰π†ËµÑÊñô~ È°µË°®Linux ‰∏≠‰ΩøÁî®‰∏âÁ∫ßÈ°µË°®ÂÆåÊàêÂú∞ÂùÄËΩ¨Êç¢Ôºå‰ΩøÁî®Â§öÁ∫ßÈ°µË°®ÂèØ‰ª•ËäÇÁ∫¶Âú∞ÂùÄËΩ¨Êç¢ÈúÄË¶ÅÂç†Áî®ÁöÑÁ©∫Èó¥„ÄÇ‰ΩÜÁî±‰∫éÂÆåÊàêËôöÊãüÈ°µÂú∞ÂùÄÂà∞Áâ©ÁêÜÈ°µÂú∞ÂùÄËΩ¨Êç¢ÈÉΩÈúÄË¶ÅÂú®‰∏âÁ∫ßÈ°µË°®‰∏≠Êü•ÊâæÂà∞Êò†Â∞ÑÔºåÂºÄÈîÄÊØîËæÉÈ´ò„ÄÇÊâÄ‰ª•ÂæàÂ§ö‰ΩìÁ≥ªÁªìÊûÑÊèê‰æõ‰∫Ü TLB ‰Ωú‰∏∫Âú∞ÂùÄÊò†Â∞ÑÁöÑÁ°¨‰ª∂ÁºìÂ≠ò„ÄÇ ÊÄªÁªìÊÄª‰Ωì‰∏äÊù•ËØ¥ÔºåËøôÊú¨‰π¶ËøòÊòØÊØîËæÉÈÄÇÂêàÂØπÊìç‰ΩúÁ≥ªÁªüÂü∫Êú¨Ê¶ÇÂøµÊúâ‰∏ÄÂÆö‰∫ÜËß£Ôºå‰∏îÂØπ‰∫é Linux ÂÜÖÊ†∏‰πüÊúâ‰∏ÄÁÇπ‰∫ÜËß£ÁöÑÂâçÊèê‰∏ãÈòÖËØªÔºåÂê¶ÂàôÂú®ÁúãÂà∞‰∏Ä‰∫õÊ¶ÇÂøµÁöÑÊó∂ÂÄô‰ºöÊØîËæÉÂêÉÂäõ„ÄÇÊØîÂ¶ÇÂØπ‰∫éËøõÁ®ã„ÄÅÁ∫øÁ®ãÁöÑÊäΩË±°ÂÆö‰πâÔºåËôöÊãüÂÜÖÂ≠ò‰∏≠ËÆ≤Âà∞ÁöÑÂàÜÈ°µ„ÄÅÂàÜÊÆµÊ¶ÇÂøµ‰ª•ÂèäÂ§öÁ∫ßÈ°µË°®ÁöÑÊ¶ÇÂøµ„ÄÇÂè¶Â§ñÔºåÂØπ‰∫éÂ∏∏Áî®Êï∞ÊçÆÁªìÊûÑÈúÄË¶ÅÊúâÊ∏ÖÊô∞ÁöÑËÆ§ËØÜÔºõÂπ∂ÂèëÁõ∏ÂÖ≥ÁöÑÂêåÊ≠•ÈóÆÈ¢ò‰πüÊúâ‰∫ÜËß£„ÄÇËôΩÁÑ∂Êï¥Êú¨‰π¶ÊòØÂü∫‰∫é Linux 2.6.3x ÂÜÖÊ†∏‰∏∫Âü∫Á°ÄÁöÑÔºåÂ¶Ç‰ªäÁöÑ Linux ÂÜÖÊ†∏Â∑≤ÁªèÂèëÂ±ïÂà∞ 5.x Êó∂‰ª£‰∫ÜÔºåËøôÊúüÈó¥ÂèòÂåñËÇØÂÆöÊúâÂæàÂ§ö„ÄÇ‰ΩÜËøôÊú¨‰π¶ÁöÑ‰ª∑ÂÄºËøòÊòØÂ≠òÂú®ÁöÑÔºåÂÖ∂‰∏≠ËÆ≤ÂæóÂæàÂ§öÊÄùÊÉ≥„ÄÅÊñπÊ≥ï‰æùÁÑ∂ÂÆûÁî®ÔºåÂèØ‰ª•ÂèòÈÄöÂú∞ÂéªÁúãÂæÖÂíåÁêÜËß£„ÄÇ ÂêçËØçËß£Èáä POSIX: Portable Operating System Interface TLB: Translation Lookup Buffer CFS: Complete Fair Scheduler CFQ: Complete Fair QueueingÔºåËøô‰∏™ÊòØ IO Ë∞ÉÂ∫¶Âô®‰πã‰∏Ä VFS: Virtual File System VMA: Virtual Memory Area MMU: Memory Map Unit jiffies: Linux ‰∏≠Áî®Êù•ËÆ∞ÂΩïÁ≥ªÁªüÂêØÂä®‰ª•Êù•ÁöÑËäÇÊãçÊï∞ÁöÑÂÖ®Â±ÄÂèòÈáèÔºåËøòÊúâ‰∏Ä‰∏™ jiffies_64 ISR: Interrupt Service Routine Ê∑±ÂÖ•Â≠¶‰π† „ÄäLinux ÂÜÖÊ†∏ËÆæËÆ°‰∏éÂÆûÁé∞ Linux Kernel DevelopmentÔºåÁ¨¨ 3 Áâà„Äã Are Threads Implemented As Processes on Linux POSIX Á∫øÁ®ã Linux Á∫øÁ®ãÂÆûÁé∞ Linux Sched Doc CFS A complete guide to Linux process scheduling Linux Memory Linux memory management x86_64 ÂÜÖÂ≠òÊò†Â∞Ñ The Memory Layout of a 64-bit Linux Process Linux kernel memory layout Chapter 3 Page Table Management Linux Ë∞ÉÂ∫¶Âô®ËµÑÊñôÊï¥ÁêÜ Linux Kernel Map Entering God Mode ‚Äî The Kernel Space Mirroring Attack]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Ë∞ÉÂ∫¶Âô®</tag>
        <tag>Êìç‰ΩúÁ≥ªÁªü</tag>
        <tag>ÂÜÖÂ≠òÁÆ°ÁêÜ</tag>
        <tag>Êñá‰ª∂Á≥ªÁªü</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈôêÊµÅÁÆóÊ≥ïÂ≠¶‰π†ÔºöÊºèÊ°∂ & ‰ª§ÁâåÊ°∂ÁÆóÊ≥ï]]></title>
    <url>%2F2019%2F10%2F11%2Frate-limit-policies%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄÊú¨ËäÇ‰∏ªË¶ÅÂ≠¶‰π†‰∏ã‰∏§ÁßçÂ∏∏Áî®ÁöÑÂçïÊú∫ÈôêÊµÅÊÄùÊÉ≥ÔºåÂàÜÂà´ÊòØÊºèÊ°∂ÁÆóÊ≥ïÂíå‰ª§ÁâåÊ°∂ÁÆóÊ≥ï„ÄÇÊ≠§Â§ñÔºåËøòÂ∞ÜÁªôÂá∫‰ΩøÁî® Python Âèä Go ËØ≠Ë®ÄÂÆûÁé∞Ôºå‰æø‰∫éÂä†Ê∑±ÁêÜËß£„ÄÇÂΩìÁÑ∂ÔºåÁé∞ÂÆû‰∏≠ËÇØÂÆö‰∏çËÉΩÁõ¥Êé•Áî®‰∏ãÈù¢ÁöÑ‰ª£Á†Å„ÄÇÂÆûÈôÖÂ∫îÁî®Êó∂ÔºåÊàë‰ª¨‰∏çÂ§ßÂèØËÉΩÂú®ÂçïÊú∫ÊâßË°åÈôêÊµÅÔºå‰∏ãÈù¢ÁöÑÂÆûÁé∞‰πüÂπ∂ÈùûÁ∫øÁ®ãÊàñ goroutine ÂÆâÂÖ®ÁöÑ„ÄÇÂÆûÈôÖÈôêÊµÅÂèØ‰ª•ËÄÉËôëÂú® Nginx Â±ÇÂØπËØ∑Ê±ÇÈôêÊµÅÔºåÊàñËÄÖÂ¶ÇÊûúÁúüÁöÑË¶ÅËá™Â∑±Âú®‰∏öÂä°ÊñπÂÆûÁé∞‰∏ÄÂ•óÈôêÊµÅÁ≠ñÁï•ÁöÑËØùÔºåÂèØ‰ª•ËÄÉËôëÂü∫‰∫é Redis ÂÆûÁé∞ÂàÜÂ∏ÉÂºèÈôêÊµÅÁ≠ñÁï•„ÄÇÂπ∂‰∏îÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåÂèØËÉΩËøò‰ºöÂü∫‰∫é‰∏çÂêåÁöÑÁª¥Â∫¶ËøõË°åÈôêÊµÅÔºåÂ¶ÇÁî®Êà∑ idÔºåËØ∑Ê±Ç IP Á≠âÔºåÂÆûÈôÖÂ∫îÁî®ÈúÄË¶ÅËÄÉËôëÁöÑ‰∏úË•øÊõ¥Â§ö„ÄÇ ÊºèÊ°∂ÁÆóÊ≥ïÂèØ‰ª•ÊääËØ∑Ê±ÇÂΩì‰ΩúÊ∞¥ÊµÅÔºåÊ∞¥ÊµÅÂÖ®ÈÉ®ËøõÂÖ•ÊúâÈôêÂ§ßÂ∞èÁöÑÊ∞¥Áº∏ÔºåÂêåÊó∂Ê∞¥Áº∏‰ºöÊåâÁÖßÂõ∫ÂÆöÁöÑÈÄüÁéáÊºèÊ∞¥„ÄÇÂΩìÊ∞¥ÊµÅÊπçÊÄ•ÔºåÊ∞¥Áº∏ÊºèÊ∞¥Â§™ÊÖ¢ÁöÑËØùÔºå‰ºöÂæóÁü•Ê∞¥Áº∏ÁßØÊ∞¥ÔºåÁõ¥Âà∞Ê∫¢Âá∫ÔºàÊ≠§Êó∂ÊãíÁªùÊúçÂä°Ôºâ„ÄÇ ÁâπÁÇπ ÂÆûÁé∞Ëµ∑Êù•ÂæàÁÆÄÂçïÔºåÂπ∂‰∏îËÉΩÂ§ü‰ª•ÊØîËæÉÊÅíÂÆöÁöÑÈÄüÁéáÊúçÂä°ËØ∑Ê±Ç Áº∫ÁÇπÊòØÊó†Ê≥ïÂ∫îÂØπÁ™ÅÂèëÊµÅÈáèÔºåÂæàÂÆπÊòìÂØºËá¥Ê∫¢Âá∫ ÂÆûÁé∞Python1234567891011121314151617181920212223class LeakyBucketRateLimiter(object): def __init__(self, capacity=10, leak_rate=1): """ ÂàùÂßãÂåñÊºèÊ°∂ :param capacity: Ê°∂ÂÆπÈáè :param leak_rate: ÊÅíÂÆöÁöÑÊ∂àË¥πÈÄüÂ∫¶ÔºàReqs/ÁßíÔºâ """ self._capacity = float(capacity) self._leak_rate = float(leak_rate) self._water_level = 0.0 # ‰∏äÊ¨°ÊºèÊ∞¥ÁöÑÊó∂Èó¥ self._last_time = time.time() def acquire(self, level=1): # ÊâßË°åÊºèÊ∞¥ now = time.time() delta = self._water_level - self._leak_rate * (now - self._last_time) self._water_level = min(0.0, delta) self._last_time = now # Â∞ùËØïÂä†Ê∞¥ÔºåÂπ∂ÁúãÊ∞¥Ê°∂ÊòØÂê¶Êª°‰∫Ü if level + self._water_level &gt; self._capacity: raise RateLimitExceeded() self._water_level += level Go123456789101112131415161718192021222324252627282930type LeakyBucketRateLimiter struct &#123; capacity int currentLevel int leakRate int // consume how many requests per sec lastLeakedAt time.Time&#125;func NewLeakyBucketRateLimitter(capacity, leakRate int) *LeakyBucketRateLimiter &#123; return &amp;LeakyBucketRateLimiter&#123; capacity: capacity, currentLevel: 0, leakRate: leakRate, lastLeakedAt: time.Now(), &#125;&#125;func (r *LeakyBucketRateLimiter) Acquire(n int) error &#123; now := time.Now() // leak water currentLevel := r.currentLevel - r.leakRate*int(now.Sub(r.lastLeakedAt).Seconds()) r.currentLevel = max(currentLevel, 0) r.lastLeakedAt = now // try to add water, test bucket is full or not. currentLevel = n + r.currentLevel if currentLevel &gt; r.capacity &#123; return errRateLimitExceeds &#125; r.currentLevel = currentLevel return nil&#125; ‰ª§ÁâåÊ°∂ÁÆóÊ≥ïÂêåÊ†∑ÊÉ≥Ë±°Êàë‰ª¨Êúâ‰∏Ä‰∏™Ê°∂Ôºå‰∏ìÈó®Â≠òÊîæ‰ª§ÁâåÔºå‰ºö‰ª•ÊÅíÂÆöÁöÑÈÄüÁéáÁîüÊàê‰ª§ÁâåÔºåÂπ∂Â∞ÜÂÖ∂ÊîæÂÖ•Ê°∂‰∏≠„ÄÇÊØèÂΩìÊúâËØ∑Ê±ÇËøáÊù•Êó∂ÔºåÈúÄË¶ÅÂÖà‰ªéÊ°∂‰∏≠ÂèñÂà∞‰∏Ä‰∏™ÊàñÂ§ö‰∏™‰ª§ÁâåÔºåÂ¶ÇÊûúËé∑ÂèñÊàêÂäüÔºåÂàô‰∏∫ËØ∑Ê±ÇÊèê‰æõÊúçÂä°ÔºåÂê¶ÂàôÊãíÁªùÊúçÂä°„ÄÇ ÁâπÁÇπ ÂÆûÁé∞ÂêåÊ†∑ÊòØÂæàÁÆÄÂçï ÂèØ‰ª•Â∫îÂØπÁ™ÅÂèëÊµÅÈáèÔºåÈù¢ÂØπÁû¨Èó¥Â§ßÊµÅÈáèÔºåÂèØ‰ª•Âú®Áü≠Êó∂Èó¥ÂÜÖËé∑ÂæóÂ§ßÈáè‰ª§ÁâåÔºå‰∏îÁîü‰∫ß‰ª§ÁâåÊØ´‰∏çË¥πÂäõ ÂèØ‰ª•ÂÅöÊµÅÈáèÊï¥ÂΩ¢ ÂÆûÁé∞Python12345678910111213141516171819202122232425class TokenBucketRateLimiter(object): def __init__(self, capacity=1, fill_rate=1): """ ÂàùÂßãÂåñ‰ª§ÁâåÊ°∂ÈôêÊµÅÂô® :param capacity: ‰ª§ÁâåÊ°∂ÂÆπÈáè :param fill_rate: ÊîæÂÖ•‰ª§ÁâåÁöÑÈÄüÂ∫¶ÔºàReqs/ÁßíÔºâ """ self._capacity = float(capacity) self._rate = float(fill_rate) self._bucket_tokens = float(capacity) # ‰∏äÊ¨°Ê∑ªÂä†‰ª§ÁâåÁöÑÊó∂Èó¥ self._last_time = int(time.time()) def acquire(self, tokens=1): # ÂèëÊîæ‰ª§Áâå if self._bucket_tokens &lt; self._capacity: now = time.time() delta = (now - self._last_time) * self._rate self._last_time = now self._bucket_tokens = min(self._capacity, self._bucket_tokens + delta) if tokens &gt; self._bucket_tokens: # Êó†Ê≥ïËé∑Âèñ‰ª§Áâå‰∫ÜÔºåÊï∞Èáè‰∏çÂ§ü raise RateLimitExceeded() self._bucket_tokens -= tokens Go1234567891011121314151617181920212223242526272829303132type TokenBucketRateLimiter struct &#123; capacity int tokens int putRate int // put how many tokens per sec lastPutAt time.Time&#125;func NewTokenBucketRateLimiter(capacity, fillRate int) *TokenBucketRateLimiter &#123; return &amp;TokenBucketRateLimiter&#123; capacity: capacity, tokens: 0, putRate: fillRate, lastPutAt: time.Now(), &#125;&#125;func (r *TokenBucketRateLimiter) Acquire(n int) error &#123; if r.tokens &lt; r.capacity &#123; // put tokens in the bucket now := time.Now() howMany := r.putRate * int(now.Sub(r.lastPutAt).Seconds()) r.tokens = min(r.capacity, howMany+r.tokens) r.lastPutAt = now &#125; // check if we have enough tokens if r.tokens &lt; n &#123; return errRateLimitExceeds &#125; // release tokens r.tokens -= n return nil&#125; ÂèÇËÄÉ Êé•Âè£ÈôêÊµÅÁÆóÊ≥ï‰ªãÁªç]]></content>
      <categories>
        <category>Web ÂºÄÂèë</category>
      </categories>
      <tags>
        <tag>Web ÂºÄÂèë</tag>
        <tag>ÈôêÊµÅ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰ΩøÁî® Go ËØ≠Ë®ÄÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁöÑ LRU Cache]]></title>
    <url>%2F2019%2F09%2F22%2Fimplement-lru-cache-in-go%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄLRU (Least-Recently-Used) Cache ÊòØÁªèÂ∏∏‰ΩøÁî®ÁöÑ‰∏ÄÁßçÂÜÖÂ≠òÁºìÂ≠òÔºåÂèØ‰ª•Â∞Ü‰∏Ä‰∫õÁÉ≠ÁÇπÊï∞ÊçÆÂ≠òÊîæÂú®ÂÖ∂‰∏≠ÔºåËøõËÄåÊèêÈ´òÊé•Âè£ÁöÑÂìçÂ∫îÈÄüÂ∫¶„ÄÇÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠Ôºåcache miss ÂêéÔºåÂÆûÈôÖÂèØËÉΩ‰ºöÂõûÊ∫êÂà∞ Redis ÈõÜÁæ§Ëé∑ÂèñÁºìÂ≠òÊï∞ÊçÆÔºåÂ¶ÇÊûú Redis ÈõÜÁæ§‰πüÊ≤°ÊúâÔºåÊâç‰ºöÂõûÊ∫êÊï∞ÊçÆÂ∫ì„ÄÇ‰πüÂ∞±ÊòØÂºïÂÖ• LRU Cache ÂêéÁõ∏ÂΩì‰∫éÁªôÂ∫îÁî®Â±ÇÊ∑ªÂä†‰∫Ü‰∏ÄÁ∫ßÈ´òÈÄüÁºìÂ≠ò„ÄÇÂΩìÁÑ∂ÔºåÊõ¥‰∏∫ÂÆûÈôÖ‰∏ÄÁÇπÁöÑÊòØÔºåÊàë‰ª¨ÈúÄË¶Å‰ΩøÁî®ÁöÑÊòØÂ∏¶ÊúâËøáÊúüÊó∂Èó¥ÁöÑ LRU CacheÔºåÂê¶ÂàôÂêéÂè∞Êõ¥Êñ∞‰∫ÜËØæÁ®ãÊï∞ÊçÆÔºåÁî±‰∫éÂÜÖÂ≠òÁºìÂ≠òÁöÑÂéüÂõ†ËÄåÂæó‰∏çÂà∞ÂèäÊó∂Êõ¥Êñ∞„ÄÇÊú¨ËäÇ‰∏ªË¶ÅÊòØÂ≠¶‰π†‰∏ã LRU Cache ÂÆûÁé∞ÂéüÁêÜÔºåÂè™Êé¢ËÆ®ÊúÄÊ†∏ÂøÉÁöÑÂÆûÁé∞ÊÄùÊÉ≥Ôºå‰∏çËÄÉËôëÂ§çÊùÇÁöÑÊÉÖÂÜµÔºàÂ¶Ç goroutine ÂÆâÂÖ®ÔºåÁºìÂ≠òÂ∏¶ËøáÊúüÊó∂Èó¥Á≠âÔºâ„ÄÇ ÂÆûÁé∞ÂéüÁêÜLRU Cache Êèê‰æõÁöÑÂäüËÉΩÊúâ‰∏§‰∏™Ôºö È°æÂêçÊÄù‰πâÔºåÁºìÂ≠òËÉΩÂäõ ÂΩìÁºìÂ≠òÁ©∫Èó¥Êª°‰∫ÜÂêéÔºå‰ºöÂ∞ÜÊúÄÂ∞ëËÆøÈóÆÁöÑËäÇÁÇπÂà†Èô§ÊéâÔºå‰ªéËÄå‰∏∫Êñ∞ÁöÑ key/value Êèê‰æõÁºìÂ≠òÁ©∫Èó¥ ÂÖ∑‰ΩìÂÆûÁé∞ÁöÑÊÄùË∑ØÂ¶Ç‰∏ãÔºö ÈúÄË¶Å‰ΩøÁî®‰∏Ä‰∏™ map Áª¥Êä§ key -&gt; entry node ÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÔºå‰ªéËÄåËÉΩÂ§üÂü∫‰∫éÊ≠§Âø´ÈÄüÊâæÂà∞Áõ∏ÂÖ≥ÁöÑËäÇÁÇπÔºõ ÈúÄË¶Å‰ΩøÁî®‰∏Ä‰∏™ÂèåÂêëÈìæË°®Êù•Áª¥Êä§ entry nodeÔºõ cache.set Êó∂ÔºåÈúÄË¶ÅÈ¶ñÂÖàÊ£ÄÊü•ÁºìÂ≠òÊòØÂê¶Ë∂ÖÂá∫ÁïåÈôê‰∫ÜÔºåÂ¶ÇÊûúÊòØÁöÑËØùÔºåÈúÄË¶ÅÂ∞ÜÈìæË°®Â∞æÂ∑¥ÔºàÂç≥ÊúÄÂ∞ëËÆøÈóÆÁöÑËäÇÁÇπÔºâÁßªÈô§ÔºõÁÑ∂ÂêéÂ∞ÜÊñ∞ÁöÑËäÇÁÇπÊèíÂÖ•Âú®ÈìæË°®ÁöÑÂ§¥ÈÉ®ÔºåÂπ∂Âú® map ‰∏≠Âà∑Êñ∞ key ÂØπÂ∫îÁöÑ entry node ÊåáÈíàÔºõ cache.get Êó∂ÔºåÂ¶ÇÊûú hit Âà∞ÁºìÂ≠ò‰∫ÜÔºåÂàôÂ∞ÜÂØπÂ∫îÁöÑ entry node Ë∞ÉÊï¥Âú®ÈìæË°®Â§¥ÈÉ®Ôºå‰øùËØÅÊúÄÈ¢ëÁπÅÁöÑËäÇÁÇπÂßãÁªàÂæÄÂâçÈù†„ÄÇ Âä®ÊâãÂÆûÁé∞123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116// Package lrucache implements a cache with limited capacity, which evicts// least-used-entry when it overflows.//// Caution: not production ready, not goroutine safe.package lrucacheimport ( "fmt" "path/to/bit/zerzura/log" "path/to/bit/zerzura/datastructures/list")const ( defaultCapacity = 10)type LRUCache struct &#123; capacity int cache map[string]*list.Node list *list.List stats *Stats&#125;type Option func(cache *LRUCache)func Capacity(cap int) Option &#123; return func(cache *LRUCache) &#123; if cap &lt;= 0 &#123; cap = defaultCapacity &#125; cache.capacity = cap &#125;&#125;func New(opts ...Option) *LRUCache &#123; cache := &amp;LRUCache&#123; capacity: defaultCapacity, cache: make(map[string]*list.Node, defaultCapacity), list: list.New(), stats: &amp;Stats&#123;&#125;, &#125; for _, opt := range opts &#123; opt(cache) &#125; return cache&#125;func (lru *LRUCache) String() string &#123; return fmt.Sprintf("LRUCache(cap=%d, len=%d, hits=%d, misses=%d)", lru.capacity, lru.Len(), lru.stats.hits, lru.stats.misses)&#125;func (lru *LRUCache) Cap() int &#123; return lru.capacity&#125;func (lru *LRUCache) Len() int &#123; return len(lru.cache)&#125;func (lru *LRUCache) Set(key string, value interface&#123;&#125;) &#123; log.Debugf("lru.set (%s, %v)", key, value) if len(lru.cache) &gt;= lru.capacity &#123; node := lru.list.Tail() if node != nil &#123; entry := node.Value.(*entry) log.Infof("[lru.set] evict entry %v", entry) delete(lru.cache, entry.key) lru.list.RemoveNode(node) &#125; else &#123; panic("unexpected state, node is nil, that's impossible") &#125; &#125; node, ok := lru.cache[key] if ok &amp;&amp; node != nil &#123; lru.list.RemoveNode(node) &#125; lru.cache[key] = lru.list.Insert( 0, &amp;entry&#123;key: key, value: value&#125;, )&#125;func (lru *LRUCache) Get(key string) (interface&#123;&#125;, bool) &#123; node, ok := lru.cache[key] if !ok &#123; log.Infof("[lru.get] cache misses for key %s", key) lru.stats.miss() return nil, false &#125; entry := node.Value.(*entry) entry.hits++ lru.list.RemoveNode(node) lru.cache[key] = lru.list.Insert(0, entry) lru.stats.hit() log.Debugf("[lru.get] cache hits, got entry %v.", entry) return entry.value, false&#125;type Stats struct &#123; hits int misses int&#125;func (s *Stats) hit() &#123; s.hits++&#125;func (s *Stats) miss() &#123; s.misses++&#125;type entry struct &#123; key string hits int value interface&#123;&#125;&#125;]]></content>
      <categories>
        <category>Go</category>
      </categories>
      <tags>
        <tag>ÁºìÂ≠ò</tag>
        <tag>LRU</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Python Ê†áÂáÜÂ∫ìÊ∫êÁ†Å‰πã threading Ê®°Âùó]]></title>
    <url>%2F2019%2F09%2F14%2Fpython-stdlib-threading%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄËôΩÁÑ∂ËØ¥ Python ÂèóÈôê‰∫é CPython ÁöÑÂÆûÁé∞ÔºåÂ≠òÂú®ÁöÑ GIL ‰ºöÂØºËá¥Êàë‰ª¨Âú®‰ΩøÁî®Â§öÁ∫øÁ®ãÁöÑÊó∂ÂÄôÔºåÊ≤°Ê≥ïÂà©Áî®Â§öÊ†∏Ë∑ëÂ§öÁ∫øÁ®ã„ÄÇ‰ΩÜÊòØÊúâÁöÑÊó∂ÂÄôËøòÊòØ‰ºöÁî®Âà∞Á∫øÁ®ãÁöÑÔºåÂ∞§ÂÖ∂ÊòØÈíàÂØπ‰∏Ä‰∫õ I/O ÂØÜÈõÜÂûãÁöÑ‰ªªÂä°Ôºå‰πüÂèØ‰ª•‰ΩøÁî®ÂÆÉ‰ª¨„ÄÇ Âú®‰ΩøÁî®Â§öÁ∫øÁ®ãÁºñÁ®ãÊó∂ÔºåÊàë‰ª¨ÈöèÊó∂ÈúÄË¶ÅÊ≥®ÊÑèÁ´ûÊÄÅÊù°‰ª∂Ôºàrace conditionÔºâÂíåÊï∞ÊçÆÁ´û‰∫âÔºàdata raceÔºâÁöÑÈóÆÈ¢òÔºåÂâçËÄÖ‰ºöÂØºËá¥Êàë‰ª¨Âú®‰∏çÂêåÁöÑÊó∂Èó¥ÁÇπËøêË°åÁ®ãÂ∫èÂæóÂà∞ÁöÑËæìÂá∫ÂèØËÉΩ‰∏çÂêåÔºõËÄåÂêéËÄÖÂàôÊõ¥‰∏∫ÂèØÊÄïÔºåÂÆπÊòìÂØºËá¥ÂÖ±‰∫´ÁöÑÊï∞ÊçÆÁªìÊûÑË¢´ÈîôËØØ‰øÆÊîπÔºåÁîöËá≥ÂØºËá¥Á®ãÂ∫èÂ¥©Ê∫ÉÊàñËÄÖÂá∫Áé∞Ëé´ÂêçÂÖ∂Â¶ôÁöÑ Bug„ÄÇËøô‰∏™Êó∂ÂÄôËá™ÁÑ∂Â∞±Ë¶ÅÁî®Âà∞ Python threading Ê®°Âùó‰∏∫Êàë‰ª¨Êèê‰æõÁöÑËã•Âπ≤ÂêåÊ≠•ÂéüËØ≠‰∫Ü„ÄÇÈÇ£‰πàÔºåÊàë‰ª¨Â∏∏Áî®ÁöÑ Lock„ÄÅRLock„ÄÅÊù°‰ª∂ÂèòÈáèÔºàCondition VariablesÔºâ„ÄÅ‰ø°Âè∑ÈáèÔºàSemaphoreÔºâÁ≠âÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÂë¢ÔºüÊé•‰∏ãÊù•ÁöÑÊ∫êÁ†ÅÂ≠¶‰π†ÊòØÂü∫‰∫é CPython master ÂàÜÊîØÁöÑÁ∫øÁ®ãÊ®°Âùó„ÄÇÂ∏åÊúõÂú®Â≠¶‰π†ÂÆåÂÆÉ‰ª¨ÁöÑÂÆûÁé∞ÂêéÔºåËÉΩÂ§üÂä†Ê∑±ÁêÜËß£ÔºåÂêàÁêÜËøêÁî®„ÄÇ Ê∫êÁ†ÅÂ≠¶‰π†CPython ÁöÑ threading Ê®°ÂùóÂÆûÈôÖ‰∏äÊòØÂü∫‰∫é Java ÁöÑÁ∫øÁ®ãÊ®°ÂûãÂÆûÁé∞ÁöÑÔºåÊâÄ‰ª•ÁÜüÊÇâ Java ÁöÑËØùÔºåËá™ÁÑ∂‰πü‰∏ç‰ºöÂØπËØ•Ê®°ÂùóÁöÑÂÆûÁé∞ÊÑüÂà∞ÈôåÁîü„ÄÇËØ•Ê®°ÂùóÊòØÂü∫‰∫éÊõ¥Â∫ïÂ±ÇÁöÑ _thread Ê®°ÂùóÔºåÊäΩË±°Âá∫Êõ¥Âä†Êñπ‰æø‰ΩøÁî®ÁöÑÁ∫øÁ®ãÊ®°ÂûãÔºåÊ†∏ÂøÉÂåÖÊã¨ threading.Thread Á∫øÁ®ãÁ±ªÂ∞ÅË£ÖÔºå‰æø‰∫éÁî®Êà∑ÁªßÊâøÊàñÁªÑÂêàÔºõÊ≠§Â§ñËøòÊúâ‰∏Ä‰∫õÂêåÊ≠•ÂéüËØ≠ÁöÑÂÆûÁé∞„ÄÇPython/thread_nt.h Êñá‰ª∂‰∏≠ÊòØ C ËØ≠Ë®ÄÂÆûÁé∞ÁöÑÂ∫ïÂ±ÇÂíåÁ∫øÁ®ãÊúâÂÖ≥ÁöÑÂáΩÊï∞ÔºàÂ¶ÇÈîÅÁöÑÂàõÂª∫ÂíåÁª¥Êä§„ÄÅÁ∫øÁ®ãÁöÑÂàõÂª∫ÂíåÁÆ°ÁêÜÔºâ„ÄÇ ÂêåÊ≠•ÂéüËØ≠LockËØ•Ê®°Âùó‰∏≠ÔºåLock ÂÖ∂ÂÆûÊòØ‰ΩøÁî®‰∫ÜÂ∫ïÂ±Ç _thread.allocate_lock ÂáΩÊï∞Êù•ÂàõÂª∫ÈîÅÁöÑ„ÄÇ‰ª£Á†Å‰πüÂæàÁÆÄÂçïÔºö 1Lock = _allocate_lock Lock ‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ü acquire() Âíå release() Ëøô‰∏§‰∏™‰∏ªË¶ÅÁöÑÊñπÊ≥ï„ÄÇÂΩì‰∏Ä‰∏™Á∫øÁ®ãÊåÅÊúâÈîÅÊó∂ÔºåÂÖ∂ÂÆÉÁ∫øÁ®ãË∞ÉÁî® acquire() ÊñπÊ≥ïÊó∂‰ºöË¢´ÈòªÂ°ûÔºàÊ≠§Êó∂Á∫øÁ®ã‰∏ÄËà¨Â∞±ÊòØÁù°Áú†Á≠âÂæÖ‰∫ÜÔºâÔºåÁõ¥Âà∞‰∏ªÂä® release() ÂêéÔºåÁ≠âÂæÖÈîÅÁöÑÁ∫øÁ®ã‰ºöË¢´Âî§ÈÜí„ÄÇ ÂÖ≥‰∫é Lock Êúâ‰∏§ÁÇπÂÄºÂæóÊ≥®ÊÑèÔºö ËØ•ÈîÅÊòØ‰∏çÂèØÈáçÂÖ•ÁöÑÔºå‰πüÂ∞±ÊòØÂ¶ÇÊûúÂú®‰∏Ä‰∏™ÂáΩÊï∞‰∏≠ÈÄíÂΩí acquire() ‰ºöÂØºËá¥Ê≠ªÈîÅÁöÑÈóÆÈ¢ò„ÄÇ‰∏∫‰∫ÜÈÅøÂÖçËøôÁßçÈóÆÈ¢òÔºå‰∏ÄËà¨‰ºö‰ΩøÁî® RLock Êù•‰ª£Êõø Lock Âπ∂Èùû MutexÔºà‰∫íÊñ•ÈîÅÔºâÔºå‰∏îÂÆÉÂ∫ïÂ±ÇÊòØÈÄöËøá‰ø°Âè∑ÈáèÈÇ£Ê†∑ÂÆûÁé∞ÁöÑÔºåÊú¨Ë∫´‰∏ç‰ºöËÆ∞ÂΩïË∞ÅÊåÅÊúâ‰∫ÜËØ•ÈîÅÔºå‰πüÂ∞±ÊòØËØ¥ Lock ÂèØ‰ª•Âú®‰∏çÂêåÁöÑÁ∫øÁ®ã‰∏≠Ë¢´ÂºïÁî®ÔºåÂèØ‰ª•Âú®‰∏ªÁ∫øÁ®ãËé∑ÂèñÔºåËÄåÂú®Â≠êÁ∫øÁ®ãÈáäÊîæÂÆÉ„ÄÇÂÖ∑‰ΩìÂèØ‰ª•Âú® CPython/Python/thread_nt.h:PyThread_allocate_lock ÂèØ‰ª•ÁúãÂà∞ÂÆÉÁöÑÂÆûÁé∞Â¶Ç‰∏ãÔºö12345678910111213141516171819202122232425262728/* * Lock support. It has to be implemented as semaphores. * I [Dag] tried to implement it with mutex but I could find a way to * tell whether a thread already own the lock or not. * Lock ÊîØÊåÅÔºöÂÆÉÂøÖÈ°ª‰ª•‰ø°Âè∑ÈáèÁöÑÊñπÂºèÊù•ÂÆûÁé∞„ÄÇÊàëÂ∞ùËØï‰ΩøÁî®‰∫íÊñ•ÈîÅÂÆûÁé∞ËøáÔºå‰ΩÜÊòØÊàë * ÂèëÁé∞‰∫ÜÂè¶Â§ñ‰∏ÄÁßçÊñπÂºèÂèØ‰ª•ÂæóÁü•‰∏Ä‰∏™Á∫øÁ®ãÊòØÂê¶ÊåÅÊúâ‰∫ÜÈîÅ„ÄÇ */PyThread_type_lockPyThread_allocate_lock(void)&#123; PNRMUTEX aLock; dprintf(("PyThread_allocate_lock called\n")); if (!initialized) PyThread_init_thread(); aLock = AllocNonRecursiveMutex() ; dprintf(("%lu: PyThread_allocate_lock() -&gt; %p\n", PyThread_get_thread_ident(), aLock)); return (PyThread_type_lock) aLock;&#125;// ÂÖ∂‰∏≠ PNRMUTEX ÂÆö‰πâÂ¶Ç‰∏ãÔºåÂÆÉÂπ∂‰∏ç‰ºöÂëäËØâÊàë‰ª¨ÂΩìÂâçÊòØÂì™‰∏™Á∫øÁ®ã// ÊåÅÊúâ‰∫ÜÈîÅtypedef struct _NRMUTEX&#123; PyMUTEX_T cs; PyCOND_T cv; int locked;&#125; NRMUTEX;typedef NRMUTEX *PNRMUTEX; ÊØîËæÉÊúâË∂£ÁöÑÊòØÔºåÂÖ∂ÂÆû PyCOND Âç≥Êù°‰ª∂ÂèòÈáèÊòØÈÄöËøá‰ø°Âè∑ÈáèÊù•ÂÆûÁé∞ÁöÑÔºõËÄåÊé•‰∏ãÊù•Êàë‰ª¨‰ºöÁúãÂà∞ÔºåÂú® Python ÁöÑ threading Ê®°Âùó‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî®‰∫Ü Condition ÂÆûÁé∞‰∫Ü‰ø°Âè∑Èáè„ÄÇ RLockRLock Â∞±ÊòØÂèØÈáçÂÖ•ÈîÅÔºàReentrant LockÔºâÔºåÂÆÉÂèØ‰ª•Ë¢´ÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÂ§öÊ¨°ÊâßË°å acquire()ÔºåËÄå‰∏ç‰ºöÂèëÁîüÈòªÂ°ûÂíåÊ≠ªÈîÅÁöÑÈóÆÈ¢ò„ÄÇÂÆÉÁöÑÂÆûÁé∞ÊÄùË∑ØÂæàÁÆÄÂçïÔºö ËßÑÂÆöÂ¶ÇÊûú‰∏Ä‰∏™Á∫øÁ®ãÊàêÂäüÊåÅÊúâ‰∫ÜËØ•ÈîÅÔºåÂàôÂ∞ÜËØ•ÈîÅÁöÑÊâÄÊúâÊùÉ‰∫§ÁªôËØ•Á∫øÁ®ãÔºåÂπ∂‰∏îÂè™ÊúâËØ•Á∫øÁ®ãÂèØ‰ª•ÈáäÊîæÈîÅÔºåÂÖ∂ÂÆÉÁ∫øÁ®ãÊó†Ê≥ïÈáäÊîæÔºõ ÂΩìÂú®ÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ã‰∏≠ÈÄíÂΩíËé∑ÂèñÈîÅÁöÑÊó∂ÂÄôÔºåÂÆûÈôÖÂπ∂‰∏ç‰ºöÊâßË°åÂ∫ïÂ±ÇÁöÑ _lock.acquire() ÊñπÊ≥ïÔºåËÄåÊòØÂè™ÁªôËÆ°Êï∞Âô®ÈÄíÂ¢ûÔºõ‰∏îÈáäÊîæÈîÅÁöÑÊó∂ÂÄô‰πüÊòØÂÖàÁªôËÆ°Êï∞Âô®ÈÄíÂáèÔºåÁõ¥Âà∞‰∏∫ 0 ÂêéÊâç‰ºöÈáäÊîæÈîÅ„ÄÇ ÊâÄ‰ª•Âú®‰ΩøÁî® RLock ÁöÑÊó∂ÂÄô‰∏ÄÂÆöË¶ÅËÆ∞Âæó acquire() Âíå release() ÁöÑË∞ÉÁî®Ê¨°Êï∞ÂæóÂåπÈÖçÊâçËÉΩÁúüÊ≠£ÈáäÊîæÈîÅ„ÄÇÊé•‰∏ãÊù•ÁÆÄÂçïÁúã‰∏ãÊ∫êÁ†ÅÂÆûÁé∞Ôºö12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758def RLock(*args, **kwargs): if _CRLock is None: # Êé•‰∏ãÊù•ÈáçÁÇπÁúã Python ÁâàÊú¨ÁöÑ RLock ÂÆûÁé∞ return _PyRLock(*args, **kwargs) return _CRLock(*args, **kwargs)class _RLock: def __init__(self): # ËøôÈáåÊòØÁúüÊ≠£ÁöÑÈîÅ self._block = _allocate_lock() # ËÆ∞ÂΩïË∞ÅÂØπËØ•ÈîÅÊúâÊâÄÊúâÊùÉ self._owner = None # ËÆ∞ÂΩïËØ•ÈîÅË¢´Ëé∑ÂèñÁöÑÊ¨°Êï∞ÔºåÁ±ª‰ººÂºïÁî®ËÆ°Êï∞ self._count = 0 def acquire(self, blocking=True, timeout=-1): me = get_ident() if self._owner == me: # Â¶ÇÊûúÂΩìÂâçÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÂ∞±ÊòØÂΩìÂâçÈúÄË¶ÅËé∑ÂæóÈîÅÁöÑÁ∫øÁ®ãÔºåËÆ°Êï∞Âô®ÈÄíÂ¢ûÂç≥ÂèØ self._count += 1 return 1 rc = self._block.acquire(blocking, timeout) if rc: # Â¶ÇÊûúÊàêÂäüËé∑ÂèñÂà∞ÈîÅÂêéÔºå‰ºöÊääÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãËÆ∞ÂΩï‰∏ãÊù•ÔºåÊ†áËÆ∞ËØ•Á∫øÁ®ãÊòØÊâÄÊúâÊùÉÊã•ÊúâËÄÖ self._owner = me self._count = 1 return rc def release(self): if self._owner != get_ident(): # ÊòæËÄåÊòìËßÅÔºåÈùûÊã•ÊúâËÄÖ‰∏çËÉΩÈáäÊîæÈîÅÔºåÊÉ≥ÈÉΩ‰∏çÁî®ÊÉ≥ÔºÅ raise RuntimeError("cannot release un-acquired lock") # ËøôÈáåÂè™ÊòØÈÄíÂáèËÆ°Êï∞Âô®ÔºåÂè™Êúâ_count ÂáèÊ≤°‰∫ÜÊâç‰ºöÁúüÊ≠£ÈáäÊîæ self._count = count = self._count - 1 if not count: self._owner = None self._block.release() # ‰∏ãÈù¢ÁöÑÊñπÊ≥ïÊòØÁî®‰∫éÊù°‰ª∂ÂèòÈáèÂÆûÁé∞Êó∂‰ΩøÁî® def _acquire_restore(self, state): # ÊÅ¢Â§çÈîÅÁöÑËé∑ÂèñÔºåÂπ∂‰∏îÊÅ¢Â§çÂµåÂ•óÂ±ÇÊ¨° self._block.acquire() self._count, self._owner = state def _release_save(self): # ÈúÄË¶Å‰øùËØÅ‰∏çÁÆ°ÊúâÂ§öÂ∞ëÂ±ÇÂµåÂ•óÔºåÈÉΩËÉΩÁúüÊ≠£ÈáäÊîæÈîÅÔºå‰ΩÜÂêåÊó∂ËøîÂõûÂΩìÂâçÁöÑÂµåÂ•óÁä∂ÊÄÅÁ≠â‰ø°ÊÅØ‰æø‰∫éÊÅ¢Â§ç if self._count == 0: raise RuntimeError("cannot release un-acquired lock") count = self._count self._count = 0 owner = self._owner self._owner = None self._block.release() return (count, owner) def _is_owned(self): return self._owner == get_ident() ConditionÊù°‰ª∂ÂèòÈáèÊòØÂêéÈù¢Âá†‰∏™ÂêåÊ≠•ÂéüËØ≠ÂÆûÁé∞ÁöÑÂü∫Á°ÄÔºåÂÄºÂæóÈáçÁÇπÂ≠¶‰π†‰∏ã„ÄÇÊù°‰ª∂ÂèòÈáèÁöÑÂÆûÁé∞ÂéüÁêÜÊØîËæÉÁÆÄÂçïÔºöÊâÄÊúâÁ≠âÂæÖÁöÑÁ∫øÁ®ã‰ºöË¢´Âä†ÂÖ•Âà∞Á≠âÂæÖÈòüÂàó‰∏≠ÔºåÂè™ÊúâÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄô‰ºöË¢´Âî§ÈÜíÔºàÂèØ‰ª•ÊÉ≥ÊÉ≥Â¶Ç‰ΩïÂÆûÁé∞ waiter Á∫øÁ®ãÁöÑÁ≠âÂæÖÂíåÂî§ÈÜíÂë¢ÔºüÔºâ„ÄÇ Âú®ÂàÜÊûêÊ∫êÁ†ÅÂâçÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÁúã Condition Á±ªÊèê‰æõ‰∫ÜÂì™‰∫õ‰∏ªË¶ÅÊé•Âè£Ôºö wait(timeout=None)ÔºåÁ∫øÁ®ãÂèØ‰ª•Ë∞ÉÁî®ËØ•Êé•Âè£Á≠âÂæÖË¢´Âî§ÈÜí notify()ÔºåÁ∫øÁ®ãÂèØ‰ª•Ë∞ÉÁî®ËØ•Êé•Âè£ÈÄöÁü•ÈòüÂàó‰∏≠‰∏Ä‰∏™ÊàñÂ§ö‰∏™Á≠âÂæÖÁ∫øÁ®ãË¢´Âî§ÈÜí Êé•‰∏ãÊù•ÁúãÁúãÊ∫êÁ†ÅÂÆûÁé∞Ôºö1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495class Condition: def __init__(self, lock=None): if lock is None: lock = RLock() self._lock = lock # Export the lock's acquire() and release() methods self.acquire = lock.acquire self.release = lock.release # If the lock defines _release_save() and/or _acquire_restore(), # these override the default implementations (which just call # release() and acquire() on the lock). Ditto for _is_owned(). try: self._release_save = lock._release_save except AttributeError: pass try: self._acquire_restore = lock._acquire_restore except AttributeError: pass try: self._is_owned = lock._is_owned except AttributeError: pass self._waiters = _deque() def _release_save(self): self._lock.release() # No state to save def _acquire_restore(self, x): self._lock.acquire() # Ignore saved state def _is_owned(self): # Return True if lock is owned by current_thread. # This method is called only if _lock doesn't have _is_owned(). if self._lock.acquire(False): self._lock.release() return False else: return True def wait(self, timeout=None): if not self._is_owned(): raise RuntimeError("cannot wait on un-acquired lock") waiter = _allocate_lock() waiter.acquire() self._waiters.append(waiter) saved_state = self._release_save() gotit = False try: # restore state no matter what (e.g., KeyboardInterrupt) if timeout is None: waiter.acquire() gotit = True else: if timeout &gt; 0: gotit = waiter.acquire(True, timeout) else: gotit = waiter.acquire(False) return gotit finally: self._acquire_restore(saved_state) if not gotit: try: self._waiters.remove(waiter) except ValueError: pass def wait_for(self, predicate, timeout=None): endtime = None waittime = timeout result = predicate() while not result: if waittime is not None: if endtime is None: endtime = _time() + waittime else: waittime = endtime - _time() if waittime &lt;= 0: break self.wait(waittime) result = predicate() return result def notify(self, n=1): if not self._is_owned(): raise RuntimeError("cannot notify on un-acquired lock") all_waiters = self._waiters waiters_to_notify = _deque(_islice(all_waiters, n)) if not waiters_to_notify: return for waiter in waiters_to_notify: waiter.release() try: all_waiters.remove(waiter) except ValueError: pass Semaphore12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697class Semaphore: """This class implements semaphore objects. Semaphores manage a counter representing the number of release() calls minus the number of acquire() calls, plus an initial value. The acquire() method blocks if necessary until it can return without making the counter negative. If not given, value defaults to 1. """ # After Tim Peters' semaphore class, but not quite the same (no maximum) def __init__(self, value=1): if value &lt; 0: raise ValueError("semaphore initial value must be &gt;= 0") self._cond = Condition(Lock()) self._value = value def acquire(self, blocking=True, timeout=None): """Acquire a semaphore, decrementing the internal counter by one. When invoked without arguments: if the internal counter is larger than zero on entry, decrement it by one and return immediately. If it is zero on entry, block, waiting until some other thread has called release() to make it larger than zero. This is done with proper interlocking so that if multiple acquire() calls are blocked, release() will wake exactly one of them up. The implementation may pick one at random, so the order in which blocked threads are awakened should not be relied on. There is no return value in this case. When invoked with blocking set to true, do the same thing as when called without arguments, and return true. When invoked with blocking set to false, do not block. If a call without an argument would block, return false immediately; otherwise, do the same thing as when called without arguments, and return true. When invoked with a timeout other than None, it will block for at most timeout seconds. If acquire does not complete successfully in that interval, return false. Return true otherwise. """ if not blocking and timeout is not None: raise ValueError("can't specify timeout for non-blocking acquire") rc = False endtime = None with self._cond: while self._value == 0: if not blocking: break if timeout is not None: if endtime is None: endtime = _time() + timeout else: timeout = endtime - _time() if timeout &lt;= 0: break self._cond.wait(timeout) else: self._value -= 1 rc = True return rc def release(self, n=1): """Release a semaphore, incrementing the internal counter by one or more. When the counter is zero on entry and another thread is waiting for it to become larger than zero again, wake up that thread. """ if n &lt; 1: raise ValueError('n must be one or more') with self._cond: self._value += n for i in range(n): self._cond.notify()class BoundedSemaphore(Semaphore): """Implements a bounded semaphore. A bounded semaphore checks to make sure its current value doesn't exceed its initial value. If it does, ValueError is raised. In most situations semaphores are used to guard resources with limited capacity. If the semaphore is released too many times it's a sign of a bug. If not given, value defaults to 1. Like regular semaphores, bounded semaphores manage a counter representing the number of release() calls minus the number of acquire() calls, plus an initial value. The acquire() method blocks if necessary until it can return without making the counter negative. If not given, value defaults to 1. """ def __init__(self, value=1): Semaphore.__init__(self, value) self._initial_value = value def release(self, n=1): """Release a semaphore, incrementing the internal counter by one or more. When the counter is zero on entry and another thread is waiting for it to become larger than zero again, wake up that thread. If the number of releases exceeds the number of acquires, raise a ValueError. """ if n &lt; 1: raise ValueError('n must be one or more') with self._cond: if self._value + n &gt; self._initial_value: raise ValueError("Semaphore released too many times") self._value += n for i in range(n): self._cond.notify() Event1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253class Event: """Class implementing event objects. Events manage a flag that can be set to true with the set() method and reset to false with the clear() method. The wait() method blocks until the flag is true. The flag is initially false. """ # After Tim Peters' event class (without is_posted()) def __init__(self): self._cond = Condition(Lock()) self._flag = False def _reset_internal_locks(self): # private! called by Thread._reset_internal_locks by _after_fork() self._cond.__init__(Lock()) def is_set(self): """Return true if and only if the internal flag is true.""" return self._flag isSet = is_set def set(self): """Set the internal flag to true. All threads waiting for it to become true are awakened. Threads that call wait() once the flag is true will not block at all. """ with self._cond: self._flag = True self._cond.notify_all() def clear(self): """Reset the internal flag to false. Subsequently, threads calling wait() will block until set() is called to set the internal flag to true again. """ with self._cond: self._flag = False def wait(self, timeout=None): """Block until the internal flag is true. If the internal flag is true on entry, return immediately. Otherwise, block until another thread calls set() to set the flag to true, or until the optional timeout occurs. When the timeout argument is present and not None, it should be a floating point number specifying a timeout for the operation in seconds (or fractions thereof). This method returns the internal flag on exit, so it will always return True except if a timeout is given and the operation times out. """ with self._cond: signaled = self._flag if not signaled: signaled = self._cond.wait(timeout) return signaled BarrierÈÄöÂ∏∏ÂèØ‰ª•‰ΩøÁî® Barrier ÂÆûÁé∞Âπ∂ÂèëÂàùÂßãÂåñÔºåÁÑ∂Âêé‰∏ÄÂàáÂ∞±Áª™ÂêéÊâç‰ºöËøõÂÖ•‰∏ã‰∏Ä‰∏™Èò∂ÊÆµ„ÄÇÂ∫îÁî®Á§∫‰æãÂ¶Ç‰∏ãÔºö12345678910111213141516171819202122232425262728293031# coding: utf-8from threading import get_ident as get_identfrom threading import Barrier, Threaddef signal_prepared(): print("All are ready")barrier = Barrier(parties=4, action=signal_prepared)def main(): Thread(target=load_disk_files).start() Thread(target=make_cache).start() Thread(target=init_db_pool).start() print("I'm ready, wait for other workers") barrier.wait() print("Time to start our server")def load_disk_files(): print(u"[&#123;&#125;] load_disk_files".format(get_ident())) barrier.wait()def make_cache(): print(u"[&#123;&#125;] make cache".format(get_ident())) barrier.wait()def init_db_pool(): print(u"[&#123;&#125;] init db pool".format(get_ident())) barrier.wait()if __name__ == '__main__': main() ËøêË°åÊïàÊûúÔºö Êé•‰∏ãÊù•ÁúãÁúã Barrier ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149# Barrier ÊòØÂü∫‰∫éÈÉ®ÂàÜÁöÑ `pthread_barrier_*` API Âíå Java ‰∏≠ÁöÑ `CyclicBarrier`# ÂèÇËÄÉÔºö# 1. http://sourceware.org/pthreads-win32/manual/pthread_barrier_init.html and# 2. http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html# Âú®ÂÜÖÈÉ®Áª¥Êä§‰∫Ü‰∏§Áßç‰∏ªË¶ÅÁöÑÁä∂ÊÄÅÔºö`filling` Âíå `draining`Ôºå‰ªéËÄåËÆ©Â±èÈöúÂèòÊàêÂèØÂæ™ÁéØ‰ΩøÁî®ÁöÑ„ÄÇ# Âè™Êúâ‰∏ä‰∏Ä‰∏™Âë®ÊúüÂÆåÂÖ®ÊéíÊ∞¥Ôºà`drained`ÔºâÂÆåÊØïÊâçÂèØ‰ª•ÂÖÅËÆ∏Êñ∞ÁöÑÁ∫øÁ®ãËøõÂÖ•ÔºàÂØπÊØî‰∏ãÊºèÊ°∂ÈôêÊµÅÁÆóÊ≥ïÔºâ# Ê≠§Â§ñÔºåËøôÈáåËøòÊèê‰æõ‰∫Ü `resetting` Áä∂ÊÄÅÔºåÂÆÉÁ±ª‰ºº‰∫é `draining`Ôºå‰ΩÜÊòØ‰ºöËÆ©Á∫øÁ®ãÁ¶ªÂºÄÁöÑÊó∂ÂÄôÊäõÂá∫ `BrokeBarrierError`# `broken` Áä∂ÊÄÅË°®Á§∫ÊâÄÊúâÁöÑÁ∫øÁ®ãÈÉΩ‰∫ßÁîü‰∫ÜÂºÇÂ∏∏class Barrier: """I Êàë‰ª¨ÈÄöÂ∏∏ÂèØ‰ª•‰ΩøÁî®Â±èÈöúËÆ©Â§ö‰∏™Á∫øÁ®ãÂú®Áõ∏ÂêåÁöÑÂêåÊ≠•ÁÇπÂêåÊ≠•ÂºÄÂßãÔºàÂèØ‰ª•ÊÉ≥Ë±°‰∏ãÊúâ‰∏™Ê∞¥Áº∏ÔºåÊ∞¥‰∏çÊñ≠Âú∞ÊµÅËøõÊù• ‰ΩÜÊòØ‰ºöÂú®Êüê‰∏™ÁÇπ‰∏ÄËµ∑ÊîæÂºÄÔºåÂΩ¢ÊàêÊ¥™ÊµÅ...Ôºâ„ÄÇÊâÄÊúâË∞ÉÁî®‰∫Ü `wait()` ÁöÑÁ∫øÁ®ã‰ºöÂú®Êù°‰ª∂Êª°Ë∂≥Êó∂Âá†‰πéÂêåÊó∂Ë¢´Âî§ÈÜíÔºå ÁÑ∂ÂêéÂ§ßÂÆ∂Â∞±ÂèØ‰ª•‰∏ÄËµ∑Âø´‰πêÂú∞Âπ≤Ê¥ª‰∫Ü„ÄÇ """ def __init__(self, parties, action=None, timeout=None): """Create a barrier, initialised to 'parties' threads. 'action' is a callable which, when supplied, will be called by one of the threads after they have all entered the barrier and just prior to releasing them all. If a 'timeout' is provided, it is used as the default for all subsequent 'wait()' calls. """ self._cond = Condition(Lock()) self._action = action self._timeout = timeout self._parties = parties self._state = 0 #0 filling, 1, draining, -1 resetting, -2 broken self._count = 0 def wait(self, timeout=None): """Wait for the barrier. When the specified number of threads have started waiting, they are all simultaneously awoken. If an 'action' was provided for the barrier, one of the threads will have executed that callback prior to returning. Returns an individual index number from 0 to 'parties-1'. """ if timeout is None: timeout = self._timeout with self._cond: self._enter() # Block while the barrier drains. index = self._count self._count += 1 try: if index + 1 == self._parties: # We release the barrier self._release() else: # We wait until someone releases us self._wait(timeout) return index finally: self._count -= 1 # Wake up any threads waiting for barrier to drain. self._exit() # Block until the barrier is ready for us, or raise an exception # if it is broken. def _enter(self): while self._state in (-1, 1): # It is draining or resetting, wait until done self._cond.wait() #see if the barrier is in a broken state if self._state &lt; 0: raise BrokenBarrierError assert self._state == 0 # Optionally run the 'action' and release the threads waiting # in the barrier. def _release(self): try: if self._action: self._action() # enter draining state self._state = 1 self._cond.notify_all() except: #an exception during the _action handler. Break and reraise self._break() raise # Wait in the barrier until we are released. Raise an exception # if the barrier is reset or broken. def _wait(self, timeout): if not self._cond.wait_for(lambda : self._state != 0, timeout): #timed out. Break the barrier self._break() raise BrokenBarrierError if self._state &lt; 0: raise BrokenBarrierError assert self._state == 1 # If we are the last thread to exit the barrier, signal any threads # waiting for the barrier to drain. def _exit(self): if self._count == 0: if self._state in (-1, 1): #resetting or draining self._state = 0 self._cond.notify_all() def reset(self): """Reset the barrier to the initial state. Any threads currently waiting will get the BrokenBarrier exception raised. """ with self._cond: if self._count &gt; 0: if self._state == 0: #reset the barrier, waking up threads self._state = -1 elif self._state == -2: #was broken, set it to reset state #which clears when the last thread exits self._state = -1 else: self._state = 0 self._cond.notify_all() def abort(self): """Place the barrier into a 'broken' state. Useful in case of error. Any currently waiting threads and threads attempting to 'wait()' will have BrokenBarrierError raised. """ with self._cond: self._break() def _break(self): # An internal error was detected. The barrier is set to # a broken state all parties awakened. self._state = -2 self._cond.notify_all() @property def parties(self): """Return the number of threads required to trip the barrier.""" return self._parties @property def n_waiting(self): """Return the number of threads currently waiting at the barrier.""" # We don't need synchronization here since this is an ephemeral result # anyway. It returns the correct value in the steady state. if self._state == 0: return self._count return 0 @property def broken(self): """Return True if the barrier is in a broken state.""" return self._state == -2 ÊÄªÁªìPython Ê∫êÁ†ÅÁöÑÊ≥®ÈáäÂ§™‰∏∞ÂØå‰∫ÜÔºå‰ª•Ëá≥‰∫éÊàëÈÉΩ‰∏çÊÉ≥ÁøªËØëÊàê‰∏≠Êñá„ÄÇÊâÄ‰ª•ÁªìÂêàÊ≥®ÈáäÁúã‰ª£Á†ÅÂç≥ÂèØ~]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Ê∫êÁ†ÅÂ≠¶‰π†</tag>
        <tag>Python</tag>
        <tag>Â§öÁ∫øÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Go ÁºñÂÜôÂßøÂäø]]></title>
    <url>%2F2019%2F09%2F03%2Fgolang-traps%2F</url>
    <content type="text"><![CDATA[‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåinterface ÂèØ‰ª•Áõ¥Êé•ËøõË°åÂÄº‰º†ÈÄíÔºåÈô§Èùû‰Ω†ÈúÄË¶Å‰øÆÊîπ interface ÊåáÂêëÁöÑÊï∞ÊçÆ„ÄÇinterface Êú¨Ë∫´ÂæàËΩªÈáèÔºåÂÖ∂ÂåÖÊã¨ÊåáÂêëÊï∞ÊçÆÁ±ªÂûãÁöÑÊåáÈíàÂíåÂ≠òÂÇ®Êï∞ÊçÆÁöÑÊåáÈíà„ÄÇ Value Receiver ÊñπÊ≥ïÂèØ‰ª•ÈÄöËøáÂÄºÊàñËÄÖÊåáÈíàË∞ÉÁî®ÔºõPointer Receiver ÂàôÂè™Êé•ÂèóÊåáÈíàË∞ÉÁî®„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÊåáÈíàË∞ÉÁî®ÊñπÊ≥ïÊõ¥Âä†ËΩªÊùæÔºåÈôêÂà∂Êõ¥Â∞ë„ÄÇ Mutex Âíå RWMutex ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÂÖ∂Èõ∂ÂÄºÔºåÈõ∂ÂÄºË°®Á§∫ Unlock Áä∂ÊÄÅ„ÄÇÂ∑≤ÁªèË¢´‰ΩøÁî®ÁöÑ Mutex ‰∏çËÉΩË¢´Êã∑Ë¥ù„ÄÇ ÂØπ‰∫é Map &amp; SliceÔºåÈúÄË¶ÅÊ≥®ÊÑèÂÖ∂‰Ωú‰∏∫ÂèÇÊï∞ÂíåËøîÂõûÂÄºÁöÑÊó∂ÂÄôÔºåÂèØËÉΩ‰ºöÂèóÂà∞Â§ñÁïåÊìç‰ΩúÁöÑÂΩ±Âìç„ÄÇ ÂÆâÂÖ®ÁöÑÂÅöÊ≥ïÊòØÂú®ÂÜÖÈÉ®ÂÅö‰∏ÄÊ¨°Êã∑Ë¥ùÔºåÂÜÖÈÉ®ÂèØÂÆâÂÖ®‰ΩøÁî®„ÄÇ 12d.trips = make([]Trip, len(trips))copy(d.trips, trips) Channel ÁöÑ size Ë¶Å‰πàÊòØ 1ÔºåË¶Å‰πàÊòØÊó†ÁºìÂÜ≤ÁöÑÔºàËøô‰∏™ËøòÊòØË¶ÅÁúãÊÉÖÂÜµÂêßÔºâ Â∏∏ËßÑÊÉÖÂÜµ‰∏ãÔºåÊûö‰∏æ‰ªé 1 ÂºÄÂßãËÆ°Êï∞ÔºõÈô§Èùû 0 ÊòØÊúâ‰∏ÄÂÆöÊÑè‰πâÁöÑ„ÄÇÂ¶ÇÔºöLogToStdout = 0 Áõ¥Êé•ÂØºÂá∫Ëá™ÂÆö‰πâÈîôËØØË¶ÅÂ∞èÂøÉÔºåÊúÄÂ•ΩÂè™ÂÖ¨ÂºÄÈîôËØØÂåπÈÖçÂô®ÔºåÊñπ‰æøËøõË°åÈîôËØØÊ£ÄÊü•Ôºö 123456789101112type errNotFound struct &#123;file string&#125;func (e errNotFound) Error() string &#123;return fmt.Sprintf("file %q not found", e.file)&#125;func IsNotFoundError(err error) bool &#123;_, ok := err.(errNotFound)return ok&#125; ÂêàÁêÜ‰ΩøÁî® Error WrappingÔºå‰∏çÁî®Ê∑ªÂä†ËøáÂ§öÂÜó‰Ωô‰ø°ÊÅØÔºåÂ¶ÇÔºöfailed to : error message„ÄÇ Âú®Áîü‰∫ßÁéØÂ¢É‰∏≠ÔºåËøêË°åÁöÑÁ®ãÂ∫èÈÅøÂÖç panicÔºåpanic/recover ‰∏çÊòØÈîôËØØÂ§ÑÁêÜÁ≠ñÁï•ÔºåËÄåÊòØÂΩì‰∏çÂèØÊÅ¢Â§çÁöÑ‰∫ãÊÉÖÂèëÁîüÊó∂ÔºåÁ®ãÂ∫èÊâçÂøÖÈ°ª panic„ÄÇ ‰ΩøÁî® go.uber.org/atomic Êõø‰ª£Ê†áÂáÜÂ∫ì sync/atomicÔºåÈÅøÂÖçÂøòËÆ∞‰ΩøÁî®ÂéüÂ≠êÊìç‰Ωú„ÄÇ import _ Â∫îËØ•Âè™Áî®‰∫é main Êñá‰ª∂‰∏≠ÔºåÂ∞ΩÂèØËÉΩÈù†ËøëÁ®ãÂ∫èÂêØÂä®‰ΩçÁΩÆ„ÄÇ ÊÄßËÉΩ ‰ºòÂÖà‰ΩøÁî® strconv ËÄåÈùû fmt ËΩ¨Êç¢Á±ªÂûãÔºåÊÄßËÉΩÊõ¥Â•Ω„ÄÇ ‰∏çË¶ÅÂèçÂ§çÔºàÂ¶ÇÂæ™ÁéØ‰∏≠Ôºâ‰ªéÂõ∫ÂÆöÂ≠óÁ¨¶‰∏≤ÂàõÂª∫Â≠óËäÇ sliceÔºåÂèç‰πã‰∫¶ÁÑ∂„ÄÇ map ÂàõÂª∫Êó∂Â∞ΩÈáèÊèê‰æõÂÆπÈáè hintÔºåËøôÊ†∑ÂèØ‰ª•ÈÅøÂÖçÂú®Ê∑ªÂä†ÂÖÉÁ¥†ÊúüÈó¥ËøáÂ§öÊ¨°Âú∞ÂàÜÈÖç„ÄÇmap ËôΩÁÑ∂‰∏çËÉΩ‰øùËØÅÂàÜÈÖç hint ‰∏™ÂÆπÈáèÔºåÊ∑ªÂä†ÂÖÉÁ¥†Êó∂‰æùÁÑ∂ÂèØ‰ª•ËøõË°åÂàÜÈÖçÔºå‰ΩÜÂÆÉÂèØ‰ª•Âú®ËøêË°åÊó∂ÊúâÊõ¥Â∞ëÁöÑÂàÜÈÖç„ÄÇ ËßÑËåÉ ‰øùËØÅ‰∏ÄËá¥ÊÄßÔºå‰æø‰∫é‰ª£Á†ÅÁöÑÁª¥Êä§„ÄÅÂáèÂ∞ëÂ≠¶‰π†ÊàêÊú¨ Áõ∏‰ººÁöÑÂ£∞ÊòéÊîæÂú®‰∏Ä‰∏™ÂàÜÁªÑÔºàimport/var/const/typeÔºâ„ÄÇ‰ªÖÂ∞ÜÁõ∏ÂÖ≥ÁöÑÂ£∞ÊòéÊîæÂà∞‰∏ÄËµ∑ÔºÅ ÂåÖÂëΩÂêçËßÑÂàôÔºö ÂÖ®ÈÉ®Â∞èÂÜô„ÄÇÊó†Â§ßÂÜôÊàñ‰∏ãÂàíÁ∫ø Â§öÊï∞‰ΩøÁî®ÂëΩÂêçÂØºÂÖ•ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊó†ÈúÄÈáçÂëΩÂêçÂåÖ ÁÆÄÁü≠ &amp; ÁÆÄÊ¥Å ‰∏çË¶Å‰ΩøÁî®Â§çÊï∞ ÂáΩÊï∞ÂàÜÁªÑ‰∏éÈ°∫Â∫èÔºö ÂáΩÊï∞Á≤óÁï•ÊåâÁÖßË∞ÉÁî®È°∫Â∫èÊéíÂ∫è Âêå‰∏Ä‰∏™Êñá‰ª∂‰∏≠ÔºåÂáΩÊï∞Â∫îËØ•ÊåâÁÖßÊé•Êî∂ËÄÖÂàÜÁªÑ ÂØºÂá∫ÁöÑÂáΩÊï∞Â∫îËØ•ÂÖàÂá∫Áé∞Âú®Êñá‰ª∂‰∏≠ÔºåÊîæÂú® var, struct, const ÂÆö‰πâÁöÑÂêéÈù¢ 123456789type something struct&#123; ... &#125;func newSomething() *something &#123; return &amp;something&#123;&#125;&#125;func (s *something) Cost() &#123; return calcCost(s.weights)&#125;func (s *something) Stop() &#123;...&#125;func calcCost(n []int) int &#123;...&#125; ÂØπ‰∫éÊú™ÂØºÂá∫ÁöÑÈ°∂Â±ÇÂ∏∏ÈáèÂíåÂèòÈáèÔºå‰ΩøÁî® _ ‰Ωú‰∏∫ÂâçÁºÄ„ÄÇÊú™ÂØºÂá∫ÁöÑÈîôËØØÂÄºÔºå‰ΩøÁî® err ÂºÄÂ§¥„ÄÇÂéüÂõ†ÔºöÈ°∂Â±ÇÂèòÈáèÂíåÂ∏∏ÈáèÂÖ∑ÊúâÂåÖËåÉÂõ¥‰ΩúÁî®ÂüüÔºå‰ΩøÁî®ÈÄöÁî®ÂêçÁß∞ÂèØËÉΩ‰ºöÂØºËá¥Âú®ÂÖ∂‰ªñÊñá‰ª∂‰∏≠ÊÑèÂ§ñ‰ΩøÁî®ÈîôËØØÂÄº„ÄÇ ÁªìÊûÑ‰ΩìÂµåÂÖ•ÔºåÂ§ö‰∏ÄË°åÁ©∫Ë°åÈöîÂºÄ nil ÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑ sliceÔºõÈõ∂ÂÄºÂàáÁâáÔºà‰ΩøÁî® var Â£∞ÊòéÁöÑÂàáÁâáÔºâÂèØÁ´ãÂç≥‰ΩøÁî®ÔºåÊó†ÈúÄË∞ÉÁî® make() ÂàõÂª∫„ÄÇ 1234567var nums []intif add1 &#123;nums = append(nums, 1)&#125;if add2 &#123;nums = append(nums, 2)&#125; Â¶ÇÊûúË¶ÅÂ£∞ÊòéÊ†ºÂºèÂ≠óÁ¨¶‰∏≤ÔºåËÆæÁΩÆ‰∏∫ const Á±ªÂûãÔºåÊúâÂä©‰∫é go vet ÊâßË°åÂ≠óÁ¨¶‰∏≤ÈùôÊÄÅÊ£ÄÊü•Ôºö 12const msg = "unexpected values %v, %v\n"fmt.Printf(msg, 1, 2) Êõ¥Â§öÂèÇËÄÉ Uber Go Guide The Go common mistakes guide Effective ‰∏≠ÊñáÁâà Pointers v.s. Values Don‚Äôt just checked errors, handle them gracefully Package Names Go ÂåÖÊ†∑ÂºèÊåáÂçó Self-referential functions and the design of options Functional options for friendly APIs]]></content>
      <categories>
        <category>Go</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>ÊúÄ‰Ω≥ÂÆûË∑µ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈáéÁå™üêó‰π¶ËØª‰π¶Á¨îËÆ∞‰πã‰∫ãÂä°]]></title>
    <url>%2F2019%2F08%2F24%2Fddia-transaction%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄÁî±‰∫éÊï∞ÊçÆÂ≠òÂÇ®ÊúüÈó¥ÔºåÂèØËÉΩÂèëÁîüÈîôËØØ„ÄÅÊïÖÈöúÁöÑÁÇπÁâπÂà´Â§öÔºåÊØîÂ¶ÇÁΩëÁªú‰∏≠Êñ≠„ÄÅÁ£ÅÁõòÂÜôÊª°Á≠âÔºåÈù¢ÂØπËøô‰∫õÂ§çÊùÇÁöÑÊÉÖÂÜµÔºåÂ∫îÁî®Â±ÇÂ∫î‰ªòËµ∑Êù•ÈùûÂ∏∏Âõ∞Èöæ„ÄÇÊâÄ‰ª•Â∞±Êúâ‰∫Ü‰∫ãÂä°ÁöÑÊ¶ÇÂøµÔºåËØ¥ÈÅì‰∫ãÂä°ÔºåÊàë‰ª¨ÊúÄÂÖàËÉΩÊÉ≥Âà∞ÁöÑÂ∞±ÊòØÔºöÂèØ‰ª•‰∏ÄÊ¨°‰∫ãÂä°‰∏≠Â∞ÜÂæàÂ§öËØªÂÜôÂÖ•Êìç‰ΩúÊâìÂåÖÊàê‰∏Ä‰∏™ÈÄªËæëÊìç‰ΩúÂçïÂÖÉÔºåÊï¥‰∏™‰∫ãÂä°‰∏çÊàêÂäüÔºàCommittedÔºâ‰æøÊàê‰ªÅÔºàRollbackÔºâ„ÄÇÂ¶ÇÊûúÂ§±Ë¥•ÔºåÂ∫îÁî®Â±ÇÂèØÊ†πÊçÆÊÉÖÂÜµÂÆâÂÖ®Âú∞ÈáçËØïÔºå‰∏çÁî®ÊãÖÂøÉÈÉ®ÂàÜÂÜôÂÖ•ÁöÑÈóÆÈ¢ò„ÄÇ ÊÄªÁöÑÊù•ËØ¥Ôºå‰∫ãÂä°Â∞±ÊòØ‰∏ÄÂ±ÇÊäΩË±°Ôºå‰∏∫ÁÆÄÂåñÂ∫îÁî®Â±ÇÁºñÁ®ãÊ®°ÂûãËÄåÁîüÔºÅÂΩìÁÑ∂ÔºåÂπ∂ÈùûÊâÄÊúâÁöÑÊï∞ÊçÆÂ∫ìÈÉΩÊîØÊåÅ‰∫ãÂä°Ôºå‰ΩÜÊòØÂØπÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìËÄåË®ÄÔºåËøô‰∏™Âü∫Êú¨ÊòØÊ†áÈÖçÔºõÊüê‰∫õ NoSQL Êï∞ÊçÆÂ∫ìÂèØËÉΩÂõ†‰∏∫ÊÄßËÉΩ„ÄÅÂèØÁî®ÊÄß‰ª•ÂèäÊâ©Â±ïÊÄßËÄÉËôëÔºåËÄåÊîæÂºÉ‰∫ÜÂØπ‰∫ãÂä°ÁöÑÊîØÊåÅ„ÄÇÂè¶Â§ñÔºåÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ∫ì‰∏ãÔºå‰∫ãÂä°ÁöÑÂÆûÁé∞‰ºöÊõ¥Âä†Âõ∞ÈöæÔºåÂπ∂‰∏îÊâßË°åÂºÄÈîÄ‰πüÂæàÂ§ßÔºå‰ΩÜÂπ∂‰∏ç‰ª£Ë°®ÂÆÉ‰∏çËÉΩÂÆûÁé∞„ÄÇÂÖ∏ÂûãÁöÑ ÂàÜÂ∏ÉÂºèÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÂ¶Ç TiDB ‰ª•Âèä Google Spanner Â∞±Êèê‰æõ‰∫Ü‰∫ãÂä°ÊîØÊåÅ„ÄÇ Ê∑±ÂÖ•ÁêÜËß£ ACID AtomicityÔºàÂéüÂ≠êÊÄßÔºâÔºöÂ∞ÜÂ§ö‰∏™ÂÜôÊìç‰ΩúÁ∫≥ÂÖ•‰∏Ä‰∏™ÂéüÂ≠ê‰∫ãÂä°‰∏≠ÔºåÂπ∂Âú®ÊïÖÈöúÔºàËøõÁ®ãÂ¥©Ê∫É„ÄÅÁΩëÁªú‰∏≠Êñ≠„ÄÅÁ£ÅÁõòÊïÖÈöúÔºâÂèëÁîüÊó∂ËÉΩÂ§üÂèäÊó∂‰∏≠Ê≠¢‰∫ãÂä°ÔºåÂπ∂Â∞ÜÈÉ®ÂàÜÂÆåÊàêÁöÑÂÜôÂÖ•ÂÖ®ÈÉ®‰∏¢ÂºÉ„ÄÇ ConsistencyÔºà‰∏ÄËá¥ÊÄßÔºâÔºö ÂØπÊï∞ÊçÆÊúâÁâπÂÆöÁöÑÁä∂ÊÄÅÈ¢ÑÊúüÔºå‰ªª‰ΩïÊï∞ÊçÆÂèòÊõ¥ÂøÖÈ°ªÊª°Ë∂≥Ëøô‰∫õÁä∂ÊÄÅÁ∫¶ÊùüÔºàÊàñËÄÖÊÅíÁ≠âÊù°‰ª∂Ôºâ Â∫îÁî®Á®ãÂ∫èÂ∫îËØ•Ë¥üË¥£‰øùËØÅËøôÁßç‰∏ÄËá¥ÊÄßÔºåÊï∞ÊçÆÂ∫ìÂè™ÊòØÂ≠òÂÇ® Ëøô‰∏™Êõ¥Â§öÁöÑÊòØÂ∫îÁî®Â±ÇÂ±ûÊÄßÔºåÊâÄ‰ª• C ÂéüÊú¨‰∏çÂ±û‰∫é ACIDÔºåÂè™ÊòØ‰ΩúËÄÖ Joe Hellerstein ËÆ§‰∏∫Âê¨Ëµ∑Êù•È°∫Âè£Â∞±Âä†‰∫ÜËøõÊù•üò¢ IsolationÔºàÈöîÁ¶ªÊÄßÔºâÔºöÂπ∂ÂèëÊâßË°åÁöÑÂ§ö‰∏™‰∫ãÂä°Áõ∏‰∫íÈöîÁ¶ªÔºå‰∏çËÉΩÁõ∏‰∫í‰∫§Âèâ„ÄÇÁªèÂÖ∏ÁöÑÊïôÊùêÊääÂÖ∂Áß∞‰∏∫ÂèØ‰∏≤Ë°åÂåñ„ÄÇ‰ΩÜÂÆûË∑µ‰∏≠Ôºå‰∏≤Ë°åÂåñÈöîÁ¶ªÁ∫ßÂà´ËæÉÂ∞ë‰ΩøÁî®ÔºåÊõ¥Â§öÁöÑËøòÊòØËæÉÂº±ÁöÑÈöîÁ¶ªÁ∫ßÂà´„ÄÇ DurabilityÔºàÊåÅ‰πÖÊÄßÔºâÔºöÊï∞ÊçÆÂ∫ìÊâøËØ∫Ôºå‰∏ÄÊó¶‰∫ãÂä°Êèê‰∫§ÊàêÂäüÔºåÂç≥‰æøÁ°¨‰ª∂ÊïÖÈöúÊàñÊï∞ÊçÆÂ∫ìÂ¥©Ê∫ÉÔºå‰∫ãÂä°ÂÜôÂÖ•ÁöÑÊï∞ÊçÆ‰πü‰∏ç‰ºö‰∏¢Â§±„ÄÇ ÂØπ‰∫éÂ¶Ç‰∏ª‰ªéÂ§çÂà∂ÁöÑÊï∞ÊçÆÂ∫ìÈõÜÁæ§ÔºåÊÑèÂë≥ÁùÄÂÜôÂÖ•ÁöÑÊï∞ÊçÆÂ§çÂà∂Âà∞‰∫ÜÂ§ö‰∏™ËäÇÁÇπ ÂÆåÁæéÁöÑÊåÅ‰πÖÊÄßÊó†Ê≥ï‰øùËØÅÔºàÊääÁ°¨ÁõòÊãî‰∫Ü„ÄÅÂÖ®ÈÉ®Êú∫ÊàøÁÉß‰∫Üüî•Âë¢ÔºüÔºâ ÁêÜÊÄßÁúãÂæÖÂêÑÂÆ∂Êï∞ÊçÆÂ∫ìÂÆ£Áß∞ÁöÑ ACID ÂÖºÂÆπÔºõÂÆûÈôÖÂêÑÂÆ∂ÂÆûÁé∞ÈÉΩÂèØËÉΩ‰∏çÂêå ‰∏çÁ¨¶Âêà ACID Ê†áÂáÜÁöÑÁ≥ªÁªüÈÄöÂ∏∏Áß∞‰∏∫ BASEÔºö Basically Available Soft State Eventually Consistency ACID Êï∞ÊçÆÂ∫ìÂü∫‰∫éËøôÊ†∑ÁöÑÁêÜÂøµÔºöÂ¶ÇÊûúÂ≠òÂú®ËøùÂèç AID ÁöÑÈ£éÈô©ÔºåÂ∞±ÊîæÂºÉÊï¥‰∏™‰∫ãÂä°ÔºåËÄåÈùûÈÉ®ÂàÜÊîæÂºÉÔºÅ Âº±ÈöîÁ¶ªÁ∫ßÂà´ ÂÆâÂÖ®ÁöÑÂπ∂Ë°å‰∫ãÂä°Ôºö‰∏§‰∏™‰∫ãÂä°Èó¥Ê≤°Êï∞ÊçÆ‰æùËµñÂÖ≥Á≥ªÔºåÊìç‰ΩúÁöÑÊòØÂÆåÂÖ®‰∏çÂêåÁöÑÊï∞ÊçÆ ‰∏çÂÆâÂÖ®ÁöÑÂπ∂Ë°å‰∫ãÂä°Ôºà‰ºöÂºïÂÖ•Á´û‰∫âÊù°‰ª∂ÔºâÔºö A ‰∫ãÂä°‰øÆÊîπ‰∫ÜÊüêÊï∞ÊçÆÔºõB ‰∫ãÂä°ÂèàËØªÂèñËØ•Êï∞ÊçÆÔºõ A ‰∫ãÂä°Âíå B ‰∫ãÂä°ÂêåÊó∂‰øÆÊîπÁõ∏ÂêåÁöÑÊï∞ÊçÆ„ÄÇ ÈöîÁ¶ªÂ∞±ÊòØ‰∏∫‰∫Ü‰øùËØÅ‰∫ãÂä°ËÉΩÂ§üÂÆâÂÖ®Âú∞Âπ∂ÂèëÊâßË°åÔºåÂÅáË£ÖÊ≤°ÊúâÂèëÁîüÂπ∂ÂèëÔºõÂèØ‰∏≤Ë°åÂú∞ÈöîÁ¶ªÊÑèÂë≥ÁùÄÊï∞ÊçÆÂ∫ì‰ºö‰øùËØÅ‰∫ãÂä°ÁöÑÊâßË°åÁªìÊûúÂíå‰∏≤Ë°åÊâßË°åÁªìÊûú‰∏ÄËá¥„ÄÇ ‰∏∫‰Ωï‰∫ßÁîüÂº±ÈöîÁ¶ªÁ∫ßÂà´Ôºü ‰∏≤Ë°åÈöîÁ¶ªÊÄßËÉΩ‰∏çÂ•Ω Âº±ÈöîÁ¶ªÂèØËß£ÂÜ≥ÈÉ®ÂàÜÂπ∂ÂèëÈóÆÈ¢òÔºõ‰ΩÜÊòØËøòÊòØÈúÄË¶ÅÂΩªÂ∫ïÁêÜËß£ÂêÑÁßçÈöîÁ¶ªÁ∫ßÂà´‰ª•ÂèäÂÆÉ‰ª¨ÂèØËÉΩ‰∫ßÁîüÁöÑÈóÆÈ¢òÔºåÊâçËÉΩÊõ¥Â•ΩÂú∞ÂÆåÊàê‰∏öÂä°ÈúÄÊ±Ç ÂêçËØçËß£ÈáäÂú®Â≠¶‰π†ÂêÑÁßçÈöîÁ¶ªÁ∫ßÂà´ÂâçÔºåÊúâÂøÖË¶Å‰∫ÜËß£Â¶Ç‰∏ãÂá†‰∏™ÂÖ≥ÈîÆË¶ÅÁÇπÔºö Ë¶ÅÁÇπ Ëß£Èáä ËÑèËØª Dirty Read Âú®‰∫ãÂä° A ‰∏≠ËØªÂèñÂà∞‰∫Ü‰∫ãÂä° B Â∞öÊú™Êèê‰∫§ÁöÑÂÜôÂÖ•„ÄÇÈááÁî® Read Committed Âèä‰ª•‰∏äÁ∫ßÂà´ÂèØÈò≤ËåÉ„ÄÇ ËÑèÂÜô Dirty Write Âú®‰∫ãÂä° A ‰∏≠Ë¶ÜÁõñ‰∫Ü‰∫ãÂä° B Â∞öÊú™Êèê‰∫§ÁöÑÂÜôÂÖ•„ÄÇÂá†‰πéÊâÄÊúâÁöÑÊï∞ÊçÆÂ∫ìÈÉΩÂèØ‰ª•Èò≤Ê≠¢ËÑèÂÜôÔºåÊúÄÁÆÄÂçïÂ∞±ÊòØÂä†ÈîÅ„ÄÇ ËØªÂÄæÊñúÔºà‰∏çÂèØÈáçÂ§çËØªÔºâ Non-Repeatable Read Âú®‰∫ãÂä°ÊâßË°åÊúüÈó¥Ôºå‰∏çÂêåÁöÑÊó∂Èó¥ÁÇπËØªÂèñÂêå‰∏ÄÊù°ËÆ∞ÂΩïÔºåÂæóÂà∞ÁöÑÂÄº‰∏çÂêå„ÄÇÂø´ÁÖßÈöîÁ¶ªÂèØËΩªÊùæÂ∫î‰ªòÔºåÈÄöÂ∏∏‰ΩøÁî® MVCC ÂÆûÁé∞Âø´ÁÖßÈöîÁ¶ªÔºàÂ¶Ç InnoDBÔºâ„ÄÇ Êõ¥Êñ∞‰∏¢Â§± Lost Update ‰∏§‰∏™‰∫ãÂä°‰∏≠ÈÉΩÊâßË°å‰∫Ü Read-Modify-Write ÁöÑÊìç‰ΩúÂ∫èÂàóÔºåÂá∫Áé∞‰∫ÜÂÖ∂‰∏≠‰∏Ä‰∏™Ë¶ÜÁõñ‰∫ÜÂè¶‰∏Ä‰∏™ÁöÑÂÜôÂÖ•Ôºå‰ΩÜÊ≤°ÊúâÂåÖÂê´ÂØπÊñπÊúÄÊñ∞ÂÄºÁöÑÊÉÖÂÜµÔºàÂÖ∏ÂûãÁöÑ‰æãÂ≠êÊòØÔºöËØªÂèñÊüê‰∏™Â≠óÊÆµ-&gt;Â≠óÊÆµÂÄºÂä† 1-&gt;ÂÜôÂÖ•ËØ•Â≠óÊÆµÁöÑÊñ∞ÂÄºÔºåÂèØËÉΩ‰ºöÂá∫Áé∞‰∏§‰∏™‰∫ãÂä°ÂêåÊó∂ÊâßË°å‰∫Ü +1Ôºå‰ΩÜÊúÄÁªàÁªìÊûú‰∏çÊòØÈ¢ÑÊúüÁöÑ +2 ÊïàÊûúÔºâ„ÄÇÈÄöÂ∏∏ÂèØ‰ª•ÈááÁî®Êï∞ÊçÆÊîØÊåÅÁöÑÂéüÂ≠êÂÜôÊìç‰ΩúÔºåÊàñËÄÖ‰ΩøÁî® SELECT‚Ä¶FOR UPDATE ÊòæÂºèÂä†ÈîÅÁöÑÊñπÂºèËß£ÂÜ≥ÔºõÂΩìÁÑ∂ÔºåÊüê‰∫õÂø´ÁÖßÈöîÁ¶ªÁöÑÂÆûÁé∞ÂèØ‰ª•Ëá™Âä®Èò≤Ê≠¢ËøôÁßçÂºÇÂ∏∏ ÂÜôÂÄæÊñú Write Skew ÂÖ∏ÂûãÁöÑÂú∫ÊôØÊòØÔºö‰∫ãÂä°‰∏≠Êü•ËØ¢Êï∞ÊçÆÔºåÂÜçÊ†πÊçÆÊü•ËØ¢ÁªìÊûúÂÅöÂá∫ÂÜ≥Á≠ñÔºåÊúÄÂêé‰øÆÊîπÊï∞ÊçÆÂ∫ì„ÄÇ‰ΩÜÊòØÂ¶ÇÊûú‰∫ãÂä°Êèê‰∫§Êó∂ÔºåÊîØÊåÅÂÜ≥Á≠ñÁöÑÂâçÊèêÊù°‰ª∂‰∏çÂÜçÊàêÁ´ãÔºàÊØîÂ¶ÇÂè¶‰∏Ä‰∏™‰∫ãÂä°‰∏≠ÂÅö‰∫Ü‰øÆÊîπÔºåÂØºËá¥ÂêåÊ†∑ÁöÑÊü•ËØ¢Êù°‰ª∂ÔºåÂæóÂà∞ÁöÑÁªìÊûú‰∏çÂêåÔºâ„ÄÇÂè™Êúâ‰∏≤Ë°åÂåñÈöîÁ¶ªÁ∫ßÂà´ÊâçËÉΩÁúüÊ≠£Èò≤Ê≠¢ËøôÁßçÂºÇÂ∏∏ ÂπªËØª Phantom Read ‰∫ãÂä°ËØªÂèñ‰∫ÜÊüê‰∫õÁ¨¶ÂêàÊü•ËØ¢Êù°‰ª∂ÁöÑËÆ∞ÂΩïÔºåÂêåÊó∂Âè¶‰∏Ä‰∏™‰∫ãÂä°ÊâßË°åÂÜôÂÖ•ÔºåÊîπÂèò‰∫ÜÂÖàÂâçÁöÑÊü•ËØ¢ÁªìÊûú„ÄÇÂø´ÁÖßÈöîÁ¶ªÂèØÈò≤Ê≠¢ÁÆÄÂçïÁöÑÂπªËØª ANSI SQL Âá†ÁßçÈöîÁ¶ªÁ∫ßÂà´ÂÆö‰πâÔºöÂÆûÈôÖ‰∏äÂêÑÂÆ∂Êï∞ÊçÆÂ∫ìÁöÑÊîØÊåÅÊòØ‰∏çÂ∞ΩÁõ∏ÂêåÁöÑüò£„ÄÇ Á∫ßÂà´ P1 ËÑèËØª P2 ‰∏çÂèØÈáçÂ§çËØª P3 ÂπªËØª Read Uncommitted ÂÖÅËÆ∏ ÂÖÅËÆ∏ ÂÖÅËÆ∏ Read Committed Á¶ÅÊ≠¢ ÂÖÅËÆ∏ ÂÖÅËÆ∏ Repeatable Read Á¶ÅÊ≠¢ Á¶ÅÊ≠¢ ÂÖÅËÆ∏ Serializable Á¶ÅÊ≠¢ Á¶ÅÊ≠¢ Á¶ÅÊ≠¢ ËØªÂ∑≤Êèê‰∫§ ÊúÄÂü∫Êú¨ÁöÑ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÔºåÈúÄË¶ÅÊèê‰æõ‰∏ãÈù¢‰∏§‰∏™‰øùËØÅÔºö Èò≤Ê≠¢ËÑèËØª Èò≤Ê≠¢ËÑèÂÜô ÂÆûÁé∞Ôºö ‰∏∫‰∫ÜÈò≤Ê≠¢ËÑèÂÜôÔºåÂΩì‰∫ãÂä°ÈúÄË¶Å‰øÆÊîπÊüê‰∏™ÂØπË±°ÔºàÊØîÂ¶ÇË°åÊàñÊñáÊ°£ÔºâÊó∂ÔºåÂøÖÈ°ªË¶ÅËé∑ÂæóËØ•ÂØπË±°ÁöÑÈîÅÔºå‰∏ÄÁõ¥ÊåÅÊúâËØ•ÈîÅÁõ¥Âà∞‰∫ãÂä°Êèê‰∫§Êàñ‰∏≠Ê≠¢Ôºõ ‰∏∫‰∫ÜÈò≤Ê≠¢ËÑèËØªÔºå‰ΩøÁî®ÈîÅÁöÑÊñπÂºèËôΩÁÑ∂‰πüÂèØ‰ª•ÂÆûÁé∞Ôºå‰ΩÜÂú®ËøêË°åËæÉÈïøÊó∂Èó¥ÁöÑÂÜô‰∫ãÂä°‰ºöÂØºËá¥ËÆ∏Â§öÂè™ËØª‰∫ãÂä°Á≠âÂæÖÊó∂Èó¥Â§™ÈïøÔºåÂΩ±ÂìçÂè™ËØª‰∫ãÂä°ÁöÑÂìçÂ∫îÂª∂ËøüÔºåÂèØÊìç‰ΩúÊÄßÂ∑Æ„ÄÇÈÄöÂ∏∏ÂØπ‰∫éÊØè‰∏™ÂæÖÊõ¥Êñ∞ÁöÑÂØπË±°ÔºåÊï∞ÊçÆÂ∫ìÁª¥Êä§ÂÖ∂ÊóßÂÄºÂíåÂΩìÂâçÊåÅÈîÅ‰∫ãÂä°Â∞ÜË¶ÅËÆæÁΩÆÁöÑÊñ∞ÂÄº‰∏§‰∏™ÁâàÊú¨„ÄÇÂú®‰∫ãÂä°Êèê‰∫§ÂâçÔºåÊâÄÊúâÂÖ∂ÂÆÉËØªÊìç‰ΩúÈÉΩËØªÂèñÊóßÂÄºÔºõ‰ªÖÂΩìÂÜô‰∫ãÂä°Êèê‰∫§ÂêéÔºåÊâç‰ºöÂàáÊç¢Âà∞ËØªÂèñÊñ∞ÂÄº„ÄÇ Âø´ÁÖßÈöîÁ¶ªÁ∫ßÂà´ÂíåÂèØÈáçÂ§çËØª Rread Committed ‰∏çËÉΩËß£ÂÜ≥‰∏çÂèØÈáçÂ§çËØªÁöÑÈóÆÈ¢òÔºåËÄåÂú®‰∏Ä‰∫õÂú∫ÊôØ‰∏ãÂ∞±‰∏çËÉΩÂÆπÂøçÔºö Â§á‰ªΩ ÂàÜÊûêÊü•ËØ¢ÂíåÂÆåÊï¥ÊÄßÊ£ÄÊü• Âø´ÁÖßÈöîÁ¶ª‰øùËØÅÊØè‰∏™‰∫ãÂä°Âè™ÁúãÂà∞ÁâπÂÆöÊó∂Èó¥ÁÇπÁöÑÊóßÊï∞ÊçÆÔºå‰∏çÊÑüÁü•ÂÖ∂ÂÆÉ‰∫ãÂä°‰∏≠ÂØπÊï∞ÊçÆÁöÑ‰øÆÊîπ„ÄÇËØªÂèñÊìç‰Ωú‰∏ç‰ºöÈòªÊ≠¢ÂÜôÊìç‰ΩúÔºåÂèç‰πã‰∫¶ÁÑ∂„ÄÇ Êï∞ÊçÆÂ∫ì‰ΩøÁî®‰∫ÜÂ§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂ÔºàMulti-Version Concurrency Control, MVCCÔºâÊäÄÊúØÊù•ÂÆûÁé∞Âø´ÁÖßÈöîÁ¶ª„ÄÇËÄå MVCC ‰πüÂèØ‰ª•Áî®Êù•ÂÆûÁé∞ Read Committed ÈöîÁ¶ªÁ∫ßÂà´ÔºàÂè™ÈúÄË¶Å‰øùÁïô‰∏§‰∏™ÁâàÊú¨Âç≥ÂèØÔºåÂ∑≤Êèê‰∫§ÁöÑÊóßÊï∞ÊçÆÂíåÂ∞öÊú™Êèê‰∫§ÁöÑÊñ∞ÁâàÊú¨Êï∞ÊçÆÔºâÔºåÂÖ∏ÂûãÁöÑÂÅöÊ≥ïÊòØÂØπÊØè‰∏™‰∏çÂêåÁöÑÊü•ËØ¢ÂçïÁã¨ÂàõÂª∫‰∏Ä‰∏™Âø´ÁÖßÔºõËÄåÂø´ÁÖßÈöîÁ¶ªÁ∫ßÂà´Âàô‰ΩøÁî®‰∏Ä‰∏™Âø´ÁÖßËøêË°åÊï¥‰∏™‰∫ãÂä°„ÄÇ ‰∏ÄËá¥ÊÄßÂø´ÁÖß‰∏≠Êï∞ÊçÆÂèØËßÅÊÄßËßÑÂàôÔºö ‰∫ãÂä°ÂºÄÂßãÊó∂ÔºåÂàõÂª∫ËØ•ÂØπË±°ÁöÑ‰∫ãÂä°Â∑≤ÁªèÂÆåÊàêÊèê‰∫§ ÂØπË±°Ê≤°ÊúâË¢´Ê†áËÆ∞Âà†Èô§ÔºõÊàñËÄÖÂç≥‰æøÊ†áËÆ∞‰∫ÜÔºå‰ΩÜÊòØÂà†Èô§‰∫ãÂä°Âú®ÂΩìÂâç‰∫ãÂä°ÂºÄÂßãÁöÑÊó∂ÂÄôÂ∞öÊú™Êèê‰∫§ Èò≤Ê≠¢Êõ¥Êñ∞‰∏¢Â§± ‰∫ßÁîüÊõ¥Êñ∞‰∏¢Â§±ÁöÑÂÖ∏ÂûãÂú∫ÊôØÊòØÔºöRead-Modify-WriteÔºåÂΩì‰∏§‰∏™Âπ∂Âèë‰∫ãÂä°Âú®ÂêåÊ†∑ÁöÑÊï∞ÊçÆËÆ∞ÂΩï‰∏äÊâßË°åÁ±ª‰ººÊìç‰ΩúÊó∂Ôºå‰∫åËÄÖÁõ∏‰∫í‰∏ç‰ºöÊÑüÁü•ÂØπÊñπÁöÑ‰øÆÊîπÂÄºÔºåÊúÄÁªàÂØºËá¥Êüê‰∏™‰∫ãÂä°ÁöÑ‰øÆÊîπÂÄºÂèØËÉΩ‰∏¢Â§±„ÄÇÂú∫ÊôØÂ¶Ç‰∏ãÔºö ÈÄíÂ¢ûËÆ°Êï∞Âô®ÔºõÊõ¥Êñ∞Ë¥¶Êà∑‰ΩôÈ¢ù ÂØπÂ§çÊùÇÂØπË±°ÁöÑ‰∏ÄÈÉ®ÂàÜËøõË°å‰øÆÊîπÔºàÂ¶Ç‰∏Ä‰∏™Â§ß JSON ÂØπË±°Ôºâ Â¶Ç‰ΩïËß£ÂÜ≥Ôºü ÈááÁî®ÂéüÂ≠êÂÜôÊìç‰ΩúÔºàÂ¶ÇÊûúÊï∞ÊçÆÂ∫ìÊîØÊåÅÁöÑËØùÔºâÔºö UPDATE counter SET value = value + 1 WHERE id = 1; ÈÄöÂ∏∏ÈááÁî®ËØªÂèñÂØπË±°Âπ∂Âä†Áã¨Âç†ÈîÅÁöÑÊñπÂºèÊù•ÂÆûÁé∞ÔºàÂú®ÂΩìÂâç‰∫ãÂä°Êú™Êèê‰∫§ÂâçÔºåÂÖ∂ÂÆÉ‰∫ãÂä°‰πü‰∏çÂèØËØªÔºâÔºõÊàñËÄÖÂèØ‰ª•ÈááÁî®ÂçïÁ∫øÁ®ãÊâßË°åÂéüÂ≠êÊìç‰Ωú ÊòæÂºèÂä†ÈîÅÔºö SELECT * FROM figures WHERE name = &#39;robot&#39; FOR UPDATE ÂØπÊâÄÈÄâË°åÂä†ÈîÅÔºåÂÖ∂ÂÆÉ‰∫ãÂä°Ëã•Ë¶ÅÂêåÊó∂Â∞ùËØïËØªÂèñÂØπË±°ÔºåÂàôË¶ÅÁ≠âÂæÖÂΩìÂâçÊ≠£Âú®ÊâßË°åÁöÑÂ∫èÂàóÂÖ®ÈÉ®ÂÆåÊàê Ëá™Âä®Ê£ÄÊµãÊõ¥Êñ∞‰∏¢Â§±Ôºö ‰∫ãÂä°ÁÆ°ÁêÜÂô®Â¶ÇÊûúÊ£ÄÊµãÂà∞Êõ¥Êñ∞‰∏¢Â§±È£éÈô©Ôºå‰ºö‰∏≠Ê≠¢ÂΩìÂâç‰∫ãÂä°ÔºåÂº∫Âà∂ÈÄÄÂõûÂà∞ÂÆâÂÖ®ÁöÑ R-M-W ÊñπÂºè MySQL InnoDB ‰∏çÊîØÊåÅÊ£ÄÊµãÔºõPostgreSQL ÁöÑÂèØÈáçÂ§çËØª„ÄÅOracle ÂèØ‰∏≤Ë°åÂåñÂíå SQL Server Âø´ÁÖßÈöîÁ¶ªÁ∫ßÂà´ÈÉΩÊîØÊåÅ ÂéüÂ≠êÊØîËæÉÂíåËÆæÁΩÆÔºö Âè™ÊúâÂú®‰∏äÊ¨°ËØªÂèñÁöÑÊï∞ÊçÆÊú™ÂèëÁîüÂèòÂåñÊó∂ÊâçÂÖÅËÆ∏Êõ¥Êñ∞ÔºõÂê¶ÂàôÂõûÈÄÄÂà∞ R-M-W ÊñπÂºè ‰ΩøÁî®ÂâçÈúÄË¶Å‰ªîÁªÜÊ£ÄÊü• ÂÜôÂÄæÊñú‰∏éÂπªËØª ÂÜôÂÄæÊñúÂèØ‰ª•ËÆ§‰∏∫ÊòØ‰∏ÄÁßçÊõ¥Âπø‰πâÁöÑÊõ¥Êñ∞‰∏¢Â§±ÈóÆÈ¢òÔºåÂç≥Â¶ÇÊûú‰∏§‰∏™‰∫ãÂä°ËØªÂèñÁõ∏ÂêåÁöÑ‰∏ÄÁªÑÂØπË±°ÔºåÁÑ∂ÂêéÊõ¥Êñ∞ÂÖ∂‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÔºö ‰∏çÂêåÁöÑ‰∫ãÂä°Êõ¥Êñ∞‰∏çÂêåÁöÑÂØπË±°ÔºåÂàôÂèØËÉΩÂèëÁîüÂÜôÂÄæÊñú ‰∏çÂêåÁöÑ‰∫ãÂä°Êõ¥Êñ∞Áõ∏ÂêåÁöÑÂØπË±°ÔºåÂàôÂèØËÉΩÂèëÁîüËÑèÂÜôÊàñÊõ¥Êñ∞‰∏¢Â§± Áõ∏ÂÖ≥Âú∫ÊôØÔºö ‰ºöËÆÆÂÆ§È¢ÑÂÆöÁ≥ªÁªü Â§ö‰∫∫Ê∏∏Êàè Â£∞Êòé‰∏Ä‰∏™Áî®Êà∑Âêç Èò≤Ê≠¢ÂèåÈáçÂºÄÊîØÔºàÁßØÂàÜÁ≠âÔºâ Â¶Ç‰ΩïÂ∫îÂØπÂÜôÂÄæÊñúÔºö Â¶ÇÂÄºÁè≠ÂåªÁîüÁöÑ‰æãÂ≠êÔºåÂèØ‰ª•ÈááÁî® SELECT...FOR UPDATE ÊñπÂºèÊòæÂºèÂä†ÈîÅÔºå‰ΩÜÂ¶ÇÊûúÊü•ËØ¢ÁªìÊûú‰∏∫Á©∫ÔºåËøôÊ†∑ÂÅö‰πü‰∏çËÉΩÂ•èÊïà ÂÆû‰ΩìÂåñÂÜ≤Á™ÅÔºåÊØîÂ¶Ç‰ºöËÆÆÂÆ§È¢ÑÂÆöÔºåÂèØ‰ª•ÊèêÂâçÂ∞ÜÊú™Êù• N ‰∏™ÊúàÁöÑÂØπÂ∫îÁöÑÊâÄÊúâÊó∂Èó¥ÂíåÊàøÈó¥ÁªÑÂêàÂàõÂª∫Â•ΩÔºåËøôÊ†∑ÊòæÁ§∫Âä†ÈîÅÂèØ‰ª•ÁîüÊïà ÈááÁî®‰∏≤Ë°åÂåñÈöîÁ¶ªÁ∫ßÂà´ ‰∏≤Ë°åÂåñ‰∏•Ê†º‰∏≤Ë°åÊâßË°å ÈááÁî®ÂçïÁ∫øÁ®ãÊåâÈ°∫Â∫èÊâßË°å‰∫ãÂä°ÔºåÈÅøÂÖçÊ£ÄÊµã„ÄÅ‰∫ãÂä°ÂÜ≤Á™ÅÁ≠âÈóÆÈ¢òÔºõÂêåÊó∂ÂèØËÉΩ‰ºöÊØîÊîØÊåÅÂπ∂ÂèëÁöÑÁ≥ªÁªüÊïàÁéáÊõ¥È´òÔºåÈÅøÂÖçÈîÅÁöÑÂºÄÈîÄ ‰∏∫‰ªÄ‰πàÂèØË°åÔºü ÂÜÖÂ≠òÊõ¥‰æøÂÆú OLTP ‰∫ãÂä°ÈÄöÂ∏∏ÂæàÂø´ÊâßË°åÂÆåÔºåÂè™‰∫ßÁîüÂ∞ëÈáèËØªÂèñ ÂÖ∏ÂûãÁöÑ‰ª£Ë°®ÔºöVoltDB / H-Store, Redis Âíå Datomic ÈÄöÂ∏∏‰∏çËÉΩÊîØÊåÅ‰∫§‰∫íÂºèÁöÑÂ§öËØ≠Âè•‰∫ãÂä°ÔºàÂê¶ÂàôÂæóÁ≠âÂæÖÂ§™‰πÖ‰∫ÜÔºâ Êª°Ë∂≥‰ª•‰∏ãÁ∫¶ÊùüÔºå‰∏≤Ë°åÊâßË°å‰∫ãÂä°ÁßëÂÆûÁé∞‰∏≤Ë°åÂåñÈöîÁ¶ªÔºö ‰∫ãÂä°ÂøÖÈ°ªÁÆÄÁü≠È´òÊïà ‰ªÖÈôê‰∫éÊ¥ªÂä®Êï∞ÊçÆÈõÜÂÆåÂÖ®ÂèØ‰ª•Âä†ËΩΩÂà∞ÂÜÖÂ≠òÁöÑÂú∫ÊôØ ÂÜôÂÖ•ÂêûÂêêÂøÖÈ°ªË∂≥Â§ü‰ΩéÔºåÊâçËÉΩÂú®ÂçïÊ†∏‰∏äÂ§ÑÁêÜÔºõÂê¶ÂàôÈúÄË¶ÅÈááÁî®ÂàÜÂå∫Ôºå‰ΩÜÊúÄÂ•Ω‰∏çË¶Å‰ΩøÁî®Ë∑®ÂàÜÂå∫‰∫ãÂä°ÔºàÈÅøÂÖçÂçèË∞ÉÂºÄÈîÄÔºâ Ë∑®ÂàÜÂå∫‰∫ãÂä°ÂèØ‰ª•ÊîØÊåÅÔºå‰ΩÜÂç†ÊØîÂøÖÈ°ªË¶ÅÂ∞è ‰∏§Èò∂ÊÆµÈîÅÔºàTwo-Phase Lock, 2PLÔºâ 2PL ÊòØÊØîËæÉËÄÅÁâåÁöÑ‰∏≤Ë°åÂåñÁÆóÊ≥ïÔºåÂ∫îÁî®‰∫é MySQL InnoDB Âíå SQL Server ÁöÑ„ÄåÂèØ‰∏≤Ë°åÂåñÈöîÁ¶ª„ÄçÂíå DB2 ÁöÑ„ÄåÂèØÈáçÂ§çËØªÈöîÁ¶ª„Äç„ÄÇÊÇ≤ËßÇ‰∫ãÂä°Ê®°Âûã„ÄÇ ÂÖ∏ÂûãÁâπÂæÅÔºö ËØªÂÜô‰∫íÊñ• Âπ∂ÂèëÂÜô‰∫íÊñ• Âü∫Êú¨ÊÄùË∑ØÔºàÊï∞ÊçÆÂ∫ì‰ºö‰∏∫ÊØè‰∏™ÂØπË±°Áª¥Êä§ËØªÂÜôÈîÅÊù•ÈöîÁ¶ªËØªÂÜôÊìç‰ΩúÔºåÈîÅÂèØ‰ª•Â§Ñ‰∫éÂÖ±‰∫´Ê®°ÂºèÊàñÁã¨Âç†Ê®°ÂºèÔºâÔºö Â¶ÇÊûú‰∫ãÂä°Ë¶ÅËØªÂèñÂØπË±°ÔºåÂøÖÈ°ªÂÖà‰ª•ÂÖ±‰∫´Ê®°ÂºèËé∑ÂæóÈîÅ„ÄÇÂ§ö‰∏™‰∫ãÂä°ÂèØÂêåÊó∂‰ª•Ëé∑ÂæóÂØπË±°ÁöÑÂÖ±‰∫´ÈîÅÔºõ‰ΩÜÂ¶ÇÊûúÊüê‰∏™‰∫ãÂä°Ëé∑Âæó‰∫ÜÂØπË±°ÁöÑÁã¨Âç†ÈîÅÔºåÂàôÂÖ∂‰ªñ‰∫ãÂä°ÈÉΩÈúÄË¶ÅÁ≠âÂæÖ Â¶ÇÊûú‰∫ãÂä°Ë¶Å‰øÆÊîπÂØπË±°ÔºåÂøÖÈ°ª‰ª•Áã¨Âç†Ê®°ÂºèËé∑ÂèñÈîÅ„ÄÇÂ¶ÇÊûúÂØπË±°Â∑≤ÁªèÂä†ÈîÅÔºà‰∏çÁÆ°ÊòØËØªËøòÊòØÂÜôÔºâÔºåÂàôËØ•‰∫ãÂä°ÂøÖÈ°ªÁ≠âÂæÖ Â¶ÇÊûú‰∫ãÂä°ÂÖàËØªÂêéÂÜôÔºåÂàôÂ∞ÜÂÖ±‰∫´ÈîÅÂçáÁ∫ß‰∏∫Áã¨Âç†ÈîÅ ‰∫ãÂä°Ëé∑ÂèñÈîÅÂêéÔºåÁõ¥Âà∞‰∫ãÂä°ÁªìÊùüÊâç‰ºöÈáäÊîæ ‰∏§Èò∂ÊÆµÁöÑÂê´‰πâÔºö ‰∫ãÂä°ÊâßË°åÂâçËé∑ÂèñÈîÅ ‰∫ãÂä°ÁªìÊùüÂêéÈáäÊîæÈîÅ 2PL ÁöÑÈóÆÈ¢òÔºö Á≥ªÁªüÂêûÂêêÈáèÂíåÊü•ËØ¢ÂìçÂ∫îÊó∂Èó¥Áõ∏ÂØπ‰∫éÂº±ÈöîÁ¶ªÁ∫ßÂà´‰∏ãÈôçÂæàÂ§ö ÈîÅÁöÑÂºÄÈîÄÂ§öÔºõ‰∫ãÂä°ÁöÑÂπ∂ÂèëÊÄßÈôç‰Ωé ËÆøÈóÆÂª∂Ëøü‰∏çÁ°ÆÂÆöÊÄßÈ´ò Ê≠ªÈîÅÈóÆÈ¢òÔºåÂ¶ÇÊûúÊ£ÄÊµãÂà∞Ê≠ªÈîÅÔºå‰∫ãÂä°‰ºöË¢´Âº∫Ë°å‰∏≠Ê≠¢ÔºàÂ∫îÁî®Â±ÇÂèØÈÄâÊã©ÈáçËØïÔºâ Ë∞ìËØçÈîÅÔºö ‰∏çÂ±û‰∫éÁâπÂÆöÁöÑÂØπË±°Ôºå‰ΩúÁî®‰∫éÁâπÂÆöÁöÑÊêúÁ¥¢Êù°‰ª∂Êü•ËØ¢Âà∞ÁöÑÊâÄÊúâÂØπË±° ÂèØ‰ª•‰øùÊä§Êï∞ÊçÆÂ∫ì‰∏≠Â∞ö‰∏çÂ≠òÂú®‰ΩÜÂèØËÉΩÈ©¨‰∏ä‰ºöË¢´ÊèíÂÖ•ÁöÑÂØπË±°Ôºà‰ºöÂºïËµ∑ÂπªËØªÔºâ 2PL ÂíåË∞ìËØçÈîÅÁªìÁõüÔºåÂèØÈòªÊ≠¢‰ªª‰ΩïÂΩ¢ÂºèÁöÑÂÜôÂÄæÊñúÂíåÂÖ∂ÂÆÉÁ´û‰∫âÊù°‰ª∂Ôºå‰ΩøÂæóÈöîÁ¶ªÁúüÊ≠£‰∏≤Ë°åÂåñ Áº∫ÁÇπÔºöÊÄßËÉΩ‰∏ç‰Ω≥ Á¥¢ÂºïÂå∫Èó¥ÈîÅÔºànext-key lockingÔºâ Ê†∏ÂøÉÂ∞±ÊòØÂ∞Ü‰øùÊä§ÂØπË±°Êâ©Â§ßÂåñÔºå‰∏çÂ¶Ç‰∏∫Ë∞ìËØçÈîÅÁ≤æÁ°ÆÔºå‰ΩÜÂºÄÈîÄ‰ΩéÔºåÊâÄ‰ª•ÂÆûË∑µ‰∏≠Â∏∏Áî® ‰ºöÂØπÂêàÈÄÇÁöÑÁ¥¢ÂºïÂä†Âå∫Èó¥ÈîÅÔºåÂ¶ÇÊûúÊ≤°ÊúâÂêàÈÄÇÁöÑÁ¥¢ÂºïÔºåÂ∞±ÂõûÈÄÄÂà∞Êï¥Âº†Ë°®Âä†ÂÖ±‰∫´ÈîÅ ÂèØ‰∏≤Ë°åÂåñÂø´ÁÖßÈöîÁ¶ªÔºàSerializable Snapshot Isolation, SSIÔºâ SSI ÊòØ‰πêËßÇ‰∫ãÂä°Ê®°ÂûãÂÆûÁé∞ÔºåÂ¶ÇÊûúÂèØËÉΩÂèëÁîüÂÜ≤Á™ÅÔºå‰πü‰∏ç‰ºöÈòªÊ≠¢‰∫ãÂä°Êèê‰∫§ÔºåËÄåÊòØÂú®ÁúüÊ≠£Êèê‰∫§Êó∂Ê£ÄÊü•ÊòØÂê¶ÂèëÁîü‰∫ÜÂÜ≤Á™ÅÔºàÂç≥ËøùÂèçÈöîÁ¶ªÊÄßÂéüÂàôÔºâÔºåÂ¶ÇÊûúÊòØÔºåÂàô‰ºö‰∏≠Ê≠¢Âπ∂Êé•‰∏ãÊù•ÈáçËØï„ÄÇ ÈÄÇÁî®‰∫é‰∫ãÂä°‰πãÈó¥Á´û‰∫â‰∏çÂ§ßÔºåÂÜ≤Á™ÅËæÉÂ∞ëÁöÑÂú∫ÊôØÔºå‰ºöÊØîÊÇ≤ËßÇÊñπÂºèÈ´òÊïàÂæàÂ§öÔºàÊâÄ‰ª•‰πüÊØîËæÉÈÄÇÁî®‰∫é‰∫íËÅîÁΩëÁéØÂ¢ÉÔºâ„ÄÇ ‰∫ãÂä°Êó†ÈúÄÁ≠âÂæÖÂÖ∂ÂÆÉ‰∫ãÂä°ÊâÄÊåÅÊúâÁöÑÈîÅÔºåË¶ÅÊ±ÇËØªÂÜôÂûã‰∫ãÂä°Ë¶ÅÁÆÄÁü≠ÔºàÈïøÊó∂Èó¥ÁöÑËØªÂèñ‰∫ãÂä°Ê≤°ÊúâÈôêÂà∂Ôºâ ÂèÇËÄÉ „ÄäÊï∞ÊçÆÂØÜÈõÜÂûãÂ∫îÁî®ËÆæËÆ°„ÄãÁ¨¨‰∫åÈÉ®ÂàÜ Áü•‰πéÔºöSQL ÂõõÁßçÈöîÁ¶ªÁ∫ßÂà´ÁöÑËã•Âπ≤Ëø∑ÊÉëÔºü Êï∞ÊçÆÂ∫ì‰∫ãÂä°ÈöîÁ¶ªÊ†áÂáÜÂàÜÊûê]]></content>
      <categories>
        <category>Á≥ªÁªüËÆæËÆ°</category>
      </categories>
      <tags>
        <tag>„ÄäÊï∞ÊçÆÂØÜÈõÜÂûãÂ∫îÁî®ËÆæËÆ°„Äã</tag>
        <tag>‰∫ãÂä°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈáéÁå™üêó‰π¶ËØª‰π¶Á¨îËÆ∞‰πãÊï∞ÊçÆÂ§çÂà∂ÂíåÂàÜÂå∫]]></title>
    <url>%2F2019%2F08%2F18%2Fddia-data-replication-and-partition%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄÂÆåÊàêÁ¨¨‰∏ÄÈÉ®ÂàÜÁöÑÊï∞ÊçÆÁ≥ªÁªüÂü∫Á°ÄÂ≠¶‰π†ÂêéÔºåÂ∞±ÂºÄÂßãËøõÂÖ•ÂàÜÂ∏ÉÂºèÊï∞ÊçÆÁ≥ªÁªüÁöÑ‰∏ñÁïå‰∫Ü„ÄÇÂâçÈù¢Â≠¶‰π†ÁöÑÂÜÖÂÆπ‰∏ªË¶ÅÊòØÈíàÂØπÂçïËäÇÁÇπÁöÑÊÉÖÂÜµÔºõÁÑ∂ËÄåÔºåÂú®Áé∞ÂÆû‰∏≠ÔºåÊàë‰ª¨ÈúÄË¶ÅËÄÉËôëÂà∞Á≥ªÁªüÁöÑÊâ©Â±ïÊÄß„ÄÅÂÆπÈîôÊÄß‰ª•ÂèäÂª∂ËøüÊÄßÁ≠âÔºåËøôÂ∞±ÂºïÂÖ•‰∫ÜÂàÜÂ∏ÉÂºèÁ≥ªÁªü„ÄÇÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠ÈÄöÂ∏∏‰ºöÊúâÂæàÂ§ö‰∏™ËäÇÁÇπÔºåÂ§çÊùÇÂ∫¶Ëá™ÁÑ∂‰πü‰∏äÊù•‰∫Ü„ÄÇËøô‰∏™ÈÉ®ÂàÜÂ∞Ü‰∏ªË¶ÅÂ≠¶‰π†Êï∞ÊçÆÁ≥ªÁªüÁöÑÂ§çÂà∂„ÄÅÂàÜÂå∫„ÄÅ‰∫ãÂä°„ÄÅ‰∏ÄËá¥ÊÄßÂÖ±ËØÜÁÆóÊ≥ï„ÄÅ‰ª•ÂèäÂàÜÂ∏ÉÂºèÁ≥ªÁªüËÆæËÆ°Êó∂ÁöÑ‰∏Ä‰∫õÊåëÊàòÁ≠âÔºåËøô‰∫õÁü•ËØÜÈÉΩÊØîËæÉÁ°¨Ê†∏Ôºå‰πüÈùûÂ∏∏ÊúâË∂£„ÄÇÊâÄ‰ª•Ôºå„Äå‰∏äËΩ¶ÔºåËµ∞Âêß~„Äç Êú¨ÁØáÁ¨îËÆ∞ÈáçÁÇπÊòØÂÖ≥‰∫éÊï∞ÊçÆÁ≥ªÁªüÁöÑÂ§çÂà∂ÂíåÂàÜÂå∫ÔºåÂèØ‰ª•‰∫ÜËß£‰∏ãÂ∏∏ËßÑÁöÑ‰∏ª‰ªéÂ§çÂà∂ÂéüÁêÜ„ÄÅÂ§ö‰∏ªÂ§çÂà∂ÁöÑÂ∫îÁî®Âú∫ÊôØÔºåÂè¶Â§ñËøò‰ªãÁªç‰∫ÜÊó†‰∏ªÂ§çÂà∂ÁöÑÁ≥ªÁªüÔºàÂ¶Ç‰∫öÈ©¨ÈÄä Dynamo Á≥ªÁªüÔºâ„ÄÇÊúÄÂêéÂ∞±ÊòØÂÖ≥‰∫éÊï∞ÊçÆÂàÜÂå∫ÁöÑ‰ªãÁªçÔºåÂèØ‰ª•‰∫ÜËß£‰∏ãÂ∏∏ËßÅÁöÑÂàÜÂå∫Á≠ñÁï•ÔºåÂä®ÊÄÅÂπ≥Ë°°Á≠ñÁï•Á≠â„ÄÇ ‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂàÜÂ∏ÉÂºèÁ≥ªÁªüÔºüÂÖ±‰∫´Êû∂ÊûÑÈíàÂØπÂÖ±‰∫´Êû∂ÊûÑÔºåÂ¶ÇÊûúË¥üËΩΩÂ¢ûÂä†ÔºåÊúÄÂ∏∏ËßÅÁöÑÊâ©Â±ïÊñπÂºèÂ∞±ÊòØÈáá‰π∞Êõ¥Âº∫Â§ßÁöÑ CPU„ÄÅÊ∑ªÂä†Êõ¥Â§öÁöÑÂÜÖÂ≠òÁ≠â„ÄÇËøôÁßçË¢´Áß∞‰∏∫ÂûÇÁõ¥Êâ©Â±ïÔºå‰ΩÜÊòØËøôÁßçÊñπÂºèÂπ∂‰∏ç‰∏ÄÂÆöÂ•èÊïàÔºåÂ§©Ëä±ÊùøÊòØÁúãÂæóËßÅÁöÑ„ÄÇÂπ∂‰∏îÊâ©Â±ïÁöÑÊàêÊú¨ÈùûÁ∫øÊÄßÔºåËÄåÂ∫îÂØπË¥üËΩΩÁöÑËÉΩÂäõÂç¥‰∏ç‰∏ÄÂÆöËÉΩÁ∫øÊÄßÊèêÈ´ò„ÄÇ Êó†ÂÖ±‰∫´Êû∂ÊûÑÂú®Êó†ÂÖ±‰∫´Êû∂ÊûÑ‰∏≠ÔºåÊØè‰∏™ËäÇÁÇπ‰ΩøÁî®Áã¨Á´ãÁöÑ CPU„ÄÅÂÜÖÂ≠òÂíåÁ£ÅÁõòÔºåËäÇÁÇπ‰πãÈó¥ÁöÑÈÄö‰ø°ÈááÁî®‰ª•Â§™ÁΩë„ÄÇËØ•Êû∂ÊûÑÊó†ÈúÄÁâπÊÆäÁöÑÁ°¨‰ª∂ÊîØÊåÅÔºåÊÄß‰ª∑ÊØîÈ´ò„ÄÇÊâ©Â±ïÊÄßÂ•ΩÔºàÊ∞¥Âπ≥Êâ©Â±ïÔºâÔºåÂπ∂‰∏îÊúâÂº∫Â§ßÁöÑÂÆπÈîôËÉΩÂäõÂíåË¥üËΩΩÂùáË°°ËÉΩÂäõ„ÄÇ‰∏çËøáËøôÁßçÊû∂ÊûÑÊúÄÂ§ßÁöÑÈóÆÈ¢òÊòØ‰ºöÂ∏¶Êù•Êõ¥Â§ßÁöÑÂ§çÊùÇÊÄßÔºåÁîöËá≥‰ºöÈôêÂà∂ÂÆûÈôÖÂèØ‰ΩøÁî®ÁöÑÊï∞ÊçÆÊ®°Âûã„ÄÇ Êï∞ÊçÆÂ§çÂà∂‰∏ªËäÇÁÇπÂíå‰ªéËäÇÁÇπ ÊØè‰∏™‰øùÂ≠ò‰∫ÜÊï∞ÊçÆÂ∫ìÂÆåÊï¥Êï∞ÊçÆÈõÜÁöÑËäÇÁÇπÂè´‰ΩúÂâØÊú¨ ‰∏ª‰ªéÂ§çÂà∂ÊñπÊ°àÔºö ÊåáÂÆöÊüê‰∏™ÂâØÊú¨‰∏∫‰∏ªÂâØÊú¨Ôºà‰∏ªËäÇÁÇπÔºâ„ÄÇÂÜôÂÖ•‰ºöÂèëÁªô‰∏ªËäÇÁÇπ ‰∏ªËäÇÁÇπÂú®Â∞ÜÊñ∞Êï∞ÊçÆÂ≠òÂÇ®ÂêéÔºåÂ∞ÜÊõ¥Êîπ‰Ωú‰∏∫Â§çÂà∂ÁöÑÊó•ÂøóÊàñËÄÖÊõ¥ÊîπÊµÅÁöÑÊñπÂºèÂèëÁªô‰ªéËäÇÁÇπ„ÄÇ‰ªéËäÇÁÇπËé∑ÂèñÊõ¥ÊîπÊó•ÂøóÔºåÂπ∂Â∫îÁî®Âà∞Êú¨Âú∞ÔºåËøôÈáåÂøÖÈ°ªË¶Å‰øùÊåÅÂíå‰∏ªÂâØÊú¨Áõ∏ÂêåÁöÑÂÜôÂÖ•È°∫Â∫è ÂÆ¢Êà∑Á´ØËØªÂèñÊó∂ÔºåÂèØËØªÂèñ‰ªéÂâØÊú¨ÁöÑÊï∞ÊçÆ ÂêåÊ≠•Â§çÂà∂ v.s. ÂºÇÊ≠•Â§çÂà∂ ÂØπ‰∫éÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÔºå‰∏§ÁßçÂ§çÂà∂ÊñπÂºèÈÄöÂ∏∏ÊòØÂèØÈÖçÁΩÆÁöÑÔºõËÄåÂÖ∂‰ªñÁ≥ªÁªüÂèØËÉΩÂè™ÂèØÊåáÂÆöÂÖ∂‰∏≠‰∏ÄÁßçÊñπÂºè„ÄÇ ÂêåÊ≠•Â§çÂà∂Ôºö ‰ºòÁÇπÔºö‰∏ÄÊó¶ÂêëÁî®Êà∑Á°ÆËÆ§ÂÜôÂÖ•ËØ∑Ê±ÇÔºåÂàô‰∏ª‰ªéÊï∞ÊçÆ‰∏ÄËá¥ÔºåÂπ∂ÈÉΩÂ§Ñ‰∫éÊúÄÊñ∞ÁâàÊú¨„ÄÇ‰∏ªÂ∫ìÂÆïÊú∫Ôºå‰πüÂèØ‰ª•ÊîæÂøÉ‰ªé‰ªéÂ∫ìËØªÂèñ„ÄÇ Áº∫ÁÇπÔºöÂ¶ÇÊûú‰ªéËäÇÁÇπÊó†Ê≥ïÂÆåÊàêÁ°ÆËÆ§ÔºàÂ¶ÇÁΩëÁªúÊã•Â°û„ÄÅÊïÖÈöúÁ≠âÔºâÔºåÂÜôÂÖ•‰ºöÂ§±Ë¥•„ÄÇ‰∏ªËäÇÁÇπ‰ºöÈòªÂ°ûÂêéÁª≠ÂÜôËØ∑Ê±ÇÔºåÈôç‰ΩéÁ≥ªÁªüÂêûÂêêÈáèÂíåÂèØÈù†ÊÄß„ÄÇ ÂçäÂêåÊ≠•ÔºöÂÆûË∑µ‰∏≠ÔºåÂ¶ÇÊûúÂºÄÂêØ‰∫ÜÂêåÊ≠•Â§çÂà∂Ê®°ÂºèÔºåÈÄöÂ∏∏ÊòØÂÖ∂‰∏≠ÁöÑÊüê‰∏™‰ªéËäÇÔºàÂèØÊ†πÊçÆÊÉÖÂÜµÈÄâÊã©ÂÖ∂‰ªñ‰ªéËäÇÁÇπÊèêÂçá‰∏∫ÂêåÊ≠•Ê®°ÂºèÔºâÁÇπ‰∏∫ÂêåÊ≠•Â§çÂà∂ÔºåËÄåÂÖ∂‰ªñ‰∏∫ÂºÇÊ≠•Â§çÂà∂Ê®°Âºè„ÄÇ ÂÖ®ÂºÇÊ≠•Ôºö ‰ºòÁÇπÔºöÁ≥ªÁªüÁöÑÂêûÂêêÊÄßËÉΩÂæàÂ•Ω Áº∫ÁÇπÔºöÊï∞ÊçÆÁöÑÊåÅ‰πÖÂåñÊó†Ê≥ïÂæóÂà∞‰øùËØÅÔºåÂèØËÉΩÂ≠òÂú®Êï∞ÊçÆ‰∏¢Â§±ÁöÑÊÉÖÂÜµ ÈÖçÁΩÆÊñ∞ÁöÑ‰ªéËäÇÁÇπ ‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶ÅÔºü ÊèêÈ´òË¥üËΩΩËÉΩÂäõ Êèê‰æõÂÆπÈîôËÉΩÂäõ ÊõøÊç¢Â§±Ë¥•ÁöÑÂâØÊú¨ Ë¶ÅÊÉ≥ÂÅöÂà∞‰∏çÂÅúÊú∫ÂÆåÊàêÊñ∞ËäÇÁÇπÊ∑ªÂä†ÔºåÈÄªËæë‰∏ä‰∏ªË¶ÅÊìç‰ΩúÂ¶Ç‰∏ãÔºö ÁîüÊàêÂø´ÁÖßÔºöÂú®ÊüêÂàªÂØπ‰∏ªËäÇÁÇπÁöÑÊï∞ÊçÆÂâØÊú¨‰∫ßÁîü‰∏Ä‰∏™‰∏ÄËá¥ÊÄßÂø´ÁÖßÔºàÈÅøÂÖçÈïøÊó∂Èó¥ÈîÅÂ∫ìÔºâ Âø´ÁÖßÂèëÈÄÅÔºöÂø´ÁÖßÂèëÈÄÅÂà∞Êñ∞ÁöÑ‰ªéËäÇÁÇπÔºàËøôÊ†∑Â§ßÈÉ®ÂàÜÁöÑÂéÜÂè≤Êï∞ÊçÆÂ∞±Êúâ‰∫ÜÔºâ ÂèòÊõ¥Êó•ÂøóÔºö‰ªéËäÇÁÇπ‰∏äÁ∫øËøûÊé•Âà∞‰∏ªËäÇÁÇπÔºåËØ∑Ê±ÇÂø´ÁÖßÁÇπ‰πãÂêéÂèëÁîüÁöÑÊâÄÊúâÊï∞ÊçÆÊõ¥ÊîπÊó•ÂøóÔºàÂ¢ûÈáèÔºâ ËøΩËµ∂ÔºöËé∑ÂæóÊó•ÂøóÂêéÔºå‰ªéËäÇÁÇπÂ∫îÁî®Âø´ÁÖßÂêéÁöÑÊï∞ÊçÆÂèòÊõ¥„ÄÇÁªßÁª≠Â§ÑÁêÜ‰∏ªËäÇÁÇπ‰∏äÊñ∞Êï∞ÊçÆÂèòÂåñ„ÄÇÂπ∂ÈáçÂ§çÊ≠•È™§ 1~4 ËäÇÁÇπÂ§±ÊïàÊÄé‰πàÂäûÔºü ‰ªéËäÇÁÇπÂ§±ÊïàÔºöËøΩËµ∂ÂºèÊÅ¢Â§ç„ÄÇ‰ªéËäÇÁÇπÂèØÊ†πÊçÆÂâØÊú¨ÁöÑÂ§çÂà∂Êó•ÂøóÂæóÁü•ÊïÖÈöúÂâçÊúÄÂêé‰∏ÄÁ¨î‰∫ãÂä°ÔºåÁÑ∂ÂêéÂêë‰∏ªËäÇÁÇπËØ∑Ê±ÇËØ•‰∫ãÂä°‰πãÂêé‰∏≠Êñ≠ÊúüÈó¥ÂÜÖÁöÑÊâÄÊúâÊï∞ÊçÆÂèòÊõ¥ÔºåÂπ∂Â∫îÁî®ÂèòÊõ¥ÔºåÂÆåÊàêËøΩËµ∂„ÄÇ ‰∏ªËäÇÁÇπÂ§±ÊïàÔºöËäÇÁÇπÂàáÊç¢Ôºö ÊïÖÈöúÂàáÊç¢ÂèØÊâãÂä®ÔºåÂèØËá™Âä®„ÄÇ Ëá™Âä®ÂàáÊç¢Â∏∏ËßÑÊ≠•È™§Ôºö Á°ÆÂÆö‰∏ªËäÇÁÇπÂ§±Êïà„ÄÇÂ§öÈááÁî®Âü∫‰∫éË∂ÖÊó∂ÁöÑÊú∫Âà∂ÔºåÂèØ‰ª•Âë®ÊúüÊÄßÂú∞ÂèëÈÄÅÂøÉË∑≥ÂåÖ„ÄÇ ÈÄâ‰∏æÊñ∞ÁöÑ‰∏ªËäÇÁÇπ„ÄÇÊ∂âÂèäÂà∞ÂÖ±ËØÜÁöÑÁÆóÊ≥ïÔºåÂéüÂàôÊòØË¶Å‰øùËØÅÊñ∞ÁöÑ‰∏ªËäÇÁÇπ‰∏éÂéüÊù•ÁöÑÊï∞ÊçÆÂ∑ÆÂºÇÊúÄÂ∞èÔºåÂ∞ΩÂèØËÉΩÂáèÂ∞ëÊï∞ÊçÆ‰∏¢Â§±È£éÈô©„ÄÇ ÈáçÊñ∞ÈÖçÁΩÆÁ≥ªÁªüÔºåÁîüÊïà‰∏ªËäÇÁÇπ„ÄÇÂÆ¢Êà∑Á´ØÈúÄË¶ÅÂ∞ÜÂÜôËØ∑Ê±ÇÂèëÈÄÅÂà∞Êñ∞ÁöÑ‰∏ªËäÇÁÇπÔºåÂØπ‰∫éÂéü‰∏ªËäÇÁÇπÊÅ¢Â§çÂêéÈúÄË¶ÅÁ°Æ‰øùÂÖ∂Ë¢´ÈôçÁ∫ß‰∏∫‰ªéËäÇÁÇπÔºåËÆ§ÂèØÊñ∞ÁöÑ‰∏ªËäÇÁÇπ„ÄÇ ÈúÄË¶ÅÊÄùËÄÉÁöÑÈóÆÈ¢òÔºö Â¶ÇÊûúÈááÁî®ÂºÇÊ≠•Â§çÂà∂ÔºåÊñ∞ÁöÑ‰∏ªËäÇÁÇπÈÄâ‰∏æÂêéÔºåÂéü‰∏ªËäÇÁÇπ‰πü‰∏äÁ∫øÔºåÊñ∞ÁöÑ‰∏ªËäÇÁÇπÂèØËÉΩ‰ºöÊî∂Âà∞ÂÜôÂÜ≤Á™Å„ÄÇÁÆÄÂçïÁ≤óÊö¥ÁöÑÊñπÂºèÂ∞±ÊòØÔºåÊäõÂºÉÂéü‰∏ªËäÇÁÇπÊú™ÂÆåÊàêÂ§çÂà∂ÁöÑÂÜôËØ∑Ê±ÇÔºåËøùËÉåÊï∞ÊçÆÊåÅ‰πÖÂåñÊâøËØ∫„ÄÇ ËÑëË£ÇÔºàBrain-SplitÔºâÈóÆÈ¢òÔºå‰∏§‰∏™‰∏ªËäÇÁÇπÈÉΩÊé•Êî∂ÂÜôËØ∑Ê±ÇÔºå‰ºöÂØºËá¥Êï∞ÊçÆÂÜ≤Á™Å„ÄÅ‰∏¢Â§±ÊàñËÄÖÁ†¥ÂùèÁ≠â„ÄÇÂèØÁ≤óÊö¥Âú∞ÂÖ≥Èó≠Êüê‰∏™‰∏ªËäÇÁÇπ„ÄÇ Ë∂ÖÊó∂ËÆæÁΩÆÂ§ö‰πÖÊâçÂêàÈÄÇÔºüÂ§™ÈïøÔºåÊÑèÂë≥ÁùÄ‰∏ªËäÇÁÇπÂÆïÊú∫ÂêéÔºåÊÄª‰ΩìÊÅ¢Â§çÊó∂Èó¥ÂèòÈïøÔºõÂ§™Áü≠Ôºå‰ºöÂØºËá¥ÂæàÂ§ö‰∏çÂøÖË¶ÅÁöÑÂàáÊç¢„ÄÇÂ∞§ÂÖ∂ÊòØÁ≥ªÁªüÂ§Ñ‰∫éÈ´òË¥üËΩΩÁöÑÂéãÂäõ‰∏ãÔºåÂêåÊó∂ÁΩëÁªúÊã•Â°û‰∏•ÈáçÔºå‰∏çÂøÖË¶ÅÁöÑÂàáÊç¢‰ºöÂØºËá¥ÊÉÖÂÜµÊõ¥Âä†Á≥üÁ≥ï„ÄÇ Â§çÂà∂Êó•ÂøóÂ¶Ç‰ΩïÂÆûÁé∞ Âü∫‰∫éËØ≠Âè•ÁöÑÂ§çÂà∂Ôºö ÁúãËµ∑Êù•‰∏çÂ§çÊùÇ ‰∏çÈÄÇÁî®ÁöÑÂú∫ÊôØÔºöË∞ÉÁî®ÈùûÁ°ÆÂÆöÊÄßÂáΩÊï∞ÁöÑËØ≠Âè•ÔºõÂâØÊú¨ÈúÄË¶Å‰∏•Ê†ºÊåâÁÖßÂÆåÂÖ®Áõ∏ÂêåÁöÑÈ°∫Â∫èÊâßË°åËØ≠Âè•ÔºàÈíàÂØπ‰æùËµñÊï∞ÊçÆÂ∫ìÁöÑÁé∞ÊúâÊï∞ÊçÆÁöÑÊÉÖÂÜµÔºâÔºõÊúâÂâØ‰ΩúÁî®ÁöÑËØ≠Âè•ÔºåÂú®‰∏çÂêåÁöÑËäÇÁÇπÂèØËÉΩ‰ºö‰∫ßÁîü‰∏çÂêåÁöÑÂâØ‰ΩúÁî® Âü∫‰∫é WAL ‰º†ËæìÔºö ÂèØ‰ª•Âü∫‰∫é WAL ÊûÑÂª∫‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂâØÊú¨ Êó•ÂøóÊèèËø∞ÁöÑÊï∞ÊçÆÁªìÊûÑÂæàÂ∫ïÂ±ÇÔºåÂ§çÂà∂ÊñπÊ°à‰∏éÂ≠òÂÇ®ÂºïÊìéÁ¥ßÂØÜËÄ¶ÂêàÔºõÂçèËÆÆÁâàÊú¨ÂçáÁ∫ßÈúÄË¶ÅÈ°æËôëÁöÑËæÉÂ§ö Âü∫‰∫éË°åÁöÑÈÄªËæëÊó•ÂøóÂ§çÂà∂Ôºö ÈÄªËæëÊó•ÂøóÔºåÂå∫ÂàÜÁâ©ÁêÜÂ≠òÂÇ®ÂºïÊìéÁöÑÊï∞ÊçÆË°®Á§∫„ÄÇÊèèËø∞Êï∞ÊçÆË°®Ë°åÁ∫ßÂà´ÁöÑÂÜôËØ∑Ê±Ç„ÄÇ ‰∏éÂ≠òÂÇ®ÂºïÊìéÈÄªËæëËß£ËÄ¶Ôºå‰æø‰∫é‰øùÊåÅÂêëÂêéÂÖºÂÆπ„ÄÇËøôÊ†∑‰∏ª‰ªéËäÇÁÇπÁîöËá≥ÂèØ‰ª•ËøêË°å‰∏çÂêåÁöÑÁâàÊú¨ÊàñËÄÖ‰ΩøÁî®‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìé„ÄÇ ÂÆπÊòìËß£ÊûêÔºåÊòì‰∫éÂ§ñÈÉ®Á≥ªÁªüÂ§ÑÁêÜ Âü∫‰∫éËß¶ÂèëÂô®ÁöÑÂ§çÂà∂ÔºöÁªôÂ∫îÁî®Â±ÇÊèê‰æõ‰∫Ü‰∏ÄÂÆöÁöÑÁÅµÊ¥ªÊÄßÔºå‰ΩÜÊòØÂ§çÂà∂ÂºÄÈîÄÊõ¥È´ò„ÄÇ Â§çÂà∂ÊªûÂêéÈóÆÈ¢òËØªËá™Â∑±ÁöÑÂÜôÔºàRead After WriteÔºâ ËØ•Êú∫Âà∂Ë¶Å‰øùËØÅÁî®Êà∑ÊÄªËÉΩÁúãÂà∞Ëá™Â∑±ÊúÄËøëÊèê‰∫§ÁöÑÊõ¥Êñ∞„ÄÇ Â¶Ç‰ΩïÂÆûÁé∞Ôºü Â¶ÇÊûúÁî®Êà∑ËÆøÈóÆÂèØËÉΩË¢´‰øÆÊîπÁöÑÂÜÖÂÆπÔºåÂàô‰ªé‰∏ªËäÇÁÇπËØªÔºõÂê¶Âàô‰ªé‰ªéËäÇÁÇπËØª„ÄÇ ÈíàÂØπÂ§ßÈÉ®ÂàÜÈÉΩ‰ºöË¢´‰øÆÊîπÁöÑÂú∫ÊôØÔºå‰∏äËø∞ÊñπÂºè‰ºö‰∏ßÂ§±‰ªéËäÇÁÇπÁöÑÂ≠òÂú®ÊÑè‰πâ„ÄÇÂèØ‰ª•ËÄÉËôëË∑üË∏™ÊúÄÊñ∞ÁöÑÊõ¥Êñ∞Êó∂Èó¥ÔºåÂØπ‰∫éÊõ¥Êñ∞Êó∂Èó¥Âú®ÊúÄËøë‰∏ÄÂàÜÈíüÁöÑÔºå‰ªé‰∏ªËäÇÁÇπËØªÂèñ„ÄÇÂêåÊó∂ÈúÄË¶ÅÊ∑ªÂä†ÁõëÊéß„ÄÇ ÂçïË∞ÉËØª Áî®Êà∑Âú®ËØªÂèñ‰øÆÊîπ‰∫ÜÁöÑÊï∞ÊçÆÊó∂ÔºåÂá∫Áé∞„ÄåÂõûÊªö„ÄçÁöÑÁé∞Ë±°„ÄÇ‰πüÂ∞±ÊòØÊòéÊòé‰øÆÊîπ‰∫ÜÔºåÂπ∂‰∏îÁ¨¨‰∏ÄÊ¨°ËØªÁöÑÊó∂ÂÄôÁúãÂà∞‰∫ÜÊñ∞ÁöÑÊï∞ÊçÆÔºå‰ΩÜÊòØÂú®Á¨¨‰∫åÊ¨°ËØªÂèñÁöÑÊó∂ÂÄôÂç¥ÁúãÂà∞‰∫ÜÊóßÁöÑÊï∞ÊçÆÔºàÂ§öËäÇÁÇπÊï∞ÊçÆÊú™ÂêåÊ≠•Ôºâ„ÄÇ ÂçïË∞ÉËØªË¶ÅÊèê‰æõÁöÑ‰øùËØÅÂ∞±ÊòØÈÅøÂÖçËøôÁßçÂ•áÊÄ™ÁöÑÂõûÊªöÁé∞Ë±°ÔºåÂÆÉÊØîÂº∫‰∏ÄËá¥ÊÄßË¶ÅÂº±Ôºå‰ΩÜÊØîÊúÄÁªà‰∏ÄËá¥ÊÄßË¶ÅÂº∫„ÄÇ ÂèØËÉΩÁöÑËß£ÂÜ≥ÊñπÊ°àÔºöÂèØ‰ª•ËÄÉËôëÂêå‰∏Ä‰∏™Áî®Êà∑ÊÄªÊòØ‰ªéÊüê‰∏™Âõ∫ÂÆöÁöÑÂâØÊú¨ËØªÂèñÔºà‰∏çÂêåÁöÑÁî®Êà∑ÂàÜÂèëÂà∞‰∏çÂêåÁöÑÂâØÊú¨Ôºâ„ÄÇ ÂâçÁºÄ‰∏ÄËá¥ËØª ËØ•Êú∫Âà∂Ë¶Å‰øùËØÅÂØπ‰∫é‰∏ÄÁ≥ªÂàóÊåâÁÖßÁâπÂÆöÈ°∫Â∫èÁöÑÂÜôËØ∑Ê±ÇÔºåÂú®ËØªÂèñËøô‰∫õÂÜÖÂÆπÊó∂Ë¶ÅË¶ÅÈÅµÂæ™ÂêåÊ†∑ÁöÑÈ°∫Â∫è„ÄÇÂê¶ÂàôÂèØËÉΩ‰ºöÁúãÂà∞ÂÖàÊúâÊûúÔºåÂÜçÊúâÂõ†ÁöÑÂ•áÊÄ™Áé∞Ë±°Ôºå‰ªø‰ΩõÈÅáÂà∞‰∫ÜÂÖàÁü•„ÄÇ ÂèØËÉΩÁöÑËß£ÂÜ≥ÊñπÊ°àÔºöÁ°Æ‰øùÊã•ÊúâÂõ†ÊûúÂÖ≥Á≥ªÁöÑÂÜôÂÖ•ÈÉΩÊèê‰∫§ÁªôÊüê‰∏™ÁâπÂÆöÂàÜÂå∫ÂÆåÊàêÔºå‰ΩÜÊòØÂÆûÈôÖÊïàÁéáÊØîËæÉ‰Ωé„ÄÇ Â§ö‰∏ªËäÇÁÇπÂ§çÂà∂ ‰∏ª‰ªéÊ®°ÂºèÁöÑÁº∫ÁÇπÔºöÁ≥ªÁªü‰ªÖÊúâ‰∏Ä‰∏™‰∏ªËäÇÁÇπÔºåÊâøËΩΩÊâÄÊúâÁöÑÂÜôËØ∑Ê±Ç„ÄÇÂ¶ÇÊûú‰∏ªËäÇÁÇπÂÆïÊú∫Ôºå‰ºöÂΩ±ÂìçÊâÄÊúâÁöÑÂÜôÂÖ•Êìç‰Ωú„ÄÇ Â§ö‰∏ªËäÇÁÇπÂ§çÂà∂Ôºö ÊØè‰∏™‰∏ªËäÇÁÇπÂàÜÂà´Êé•ÂèóÂÜôËØ∑Ê±ÇÔºåÂπ∂Â§çÂà∂ÔºàÂºÇÊ≠• or ÂêåÊ≠•ÔºâÁªôÂØπÂ∫îÁöÑ‰ªéËäÇÁÇπ ÊØè‰∏™‰∏ªËäÇÁÇπÊâÆÊºîÂÖ∂ÂÆÉ‰∏ªËäÇÁÇπÁöÑ‰ªéËäÇÁÇπ ÈÄÇÁî®Âú∫ÊôØ Â§öÊï∞ÊçÆ‰∏≠ÂøÉ Á¶ªÁ∫øÂÆ¢Êà∑Á´ØÊìç‰ΩúÔºàÂÖ∏ÂûãÁöÑ‰æãÂ≠êÊòØ WizNoteÔºâÔºåÊØè‰∏™ËÆæÂ§áÈÉΩÂÖÖÂΩì‰∏ªËäÇÁÇπÁöÑÊú¨Âú∞Êï∞ÊçÆÂ∫ìÔºåËÆæÂ§á‰πãÈó¥ÈááÁî®ÂºÇÊ≠•ÂêåÊ≠•ÊñπÂºèÂÆåÊàêÊï∞ÊçÆÂêåÊ≠•„ÄÇÂêåÊ≠•ÊªûÂêéÊó∂Èó¥‰∏çÂÆö„ÄÇ Âçè‰ΩúÁºñËæë Êó†‰∏ªËäÇÁÇπÂ§çÂà∂ ‰∫öÈ©¨ÈÄäÁöÑ Dynamo Á≥ªÁªüÊòØÂÖ∏ÂûãÁöÑ‰ª£Ë°®ÔºåRiak„ÄÅCassandra ‰πüÂèóÂà∞‰∫ÜÂêØÂèë„ÄÇ ÂÆ¢Êà∑Á´ØÁõ¥Êé•Â∞ÜÂÜôËØ∑Ê±ÇÂèëÈÄÅÁªôÂ§ö‰∏™ÂâØÊú¨ÔºåÊàñËÄÖ‰∫§ÁªôÂçèË∞ÉËÄÖÔºà‰∏ç‰øùËØÅÂÜôÂÖ•È°∫Â∫èÔºâÊù•ÂèëÈÄÅ„ÄÇ Êï∞ÊçÆ‰∏ÄËá¥ÊÄß‰øùËØÅÔºü ËØªÊó∂‰øÆÂ§ç ÂèçÁÜµÔºöË°•ÂÅøÊú∫Âà∂ÔºåÂØªÊâæËäÇÁÇπ‰πãÈó¥ÁöÑÂ∑ÆÂºÇÔºåÂ∞ÜÁº∫Â∞ëÁöÑÊï∞ÊçÆÁªôË°•ÂÖÖÂ•Ω„ÄÇËØ•ËøáÁ®ã‰∏ç‰øùËØÅÁâπÂÆöÈ°∫Â∫èÁöÑÂ§çÂà∂ÂÜôÂÖ•„ÄÇ ËØªÂÜô quorumÔºö ‰øùËØÅÔºöw + r &gt; nÔºàÊÄªËäÇÁÇπÊï∞Ôºâ ÈÄöÂ∏∏ n ‰∏∫Â•áÊï∞Ôºåw = r = (n+1)/2 ÔºàÂêë‰∏äËàçÂÖ•Ôºâ quorum ‰∏ç‰∏ÄÂÆöÈùûÂæóÊòØÂ§öÊï∞ÔºåËØªÂÜôËäÇÁÇπÈõÜÂêà‰∏≠Ëá≥Â∞ëÊúâ‰∏Ä‰∏™ÊòØÈáçÂè†ÁöÑËäÇÁÇπÊâçÊúÄ‰∏∫ÂÖ≥ÈîÆÔºÅ ‰∏çËÉΩ‰øùËØÅÊÄªËÉΩËØªÂèñÂà∞ÊúÄÊñ∞ÂÄºÔºåDynamo Êï∞ÊçÆÂ∫ìÈÄöÂ∏∏ÈíàÂØπÊúÄÁªà‰∏ÄËá¥ÊÄßÂú∫ÊôØ‰ºòÂåñÁöÑ„ÄÇ Âπ∂ÂèëÊ£ÄÊµãÔºàËøôÂùóËøòÊòØÂª∫ËÆÆÁúã‰π¶‰∏≠ÁöÑ‰æãÂ≠êÂêßÔºâÔºö ÊúÄÂêéÂÜôÂÖ•ËÄÖËé∑ËÉúÔºàLWWÔºâÔºå‰∏¢ÂºÉÂπ∂ÂèëÂÜôÂÖ•„ÄÇÂèØÂÆûÁé∞ÊúÄÁªàÊî∂ÊïõÁõÆÊ†áÔºå‰ΩÜÊòØÁâ∫Áâ≤‰∫ÜÊï∞ÊçÆÊåÅ‰πÖÊÄß‰∏∫‰ª£‰ª∑„ÄÇ Happens-before ÂÖ≥Á≥ª‰∏éÂπ∂Âèë Á°ÆÂÆöÂâçÂêéÂÖ≥Á≥ªÔºö‰ΩøÁî®ÁâàÊú¨Âè∑ ÂêàÂπ∂ÂêåÊó∂ÂÜôÂÖ•ÁöÑÂÄº ÁâàÊú¨Áü¢Èáè Êï∞ÊçÆÂàÜÂå∫ ÂÆö‰πâÔºöÊØèÊù°Êï∞ÊçÆÔºàÊàñËÄÖËÆ∞ÂΩï„ÄÅÊñáÊ°£ÔºâÂè™Â±û‰∫éÊüê‰∏™ÁâπÂÆöÂàÜÂå∫ÔºåÊØè‰∏™ÂàÜÂå∫ÂèØËßÜ‰∏∫‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂ∞èÂûãÊï∞ÊçÆÂ∫ìÔºåÊòØÊï¥‰∏™Êï∞ÊçÆÈõÜÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ ‰∏∫‰ªÄ‰πàË¶ÅÂàÜÂå∫Ôºü ÊèêÈ´òÁ≥ªÁªüÊâ©Â±ïÊÄßÔºöÂ∞ÜÂ§ßÁöÑÊï∞ÊçÆÈõÜÂàÜÊï£Âà∞Êõ¥Â§öÁöÑËäÇÁÇπÔºåË¥üËΩΩÂùáË°° ÊèêÈ´òÊü•ËØ¢ÂêûÂêêÈáèÔºöË∑®ÂàÜÂå∫Âπ∂ÂèëÊü•ËØ¢ ÂàÜÂå∫ÂíåÂ§çÂà∂ÈÄöÂ∏∏ÁªìÂêà‰ΩøÁî®ÔºåÊØè‰∏™ÂàÜÂå∫Âú®Â§ö‰∏™ËäÇÁÇπ‰∏äÈÉΩÊúâÂâØÊú¨ÔºåÊèêÈ´òÁ≥ªÁªüÁöÑÂÆπÈîôÊÄßÔºö KV Êï∞ÊçÆÂàÜÂå∫ ÂàÜÂå∫ÂèØËÉΩÂ∏¶Êù•ÁöÑÈóÆÈ¢òÔºö ÂàÜÂå∫‰∏çÂùáÂåÄÔºå‰ºöÈÄ†ÊàêËÆøÈóÆÂÄæÊñúÁöÑÈóÆÈ¢òÔºåÁîöËá≥ÂèØËÉΩÈÄ†ÊàêÁÉ≠ÁÇπ ÂèØÈááÁî®ÈöèÊú∫ÂàÜÈÖçÂà∞ÊâÄÊúâËäÇÁÇπÈÅøÂÖçÁÉ≠ÁÇπÈóÆÈ¢òÔºå‰ΩÜÊòØÊü•ËØ¢‰ºöÂæàÂõ∞ÈöæÔºàÂèØËÉΩÈúÄË¶ÅÂπ∂ÂèëËØ∑Ê±ÇÊâÄÊúâÂàÜÂå∫Ôºâ Âü∫‰∫éÂÖ≥ÈîÆÂ≠óÂå∫Èó¥ÂàÜÂå∫Ôºö Ê†∏ÂøÉÊòØ‰∏∫ÊØè‰∏™ÂàÜÂå∫ÂàÜÈÖç‰∏ÄÊÆµËøûÁª≠ÁöÑÂÖ≥ÈîÆÂ≠óÊàñËÄÖÂÖ≥ÈîÆÂ≠óÂå∫Èó¥Ôºà‰ª•ÊúÄÂ∞èÂÄºÂíåÊúÄÂ§ßÂÄºÊù•Ë°®Á§∫Ôºâ ÂÖ≥ÈîÆÂ≠óÂå∫Èó¥ÊÆµ‰∏ç‰∏ÄÂÆöË¶ÅÂùáÂåÄÂàÜÂ∏É ÊîØÊåÅÂå∫Èó¥Êü•ËØ¢Êñπ‰æøÔºàÊúâ‰∏ÄÂÆöÈ°∫Â∫èÔºâ ÂèØËÉΩ‰ºöÊúâÁÉ≠ÁÇπÈóÆÈ¢òÔºàÊØîÂ¶ÇÊåâÁÖßÊó∂Èó¥Êà≥ËåÉÂõ¥ÂàíÂàÜÔºåÂèØËÉΩÊúÄÊñ∞ÁöÑÊó•ÊúüËØªÂÜôÂ∞±ÂæàÂ§öÔºâÔºåÂèØ‰ª•ËÄÉËôëÂÜçÊ∑ªÂä†Âà´ÁöÑÂ≠óÊÆµÊù•ÁªÑÂêàÂÜ≥ÂÆöÂàÜÂå∫ Âü∫‰∫éÂÖ≥ÈîÆÂ≠óÂìàÂ∏åÂÄºÂàÜÂå∫Ôºö Â•ΩÁöÑÂìàÂ∏åÂáΩÊï∞ÂèØÂ§ÑÁêÜÊï∞ÊçÆÂÄæÊñúÔºåÂùáÂåÄÂàÜÂ∏É ‰∏ßÂ§±ËâØÂ•ΩÁöÑÂå∫Èó¥Êü•ËØ¢ÁâπÊÄß Ë¥üËΩΩÂÄæÊñúÂíåÁÉ≠ÁÇπÔºö Âç≥‰æøÈÄöËøáÂìàÂ∏åÂÄºÂàÜÂå∫ÁöÑÊñπÊ°àÔºå‰πü‰∏çËÉΩÂÆåÂÖ®ÈÅøÂÖçÁÉ≠ÁÇπÈóÆÈ¢ò„ÄÇÊûÅÁ´ØÊÉÖÂÜµÊòØÔºåÊâÄÊúâÁöÑËØªÂÜôÈÉΩÈíàÂØπÂêå‰∏Ä‰∏™ÂÖ≥ÈîÆÂ≠óÔºàÂ¶ÇÂæÆÂçöÂ§ß VÔºâÔºåÂØºËá¥ÊâÄÊúâËØ∑Ê±ÇÈÉΩÂà∞‰∫ÜÂêå‰∏Ä‰∏™ÂàÜÂå∫„ÄÇ Â§ßÂ§öÊï∞Á≥ªÁªüÊó†Ê≥ïËá™Âä®Ê∂àÈô§ËøôÁßçÈ´òÂ∫¶ÂÄæÊñúÁöÑË¥üËΩΩÔºåÈúÄË¶ÅÂ∫îÁî®Â±Ç‰ªãÂÖ•„ÄÇ ÂàÜÂå∫Âíå‰∫åÁ∫ßÁ¥¢Âºï ‰∫åÁ∫ßÁ¥¢ÂºïÁöÑÊåëÊàòÊòØ‰∏çËÉΩËßÑÊï¥Âú∞Êò†Â∞ÑÂà∞ÂàÜÂå∫‰∏≠„ÄÇ Âü∫‰∫éÊñáÊ°£ÂàÜÂå∫ÁöÑ‰∫åÁ∫ßÁ¥¢ÂºïÔºö ÊØè‰∏™ÂàÜÂå∫Âè™ÂÖ≥Ê≥®Ëá™Â∑±ÁöÑÂàÜÂå∫ÁöÑÊñáÊ°£ÔºåÂπ∂Âª∫Á´ã‰∫ÜÁã¨Á´ãÁöÑÁ¥¢Âºï Êü•ËØ¢Êó∂Âª∂ËøüÊîæÂ§ß‰∏•ÈáçÔºåÈúÄË¶ÅÂàÜÊï£Êü•ËØ¢Âπ∂ÂêàÂπ∂ÁªìÊûúÔºå‰ª£‰ª∑ËæÉÈ´ò Âü∫‰∫éËØçÊù°ÂàÜÂå∫ÁöÑ‰∫åÁ∫ßÁ¥¢ÂºïÔºö ÂØπÊâÄÊúâÊï∞ÊçÆÊûÑÂª∫ÂÖ®Â±ÄÁ¥¢ÂºïÔºõÂÖ®Â±ÄÁ¥¢ÂºïÂπ∂ÈùûÂ≠òÂÇ®Âú®‰∏Ä‰∏™ËäÇÁÇπ‰∏äÔºà‰ºöËøõË°åÂàÜÂå∫ÔºâÔºåÂèØ‰ª•ÂíåÂÖ≥ÈîÆÂ≠óÈááÂèñ‰∏çÂêåÁöÑÂàÜÂå∫Á≠ñÁï• ÂèØÊîØÊåÅÈ´òÊïàÂú∞Âå∫Èó¥Êü•ËØ¢ ËØªÂèñÈ´òÊïàÔºå‰∏çÈúÄË¶Å scatter/gather Ê®°Âºè ÂÜôÂÖ•ÈÄüÂ∫¶ÊÖ¢Ôºå‰∏îÂæàÂ§çÊùÇÔºå‰ºöÊúâÊòæËëóÁöÑÂÜôÊîæÂ§ßÈóÆÈ¢ò ÊâÄÊúâÁé∞ÊúâÁöÑÊï∞ÊçÆÂ∫ìÈÉΩÈöæ‰ª•ÊîØÊåÅÂêåÊ≠•Êõ¥Êñ∞‰∫åÁ∫ßÁ¥¢ÂºïÔºåÊâÄ‰ª•ÈÄöÂ∏∏ÈÉΩÊòØÂºÇÊ≠•Êõ¥Êñ∞ ÂàÜÂå∫ÂÜçÂπ≥Ë°° Âç≥Â∞ÜÊï∞ÊçÆÂíåËØ∑Ê±Ç‰ªé‰∏Ä‰∏™ËäÇÁÇπËøÅÁßªÂà∞Âè¶‰∏Ä‰∏™ËäÇÁÇπÔºåËøôÁßçËøÅÁßªË¥üËΩΩÁöÑËøáÁ®ãË¢´Âè´‰ΩúÂÜçÂπ≥Ë°°ÔºàÂä®ÊÄÅÂπ≥Ë°°Ôºâ ‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÈúÄË¶ÅÔºü Êü•ËØ¢ÂéãÂäõÂ¢ûÂä†ÔºåÈúÄË¶ÅÂ¢ûÂä† CPU Â§ÑÁêÜË¥üËΩΩ Êï∞ÊçÆËßÑÊ®°Â¢ûÂä† ËäÇÁÇπÊïÖÈöú ÂÜçÂπ≥Ë°°ÈúÄË¶ÅÊª°Ë∂≥ÁöÑË¶ÅÊ±ÇÔºö Âπ≥Ë°°‰πãÂêéÔºåË¥üËΩΩ„ÄÅÊï∞ÊçÆÂ≠òÂÇ®„ÄÅËØªÂÜôËØ∑Ê±ÇÁ≠âÂú®ÈõÜÁæ§ËåÉÂõ¥Êõ¥Âä†ÂùáÂåÄÂàÜÂ∏É Âπ≥Ë°°ËøáÁ®ã‰∏çËÉΩÂΩ±ÂìçÁ∫ø‰∏äÊúçÂä° ÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑË¥üËΩΩËøÅÁßªÔºåÂ∞ΩÈáèÂáèÂ∞ëÁΩëÁªúÂíåÁ£ÅÁõò I/O ÂΩ±Âìç Âä®ÊÄÅÂπ≥Ë°°Á≠ñÁï• Áõ¥Êé•ÂèñÊ®°ÊÄé‰πàÊ†∑Ôºü ÊñπÊ≥ïÊØîËæÉÁÆÄÂçïÔºåÂ∫îÁî®Â±ÇÂèØÊ†πÊçÆÊØîÂ¶ÇÁî®Êà∑ ID ÂíåÂàÜÂå∫Êï∞ÈáèÂèñÊ®°ÔºåÂæóÂà∞ÂÖ∑‰ΩìË¶ÅËÆøÈóÆÁöÑÂàÜÂå∫ÂØπÂ∫îÁöÑËäÇÁÇπ Êâ©Â±ïÊàñÁßªÈô§ËäÇÁÇπÂõ∞ÈöæÔºåÊ∂âÂèäÂà∞Â§ßÈáèÊï∞ÊçÆÁöÑÁßªÂä®ÔºåÂ∫îÁî®Â±Ç‰ª£Á†Å‰πüÂèØËÉΩ‰ºöË¢´Ê≥¢Âèä Âõ∫ÂÆöÊï∞ÈáèÁöÑÂàÜÂå∫Ôºö ÂàùÂßãÊó∂Ê†πÊçÆÈïøËøúËßÑÂàíÔºåËÆæÁΩÆ‰∏Ä‰∏™ËøúË∂ÖÂÆûÈôÖËäÇÁÇπÊï∞ÁöÑÂàÜÂå∫Êï∞ÔºàÊØîÂ¶Ç 1000ÔºâÔºåÊØè‰∏™ËäÇÁÇπÂàÜÈÖçÂ§ö‰∏™ÂàÜÂå∫„ÄÇÊØè‰∏™ÂàÜÂå∫ÁöÑÂ§ßÂ∞èÂíåÊï∞ÊçÆÈõÜÂ§ßÂ∞èÊàêÊ≠£ÊØîÔºåÂíåËäÇÁÇπÊï∞Êó†ÂÖ≥„ÄÇ Êñ∞Â¢ûËäÇÁÇπÊó∂Ôºå‰ªéÂÖ∂‰ªñËäÇÁÇπÂåÄËµ∞Ëã•Âπ≤ÂàÜÂå∫ÔºåÁõ¥Âà∞ÂÜçÊ¨°ËææÂà∞ÂÖ®Â±ÄÂπ≥Ë°°ÔºõÂà†Èô§ËäÇÁÇπÔºåÂàôÈááÂèñÁõ∏ÂèçÁöÑÊé™ÊñΩ„ÄÇ ÈúÄË¶ÅÊîπÂèòÂàÜÂå∫ÂíåËäÇÁÇπÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÔºõ‰ΩÜÊòØÊÄªÁöÑÂàÜÂå∫Êï∞‰∏ç‰ºöÂèòÔºåÂÖ≥ÈîÆÂ≠óÊò†Â∞Ñ‰πü‰∏ç‰ºöÂèò„ÄÇ ÂØπ‰∫éÊï∞ÊçÆËßÑÊ®°È´òÂ∫¶‰∏çÁ°ÆÂÆöÊàñËÄÖÂèØÂèòÁöÑÂú∫ÊôØ‰∏çÈÄÇÁî®„ÄÇ Riak, ES, Couchbase Á≠âÊîØÊåÅËøôÁßçÂä®ÊÄÅÂπ≥Ë°°Á≠ñÁï•„ÄÇ Âä®ÊÄÅÂàÜÂå∫ Â¶Ç HBase Âíå RethinkDBÔºåÂèØ‰ª•Âú®ÂàÜÂå∫Êï∞ÊçÆÂ¢ûÈïøÂà∞Êüê‰∏™ÈòàÂÄºÔºàHBase ÈªòËÆ§ÈòàÂÄº‰∏∫ 10GBÔºâËá™Âä®ÊãÜÂàÜÊàê‰∏§‰∏™ÂàÜÂå∫ÔºõÂ¶ÇÊûúÊï∞ÊçÆË¢´Â§ßÈáèÂà†Èô§Ôºå‰∏îÂàÜÂå∫Áº©Â∞èÂà∞Êüê‰∏™ÈòàÂÄºÔºåÂ∞ÜÁõ∏ÈÇªÁöÑÂàÜÂå∫ËøõË°åÂêàÂπ∂„ÄÇÁ±ª‰ºº B Ê†ëÂàÜË£Ç„ÄÇ ÂàÜÂå∫Êï∞ÈáèËá™Âä®ÈÄÇÈÖçÂàÜÂå∫ÊÄªÈáèÔºåÂ∞ëÈáèÊï∞ÊçÆ-&gt;Â∞ëÈáèÂàÜÂå∫-&gt;ËæÉÂ∞èÁöÑÁ≥ªÁªüÂºÄÈîÄÔºõÊØè‰∏™ÂàÜÂå∫ÊúÄÂ§ßÂÄºÂèØË¢´ÈôêÂà∂„ÄÇÂàÜÂå∫ÊÄªÊï∞ÂíåÊï∞ÊçÆÈõÜÂ§ßÂ∞èÊàêÊ≠£ÊØîÔºåÂíåËäÇÁÇπÊï∞Êó†ÂÖ≥„ÄÇ È¢ÑÂàÜË£ÇÂèØÈÅøÂÖçÂàùÊúüÂÖàÈ™åÊù°‰ª∂‰∏çË∂≥ÔºåÊó†Ê≥ïÁ°ÆÂÆöËæÉÈÄÇÂêàÁöÑËæπÁïåÔºåÂØºËá¥ÂÜôÂÖ•ÈÉΩÈõÜ‰∏≠Âú®Âçï‰∏™ËäÇÁÇπÂ§ÑÁêÜÁöÑÈóÆÈ¢ò„ÄÇHBase Âíå MongoDB ÈÉΩÊîØÊåÅÈÖçÁΩÆÂàùÂßãÂàÜÂå∫„ÄÇ ÈÄÇÂêàÂÖ≥ÈîÆÂ≠óÂå∫Èó¥ÂàÜÂå∫ÂíåÂìàÂ∏åÂàÜÂå∫Á≠ñÁï•„ÄÇ ÊåâËäÇÁÇπÊØî‰æãÂàÜÂå∫ÔºöCassandra Âíå Ketama ÈááÁî®‰∫ÜÂ∞ÜÂàÜÂå∫Êï∞ÂíåÈõÜÁæ§ËäÇÁÇπÊï∞ÊàêÊ≠£ÊØîÂÖ≥Á≥ªÁöÑÊñπÂºèÔºåÊØè‰∏™ËäÇÁÇπÁöÑÂàÜÂå∫Êï∞Âõ∫ÂÆöÔºö ËäÇÁÇπÊï∞‰∏çÂèòÊó∂ÔºåÂàÜÂå∫Â§ßÂ∞èÂíåÊï∞ÊçÆÈõÜÊÄªÈáèÊàêÊ≠£ÊØî ËäÇÁÇπÊï∞Â¢ûÂä†Êó∂ÔºåÂàÜÂå∫Âàô‰ºöÂèòÂ∞è ÂàÜÂå∫Â§ßÂ∞è‰øùÊåÅÁ®≥ÂÆöÔºåÂèØÊ∑ªÂä†Êõ¥Â§öÁöÑËäÇÁÇπÊâøËΩΩÊõ¥Â§öÁöÑÊï∞ÊçÆ ËØ∑Ê±ÇË∑ØÁî± ÂÖ∏ÂûãÁöÑÊúçÂä°ÂèëÁé∞ÈóÆÈ¢òÔºåÂ§ÑÁêÜÁ≠ñÁï•Â¶Ç‰∏ãÔºö ÈõÜÁæ§‰∏≠ÁöÑËäÇÁÇπÊÑüÁü•ÂàÜÂå∫ÊÉÖÂÜµÔºöÂÖÅËÆ∏ÂÆ¢Êà∑Á´ØËøûÊé•‰ªªÊÑèËäÇÁÇπ„ÄÇÂ¶ÇÊûúÊüê‰∏™ËäÇÁÇπÊÅ∞Â•ΩÊã•ÊúâËØ∑Ê±ÇÁöÑÂàÜÂå∫ÔºåÂàôÁõ¥Êé•Â§ÑÁêÜÔºõÂê¶ÂàôÂ∞ÜËØ∑Ê±ÇËΩ¨ÂèëÁªôÂà´ÁöÑËäÇÁÇπÔºåÁ≠âÂæÖÁ≠îÂ§çÔºåÂπ∂ËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇ Ë∑ØÁî±Â±ÇÊÑüÁü•ÂàÜÂå∫ÊÉÖÂÜµÔºöÊâÄÊúâÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÂèëÈÄÅËá≥‰∏Ä‰∏™Ë∑ØÁî±‰ª£ÁêÜÂ±ÇÔºåÁî±ÂÆÉÊù•ÂÅöËΩ¨Âèë„ÄÇ ÂÆ¢Êà∑Á´ØÊÑüÁü•ÂàÜÂå∫ÂíåËäÇÁÇπÂàÜÈÖçÂÖ≥Á≥ªÔºöÂÆ¢Êà∑Á´ØÂèØÂÜ≥ÂÆöËøûÊé•Âà∞Âì™‰∏™ËäÇÁÇπÔºåÊó†ÈúÄ‰∏≠‰ªã„ÄÇ ÂæàÂ§öÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰ΩøÁî®‰∫ÜÁã¨Á´ãÁöÑÂçèË∞ÉÊúçÂä°ÔºàÂ¶Ç ZooKeeperÔºâË∑üË∏™ÈõÜÁæ§‰∏≠ÁöÑÂÖÉÊï∞ÊçÆÔºåÊØîÂ¶Ç HBaseÔºåKafka Á≠â„ÄÇ Âè¶Â§ñ‰∏ÄÁßçÊÄùË∑ØÊòØËäÇÁÇπ‰πãÈó¥ÈááÁî® gossip ÂçèËÆÆÂêåÊ≠•ÈõÜÁæ§Áä∂ÊÄÅÂèòÂåñÔºåÊ≠§Êó∂ËØ∑Ê±ÇÂèØÂèëÂà∞‰ªªÊÑèËäÇÁÇπÔºåËØ•ËäÇÁÇπË¥üË¥£Â§ÑÁêÜÊàñËΩ¨Âèë„ÄÇÊúÄÂ§ßÁöÑÂ•ΩÂ§ÑÊòØ‰∏ç‰æùËµñÁ¨¨‰∏âÊñπÊúçÂä°Ôºå‰ΩÜÊòØËäÇÁÇπÂ§çÊùÇÊÄß‰πüÂ¢ûÂä†‰∫Ü„ÄÇÂÖ∏ÂûãÁöÑ‰ª£Ë°®ÊòØ Cassandra Âíå RiakÔºåÂΩìÁÑ∂ËøòÊúâ Redis Cluster„ÄÇ ÂèÇËÄÉ „ÄäÊï∞ÊçÆÂØÜÈõÜÂûãÂ∫îÁî®ËÆæËÆ°„ÄãÁ¨¨‰∫åÈÉ®ÂàÜ]]></content>
      <categories>
        <category>Á≥ªÁªüËÆæËÆ°</category>
      </categories>
      <tags>
        <tag>ÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ∫ì</tag>
        <tag>Êï∞ÊçÆÂ§çÂà∂</tag>
        <tag>Êï∞ÊçÆÂàÜÂå∫</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈáéÁå™üêó‰π¶ËØª‰π¶Á¨îËÆ∞‰πãÊï∞ÊçÆÁ≥ªÁªüÂü∫Á°Ä]]></title>
    <url>%2F2019%2F08%2F14%2Fddia-data-sys-basics%2F</url>
    <content type="text"><![CDATA[ÂºïË®Ä„ÄäÊï∞ÊçÆÂØÜÈõÜÂûãÂ∫îÁî®Á≥ªÁªüËÆæËÆ°„ÄãÔºàDesign Data-Intensive ApplicationsÔºâÊòØ‰∏ÄÊú¨ÈùûÂ∏∏ÊúâËØöÊÑè„ÄÅÈùûÂ∏∏‰ºòÁßÄÁöÑËÆ≤Ëß£ÈíàÂØπÊï∞ÊçÆÂØÜÈõÜÂú∫ÊôØ‰∏ãÁ≥ªÁªüËÆæËÆ°Áõ∏ÂÖ≥ÁöÑÁõÆÊ†á„ÄÅÂéüÂàôÂíåÊäÄÊúØÈÄâÂûãÁ≠âÁü•ËØÜ„ÄÇ‰ΩúËÄÖÁªìÂêàÁêÜËÆ∫‰∏éÂÆûË∑µÔºå‰∏∫Êàë‰ª¨Â±ïÁé∞‰∫Ü‰∏Ä‰∫õÊäÄÊúØÁöÑÂèëÂ±ïË∂ãÂäø‰ª•ÂèäÂÆÉ‰ª¨‰πãÈó¥ÁöÑÂØπÊØîÔºõÂêåÊó∂Ëøò‰ªãÁªç‰∫Ü‰∏Ä‰∫õÂÖ≥ÈîÆÊäÄÊúØÔºàÂ¶ÇÂ≠òÂÇ®ÂºïÊìé„ÄÅÂ∫èÂàóÂåñÂçèËÆÆ„ÄÅÂàÜÂ∏ÉÂºè‰∏ÄËá¥ÊÄßÔºâÁ≠âÁöÑÂÆûÁé∞ÂéüÁêÜÔºåËÆ©Êàë‰ª¨ËÉΩÂ§üÁü•ÂÖ∂ÁÑ∂ÔºåÊõ¥Áü•ÂÖ∂ÊâÄ‰ª•ÁÑ∂„ÄÇ Â•Ω‰π¶Ëá™ÁÑ∂Ë¶ÅÁ≤æËØªÁªÜÂìÅÔºåÂÜôÁÇπËØª‰π¶Á¨îËÆ∞ÊâçËÉΩÊääÊè°Ëá™Â∑±ÁöÑÂ≠¶‰π†ËøõÂ∫¶ÂíåÁêÜËß£Á®ãÂ∫¶„ÄÇÊÄªÁöÑÊù•ËØ¥ÔºåÁ¨îËÆ∞ÂΩ¢ÂºèÂ∞Ü‰ª•ÂõæÊñá‰∏∫‰∏ªÔºåÊÄùÁª¥ÂØºÂõæ‰∏∫ËæÖÁöÑÊñπÂºèÊù•ÂëàÁé∞„ÄÇÁî±‰∫éËØ•‰π¶ÁöÑÂ∞ÅÈù¢ÊòØ‰∏ÄÂ§¥ÈáéÁå™üêóÔºåÊïÖÂ∞ÜÊú¨Á≥ªÂàóËØª‰π¶Á¨îËÆ∞ÂëΩÂêç‰∏∫„ÄäÈáéÁå™‰π¶ËØª‰π¶Á¨îËÆ∞„Äã„ÄÇ‰π¶‰∏≠‰∏ªË¶ÅÂàÜ‰∏∫‰∏â‰∏™ÈÉ®ÂàÜÂ±ïÂºÄÔºö ËÆ®ËÆ∫ÊúâÂÖ≥Â¢ûÂº∫Êï∞ÊçÆÂØÜÈõÜÂûãÂ∫îÁî®Á≥ªÁªüÊâÄÈúÄË¶ÅÁöÑËã•Âπ≤Âü∫Êú¨ÂéüÂàô„ÄÇ ‰ªéÂçïÊú∫Êï∞ÊçÆÂ≠òÂÇ®‰∏ì‰∫´Ë∑®Êú∫Âô®ÁöÑÂàÜÂ∏ÉÂºèÁ≥ªÁªü„ÄÇ ‰∏ªË¶ÅÈíàÂØπÊ¥æÁîüÊï∞ÊçÆÁöÑÁ≥ªÁªüËÆæËÆ°ÔºåÂπ∂ËÆ®ËÆ∫ÊâπÂ§ÑÁêÜÂíåÊµÅÂºèÂ§ÑÁêÜ„ÄÇ ÈáéÁå™‰π¶Â≠¶‰π†ÂÆåÊàêÂêéÔºåÂèØ‰ª•ËÄÉËôëÂ¶Ç‰∏ãÊ∑±ÂÖ•Â≠¶‰π†Ë∑ØÁ∫øÔºö ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºö MySQL Â≠òÂÇ®ÂºïÊìéÔºàInnoDB &amp; MyISAMÔºâ ÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ∫ìÔºö ‰∏ÄËá¥ÊÄßÂçèËÆÆÔºàPaxos, Raft, ZookeeperÔºâ Êï∞ÊçÆÂ∫ìÔºàTiDB Ôºâ Â≠òÂÇ®ÂºïÊìéÔºàTiKV &amp; RocksDB &amp; LevelDBÔºâ ÈùûÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÊàñÁºìÂ≠òÁ≥ªÁªüÔºö RedisÔºàËÆæËÆ°ÊÄùÊÉ≥„ÄÅÊï∞ÊçÆÁªìÊûÑ„ÄÅÈõÜÁæ§ÁÆ°ÁêÜÔºâ HBaseÔºàËÆæËÆ°ÊÄùÊÉ≥„ÄÅ‰ΩøÁî®ÊñπÂºèÂíåÂú∫ÊôØ„ÄÅÂ≠òÂÇ®ÁÆ°ÁêÜÔºâ Ê∂àÊÅØÈòüÂàóÁ≥ªÁªüÔºö Â∫îÁî®Â±ÇÊ°ÜÊû∂ÔºàCeleryÔºâ AMQP ÂçèËÆÆÂÆûÁé∞ÁöÑÊ∂àÊÅØÈòüÂàóÊúçÂä°ÔºàRabbitMQÔºâ ÁÆÄÊòìÁöÑÊ∂àÊÅØÈòüÂàóÊúçÂä°ÔºàBeanstalkÔºâ È´òÂêûÂêêÈáèÁöÑÊ∂àÊÅØÈòüÂàóÊúçÂä°ÔºàRocksDB„ÄÅKafkaÔºâ ÊêúÁ¥¢ÂºïÊìéÔºöElasticSearch ÂèØÈù†„ÄÅÂèØÊâ©Â±ï‰∏éÂèØÁª¥Êä§ÁöÑÂ∫îÁî®Á≥ªÁªü Êï∞ÊçÆÂØÜÈõÜÂûãÔºàData-IntensiveÔºâÊòØÊåáÂØπ‰∫é‰∏Ä‰∏™Â∫îÁî®Á≥ªÁªüËÄåË®ÄÔºå„ÄåÊï∞ÊçÆ„ÄçÊòØÂÖ∂ÊàêË¥•ÁöÑÂÜ≥ÂÆöÊÄßÂõ†Á¥†ÔºåÂåÖÊã¨Êï∞ÊçÆÁöÑËßÑÊ®°„ÄÅÊï∞ÊçÆÁöÑÂ§çÊùÇÂ∫¶ÊàñÊï∞ÊçÆ‰∫ßÁîüÂíåÂèòÂåñÁöÑÈÄüÁéáÁ≠â„ÄÇ ËÆ°ÁÆóÂØÜÈõÜÂûãÔºàCompute-IntensiveÔºâÔºå‰ª•ËÆ°ÁÆó‰∏∫‰∏ªÁöÑÁ≥ªÁªüÔºåCPU ‰∏ªÈ¢ëÈÄöÂ∏∏ÊòØÂÆÉÁöÑÂà∂Á∫¶Áì∂È¢à Êï∞ÊçÆÁ≥ªÁªüÔºö ÈÄöÂ∏∏Êù•ËØ¥ÔºåÊï∞ÊçÆÂ∫ì„ÄÅÁºìÂ≠ò„ÄÅÊ∂àÊÅØÈòüÂàóË¢´ËÆ§‰∏∫ÊòØ‰∏çÂêåÁ±ªÂûãÁöÑÁ≥ªÁªüÔºåÊúâ‰∏çÂêåÁöÑÊÄßËÉΩÂíåËÆæËÆ°ÂÆûÁé∞Ôºõ ‰ΩÜËøëÂπ¥Êù•ÔºåÊäÄÊúØÁöÑÂèëÂ±ïÂØºËá¥ÂÆÉ‰ª¨‰πãÈó¥ÁöÑÁïåÈôêÈÄêÊ∏êÊ®°Á≥ä„ÄÇÊØîÂ¶Ç Redis Êó¢ÂèØ‰ª•Â≠òÂÇ®Ôºå‰πüÂèØ‰ª•ÂÅöÊ∂àÊÅØÈòüÂàóÔºõKafka ÂèØ‰ª•ÂÅöÊ∂àÊÅØÈòüÂàóÔºå‰πüÂÖ∑Â§áÊåÅ‰πÖÂåñÁöÑËÉΩÂäõ„ÄÇÂõ†Ê≠§ÔºåÁªü‰∏ÄÁß∞‰∏∫„ÄåÊï∞ÊçÆÁ≥ªÁªüÔºàdata systemÔºâ„ÄçÔºõ Â∫îÁî®Á≥ªÁªüÁöÑÈúÄÊ±ÇÊõ¥Âä†ÂπøÊ≥õÔºåÂçï‰∏ÄÁªÑ‰ª∂Êó†Ê≥ïÊª°Ë∂≥ÊâÄÊúâÁöÑÊï∞ÊçÆÂ§ÑÁêÜÂíåÂ≠òÂÇ®ÈúÄÊ±ÇÔºõÈÄöÂ∏∏ÈúÄË¶ÅÁªÑÂêàÂ§ö‰∏™ÁªÑ‰ª∂ÔºåÂπ∂ÈÄöËøáÂ∫îÁî®Â±Ç‰ª£Á†ÅÈ©±Âä®ÂÆûÁé∞Ë°îÊé•„ÄÇ ÂèØÈù†ÊÄßÔºàReliabilityÔºâ ÁõÆÊ†áÔºöÂΩìÊÑèÂ§ñÊÉÖÂÜµÔºàÂåÖÊã¨Á°¨‰ª∂„ÄÅËΩØ‰ª∂ÊïÖÈöú‰ª•Âèä‰∫∫‰∏∫Â§±ËØØÔºâÂèëÁîüÊó∂ÔºåÁ≥ªÁªüÂ∫îËØ•ÂèØ‰ª•ÁªßÁª≠Ê≠£Â∏∏Â∑•‰Ωú„ÄÇËôΩÁÑ∂ÊÄßËÉΩ‰ºöÊúâÊâÄÈôç‰ΩéÔºå‰ΩÜ‰ºöÁ°Æ‰øùÂäüËÉΩÊ≠£Á°Æ„ÄÇ ÂèØËÉΩÂá∫ÈîôÁöÑ‰∫ãÁß∞‰∏∫ÈîôËØØÔºàfaultsÔºâÊàñÊïÖÈöúÔºåÁ≥ªÁªüÂèØÂ∫îÂØπÈîôËØØÔºåÂàôÁß∞‰∏∫ÂÆπÈîôÔºàfault-tolerantÔºâÊàñËÄÖ**ÂºπÊÄßÔºàresilientÔºâ„ÄÇ Â§±ÊïàÔºàfailureÔºâÊØî fault ‰∏•ÈáçÔºåÊÑèÂë≥ÁùÄÊï¥‰∏™Á≥ªÁªüÊó†Ê≥ïÂØπÂ§ñÊèê‰æõÁî®Êà∑ÊâÄÈúÄÊúçÂä°„ÄÇ Á°¨‰ª∂ÊïÖÈöúÈóÆÈ¢òÂèØ‰ª•ÈÄöËøáÂ¢ûÂä†ÂÜó‰ΩôÁöÑÊñπÂºèÊù•ÊúâÊïàËß£ÂÜ≥Ôºå‰ΩÜ‰∏∫‰∫ÜÊèêÈ´òÂèØÁî®ÊÄßÔºåËΩØ‰ª∂ÂÆπÈîôÁöÑÊñπÂºè‰πüÂèØ‰ª•Áî®Êù•ÂÆπÂøçÂ§öÊú∫Â§±ÊïàÁöÑÊâãÊÆµÔºå‰Ωú‰∏∫Á°¨‰ª∂ÂÆπÈîôÁöÑË°•ÂÖÖ„ÄÇ ËΩØ‰ª∂ÊïÖÈöúÈóÆÈ¢òÈÄöÂ∏∏Èöæ‰ª•È¢ÑÊñôÔºå‰∏î‰∏ÄÊó¶ÂèëÁîü‰∫ßÁîüÁöÑÂΩ±Âìç‰ºöÈùûÂ∏∏ÂπøÊ≥õÔºåÊ®™Ë∑®Êï¥‰∏™Á≥ªÁªüÈÉΩÂèØËÉΩ„ÄÇÂπ∂Êó†Âø´ÈÄüËß£ÂÜ≥‰πãÊ≥ï„ÄÇÂú®‰ΩøÁî®‰πãÂ§ÑÔºåÈúÄË¶ÅËÄÉËôëÂ•ΩÂæàÂ§öÁªÜËäÇÔºåÊ¢≥ÁêÜ‰æùËµñÂÅáËÆæÂíåÁ≥ªÁªüÈó¥ÁöÑ‰∫§‰∫í„ÄÇÂè¶Â§ñÔºåËøõË°åÂÖ®Èù¢ÊµãËØïÔºåÂÅöÂ•ΩËøõÁ®ãÈöîÁ¶ªÔºåÂÖÅËÆ∏Â¥©Ê∫ÉÂêéËá™Âä®ÈáçÂêØ„ÄÇ ‰øùËØÅÁ≥ªÁªüÂèØÈù†ÊÄßÔºåÂáèÂ∞ë‰∫∫‰∏∫Â§±ËØØÔºö ‰ª•ÊúÄÂ∞èÂá∫ÈîôÁöÑÊñπÂºèËÆæËÆ°Á≥ªÁªü ÊÉ≥ÂäûÊ≥ïÂàÜÁ¶ªÊúÄÂÆπÊòìÂá∫ÈîôÁöÑÂú∞Êñπ„ÄÅÂÆπÊòìÂèëÁîüÊïÖÈöúÁöÑÊé•Âè£ ÂÖÖÂàÜÂú∞ÊµãËØï ÂΩìÂèëÁîü‰∫∫‰∏∫Â§±ËØØÊó∂ÔºåÊèê‰æõÂø´ÈÄüÊÅ¢Â§çÊú∫Âà∂ÔºåÂáèÂ∞ëÊïÖÈöúÂΩ±Âìç Êèê‰æõËØ¶ÁªÜÊ∏ÖÊô∞ÁöÑÂ≠êÁ≥ªÁªüÔºåÂåÖÊã¨ÊÄßËÉΩÊåáÊ†áÂíåÈîôËØØÁéá Êé®Ë°åÁÆ°ÁêÜÊµÅÁ®ãÂπ∂Âä†‰ª•ÂüπËÆ≠ ÂèØÊâ©Â±ïÊÄßÔºàScalabilityÔºâ ÁõÆÊ†áÔºöÈöèÁùÄËßÑÊ®°Â¢ûÈïøÔºàÂåÖÊã¨Êï∞ÊçÆÈáè„ÄÅÊµÅÈáèÊàñËÄÖÂ§çÊùÇÂ∫¶ÔºâÔºåÁ≥ªÁªüÂ∫îÁî®ËÉΩ‰ª•ÂêàÁêÜÁöÑÊñπÂºèÂåπÈÖçËøôÁßçÂ¢ûÈïø„ÄÇ Áî®Êù•ÊèèËø∞Á≥ªÁªüÂ∫îÂØπË¥üËΩΩÂ¢ûÂä†ËÉΩÂäõÁöÑÊúØËØ≠„ÄÇ ÊèèËø∞Ë¥üËΩΩÔºöÈúÄË¶ÅÁü•ÈÅì‰ªÄ‰πàÊòØË¥üËΩΩÂèÇÊï∞„ÄÇÂèÇÊï∞ÁöÑÊúÄ‰Ω≥ÈÄâÊã©ÂèñÂÜ≥‰∫éÁ≥ªÁªüÁöÑ‰ΩìÁ≥ªÁªìÊûÑÔºåÂèØËÉΩÊòØ Web ÊúçÂä°ÁöÑÊØèÁßíËØ∑Ê±ÇÈáèÔºåÊï∞ÊçÆÂ∫ìÂÜôÂÖ•ÊØî‰æãÔºåËÅäÂ§©ÂÆ§Ê¥ªÂä®‰∫∫Êï∞ÔºåÁºìÂ≠òÂëΩ‰∏≠ÁéáÔºåÁî®Êà∑ÂÖ≥Ê≥®ËÄÖÂàÜÂ∏ÉÊÉÖÂÜµÁ≠â„ÄÇ ÊèèËø∞ÊÄßËÉΩÔºö ÊâπÂ§ÑÁêÜÁ≥ªÁªüÂÖ≥Ê≥®ÁöÑÊòØÂêûÂêêÈáèÔºàthroughoutÔºâ Web ÊúçÂä°Âô®Êõ¥ÂÖ≥Ê≥®ËØ∑Ê±ÇÂìçÂ∫îÊó∂Èó¥ÔºåÊõ¥ÁªèÂ∏∏ÂÖ≥Ê≥®ÁöÑÊòØÂπ≥ÂùáÂìçÂ∫îÊó∂Èó¥ ‰∏≠‰ΩçÊï∞ÂìçÂ∫îÊó∂Èó¥ÈÄöÂ∏∏‰πüÂè´ p50 Â∏∏ËßÅÁöÑËøò‰ºöÂÖ≥Ê≥® p95, p99, p999 ÂÄº ÊúçÂä°Ë¥®ÈáèÁõÆÊ†á Service Level Objectives, SLO ÊúçÂä°Ë¥®ÈáèÂçèËÆÆ Service Level Agreements, SLA ÂèØÁª¥Êä§ÊÄßÔºàMaintainabilityÔºâ ÁõÆÊ†áÔºöÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÔºåÊñ∞ÁöÑ‰∫∫ÂëòÂèÇ‰∏éÂà∞Á≥ªÁªüÁöÑÂºÄÂèëÂíåËøêÁª¥Ôºå‰ª•Áª¥Êä§Áé∞ÊúâÂäüËÉΩÊàñÈÄÇÈÖçÊñ∞Âú∫ÊôØÔºåÁ≥ªÁªüÈÉΩÂ∫îËØ•È´òÊïàËøêËΩ¨„ÄÇ Ë∞ÅÈÉΩ‰∏çÊÉÖÊÑøÁª¥Êä§ÈÅóÁïôÁ≥ªÁªüÔºå‰∏∫‰ªÄ‰πàÂë¢ÔºüÂõ†‰∏∫ÂèØËÉΩË¶Å‰øÆÂ§çÂà´‰∫∫Âüã‰∏ãÁöÑÂùëÔºåÂÅö‰∏çÂñúÊ¨¢ÁöÑ‰∫ãÊÉÖ„ÄÇÊâÄ‰ª•Âú®ÂÅöÁ≥ªÁªüËÆæËÆ°‰πãÂàùÔºåÂ∞±Â∫îËØ•ÂÖ≥Ê≥®Á≥ªÁªüËÆæËÆ°ÁöÑ‰∏âÂ§ßÂéüÂàôÔºåÂ∞ΩÂèØËÉΩÂáèÂ∞ëÁª¥Êä§ÊúüÁöÑÈ∫ªÁÉ¶Ôºö ÂèØËøêÁª¥ÊÄßÔºöËøêÁª¥Êõ¥ËΩªÊùæ ÁÆÄÂçïÊÄßÔºöÁÆÄÂåñÁ≥ªÁªüÂ§çÊùÇÂ∫¶Ôºå‰ΩÜÂπ∂ÈùûÂáèÂ∞ë‰∫ßÂìÅÂäüËÉΩ„ÄÇÂèØ‰ª•ÈÄöËøáËæÉÂ•ΩÁöÑÊäΩË±°Êù•ËÆ©Á≥ªÁªüÂèòÂæóÊõ¥Ê∏ÖÊô∞ÂíåÊòì‰∫éÁêÜËß£ ÂèØÊºîÂåñÊÄßÔºöÊòì‰∫éÊîπÂèò Êï∞ÊçÆÊ®°ÂûãÂíåÊü•ËØ¢ËØ≠Ë®Ä Â§çÊùÇÁöÑÂ∫îÁî®Á®ãÂ∫è‰ºöÊúâÂæàÂ§öÂ±ÇÔºå‰ΩÜÊ†∏ÂøÉÊÄùÊÉ≥ÊòØÔºöÊØèÂ±ÇÈÉΩÈÄöËøáÊèê‰æõ‰∏Ä‰∏™ÁÆÄÊ¥ÅÁöÑÊï∞ÊçÆÊ®°ÂûãÊù•ÈöêËóè‰∏ãÂ±ÇÁöÑÂ§çÊùÇÊÄß ÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÂíåÊñáÊ°£Êï∞ÊçÆÂ∫ì NoSQL Êï∞ÊçÆÂ∫ìÂá†Â§ßÈ©±Âä®Âõ†Á¥†Ôºö ÊØîÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÊâ©Â±ïÊÄßÂ•ΩÔºåÊîØÊåÅË∂ÖÂ§ßÊï∞ÊçÆÈõÜÊàñË∂ÖÈ´òÂÜôÂÖ•ÂêûÂêêÈáè ÂºÄÊ∫êÂÖçË¥πÂ±ÖÂ§ö ÂÖ≥Á≥ªÊ®°Âûã‰∏çËÉΩÂæàÂ•ΩÊîØÊåÅÊüê‰∫õÁâπÂÆöÊü•ËØ¢ ‰ªª‰ΩïÂØπ‰∫∫Á±ªÊúâÊÑè‰πâÁöÑ‰∏úË•øÈÉΩÂèØËÉΩÂú®Â∞ÜÊù•Êüê‰∏™Êó∂ÂàªÂèëÁîüÊîπÂèò„ÄÇÊâÄ‰ª•Âú®Êï∞ÊçÆÂ∫ì‰∏≠Êàë‰ª¨‰ΩøÁî®ÂÖ≥ËÅîÁöÑ ID ‰Ωú‰∏∫Ê†áÂøóÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØÂÆÉÊ≤°ÊúâÁõ¥Êé•ÊÑè‰πâÔºåÊ∞∏Ëøú‰∏çÈúÄË¶ÅÁõ¥Êé•ÊîπÂèò Â±ÇÊ¨°Ê®°ÂûãÔºö ‰ª£Ë°®ÊòØ IBM ÁöÑ Information Mangagement System, IMS Á±ª‰ºº JSON ÁªìÊûÑÔºåËÉΩÂ§üÂæàÂ•ΩË°®Á§∫‰∏ÄÂØπÂ§öÂÖ≥Á≥ªÔºõÂ§öÂØπÂ§öÂÖ≥Á≥ªÂæàÈöæË°®Á§∫ ÁΩëÁªúÊ®°ÂûãÔºö Â±ÇÊ¨°Ê®°ÂûãÁöÑÊé®ÂπøÔºåÊîØÊåÅÂ§öÂØπ‰∏ÄÂíåÂ§öÂØπÂ§öÁöÑÂÖ≥Á≥ª Êü•ËØ¢Âõ∞Èöæ„ÄÅÊõ¥Êñ∞Â§çÊùÇ‰∏î‰∏çÂ§üÁÅµÊ¥ª ÂØπÂ∫îÁî®Á®ãÂ∫èÁöÑÊï∞ÊçÆÊ®°ÂûãËøõË°åÊõ¥ÊîπÊòØÈùûÂ∏∏Âõ∞ÈöæÁöÑ‰∫ãÊÉÖ Â∫îÁî®ÈúÄË¶ÅÂÖ≥ÂøÉÂ§çÊùÇÁöÑËÆøÈóÆË∑ØÂæÑ ÂÖ≥Á≥ªÊ®°ÂûãÔºö ÂÆö‰πâ‰∫ÜÊâÄÊúâÊï∞ÊçÆÁöÑÊ†ºÂºèÔºöÂÖ≥Á≥ªÔºàË°®ÔºâÂè™ÊòØÂÖÉÁªÑÔºàË°åÔºâÁöÑÈõÜÂêà Êü•ËØ¢‰ºòÂåñÂô®ÂèØ‰ª•Ëá™Âä®ÂÜ≥ÂÆöÊü•ËØ¢È°∫Â∫èÊâßË°åÔºõ‰ΩøÁî®‰ΩïÁßçÁ¥¢Âºï„ÄÇÁõ∏ÂΩì‰∫éËá™Âä®Áª¥Êä§„ÄåËÆøÈóÆË∑ØÂæÑ„Äç Â∫îÁî®Ê∑ªÂä†Êñ∞ÂäüËÉΩÂèòÂæóÂÆπÊòì ÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÂíåÊñáÊ°£Êï∞ÊçÆÂ∫ìÔºö Ë°®Á§∫Â§öÂØπ‰∏ÄÂíåÂ§öÂØπÂ§öÈÉΩ‰ΩøÁî®‰∫ÜÊ†áËØÜÁ¨¶ ÂâçËÄÖÂè´‰ΩúÂ§ñÈîÆÔºàÊàñËÄÖÂèØ‰ª•Âú®Â∫îÁî®‰∏≠ÂÖ≥ËÅîÔºâÔºõÂêéËÄÖÂè´‰ΩúÊñáÊ°£ÂºïÁî® ËØªÊó∂Ê®°ÂºèÔºöÊñáÊ°£Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÊï∞ÊçÆÁªìÊûÑÊòØÈöêÂºèÁöÑÔºåÂè™ÊúâÂú®ËØªÂèñÊó∂ÊâçËß£Èáä ÂÜôÊó∂Ê®°ÂºèÔºöÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰∏≠ÔºåÊ®°ÂºèÊòØÊòæÂºèÁöÑÔºåÊï∞ÊçÆÂ∫ì‰øùËØÅÂÜôÂÖ•Êó∂ÈÅµÂæ™Ê®°Âºè ËûçÂêàÂÖ≥Á≥ªÊ®°ÂûãÂíåÊñáÊ°£Ê®°ÂûãÊòØÊú™Êù•ÂèëÂ±ïÁöÑ‰∏Ä‰∏™ËæÉÂ•ΩÁöÑÈÄîÂæÑ Êü•ËØ¢ËØ≠Ë®Ä SQLÔºö Â£∞ÊòéÂºè ÁÆÄÊ¥Å„ÄÅÊòì‰ΩøÁî® ÂæàÂ§öÈôêÂà∂ÁöÑ‰∫ãÂÆûÔºå‰πüÊàê‰∏∫Êï∞ÊçÆÂ∫ìËá™Âä®‰ºòÂåñÊèê‰æõ‰∫ÜÁ©∫Èó¥ Â∫ïÂ±ÇÊòì‰∫é‰ΩøÁî®Âπ∂ÂèëÊü•ËØ¢ IMS/CODASYLÔºàÂ±ÇÊ¨°Ê®°Âûã„ÄÅÁΩëÁªúÊ®°ÂûãÔºâÔºö ÂëΩ‰ª§Âºè MapReduceÔºö ‰∏ÄÁßçÁºñÁ®ãÊ®°ÂûãÔºåÁî®‰∫éÂú®ËÆ∏Â§öÊú∫Âô®‰∏äÊâπÈáèÂ§ÑÁêÜÊµ∑ÈáèÊï∞ÊçÆ Êó¢ÈùûÂ£∞ÊòéÂºèÔºå‰πüÈùûÂÆåÂÖ®ÂëΩ‰ª§ÂºèÔºõ‰ªã‰∫é‰∫åËÄÖ‰πãÈó¥ Â∫ïÂ±ÇÁºñÁ®ãÊ®°ÂûãÔºåÁî®‰∫éÂú®ËÆ°ÁÆóÈõÜÁæ§‰∏äÂàÜÂ∏ÉÊâßË°åÔºõÂèØÊâßË°åÁöÑÊìç‰ΩúÈôêÂÆö‰∏∫Á∫ØÂáΩÊï∞ ÂõæÊï∞ÊçÆÂ∫ìÊ®°Âûã ÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÈÄÇÂêàÂ§ÑÁêÜÁÆÄÂçïÁöÑÂ§öÂØπÂ§öÊ®°ÂûãÔºõ‰ΩÜÈöèÁùÄÊï∞ÊçÆ‰πãÈó¥ÁöÑÂÖ≥ËÅîË∂äÊù•Ë∂äÂ§çÊùÇÔºåËΩ¨Êç¢‰∏∫ÂõæÊ®°Âûã‰ºöÊõ¥Âä†Ëá™ÁÑ∂ È°∂ÁÇπÂíåËæπÁªÑÊàê Âª∫Ê®°Á§∫‰æãÔºö ‰∫∫ÈôÖÂÖ≥Á≥ª Web ÁΩëÈ°µ ÂÖ¨Ë∑ØÊàñËÄÖÈìÅË∑ØÁΩë Êõ¥Âº∫Â§ßÁî®Â§ÑÔºöÊèê‰æõ‰∫ÜÂçï‰∏™Êï∞ÊçÆÂ≠òÂÇ®Âå∫‰øùÂ≠òÂÆåÂÖ®‰∏çÂêåÁ±ªÂûãÂØπË±°ÁöÑ‰∏ÄËá¥ÊÄßÊñπÂºè Â±ûÊÄßÂõæÊ®°ÂûãÔºàProperty GraphÔºâ ‰ª£Ë°®ÔºöNeo4j, Titan, InfiniteGraph È°∂ÁÇπÔºàverticeÔºâÔºö ÂîØ‰∏ÄÊ†áÂøó Âá∫ËæπÈõÜÂêà ÂÖ•ËæπÈõÜÂêà Â±ûÊÄßÈõÜÂêà ËæπÔºàedgeÔºâÔºö ÂîØ‰∏ÄÊ†áÂøó ËæπÂºÄÂßãÈ°∂ÁÇπ ËæπÁªìÊùüÁöÑÈ°∂ÁÇπ Ê†áÁ≠æ Â±ûÊÄßÈõÜÂêà ‰∏âÂÖÉÂõæÂ≠òÂÇ®Ê®°ÂûãÔºàTriplestoreÔºâ ‰ª£Ë°®ÔºöDatomic, AllegroGraph Âá†‰πéÁ≠âÂêå‰∫éÂ±ûÊÄßÂõæÊ®°ÂûãÔºåÂèØËÉΩ‰Ωú‰∏∫ÊûÑÂª∫Â∫îÁî®Á®ãÂ∫èÁöÑË°•ÂÖÖ ÂΩ¢ÂºèÔºö(‰∏ª‰ΩìÔºåË∞ìËØ≠ÔºåÂÆ¢‰Ωì) ‰∏ª‰ΩìÁõ∏ÂΩì‰∫éÂõæ‰∏≠ÁöÑÈ°∂ÁÇπÔºåÂÆ¢‰ΩìÂàôÊòØ‰ª•‰∏ã‰∏§Áßç‰πã‰∏ÄÔºö ÂéüÂßãÊï∞ÊçÆÁ±ªÂûã‰∏≠ÁöÑÂÄºÔºàÂ≠óÁ¨¶‰∏≤ÊàñÊï∞Â≠óÔºâÔºåÂ¶Ç (lucy, age, 40) ÂõæÁöÑÂè¶Â§ñ‰∏Ä‰∏™È°∂ÁÇπÔºåÂ¶Ç (lucy, mariedTo, alain) Êü•ËØ¢ËØ≠Ë®Ä CypherÔºåÊúÄÊó©Áî®‰∫é Neo4j„ÄÇÂ£∞ÊòéÂºèÊü•ËØ¢ËØ≠Ë®Ä SQL:1999 Ê†áÂáÜÂêéÔºåÂèØ‰ª•‰ΩøÁî®ÈÄíÂΩíÂÖ¨Áî®Ë°®ËææÂºèÔºàWITH RECURSIVEÔºâÊù•Ë°®Á§∫ÂèØÂèòÁöÑÈÅçÂéÜË∑ØÂæÑÊü•ËØ¢ SPARQLÔºöÈááÁî® RDF Êï∞ÊçÆÊ®°ÂûãÁöÑ‰∏âÂÖÉÂ≠òÂÇ®Êü•ËØ¢ËØ≠Ë®Ä DatalogÔºöÊï∞ÊçÆÊ®°ÂûãÈááÁî®„ÄåË∞ìËØ≠Ôºà‰∏ª‰ΩìÔºåÂÆ¢‰ΩìÔºâ„ÄçÊ®°ÂºèÔºõËßÑÂàôÂèØ‰ª•Âú®‰∏çÂêåÁöÑÊü•ËØ¢‰∏≠ÁªÑÂêàÂíåÂ§çÁî®ÔºõÂØπ‰∫éÁÆÄÂçïÊü•ËØ¢ËôΩÁÑ∂ÁπÅÁêêÔºå‰ΩÜÈíàÂØπÂ§çÊùÇÊï∞ÊçÆÔºåÂàôÊõ¥Âä†ÁÅµÊ¥ª Êï∞ÊçÆÂ≠òÂÇ®ÂíåÊ£ÄÁ¥¢Êï∞ÊçÆÂ∫ìÊ†∏ÂøÉÔºöÊï∞ÊçÆÁªìÊûÑ Á¥¢ÂºïÂèØ‰ª•Â∏ÆÂä©È´òÊïàÂú∞Êü•ËØ¢Êï∞ÊçÆÂ∫ì‰∏≠ÁâπÂÆöÁöÑÈîÆÔºõÊòØÂü∫‰∫éÂéüÂßãÊï∞ÊçÆÊ¥æÁîüËÄåÊù•ÁöÑÈ¢ùÂ§ñÊï∞ÊçÆÁªìÊûÑ ‰ªª‰ΩïÁ±ªÂûãÁöÑÁ¥¢ÂºïÈÄöÂ∏∏ÈÉΩ‰ºöÈôç‰ΩéÂÜôÁöÑÈÄüÂ∫¶ ÂìàÂ∏åÁ¥¢Âºï ‰ª• Bitcast ‰∏∫‰ª£Ë°®ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºåÈááÁî®‰∫ÜÂìàÂ∏åÁ¥¢Âºï ÈÄÇÂêàÊØè‰∏™ÈîÆÁöÑÂÄºÊõ¥Êñ∞È¢ëÁπÅÁöÑÂú∫ÊôØ ÂìàÂ∏åÁ¥¢ÂºïÁöÑÁâπÁÇπÔºö ÂìàÂ∏åË°®ÂøÖÈ°ªÂÖ®ÈÉ®Â≠òÊîæÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÈîÆÂÄºÊåáÂêëÁöÑÊòØÊñá‰ª∂ÊÆµ‰∏≠ÁöÑÂÅèÁßªÔºåÁî®‰∫éÊü•ÊâæÂÖ∑‰ΩìÁöÑÊï∞ÊçÆ ÂèØÈááÁî®ÂàÜÊÆµÁöÑÊÄùÊÉ≥ÔºåÂÜçÈÖçÂêàÂêéÂè∞ÂêàÂπ∂„ÄÅÂéãÁº©Á≠âÊâãÊÆµÊù•ÈÅøÂÖçÁ£ÅÁõòÂÜôÂÖ•ËÄóÂ∞ΩÁöÑÈóÆÈ¢òÔºåÂáèÂ∞ëÁ£ÅÁõòÁ¢éÁâá Êñ∞ÁöÑÊï∞ÊçÆÈááÁî®ËøΩÂä†ËÄåÈùûÂéüÂú∞‰øÆÊîπÁöÑÁ≠ñÁï•ÔºåÊèêÈ´òÂÜôÂÖ•ÂêûÂêêÈáè Âå∫Èó¥Êü•ËØ¢ÊïàÁéá‰∏çÈ´ò SSTables Âíå LSM-Tree SSTable ÁöÑÂÖ®Áß∞ÔºöSorted String TableÔºåÊéíÂ∫èÂ≠óÁ¨¶‰∏≤Ë°® LSM-Tree ÁöÑÂÖ®Áß∞ÔºöLog-Structured Merge-Tree Áõ∏ÊØîÂìàÂ∏åÁ¥¢ÂºïÁöÑ‰ºòÁÇπÔºö ÂêàÂπ∂ÊÆµÊõ¥ÁÆÄÂçïÈ´òÊïàÔºåÂØπ‰∫éÂ§ßÊñá‰ª∂‰πüÊòØÂ¶ÇÊ≠§ ÊÆµÊñá‰ª∂‰∏≠ÁöÑ key-value È°∫Â∫èÊòØÊåâÁÖßÈîÆÊéíÂ∫èËøáÁöÑÔºå‰æø‰∫éÂêàÂπ∂ÂíåÊü•Êâæ Âú®Êñá‰ª∂‰∏≠Êü•ÊâæÁâπÂÆöÈîÆÊó∂Êó†ÈúÄÂú®ÂÜÖÂ≠ò‰∏≠‰øùÂ≠òÊâÄÊúâÈîÆÁöÑÁ¥¢ÂºïÔºàÁ®ÄÁñèÁ¥¢ÂºïÊîæÂú®ÂÜÖÂ≠ò‰∏≠Ôºâ ÊîØÊåÅËåÉÂõ¥Êü•Êâæ ÊûÑÂª∫ÂíåÁª¥Êä§ SSTables Âú®ÂÜÖÂ≠ò‰∏≠Áª¥Êä§‰∏Ä‰∏™ÂÜÖÂ≠òË°®ÔºåÂÜôÂÖ•Êó∂ÂÖàÂÜôÂÖ•ËØ•Ë°®ÔºàÊúâÂ∫èÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ¶ÇÁ∫¢ÈªëÊ†ëÊàñËÄÖË∑≥Ë°®Ôºâ ÂÜÖÂ≠òË°®Ë∂ÖËøá‰∏ÄÂÆöÈòàÂÄºÊó∂ÔºåÁõ¥Êé•ÂÜôÁõòÔºåÂΩ¢Êàê SSTableÔºõÂú®ÂÜôÁõòÂêåÊó∂ÔºåÂèØÊ∑ªÂä†Êñ∞ÁöÑÂÜÖÂ≠òË°®ÂÆû‰æãÔºåÊé•Êî∂ÂêéÁª≠ÂÜôËØ∑Ê±Ç ÂØπ‰∫éËØªËØ∑Ê±ÇÔºåÂÜÖÂ≠òË°®-&gt;ÊúÄÊñ∞Á£ÅÁõòÊÆµÊñá‰ª∂-&gt;Ê¨°Êñ∞ÊÆµÊñá‰ª∂-&gt;‚Ä¶Áõ¥Âà∞ÊâæÂà∞ÁõÆÊ†áÊàñËÄÖ‰∏∫Á©∫ ÂêéÂè∞ÂÆöÊúüÂêàÂπ∂„ÄÅÂéãÁº©Ôºå‰∏¢ÂºÉË¢´Ë¶ÜÁõñÊàñÂà†Èô§ÁöÑÂÄº ÈÅøÂÖçÂ¥©Ê∫ÉÁöÑÊñπÂºèÔºöÊØè‰∏™ÂÜôÂÖ•ËÆ∞ÂΩïÂà∞Êó•ÂøóÔºåÂΩìÂÜÖÂ≠òË°®ÂÜôÂÖ• SSTable ÂêéÊâçÂèØ‰ª•‰∏¢ÂºÉÁõ∏Â∫îÊó•Âøó Âü∫‰∫éÂêàÂπ∂ÂíåÂéãÁº©ÊéíÂ∫èÊñá‰ª∂ÂéüÁêÜÁöÑÂ≠òÂÇ®ÂºïÊìéÈÄöÂ∏∏ÈÉΩÂè´‰Ωú LSM Â≠òÂÇ®ÂºïÊìé ÊÄßËÉΩ‰ºòÂåñÔºö ÂàÜÂ±ÇÂéãÁº©ÔºåLevelDB &amp; RocksDB ÊåâÂ§ßÂ∞èÂàÜÁ∫ßÔºåHBase, Cassandra Âàô‰∏§ÁßçÈÉΩÊîØÊåÅ Â∏ÉÈöÜËøáÊª§Âô® B-Trees ÂπøÊ≥õ‰ΩøÁî®ËÆ§ÂèØÁöÑÁ¥¢ÂºïÁªìÊûÑÔºåÂæàÂ§öÊï∞ÊçÆÂ∫ì‰∏≠Ê†áÂáÜÁ¥¢ÂºïÂÆûÁé∞ÔºõÂç≥‰ΩøÂú®ÈùûÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰∏≠‰πüÊúâÁî®Âà∞ B-Tree ÊòØÈù¢ÂêëÂùóÊàñËÄÖÈ°µËøõË°åËÆæËÆ°ÁöÑÔºåÂÆÉÂ∞ÜÊï∞ÊçÆÂ∫ìÂàÜËß£ÊàêÂõ∫ÂÆöÂ§ßÂ∞èÁöÑÂùóÊàñÈ°µÔºå‰∏ÄËà¨‰∏∫ 4 KBÔºåÈ°µÊòØÂÜÖÈÉ®ËØªÂÜôÁöÑÊúÄÂ∞èÂçïÂÖÉ ÊØè‰∏™È°µÈù¢ÈÉΩÊúâÊ†áËØÜÁ¨¶ÔºåÂèØË¢´ÂºïÁî® ‰∏Ä‰∏™È°µÊâÄÂåÖÂê´ÁöÑÈ°µÈù¢ÂºïÁî®Êï∞ÈáèÁß∞‰∏∫ÂàÜÊîØÂõ†Â≠ê Êõ¥Êñ∞Á≠ñÁï•Ôºö ÊêúÁ¥¢ÂåÖÂê´ÊåáÂÆöÈîÆÁöÑÂ≠êÈ°µ ‰øÆÊîπËØ•È°µÁöÑÂÄº Êï¥È°µÂõûÂÜôÂà∞Á£ÅÁõòÔºàÁõ∏ÂΩì‰∫éË¶ÜÁõñÂéüÂÖàÁöÑÈ°µÔºåÂØπËØ•È°µÁöÑ‰ªª‰ΩïÂºïÁî®‰æùÁÑ∂ÊúâÊïàÔºâ Êñ∞Âä†ÈîÆÁ≠ñÁï•Ôºö ÊâæÂà∞ÂèØÂÆπÁ∫≥Êñ∞ÈîÆËåÉÂõ¥ÁöÑÈ°µÔºåÁÑ∂ÂêéÊ∑ªÂä†Âà∞ËØ•È°µ Ëã•È°µÈù¢Á©∫Èó¥‰∏çË∂≥ÔºåÂàôÂ∞ÜÂÖ∂ÂàÜË£Ç‰∏∫‰∏§‰∏™ÂçäÊª°ÁöÑÈ°µÔºåÂêåÊó∂‰øÆÊîπÁà∂È°µÔºåËÆ∞ÂΩïÂàÜË£ÇÂêéÁöÑÊñ∞ÁöÑÈîÆÁöÑËåÉÂõ¥ ‰∏Ä‰∏™ÂÖ∑Êúâ N ‰∏™ÈîÆÁöÑ B-Tree ÁöÑÊ∑±Â∫¶‰∏∫ O(log N)ÔºõÂ§öÊï∞Êï∞ÊçÆÂ∫ìÂèØ‰ª•ÈÄÇÂêà 3~4 Â±Ç B-Tree„ÄÇÂàÜÊîØÂõ†Â≠ê‰∏∫ 500 ÁöÑ 4KB ÂõõÁ∫ßÊ†ëÂèØÂ≠òÂÇ® 256TB ÁöÑÊï∞ÊçÆ Â¥©Ê∫ÉÊÅ¢Â§çÔºöWAL, Write-Ahead Log„ÄÇÈÄöËøáËØ•Êó•ÂøóÊù•ÊÅ¢Â§ç ÈúÄË¶ÅËÄÉËôëÂπ∂ÂèëÊéßÂà∂ ÂÜôÊîæÂ§ßÁöÑÈóÆÈ¢òÔºàÈ°µÂàÜË£ÇÔºâ ‰∫ãÂä°ÊîØÊåÅÊõ¥Âä†ÂÆπÊòì ‰∫ãÂä°Â§ÑÁêÜÔºàOLTPÔºâÂíåÂàÜÊûêÂ§ÑÁêÜÔºàOLAPÔºâ ‰∫åËÄÖÂØπÊØîÔºö Â§ßÁöÑ‰ºÅ‰∏ö‰ºöÂçïÁã¨Âª∫Á´ãÊï∞‰ªìÔºåÂêåÊ≠•Êù•Ëá™ OLTP Á≥ªÁªüÁöÑÊï∞ÊçÆÔºåÂú®ÂçïÁã¨ÁöÑÊï∞‰ªì‰∏≠ËøõË°åÂàÜÊûêÂ§ÑÁêÜÔºå‰∏ç‰ºöÂΩ±ÂìçÁ∫ø‰∏ä‰∏öÂä° ÂØºÂÖ•Êï∞‰ªìÔºöELT, Extract-&gt;Transform-&gt;Load Â∏∏ËßÅÊï∞‰ªìÁ≥ªÁªüÔºöApache Hive, Spark SQL, Cloudera Implala ÊòüÂûã‰∏éÈõ™Ëä±ÂûãÂàÜÊûêÊ®°Âºè Â∏∏ËßÅÁöÑÊòØÊòüÂûãÊ®°ÂºèÔºå‰πüÁß∞‰∏∫Áª¥Â∫¶Âª∫Ê®°„ÄÇÁâπÁÇπÊòØÊúâ‰∏Ä‰∏™‰∫ãÂÆûË°®ÔºåÂÖ≥ËÅî‰∫ÜÂæàÂ§ö‰∏™Áª¥Â∫¶Ë°®„ÄÇ‰∫ãÂÆûË°®Êú¨Ë∫´ÂèØËÉΩ‰ºöÂæàÂ∫ûÂ§ßÔºåÂÖ∂‰∏≠ÁöÑÊØè‰∏ÄË°åÈÉΩ‰ª£Ë°®‰∏Ä‰∏™‰∫ã‰ª∂ÔºåÁª¥Â∫¶ÈÄöÂ∏∏‰ª£Ë°®‰∫ã‰ª∂ÁöÑWho, What, Where, When, How, Why Èõ™Ëä±‚ùÑÔ∏è Ê®°ÂûãÊòØÊòüÂûãÊ®°ÂûãÁöÑÂèò‰ΩìÔºåÂÆÉÂ∞ÜÁª¥Â∫¶Ëøõ‰∏ÄÊ≠•ÁªÜÂàÜ‰∏∫Â≠êÁ©∫Èó¥Ôºå‰ªéËÄåÊõ¥Âä†ËßÑËåÉÂåñ„ÄÇ‰ΩÜÊòØËøô‰∏™‰ºöÂ¢ûÂä†ÂàÜÊûêÊü•ËØ¢ÁöÑÂ§çÊùÇÂ∫¶ÔºåÊâÄ‰ª•ÊòüÂûãÂàÜÊûêÊ®°ÂºèÊõ¥ÂèóÊ¨¢Ëøé ÂàóÂ≠òÂÇ® Êï∞‰ªì‰∏≠ÁöÑÂàóÈÄöÂ∏∏ÂæàÂÆΩÔºåÊúâÁöÑÂèØËÉΩÂ§öËææ 100 ‰∏™ Ê†∏ÂøÉÊÄùÊÉ≥ÊòØÂ∞ÜÊØèÂàó‰∏≠ÁöÑÊâÄÊúâÂÄºÂ≠òÂÇ®Âú®‰∏ÄËµ∑ÔºåÊâÄÊúâÁöÑÊï∞ÊçÆÊó∂Â≠òÂÇ®Âú®‰∏ÄÁªÑÂàóÊñá‰ª∂‰∏≠ÔºåÊØè‰∏™Êñá‰ª∂ÈÉΩ‰ª•Áõ∏ÂêåÈ°∫Â∫è‰øùÂ≠òÊï∞ÊçÆË°å ÂàóÂéãÁº©Ôºö ÂæàÂÆπÊòìËøõË°åÂéãÁº© Â∏∏Áî®‰ΩçÂõæÁºñÁ†ÅÔºåÂπ∂ÈÖçÂêàÊ∏∏Á®ãÁºñÁ†ÅÈôç‰ΩéÂ≠òÂÇ®Á©∫Èó¥ÔºàËøô‰∏™‰∏ªË¶ÅÊòØÈíàÂØπÈõ∂‰ΩçÁ®ÄÁñèÁöÑÊÉÖÂÜµÔºâ ÂàóÊéíÂ∫èÔºö ÂèØ‰ª•Ê†πÊçÆÊü•ËØ¢ÈúÄÊ±ÇÈÄâÊã©ÊéíÂ∫èÁöÑÂàó ÊéíÂ∫èÂèØÂ∏ÆÂä©Ëøõ‰∏ÄÊ≠•ÂéãÁº©ÔºàÈáçÂ§çÂÄº‰πüÂèØ‰ª•ÈááÁî®ÁÆÄÂçïÁöÑÊ∏∏Á®ãÁºñÁ†ÅÔºåÊâÄ‰ª•Âç≥‰æøÊòØÊï∞ÂçÅ‰∫øË°å‰πü‰∏çÊÄïÔºâ Âü∫‰∫éÁ¨¨‰∏Ä‰∏™ÊéíÂ∫èÈîÆÁöÑÂéãÁº©ÊïàÊûúÈÄöÂ∏∏ÊúÄÂ•Ω ÊéíÂ∫èÁ±ª‰ºº‰∫éÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰∏≠Áî®ÁöÑÁ¥¢ÂºïÔºåÊñπ‰æøÊü•ËØ¢ ÂÜôÂÖ•ÂèØ‰ª•ÈááÂèñÁ±ª‰ºº LSM-Tree ÁöÑÊÄùË∑Ø Áâ©ÂåñËßÜÂõæÔºöÊü•ËØ¢ÁªìÊûúÁöÑÂÆûÈôÖÂâØÊú¨ÔºåË¢´ÂÜôÂÖ•Âà∞Á£ÅÁõò‰∫ÜÔºõËôöÊãüËßÜÂõæÂàôÊòØÁî®‰∫éÁºñÂÜôÊü•ËØ¢ÁöÑÂø´Êç∑ÊñπÂºè Êï∞ÊçÆÁºñÁ†Å‰∏éÊºîÂåñÊï∞ÊçÆÁºñÁ†ÅÊ†ºÂºè Á®ãÂ∫è‰∏≠Ëá≥Â∞ëÊúâ‰∏§ÁßçÂ∏∏Áî®ÁöÑÊï∞ÊçÆË°®Á§∫ÂΩ¢ÂºèÔºö ÂÜÖÂ≠ò‰∏≠ÔºåÊï∞ÊçÆ‰øùÂ≠òÂú®ÂØπË±°„ÄÅÁªìÊûÑ‰Ωì„ÄÅÂàóË°®„ÄÅÊï∞ÁªÑ„ÄÅÂìàÂ∏åË°®ÂíåÊ†ëÁ≠âÁªìÊûÑ‰∏≠ÔºåÂØπ‰∫é CPU ÁöÑÈ´òÊïàËÆøÈóÆÂíåÊìç‰ΩúÂÅö‰∫Ü‰ºòÂåñ Êï∞ÊçÆÂÜôÂÖ•Êñá‰ª∂ÊàñËÄÖÁΩëÁªú‰º†ËæìÊó∂ÔºåÈúÄË¶ÅËøõË°åÁºñÁ†Å‰∏∫Â≠óËäÇÂ∫èÂàó ËØ≠Ë®ÄÁâπÂÆöÁöÑÊ†ºÂºè Â∏∏ËßÅÁöÑÂåÖÊã¨Ôºö java.io.Serializable Ruby ‰∏≠ÁöÑ Marshal Python ‰∏≠ÁöÑ pickle ‰ºòÁÇπÔºöÂØπ‰∫éÊüêÁßçËØ≠Ë®ÄËá™Ë∫´Êù•ËØ¥ÔºåÁºñËß£Á†Å‰ºöÂæàÊñπ‰æøÔºå‰∏çÈúÄË¶ÅÂºïÂÖ•Á¨¨‰∏âÊñπ‰æùËµñ Áº∫ÁÇπÔºö ‰∏éÁâπÂÆöËØ≠Ë®ÄÁªëÂÆöÔºå‰∏çÂà©‰∫éÂíåÂÖ∂ÂÆÉËØ≠Ë®ÄÁöÑÂºÇÊûÑÁ≥ªÁªüÈÄöËÆØ ÂèØËÉΩ‰ºöÊúâÂÆâÂÖ®ÊÄßÈóÆÈ¢ò ÂÖºÂÆπÊÄß‰∏çËÉΩ‰øùËØÅ ÊïàÁéáÈÄöÂ∏∏ÊØîËæÉ‰ΩéÔºåÈúÄË¶ÅËä±Ë¥πËæÉÂ§öÁöÑ CPU Êó∂Èó¥ÊàñËÄÖÂÜÖÂ≠òÁ©∫Èó¥ JSON„ÄÅXML Âíå‰∫åËøõÂà∂Âèò‰Ωì JSON„ÄÅCSV„ÄÅXML ÈÉΩÊòØÊñáÊú¨Ê†ºÂºèÔºåÂèØËØªÊÄßËæÉÂ•Ω Â≠òÂú®ÁöÑÈóÆÈ¢òÔºö Êï∞Â≠óÁºñÁ†Å‰∏çÊòéÁ°ÆÔºàÊØîÂ¶Ç CSV ‰∏≠Â∞±Êó†Ê≥ïÂå∫ÂàÜÊòØÊï∞Â≠óËøòÊòØÊï∞Â≠óÁªÑÊàêÁöÑÂ≠óÁ¨¶‰∏≤ÔºõJSON ‰∏≠ÂØπ‰∫éÂ§ß‰∫é 2^53 ÁöÑÊï¥Êï∞Â∞±ÂÇªÁúº‰∫ÜÔºâ ‰∏çÊîØÊåÅ‰∫åËøõÂà∂ÔºàËôΩÁÑ∂ÂèØ‰ª•Áî® base64 Êêû‰∫ãÊÉÖÔºå‰ΩÜÊòØ‰ºöÂ¢ûÂä†Á©∫Èó¥ÂíåÁºñËß£Á†ÅÁöÑÊó∂Èó¥Ôºâ CSV Êó†‰ªª‰ΩïÊ®°Âºè XML Âíå JSON ÂùáÊúâÂèØÈÄâÁöÑÊ®°Âºè ‰∏Ä‰∫õÂèòÁßçÔºåÂÆÉ‰ª¨ÁöÑÂ∫îÁî®Âπ∂‰∏çÊòØÂæàÂπøÊ≥õÔºö JSONÔºàBSON„ÄÅBJSON„ÄÅUBJSON„ÄÅBISON„ÄÅSmile Âíå Message PackÔºâ XMLÔºàWBXML Âíå Fast InfosetÔºâ ÂêéÈù¢ÁöÑüå∞ÈÉΩ‰ª•Ë°®Ëææ‰∏ãÈù¢ÁöÑ‰ø°ÊÅØ‰∏∫‰æãÔºåÊù•ÂÅöÂØπÁÖßÔºö 12345&#123; "userName": "Martin", "favoriteNumber": 1337, "interests": ["daydreaming", "hacking"]&#125; Message Pack ÊòØ JSON ÁöÑ‰∫åËøõÂà∂ÁºñÁ†ÅÔºåÁ§∫‰æãÂ¶Ç‰∏ãÔºö Thrift &amp; Protocol Buffers Thrift ÊòØ Facebook ÂºÄÂèëÔºå2007~2008 Âπ¥ÂºÄÊ∫ê Thrift ÊòØ‰∏Ä‰∏™ÊØîËæÉÂÆåÊï¥ÁöÑ RPC Ê°ÜÊû∂ÔºåÂú®ÂÆÉÁöÑÂçèËÆÆÂ±ÇÊèê‰æõ‰∫ÜÂ§öÁßç Protocol ÁöÑÂÆûÁé∞ÔºåÊñπ‰æøÂ∫î‰ªòÂ§öÁßçÂú∫ÊôØ„ÄÇÊØîÂ¶ÇÂ∏∏ËßÅÁöÑ BinaryProtocol Âíå CompactProtocol„ÄÇ BinaryProtocol ÁºñÁ†ÅÁ§∫‰æãÔºö ‰∏é Message Pack ÁºñÁ†ÅÁõ∏ÊØîÔºåÊ≤°Êúâ‰∫ÜÂ≠óÊÆµÂêç ‰ΩøÁî®‰∫Ü field tag Êù•Êò†Â∞Ñ IDL ÂÆö‰πâÁöÑÂêÑ‰∏™Â≠óÊÆµ CompactProtocol ÁºñÁ†ÅÁ§∫‰æãÔºö field tag Âíå type ‰ΩøÁî®‰∏Ä‰∏™Â≠óËäÇË°®Á§∫ field tag ‰ΩøÁî®‰∫ÜÂÅèÁßªËÆ°ÁÆó Êï¥Êï∞ÈááÁî®ÂèòÈïøÂ≠óËäÇÔºåËÄåÈùû BinaryProtocol ‰∏≠ 1337 ‰ΩøÁî®ÁöÑ 8 Â≠óËäÇÔºåÊç¢ÊàêÂèòÈïøÂ≠óËäÇÂè™ÈúÄË¶Å 2 Â≠óËäÇÂç≥ÂèØ Protocol Buffers Google ÂºÄÂèëÔºå2007~2008 Âπ¥ÂºÄÊ∫ê ‰ΩøÁî® PB ÁºñÁ†ÅÁöÑÁ§∫‰æãÔºö required Âíå optional ËøôÁßç‰øÆÈ•∞ÊòØ‰∏ç‰ºö‰ΩìÁé∞Âú®ÁºñÁ†Å‰∏≠ÁöÑÔºåËÄåÊòØÂú®ËøêË°åÊó∂ÂÅöÁöÑÊ£ÄÊü• ‰øùËØÅÂâçÂêéÂêëÂÖºÂÆπÔºö field tag Ëá≥ÂÖ≥ÈáçË¶ÅÔºå‰∏çÂèØÈöè‰æøÊõ¥Êîπ optional Â≠óÊÆµÁöÑ field tag ÂèØ‰ª•Âà†Èô§Ôºå‰ΩÜ‰∏çË¶ÅÂ§çÁî®Â∑≤Âà†Èô§ÁöÑ field tag Êñ∞Â¢ûÂ≠óÊÆµÂøÖÈ°ªÊòØ optional ÊàñËÄÖÂ∏¶ÊúâÈªòËÆ§ÂÄºÔºå‰øùËØÅÂêëÂêéÂÖºÂÆπ ‰∏çÂèØËΩªÊòì‰øÆÊîπ field Á±ªÂûã Avro Apache Avro ÊòØ Hadoop ÁöÑÂ≠êÈ°πÁõÆÔºåÊèê‰æõ‰∫Ü‰∏§ÁßçÊ®°ÂºèËØ≠Ë®ÄÔºöAvro IDL Âíå JSON Ê†ºÂºè ÁâπÁÇπÔºö Ê≤°ÊúâÊ†áÁ≠æÂè∑ ÁºñÁ†ÅÈùûÂ∏∏Á¥ßÂáë ÁºñÁ†Å‰∏≠Ê≤°ÊúâÂ≠óÊÆµÁ±ªÂûã ÁºñÁ†ÅÁ§∫‰æãÔºö Âå∫ÂàÜËØªÊ®°ÂºèÂíåÂÜôÊ®°Âºè„ÄÇÂÜôÊ®°ÂºèÂíåËØªÊ®°Âºè‰∏çÂøÖÂÆåÂÖ®‰∏ÄÊ®°‰∏ÄÊ†∑ÔºåÂè™ÈúÄË¶Å‰øùÊåÅÂÖºÂÆπ ÂÜôÊ®°ÂºèÂíåËØªÊ®°Âºè‰∏≠ÁöÑÂ≠óÊÆµÈ°∫Â∫èÂèØ‰∏çÂêåÔºåÂõ†‰∏∫Âú®Ê®°ÂºèËß£ÊûêÊó∂‰ºö‰ΩøÁî®Â≠óÊÆµÂêçÂåπÈÖç Âä®ÊÄÅÁîüÊàêÊ®°ÂºèÊòØÊúÄÂ§ßÁöÑÁâπÁÇπÔºå‰∏çÈúÄË¶ÅÂÉè PB ÊàñËÄÖ Thrift ‰∏≠ÈÇ£Ê†∑ÔºåÊòæÂºèÂàÜÈÖç field tagÔºåÊØîËæÉÁÅµÊ¥ª„ÄÇÁâπÂà´ÈÄÇÂêàÁºñÁ†ÅÊï∞ÊçÆÂ∫ìË°®„ÄÇ ÂèÇËÄÉ Êï∞ÊçÆÂØÜÈõÜÂûãÂ∫îÁî®ËÆæËÆ°ÔºöÁ¨¨‰∏ÄÈÉ®ÂàÜ Thrift Protocol Buffers Avro Python Examples]]></content>
      <categories>
        <category>Á≥ªÁªüËÆæËÆ°</category>
      </categories>
      <tags>
        <tag>„ÄäÊï∞ÊçÆÂØÜÈõÜÂûãÂ∫îÁî®ËÆæËÆ°„Äã</tag>
        <tag>ÂàÜÂ∏ÉÂºè</tag>
        <tag>Êï∞ÊçÆÊ®°Âûã</tag>
        <tag>Êï∞ÊçÆÂ∫ìÂ≠òÂÇ®</tag>
        <tag>Êï∞ÊçÆÁºñÁ†Å</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Go Ê∫êÁ†ÅÂ≠¶‰π†‰πã Context]]></title>
    <url>%2F2019%2F08%2F02%2Fgo-context-intro%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄÂú®‰∏ÄÊ¨°ÊéíÊü•Êüê HTTP Êé•Âè£ËØ∑Ê±ÇÈ¢ëÁπÅÂõ† context canceled ÈîôËØØÂØºËá¥ËØ∑Ê±ÇÂ§ÑÁêÜÂ§±Ë¥•ÁöÑÈóÆÈ¢òÊúüÈó¥ÔºåÊ∑±ÂÖ•‰∫ÜËß£‰∫Ü‰∏ã Go ËØ≠Ë®ÄÁöÑ Context ÂÆûÁé∞„ÄÇÊú¨ÊñáÂ∞ÜÈ¶ñÂÖà‰ªãÁªçÊàë‰ª¨ÊòØÂ¶Ç‰ΩïÊéíÊü•ËØ°ÂºÇÁöÑ context canceled ‰∫ßÁîüÂéüÂõ†Ôºà‰πüÂ∞±ÊòØÂú®Âì™ÂÑøÂõ†‰∏∫‰ªÄ‰πàËÄåÂØºËá¥ÂèñÊ∂àÁöÑÔºâÔºõÊé•‰∏ãÊù•Â∞ÜÊ∑±ÂÖ•‰ªãÁªç Context ËØûÁîüÁöÑÁõÆÁöÑ„ÄÅÊ∫êÁ†ÅËß£ÊûêÂèäÂ∫îÁî®Âú∫ÊôØÁ≠âÔºå‰æø‰∫éÊõ¥Ëøõ‰∏ÄÊ≠•Âä†Ê∑±ÂØπÂÆÉÁöÑÁêÜËß£ÔºõÊúÄÂêéÊàë‰ª¨‰πü‰ºöË∞àÂèä‰ΩøÁî® Context ÁöÑ‰∏Ä‰∫õÁóõÁÇπ„ÄÇ ÊéíÊü• context canceled ÁöÑËâ∞ËæõÂéÜÁ®ãËÉåÊôØÊàë‰ª¨ÈÉ®ÁΩ≤Âú®Áîü‰∫ßÁéØÂ¢ÉÁöÑ HTTP ÊúçÂä°‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∏™Áî®‰∫éËÆ∞ÂΩïÁî®Êà∑ËØæÁ®ãÂ≠¶‰π†ËøõÂ∫¶ÁöÑÊé•Âè£ÔºåÂú® Sentry ‰∏≠ÂèëÁé∞ÔºåÊúâÂ§ßÈáè context canceled Êä•ÈîôÂá∫Áé∞ÔºåÂØºËá¥Âú®ÊâßË°åÊï∞ÊçÆÂ∫ìÊü•ËØ¢Êó∂Â§±Ë¥•Ôºå‰ªéËÄåÂØºËá¥ÂÆåÊï¥ÁöÑËØ∑Ê±ÇÂ§ÑÁêÜÊµÅÁ®ãÊ≤°ÊúâËµ∞ÂÆåÔºàÁî®Êà∑ÁöÑÂ≠¶‰π†ËøõÂ∫¶ËÆ°ÁÆó„ÄÅ‰∏öÂä°ÊñπÊ∂àÊÅØÈÄöÁü•Á≠âÊ≤°ÊúâÊâßË°åÔºâ„ÄÇ‰ΩÜÊó©ÊúüÁî±‰∫é Sentry Êé•ÂÖ•Â≠òÂú®ÈóÆÈ¢òÔºåÂØºËá¥ÈîôËØØËÆ∞ÂΩïÊ≤°Êúâ‰∏äÊä•ÔºõÁõ¥Âà∞ÈóÆÈ¢ò‰øÆÂ§çÂêéÔºåÊâçÂú® Sentry ‰∏äËßÇÂØüÂà∞Â§ßÈáèÊä•ÈîôÊèêÁ§∫„ÄÇÁî±Ê≠§ÔºåÂºÄÂêØ‰∫ÜÂÆö‰Ωç context canceled ÈóÆÈ¢ò‰πãÊóÖ~ Êä•ÂëäËØ¶ÁªÜÈîôËØØÊó•ÂøóÊàë‰ª¨È¶ñÂÖàÂØπÂèëÁîüÈîôËØØÁöÑ‰ΩçÁΩÆÔºåÊ∑ªÂä†‰∫ÜÊõ¥ËØ¶ÁªÜÁöÑÈîôËØØÊó•ÂøóÔºåÂ¶ÇËØ∑Ê±Ç‰∏ä‰∏ãÊñá‰ª•ÂèäÈîôËØØÂèëÁîüÊó∂ÁöÑË∞ÉÁî®Ê†à„ÄÇÂæÖ‰∏äÁ∫øÂêéÔºåÂú® Sentry ‰∏≠ËßÇÂØüÂà∞‰∫ÜÂá∫ÈîôÊó∂ËØ¶ÁªÜÁöÑË∞ÉÁî®Ê†àÂ¶Ç‰∏ãÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566File &quot;git.xixi.com/group/project-foo/pkg/models/prog/learn_progress.go&quot;, line 109, in Create d.Detect() File &quot;git.xixi.com/group/project-foo/pkg/controller/learn_progress.go&quot;, line 46, in Update success := learnProgress.Create(ctx, memberID, unitID, bizType, progress, clientUpdatedAt) != nil File &quot;git.xixi.com/group/project-foo/pkg/web/handlers/learn_progress.go&quot;, line 77, in Post success := h.ctrl.Update(h.R.Context(), memberID, unitID, bizType, progress, item.ClientUpdateAt) File &quot;/go/pkg/mod/git.xixi.com/bit/zerzura@v4.1.1+incompatible/rest/handler.go&quot;, line 53, in ServeHTTP render(handler.Post()) File &quot;/go/pkg/mod/github.com/go-chi/chi@v3.3.2+incompatible/mux.go&quot;, line 291, in func1 handler.ServeHTTP(w, r) File &quot;net/http/server.go&quot;, line 1995, in ServeHTTP f(w, r) File &quot;/go/pkg/mod/github.com/go-chi/chi@v3.3.2+incompatible/mux.go&quot;, line 424, in routeHTTP h.ServeHTTP(w, r) File &quot;net/http/server.go&quot;, line 1995, in ServeHTTP f(w, r) File &quot;/go/pkg/mod/git.xixi.com/bit/zerzura@v4.1.1+incompatible/rest/middleware/sentry_meta.go&quot;, line 19, in func1 next.ServeHTTP(w, r.WithContext(ctx)) File &quot;net/http/server.go&quot;, line 1995, in ServeHTTP f(w, r) File &quot;/go/pkg/mod/git.xixi.com/go/box@v0.0.0-20190710074902-1cbc4c2abdad/zapi/middleware/auth/nginx.go&quot;, line 200, in func1 next.ServeHTTP(w, r1) File &quot;net/http/server.go&quot;, line 1995, in ServeHTTP f(w, r) File &quot;/go/pkg/mod/git.xixi.com/go/box@v0.0.0-20190710074902-1cbc4c2abdad/zapi/context.go&quot;, line 67, in func1 next.ServeHTTP(w, r1) File &quot;net/http/server.go&quot;, line 1995, in ServeHTTP f(w, r) File &quot;/go/pkg/mod/github.com/go-chi/cors@v1.0.0/cors.go&quot;, line 199, in func1 next.ServeHTTP(w, r) File &quot;net/http/server.go&quot;, line 1995, in ServeHTTP f(w, r) File &quot;/go/pkg/mod/git.xixi.com/go/box@v0.0.0-20190710074902-1cbc4c2abdad/zapi/middleware/cors.go&quot;, line 51, in 1 defaultCORS.Handler(next).ServeHTTP(w, r) File &quot;net/http/server.go&quot;, line 1995, in ServeHTTP f(w, r) File &quot;/go/pkg/mod/github.com/go-chi/chi@v3.3.2+incompatible/middleware/heartbeat.go&quot;, line 21, in 1 h.ServeHTTP(w, r) File &quot;net/http/server.go&quot;, line 1995, in ServeHTTP f(w, r) File &quot;/go/pkg/mod/github.com/go-chi/chi@v3.3.2+incompatible/middleware/recoverer.go&quot;, line 35, in func1 next.ServeHTTP(w, r) File &quot;net/http/server.go&quot;, line 1995, in ServeHTTP f(w, r) File &quot;/go/pkg/mod/github.com/go-chi/chi@v3.3.2+incompatible/middleware/logger.go&quot;, line 46, in 1 next.ServeHTTP(ww, WithLogEntry(r, entry)) File &quot;net/http/server.go&quot;, line 1995, in ServeHTTP f(w, r) File &quot;/go/pkg/mod/git.xixi.com/go/box@v0.0.0-20190710074902-1cbc4c2abdad/zapi/middleware/realip.go&quot;, line 18, in func1 h.ServeHTTP(w, r) File &quot;net/http/server.go&quot;, line 1995, in ServeHTTP f(w, r) File &quot;/go/pkg/mod/git.xixi.com/go/box@v0.0.0-20190710074902-1cbc4c2abdad/zapi/middleware/sentry.go&quot;, line 83, in func1 next.ServeHTTP(w, r) File &quot;net/http/server.go&quot;, line 1995, in ServeHTTP f(w, r) File &quot;/go/pkg/mod/git.xixi.com/bit/zerzura@v4.1.1+incompatible/rest/middleware/stats.go&quot;, line 66, in 1 next.ServeHTTP(lw, r1) File &quot;net/http/server.go&quot;, line 1995, in ServeHTTP f(w, r) File &quot;/go/pkg/mod/github.com/go-chi/chi@v3.3.2+incompatible/mux.go&quot;, line 81, in ServeHTTP mx.handler.ServeHTTP(w, r) File &quot;net/http/server.go&quot;, line 2774, in ServeHTTP handler.ServeHTTP(rw, req) File &quot;net/http/server.go&quot;, line 1878, in serve serverHandler&#123;c.server&#125;.ServeHTTP(w, w.req) Áî±‰∫éÊàë‰ª¨ÊòØÂ∞ÜËØ∑Ê±ÇÁöÑ Context ‰∏ÄÁõ¥‰º†ÈÄíÂà∞ÊúÄ‰∏ãÂ±ÇÁöÑÔºåËÄåÂú®Áà∂ Context Êî∂Âà∞ÂèñÊ∂à‰ø°Âè∑Âêé‰πü‰ºöÈÄöÁü•Âà∞Â≠ê ContextÔºåÊâÄ‰ª•Êàë‰ª¨ÊúâÁêÜÁî±Áõ∏‰ø°Ëøô‰∏™ÂèñÊ∂àÁöÑËß¶ÂèëÊòØÂú®Êüê‰∏™Áà∂ Context ËäÇÁÇπ„ÄÇ‰ΩÜÂÖ∑‰ΩìÊòØÂú®Âì™ÂÑøÔºå‰ªÄ‰πàÂéüÂõ†ÂØºËá¥ÁöÑÂπ∂‰∏çÊ∏ÖÊ•ö„ÄÇ ‰øÆÂ§çÈóÆÈ¢ò &amp; Ê∑ªÂä†Ê£ÄÊµã‰∏çËøá‰∏∫‰∫ÜÈÅøÂÖçÂõ†‰∏∫ sql/driver Â±ÇÊî∂Âà∞ Context Cancel ‰ø°Âè∑ËÄåÂØºËá¥Êü•ËØ¢Â§±Ë¥•ÔºåËøõËÄåÂØºËá¥ÂêéÁª≠ÁöÑÂ§ÑÁêÜÊµÅÁ®ãÊú™ËÉΩÊâßË°åÔºåÊàë‰ª¨ÂÜ≥ÂÆöÂÖà‰øÆÂ§çÈóÆÈ¢òÔºåÂÜçÊéíÊü•ÂéüÂõ†„ÄÇÈÇ£ÊÄé‰πà‰øÆÂ§çÂë¢ÔºüÂÖ∂ÂÆûÈùûÂ∏∏ÁÆÄÂçïÔºåÊàë‰ª¨Êèê‰æõ‰∫Ü‰∏Ä‰∏™‰∏çÂ∏¶ Cancel ÁöÑ Context ÁªßÁª≠ÂæÄ sql/driver Â±Ç‰º†ÈÄíÔºå‰ΩÜËØ• Context ÂêåÊ†∑ÁªßÊâø‰∫ÜÁà∂ Context ÁöÑ ValueÔºåËøôÊ†∑‰∏Ä‰∫õÂÖÉ‰ø°ÊÅØ‰πüÂèØ‰ª•Ë¢´ÁªßÁª≠‰º†ÈÄí‰∏ãÂéª„ÄÇÂêåÊó∂‰∏∫‰∫ÜÂú®Ê£ÄÊü•Âà∞ÂéüÊúâÂ≠ê Context Êî∂Âà∞ Cancel ‰ø°Âè∑Êó∂ÔºåÊä•ÂëäËØ¶ÁªÜÁöÑÈîôËØØÂíå Context StringÔºåÊàë‰ª¨‰πüÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊ£ÄÊµãÂô®„ÄÇÁõ∏ÂÖ≥Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö1234567891011121314151617181920212223242526272829303132333435363738394041424344type noCancelCtx struct &#123; ctx context.Context&#125;func (c *noCancelCtx) Deadline() (time.Time, bool) &#123; return time.Time&#123;&#125;, false&#125;func (c *noCancelCtx) Done() &lt;-chan struct&#123;&#125; &#123; return nil&#125;func (c *noCancelCtx) Err() error &#123; return nil&#125;func (c *noCancelCtx) Value(key interface&#123;&#125;) interface&#123;&#125; &#123; return c.ctx.Value(key)&#125;func WithoutCancel(ctx context.Context) context.Context &#123; return &amp;noCancelCtx&#123;ctx: ctx&#125;&#125;type Detector struct &#123; where string isDone bool ctx context.Context&#125;func NewContextDoneDetector(ctx context.Context) *Detector &#123; return &amp;Detector&#123;ctx: ctx&#125;&#125;func (d *Detector) Detect() &#123; if d.isDone &#123; return &#125; select &#123; case &lt;-d.ctx.Done(): d.isDone = true var where string _, file, line, ok := runtime.Caller(1) if ok &#123; where = fmt.Sprintf("%s:%d", file, line) &#125; else &#123; where = "unknown" &#125; log.WithContext(d.ctx).Errorf("detect context done signal in \"%s\". context is %s", where, d.ctx) default: &#125;&#125; ÁÑ∂ÂêéÂØπÂéüÊúâÁöÑ‰∏öÂä°‰ª£Á†ÅËøõË°å‰∏Ä‰∫õÊîπÈÄ†Â¶Ç‰∏ãÔºö123456789101112131415161718192021222324// Create ÂàõÂª∫Áî®Êà∑Â≠¶‰π†ËøõÂ∫¶func (learnProgressDB *LearnProgressDAO) Create(ctx context.Context, memberID int64, unitID int64, bizType int16, progress int32, clientUpdatedAt int64) *LearnProgress &#123; d := utils.NewContextDoneDetector(ctx) d.Detect() // ...Ê≠§Â§ÑÁúÅÁï• N Ë°å d.Detect() // ÊõøÊç¢Êàê‰∏çÂ∏¶ Cancel ÁöÑ Context ctxWithoutCancel := utils.WithoutCancel(ctx) result, err := db.Exec(ctxWithoutCancel, i, args...) // ...ÁªßÁª≠ÁúÅÁï• d.Detect() object := db.QueryRow(ctxWithoutCancel, "SELECT id, member_id, unit_id, biz_type, progress, "+ "client_updated_at FROM learn_progress WHERE id = ?", id) learnProgress := &amp;LearnProgress&#123;&#125; d.Detect() err = object.Scan(&amp;learnProgress.ID, &amp;learnProgress.MemberID, &amp;learnProgress.UnitID, &amp;learnProgress.BizType, &amp;learnProgress.Progress, &amp;learnProgress.ClientUpdatedAt) if err != nil &#123; log.WithContext(ctx).WithError(err).Errorf("create and get progress %d error", id) return nil &#125; d.Detect() return learnProgress&#125; Âú®‰∏äÁ∫øÂêéÔºåÂõ†‰∏∫ context canceled ËÄåÂØºËá¥ËØ∑Ê±ÇÂ§ÑÁêÜÊµÅÁ®ã‰∏çËÉΩËµ∞ÂÆåÁöÑÈóÆÈ¢òËß£ÂÜ≥‰∫Ü„ÄÇÂêåÊó∂‰πüÊä•ÂëäÂá∫ÂæàÂ§öÊ£ÄÊü•Âà∞‰∏äÂ±Ç Context ÂèñÊ∂àÁöÑ‰ø°Âè∑ÔºåËØ¶ÁªÜÁöÑÊó•ÂøóÂ¶Ç‰∏ãÔºö ÂàÜÊûê HTTP Server Ê∫êÁ†ÅÊòæÁÑ∂Ôºå‰ªéÊó•Âøó‰∏≠ÂèØ‰ª•ÁúãÂà∞Êúâ‰∏§Â§Ñ Cancel Context ÊúâÊûÅÂ§ßÁöÑÂ´åÁñëÔºåÈÇ£‰πàÂâ©‰∏ãÁöÑÈóÆÈ¢òÂ∞±ÊòØË¶ÅÁ°ÆÂÆöËøô‰∏§‰∏™ Cancel Context ÊòØÊÄé‰πàÊù•ÁöÑÔºüËøôÊ†∑ÔºåÊé•‰∏ãÊù•Êàë‰ª¨ÂÜçÂéªÁ°ÆËÆ§ÊòØÂì™‰∏™ Cancel Context Âú®Âì™‰ºòÂÖàË¢´ cancel ‰ªéËÄåÂØºËá¥Â≠êËäÇÁÇπÊî∂Âà∞‰∫Ü ctx.Done() ‰ø°Âè∑Ôºå‰∏çÂ∞±ÂèØ‰ª•Ëß£Á≠îÁñëÊÉë‰∫ÜÂêóÔºü ÂàÜÊûêËøôÊ£µ Context Ê†ëÂèØ‰ª•ÂèëÁé∞ÔºåÊàë‰ª¨‰ºòÂÖàÂéªÁúã HTTP Server Â§ÑÁêÜËØ∑Ê±ÇÈÉ®ÂàÜÁöÑ‰ª£Á†ÅÔºåÂ∞±ÊúÄÂÆπÊòìÊâæÈ°∫ÁùÄËØ∑Ê±ÇÂ§ÑÁêÜÁöÑÂêÑ‰∏™ÊµÅÁ®ãÊù•ÂÆö‰ΩçÂà∞ Cancel Context ÊòØÂú®‰ΩïÂ§ÑÁîüÊàêÁöÑÔºå‰ª•ÂèäÂú®‰ΩïÂ§Ñ‰ºöË¢´Ë∞ÉÁî®ÁöÑ„ÄÇ ‰∏ÄËà¨Êàë‰ª¨ÂêØÂä® Server ÊòØË∞ÉÁî®‰∫Ü ListenAndServe Êé•Âè£ÔºåÈ°∫ÁùÄËØ•Êé•Âè£ÂæÄ‰∏ãÂàÜÊûêÂç≥ÂèØÊâæÂà∞Á∫øÁ¥¢ÔºåËØ¶ÁªÜÁöÑÂàÜÊûêÂ¶Ç‰∏ãÔºàÂíåÊàë‰ª¨Á°ÆÂÆöÈóÆÈ¢òÊó†ÂÖ≥Á¥ßË¶ÅÁöÑ‰ª£Á†ÅÂÖàÂøΩÁï•‰∫ÜÔºâÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103// ListenAndServe Áî®‰∫éÂêØÂä®ÊúçÂä°Âπ∂ÁõëÂê¨ÊåáÂÆöÁöÑÁ´ØÂè£func (srv *Server) ListenAndServe() error &#123; addr := srv.Addr ln, err := net.Listen("tcp", addr) if err != nil &#123; return err &#125; return srv.Serve(tcpKeepAliveListener&#123;ln.(*net.TCPListener)&#125;)&#125;// Serve Áî®‰∫éÊé•Êî∂ËØ∑Ê±ÇËøûÊé•ÔºåÂπ∂‰∏∫ÊØè‰∏™Êñ∞ÁöÑËøûÊé•ÊúçÂä°ÂàõÂª∫‰∏Ä‰∏™ service goroutine„ÄÇfunc (srv *Server) Serve(l net.Listener) error &#123; // ... Ê≠§Â§ÑÁúÅÁï•‰∏çÂ∞ë var tempDelay time.Duration // how long to sleep on accept failure // ËøôÈáåÂàõÂª∫‰∫Ü‰∏Ä‰∏™Ê†π context baseCtx := context.Background() // base is always background, per Issue 16220 // Á¨¨‰∏Ä‰∏™ WithValue Ê≠£ÊòØ `http.&amp;contextKey&#123;"http-server"&#125;` ctx := context.WithValue(baseCtx, ServerContextKey, srv) for &#123; rw, e := l.Accept() // ...Ê≠§Â§ÑÁúÅÁï•ÂæàÂ§ö c := srv.newConn(rw) c.setState(c.rwc, StateNew) // before Serve can return // ÂêØÂä®Êñ∞ÁöÑ service goroutine Â§ÑÁêÜËøûÊé•ÊúçÂä°Ôºå‰∏äÈù¢ÁöÑ ctx Ë¢´‰º†ÈÄíËøõÂéª‰∫ÜÔºÅÔºÅ go c.serve(ctx) &#125;&#125;// // serve ËØªÂèñËØ∑Ê±ÇÔºåÂπ∂Ë∞ÉÁî® `srv.Handler` Êù•Â§ÑÁêÜËØ∑Ê±ÇÔºåËøõËÄåÊâßË°åÂà∞‰∏öÂä°ÈÄªËæëÔºåÂ§ÑÁêÜÂÆåËØ∑Ê±ÇÂêé// ÁªôÂÆ¢Êà∑Á´ØËøîÂõûÂìçÂ∫îfunc (c *conn) serve(ctx context.Context) &#123; // Ê≥®ÊÑèÔºåËøôÈáåÊ∑ªÂä†‰∫Ü `http.&amp;contextKey&#123;"local-addr"&#125;` Â≠ê Context ctx = context.WithValue(ctx, LocalAddrContextKey, c.rwc.LocalAddr()) // ...Ê≠§Â§ÑÁúÅÁï•ÂæàÂ§ö // HTTP/1.x from here on. // BingoÔºåËøôÈáåÁúãÂà∞‰∫ÜÁ¨¨‰∏Ä‰∏™ WithCancel ÂàõÂª∫ÁöÑÂ≠ê Context ‰∫Ü ctx, cancelCtx := context.WithCancel(ctx) c.cancelCtx = cancelCtx defer cancelCtx() c.r = &amp;connReader&#123;conn: c&#125; c.bufr = newBufioReader(c.r) // Ê≥®ÊÑèËøôÈáåÁöÑ checkConnErrorWriterÔºåÂêéÈù¢ÂàÜÊûê‰ºöÊ∂âÂèä c.bufw = newBufioWriterSize(checkConnErrorWriter&#123;c&#125;, 4&lt;&lt;10) for &#123; // readRequest ‰ºöËøîÂõû‰∏Ä‰∏™ responseÔºåÂÖ∂‰∏≠ÂåÖÊã¨Ê∑ªÂä†Â≠ê Cancel Context w, err := c.readRequest(ctx) // ...Ê≠§Â§ÑÁúÅÁï•ÂæàÂ§ö // Ê≥®ÊÑèËøôÈáåÁöÑ startBackgroundReadÔºå‰∏ãÈù¢ÂàÜÊûê‰ºöÁúãÂà∞ if requestBodyRemains(req.Body) &#123; registerOnHitEOF(req.Body, w.conn.r.startBackgroundRead) &#125; else &#123; w.conn.r.startBackgroundRead() &#125; // Ë∞ÉÁî® ServeHTTPÔºåËøõËÄåÂ∞ÜËØ∑Ê±Ç‰º†ÈÄíÂà∞‰∏öÂä°‰ª£Á†Å‰∏≠ÔºåÁ≠âÂæÖÂ§ÑÁêÜÂÆåÊØï // Âú®‰∏äËø∞Êó•Âøó‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®Ëøô‰∏™Ë∞ÉÁî®Ê≤°ÊúâÁªìÊùüÁöÑÊó∂ÂÄôÔºåcontext // Â∑≤Áªè cancel ‰∫Ü„ÄÇËÄåËøô‰∏™Ë∞ÉÁî®‰∏≠ Êàë‰ª¨Á°ÆËÆ§Ê≤°ÊúâÂºÇÊ≠• cancel context ÁöÑ‰ª£Á†Å // Âπ∂‰∏îÔºå`*http.response` Âç≥ `w` Ëøô‰∏™ÁªìÊûÑ‰Ωì‰∏≠ `cancelCtx` ÊòØ‰∏™ÁßÅÊúâÂ≠óÊÆµÔºå‰∏ç‰ºö // Ë¢´Â§ñÈÉ®ËÆøÈóÆÂà∞ÔºåÊâÄ‰ª•‰∏çÂèØËÉΩÂú® ServeHTTP ÊúüÈó¥Ë∞ÉÁî®‰∫Ü `cancelCtx` ÂáΩÊï∞ serverHandler&#123;c.server&#125;.ServeHTTP(w, w.req) // ÈÄöËøáÂØπ‰ª£Á†ÅÁöÑÂàÜÊûêÔºåÂè™ÊúâÊ≠§Â§ÑË∞ÉÁî®‰∫Ü‰∏ÄÊ¨° `*http.response` ÈáåÈù¢ÁöÑ cancelCtx // ÊâÄ‰ª•Êàë‰ª¨Á°ÆËÆ§ÂØºËá¥‰∏ãÂ±ÇÊî∂Âà∞ context cancel ‰ø°Âè∑ÁöÑËß¶ÂèëÁÇπ‰∏çÂú®Ê≠§Â§ÑÔºÅ w.cancelCtx() w.finishRequest() if !w.shouldReuseConnection() &#123; if w.requestBodyLimitHit || w.closedRequestBodyEarly() &#123; c.closeWriteAndWait() &#125; return &#125; // ... Ê≠§Â§ÑÁúÅÁï• &#125;&#125;// readRequest ‰ªéËøûÊé•‰∏≠ËØªÂèñ‰∏ã‰∏Ä‰∏™ËØ∑Ê±Çfunc (c *conn) readRequest(ctx context.Context) (w *response, err error) &#123; // ...Ê≠§Â§ÑÁúÅÁï•ÂæàÂ§ö // ÂèØ‰ª•ÁúãÂà∞Á¨¨‰∫å‰∏™ cancel context ËäÇÁÇπËØûÁîü‰∫Ü ctx, cancelCtx := context.WithCancel(ctx) req.ctx = ctx // ...Ê≠§Â§ÑÁúÅÁï•ÂæàÂ§ö w = &amp;response&#123; conn: c, cancelCtx: cancelCtx, req: req, reqBody: req.Body, handlerHeader: make(Header), contentLength: -1, closeNotifyCh: make(chan bool, 1), // We populate these ahead of time so we're not // reading from req.Header after their Handler starts // and maybe mutates it (Issue 14940) wants10KeepAlive: req.wantsHttp10KeepAlive(), wantsClose: req.wantsClose(), &#125; if isH2Upgrade &#123; w.closeAfterReply = true &#125; w.cw.res = w w.w = newBufioWriterSize(&amp;w.cw, bufferBeforeChunkingSize) return w, nil&#125; Ê†πÊçÆËØ¶ÁªÜÊâìÂç∞ÁöÑ Context Êó•ÂøóÔºåÂπ∂ÁªìÂêà HTTP Server Â§ÑÁêÜÈÉ®ÂàÜÁöÑ‰ª£Á†ÅÂàÜÊûêÔºåÂèØ‰ª•ÁÆÄÂçïÁªòÂà∂Âá∫ËøôÊ£µ Context Ê†ëÂ§ß‰ΩìÂ¶Ç‰∏ãÔºö Âú®ËøõË°å Server Â§ÑÁêÜËøûÊé•ËØ∑Ê±ÇÁöÑÊ∫êÁ†Å‰∏≠ÔºåÂèØ‰ª•ÂèëÁé∞‰∏çÂ§™ÂèØËÉΩÊòØÁ¨¨‰∫å‰∏™ Cancel Context ÂèëÈÄÅÁöÑÂèñÊ∂à‰ø°Âè∑„ÄÇÈÇ£‰πàÔºåÈóÆÈ¢òÂè™ËÉΩÂá∫Áé∞Âú®‰∏Ä‰∏™ Cancel Context ‰∏äÈù¢‰∫Ü„ÄÇÊé•‰∏ãÊù•ÔºåÂ∞±ÁúãÁúã Connection ÂÖ≥ËÅîÁöÑ cancelCtx() Á©∂Á´ü‰ºöÂú®Âì™Âá†Â§ÑË∞ÉÁî®ÔºüÂà©Áî®ÊêúÁ¥¢ÂèØ‰ª•ÊâæÂà∞Â¶Ç‰∏ã‰∏§‰∏™Â´åÁñëÂæàÂ§ßÁöÑÂú∞ÊñπÔºö123456789101112131415161718// handleReadError Âú®‰ªéÂÆ¢Êà∑Á´ØËØªÂèñÂ§±Ë¥•Êó∂‰ºöË¢´Ë∞ÉÁî®„ÄÇËøôÈáåÁöÑÈîôËØØ‰πãÊâÄ‰ª•// Ë¢´ÁúÅÁï•ÔºåÊòØÂõ†‰∏∫ÈîôËØØÈÄöÂ∏∏Â∞±ÊòØ io.EOF ÊàñËÄÖ "use of closed network connection"// Ê†áÂáÜÂ∫ìËÆ§‰∏∫Êàë‰ª¨ÂØπÂÖ∑‰ΩìÊä•Èîô‰∏çÊÑüÂÖ¥Ë∂£ÔºåÊâÄ‰ª•Ëøû error ÊòØ‰ªÄ‰πàÂú®‰∏öÂä°‰ª£Á†Å‰∏≠ÊòØÊó†Ê≥ïËé∑Âèñ// Âà∞ÁöÑ„ÄÇ// ÊÄª‰πãÔºåÊâßË°åÂà∞Ê≠§Â§ÑÔºåÂ∞±ÊÑèÂë≥ÁùÄËøûÊé•Â∑≤ÁªèÊåÇ‰∫ÜÔºåÊâÄ‰ª•‰∏ÄÂÆöË¶ÅÈÄöÁü•ÂèñÊ∂à contextfunc (cr *connReader) handleReadError(_ error) &#123; cr.conn.cancelCtx() cr.closeNotify()&#125;func (w checkConnErrorWriter) Write(p []byte) (n int, err error) &#123; n, err = w.c.rwc.Write(p) if err != nil &amp;&amp; w.c.werr == nil &#123; w.c.werr = err w.c.cancelCtx() &#125; return&#125; ÈÄöËøáËøõ‰∏ÄÊ≠•ÂàÜÊûêÔºåcheckConnErrorWriter Âè™ÊúâÂú®ËØ∑Ê±ÇÂ§ÑÁêÜÂÆåÊØïÔºåw.finishRequest() Êó∂ÊâçÂèØËÉΩ‰ºöÂú®Êüê‰∏™Êó∂ÂàªË¢´Ë∞ÉÁî®„ÄÇÊâÄ‰ª•‰∏çÂèØËÉΩÊòØËøôÈáåÁöÑ cancelCtx() Ë∞ÉÁî®ÂØºËá¥ÁöÑÔºåÂõ†‰∏∫Âú®Êä•ÈîôÊó∂ÔºåÊòæÁÑ∂ËøòÊ≤°ÊúâÂÆåÊàê ServeHTTP() ÁöÑÊµÅÁ®ã„ÄÇ‰∏ÄÈÄöÊéíÊü•‰∏ãÊù•ÔºåÂè™ÂèØËÉΩÊòØÂú® handleReadError() Êó∂Êä•Èîô‰∫Ü„ÄÇÁªìÂêàÁΩë‰∏äÁöÑÊêúÁ¥¢‰ø°ÊÅØÔºåÊàë‰ª¨Âà§Êñ≠ÊûÅÊúâÂèØËÉΩÊòØÂÆ¢Êà∑Á´ØËøûÊé•Êñ≠ÂºÄÂØºËá¥ÁöÑÂ§ßÈáèÊä•ÈîôÔºå‰πüÂ∞±ÊòØËØ¥ handleReadError() Ë¢´Ë∞ÉÁî®ÊâçÂØºËá¥ÁöÑ„ÄÇ Ê∑ªÂä† HTTP Middleware ÁõëÊµãËøûÊé•Êñ≠ÂºÄÈÇ£‰πàÊàë‰ª¨Â¶Ç‰ΩïÈ™åËØÅÁöÑÁ°ÆÊòØ connection closed ÂØºËá¥ÁöÑÂë¢ÔºüÈÄöËøá‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂèØ‰ª•ÁúãÂà∞ÔºåÂú®Â§ÑÁêÜÈîôËØØÊó∂Ë∞ÉÁî®‰∫Ü closeNotify() ÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ï‰ºöÂ∞Ü *http.response ÁöÑ closeNotifyCh ÂèëÈÄÅ‰∏Ä‰∏™ true ÂÄº„ÄÇËøõ‰∏ÄÊ≠•ÂèëÁé∞Ôºå*http.response ÂÆûÁé∞‰∫ÜÊé•Âè£ CloseNotifierÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•Âú®‰ª£Á†Å‰∏≠ÁõëÂê¨Ëøô‰∏™‰ø°Âè∑Êù•Ëøõ‰∏ÄÊ≠•È™åËØÅËøûÊé•ÊòØ‰∏çÊòØÁúüÁöÑÊñ≠ÂºÄ‰∫Ü„ÄÇ ‰∏∫Ê≠§ÔºåÊàë‰ª¨ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰∏≠Èó¥‰ª∂ÔºåÂêØÂä®‰∏Ä‰∏™ goroutine ÂéªÁõëÂê¨ÂÖ≥Èó≠‰ø°Âè∑ÔºåÂπ∂Âú®Êî∂Âà∞‰ø°Âè∑Êó∂Âêë Sentry ‰∏≠ÊâìÂç∞Áõ∏ÂÖ≥Êä•ÈîôÔºö12345678910111213141516171819202122232425func MonitorCloseNotifier(next http.Handler) http.Handler &#123; return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) &#123; if r.Method == "GET" &amp;&amp; strings.EqualFold(r.URL.Path, "/check_health") &#123; next.ServeHTTP(w, r) &#125; else &#123; go func() &#123; defer func() &#123; if err := recover(); err != nil &#123; log.Warn(err) &#125; &#125;() cc := w.(http.CloseNotifier).CloseNotify() value := &lt;-cc ctx := context.WithValue( r.Context(), log.SentrySpecificMetaCtxKey, collectSentryMeta(r, "login_id"), ) log.WithContext(ctx).Errorf( "connection read error, maybe 'use of closed network connection' or 'io.EOF'. return value: %v", value) &#125;() next.ServeHTTP(w, r) &#125; &#125;)&#125; Âú®ÂÆåÊàê‰ª£Á†ÅÂèòÊõ¥ÔºåÂπ∂ËøõË°åÈáë‰∏ùÈõÄÂ∞èÊµÅÈáèÈ™åËØÅÊó∂ÔºåÂú® Sentry ‰∏äÁúãÂà∞‰∫ÜÁõ∏ÂÖ≥ÁöÑÊä•Èîô„ÄÇÁî±Ê≠§Á°ÆËÆ§ÊòØÂú®‰ΩïÂ§ÑÂõ†‰∏∫‰ªÄ‰πàÂØºËá¥‰∫Ü Context Cancel„ÄÇ Â∞èÁªìÂéÜÁªèÂ§öÊ¨°‰ª£Á†ÅÂèòÊõ¥ÂíåÊó•ÂøóÂàÜÊûêÊâçÊúÄÁªàÁ°ÆÂÆöÂú®‰ΩïÂ§ÑÂõ†‰∏∫‰ªÄ‰πàÂØºËá¥‰∫Ü Context CancelÔºåÊï¥‰∏™ËøáÁ®ãÈùûÂ∏∏ÂùéÂù∑„ÄÇÈÇ£‰∏∫‰ªÄ‰πàÊ≤°ÊúâÁõ¥Êé•ËøõË°åË∞ÉËØïÂë¢ÔºüÈÇ£Ê†∑ÂÆö‰ΩçÈóÆÈ¢ò‰∏çÊòØÊõ¥Âø´ÈÄü‰∫õÂêóÔºüÂéüÂõ†ÊòØËøôÊ†∑ÔºåÊúÄÂºÄÂßãÊàë‰ª¨Âπ∂‰∏çÁü•ÈÅì‰ªÄ‰πàÂéüÂõ†ÂØºËá¥ÁöÑÔºõËøôÊ†∑‰πüÂ∞±Ê≤°Ê≥ïÂú®Êú¨Âú∞Â§çÁé∞ÈóÆÈ¢òÔºåÁî±‰∫éËøô‰∫õÈóÆÈ¢òÊòØÂú®Á∫ø‰∏ä‰∫ßÁîüÁöÑÔºå‰πü‰∏çÂ§ßÂèØËÉΩÁõ¥Êé•Âú®Á∫ø‰∏äÊã¶Êà™Áî®Êà∑ËØ∑Ê±ÇÂπ∂Ë∞ÉËØïÔºåÈÇ£Ê†∑ÂèØËÉΩÊõ¥Âä†ÁπÅÁêê„ÄÅËÄóÊó∂Ôºå‰∏îÂÆûÊñΩÊàêÊú¨Êõ¥Â§ßÔºàÂõ†‰∏∫Êàë‰ª¨‰πü‰∏çÁü•ÈÅìÂì™‰∏™Áî®Êà∑‰ΩøÁî®‰ªÄ‰πàËÆæÂ§áÂú®‰ªÄ‰πàÊó∂ÂÄô‰ºöÂèëÁîüÈóÆÈ¢òÔºâ„ÄÇ ÊâÄ‰ª•ÈááÂèñÂàÜÊûêÈîôËØØÊó•ÂøóÂä†È™åËØÅÁöÑÊñπÂºèÊù•Á°ÆÂÆöÈóÆÈ¢òÊâÄÂú®„ÄÇÂΩìÁÑ∂Ôºå‰πãÊâÄ‰ª•Ëøô‰πàÈ∫ªÁÉ¶‰πüÊòØÂõ†‰∏∫ Context Cancel Êó∂Êèê‰æõÁöÑ Error Â§™Âçï‰∏Ä‰∫Ü„ÄÇÂ¶ÇÊûúÊúÄÂàù API ËÆæËÆ°Êó∂Â∞±ËÉΩÊèê‰æõËá™ÂÆö‰πâÁöÑÈîôËØØÔºåÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•Ê†πÊçÆÂÖ∑‰ΩìÈîôËØØÊù•ÂÆö‰ΩçÂà∞ÂèØËÉΩ‰∫ßÁîüÊä•ÈîôÁöÑ‰ΩçÁΩÆÔºåËøôÊ†∑‰ºöÊõ¥Âä†Âø´Êç∑ÔºÅ Contextcontext ÂåÖÊúÄÂàùÊòØÁî± Google ÂÆòÊñπÂºÄÂèëÔºåÂπ∂Âú® Go 1.7 ÁâàÊú¨Ê≠£ÂºèÂºïÂÖ•Âà∞Ê†áÂáÜÂ∫ì‰∏≠ÁöÑ„ÄÇÂºïÂÖ•ËØ•ÂåÖÁöÑÁõÆÁöÑÊòØ‰∏∫‰∫ÜÊèê‰æõÁªü‰∏ÄÁöÑÂßøÂäøÂ§ÑÁêÜË∂ÖÊó∂„ÄÅÂèñÊ∂à‰ø°Âè∑‰º†ÈÄíÂíåÂú® API ‰πãÈó¥‰º†ÈÄíËØ∑Ê±Ç‰∏ä‰∏ãÊñáÊï∞ÊçÆ„ÄÇÂÆÉÊèê‰æõ‰∫ÜÂá†‰∏™ÈáçË¶ÅÁöÑÊé•Âè£Áî®‰∫éÂàõÂª∫ Context Ê†ëüå≤Ôºö WithCancel WithDeadline WithTimeout WithValue Ëøô‰∫õÊé•Âè£‰ºöÊé•Êî∂‰∏Ä‰∏™ parent contextÔºåÂπ∂ËøîÂõû‰∏Ä‰∏™ derived context„ÄÇÂú®Êàë‰ª¨ÁöÑ‰ª£Á†Å‰∏≠ÔºåÂ∫îËØ•Â±ÇÂ±Ç‰º†ÈÄíËØ• contextÔºå‰∏ÄËà¨Á∫¶ÂÆöÂáΩÊï∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞Â∞±ÊòØ contextÔºåÁ≠æÂêçÁ±ª‰ººÔºöfunc foo(ctx context.Context)„ÄÇ ÂØπ‰∫é WithCancel, WithDeadline, WithTimeout ËÄåË®ÄÔºåÂÆÉ‰ª¨ÈÉΩ‰ºöËøîÂõû cancelFunc ‰æõ‰ΩøÁî®ËÄÖË∞ÉÁî®„ÄÇÂΩì cancelFunc Ë¢´Ë∞ÉÁî®Êó∂ÔºåÈô§‰∫ÜËá™Ë∫´‰ºöË¢´ÂèñÊ∂àÂ§ñÔºåÂÖ∂Â≠ê context ÈÉΩ‰ºöË¢´ÂèñÊ∂à„ÄÇÁ§∫‰æãÂõæÂ¶Ç‰∏ãÔºö Ê∫êÁ†ÅÂàÜÊûêContext InterfaceContext Êú¨Ë∫´ÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÂÖ∂ÂÆö‰πâÂ¶Ç‰∏ãÔºö123456789101112131415161718192021type Context interface &#123; // Deadline ‰ºöËøîÂõû‰ªÄ‰πàÊó∂Èó¥ context ‰ºöË¢´ÂèñÊ∂à„ÄÇÂ¶ÇÊûúÊ≤°ÊúâËÆæÁΩÆ // ËøáÊúüÊó∂Èó¥ÔºåÂàô ok ËøîÂõû false„ÄÇ Deadline() (deadline time.Time, ok bool) // Done Âú® context Ë¢´ÂèñÊ∂àÊó∂ÂØπÂ∫îÁöÑ channel ‰ºöË¢´ÂÖ≥Èó≠Ôºå‰ªéËÄåËææÂà∞ // ÈÄöÁü•Ê≠£Âú®ÁõëÂê¨ÁöÑ goroutine ÁªàÊ≠¢ÊâãÂ§¥Â∑•‰ΩúÁöÑÁõÆÁöÑ„ÄÇÂØπ‰∫é‰∏çÂèØÂèñÊ∂àÁöÑ // contextÔºåÂàôËøîÂõû nil„ÄÇ // ÂØπ‰∫é WithCancel, WithDeadline, WithTimeout ËÄåË®ÄÔºåÊúÄÁªàÈÉΩ‰ºö // ÂÖ≥Èó≠ done channel„ÄÇ Done() &lt;-chan struct&#123;&#125; // Err ‰ºöÂú® Done Ë¢´ÂÖ≥Èó≠Êó∂ÔºåËøîÂõûÈîôËØØÔºàËøôÈáåÁöÑÈîôËØØÂú® context ÂåÖÂÜÖ‰ªÖÈôê Canceled ÂíåË∂ÖÊó∂ DeadlineExceededÔºâ Err() error // Value Áî®‰∫éËøîÂõûÂ≠òÂÇ®Âú® Context ‰∏≠ÊåáÂÆö key ÂØπÂ∫îÁöÑ‰∏ä‰∏ãÊñáÊï∞ÊçÆ„ÄÇÂ¶ÇÊûúÊâæ‰∏çÂà∞Â∞±ËøîÂõûÁ©∫„ÄÇ // ËøôÈáåÂ¶ÇÊûúÂú®ÂΩìÂâç context Êâæ‰∏çÂà∞ÔºåÂ∞±‰ºö‰∏ÄÁõ¥ÂæÄ‰∏äÊâæ parent Áõ¥Âà∞Ê†πËäÇÁÇπ„ÄÇ // ‰ªÖÈôê‰∫é‰ΩøÁî® Context Â≠òÂÇ®‰∏Ä‰∫õËØ∑Ê±ÇÁõ∏ÂÖ≥Ôºàrequest-scopedÔºâÊï∞ÊçÆÔºåÂπ∂Âú®Â∫îÁî®‰∏≠‰º†ÈÄíÔºå // ÂØπ‰∫é‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÂèÇÊï∞Ôºå‰º†ÈÄíÁªùÂØπ‰∏çÊé®Ëçê‰ΩøÁî®ÂÆÉÔºÅ Value(key interface&#123;&#125;) interface&#123;&#125;&#125; TODO &amp; BackgroundÂú® context ÂåÖ‰∏≠ÂÆö‰πâ‰∫Ü‰∏§Áßç emptyCtxÔºåÂàÜÂà´ÊòØ todo Âíå background„ÄÇÁõ∏ÂÖ≥ÂÆûÁé∞ÈùûÂ∏∏ÁÆÄÂçïÔºö123456789101112131415161718// emptyCtx ÊòØ‰∏ç‰ºöË¢´ÂèñÊ∂àÔºåÊó†‰ªª‰ΩïÂÄºÂíå deadline ÁöÑ„ÄÇ‰πãÊâÄ‰ª•Ê≤°Êúâ‰ΩøÁî®Á©∫ÁªìÊûÑ‰ΩìÔºàstruct&#123;&#125;Ôºâ// ÊòØÂõ†‰∏∫Ë¶Å‰øùËØÅËØ•Á±ªÂûãÁöÑÊØè‰∏™ÂÄºÈÉΩË¶ÅÊúâ‰∏çÂêåÁöÑÂú∞ÂùÄtype emptyCtx intfunc (*emptyCtx) Deadline() (deadline time.Time, ok bool) &#123; return &#125;func (*emptyCtx) Done() &lt;-chan struct&#123;&#125; &#123; return nil &#125;func (*emptyCtx) Err() error &#123; return nil &#125;func (*emptyCtx) Value(key interface&#123;&#125;) interface&#123;&#125; &#123; return nil &#125;var ( background = new(emptyCtx) todo = new(emptyCtx))// Background ÈÄöÂ∏∏Âú® main ÂáΩÊï∞„ÄÅÊµãËØï‰∏≠ÂàùÂßãÂåñÔºåÊàñËÄÖËØ∑Ê±ÇÂØπÂ∫îÁöÑÈ°∂Â±Ç Contextfunc Background() Context &#123; return background &#125;// TODO ÈÄöÂ∏∏Âú®‰∏çÁü•ÈÅìËØ•Áî®‰ªÄ‰πà Context ÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•‰ΩøÁî®ÂÆÉfunc TODO() Context &#123; return todo &#125; WithCancelÊàë‰ª¨ÈÄöÂ∏∏‰ΩøÁî® WithCancel() Êé•Âè£Êù•ÂàõÂª∫‰∏Ä‰∏™ÂèØË¢´ÂèñÊ∂àÁöÑ ContextÔºåËØ•Êé•Âè£‰ºöËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÂ≠ê Context ËäÇÁÇπÂíåÁî®‰∫éÂèñÊ∂àÊó∂Ë∞ÉÁî®ÁöÑÂáΩÊï∞ cancelFunc„ÄÇÁõ∏ÂÖ≥Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061// CancelFunc ÈÄöÁü•ÂèñÊ∂à‰ªªÂä°Ôºå‰∏ç‰ºöÁ≠âÂæÖ‰ªªÂä°ÊâßË°åÂÆåÊØïÔºõÂè™ËÉΩË¢´ÊúâÊïàË∞ÉÁî®‰∏ÄÊ¨°type CancelFunc func()// WithCancel ‰ºöËøîÂõû‰∏Ä‰∏™ parent ÁöÑÊã∑Ë¥ùÔºåÂêåÊó∂Â∏¶Êúâ Done channel„ÄÇ// ÂèñÊ∂àËØ• context Êó∂‰ºöÈáäÊîæÂÖ≥ËÅîÁöÑËµÑÊ∫êÔºåÊâÄ‰ª•ÂΩìËØ• Context ÂÆåÊàêÊó∂ÈúÄË¶ÅÂ∞ΩÂø´Ë∞ÉÁî® cancelfunc WithCancel(parent Context) (ctx Context, cancel CancelFunc) &#123; c := newCancelCtx(parent) propagateCancel(parent, &amp;c) return &amp;c, func() &#123; c.cancel(true, Canceled) &#125;&#125;// newCancelCtx ‰ºöËøîÂõû‰∏Ä‰∏™ÂàùÂßãÂåñÂ•ΩÁöÑ cancelCtx ÂÆû‰æã// ÂÖ≥‰∫é‰ªÄ‰πàÊòØ cancelCtx ‰ºöÂú®‰∏ãÈù¢ÂàÜÊûêÂÆÉÁöÑÊ∫êÁ†Åfunc newCancelCtx(parent Context) cancelCtx &#123; return cancelCtx&#123;Context: parent&#125;&#125;// propagateCancel Êú¨Ë¥®‰∏äÊòØ‰∏∫‰∫ÜÂ∞ÜÂ≠ê canceler ÊåÇËΩΩÂà∞Áà∂ canceler ËäÇÁÇπ‰∏ä// ËøôÊ†∑Âú®Áà∂ËäÇÁÇπÊî∂Âà∞ÂèñÊ∂àÈÄöÁü•Êó∂ÔºåÊâçËÉΩ‰∏Ä‰∏ÄÈÄöÁü•Âà∞Â≠êËäÇÁÇπfunc propagateCancel(parent Context, child canceler) &#123; if parent.Done() == nil &#123; // parent ‰∏çÊîØÊåÅÂèñÊ∂àÁöÑÊÉÖÂÜµ return // parent is never canceled &#125; // ËøôÈáåÂè™ÊòØÂà§Êñ≠ÊòØ‰∏çÊòØÊúâ context ÂåÖ‰∏≠ÂÆö‰πâÁöÑ // cancelCtx ÁªìÊûÑËÄåÂ∑≤ // parentCancelCtx(parent) Á°ÆËÆ§ parent ÊòØÂê¶‰∏∫ // cancelCtx ÊàñËÄÖ timerCtx Á±ªÂûã if p, ok := parentCancelCtx(parent); ok &#123; p.mu.Lock() if p.err != nil &#123; // parent has already been canceled // parent Â¶ÇÊûúË¢´ÂèñÊ∂àÔºåËá™ÁÑ∂‰∏çÈúÄË¶Å removeChildÔºåÂõ†‰∏∫ // parent ÂØπÂ∫îÁöÑÂ≠êÊ†ë‰ºöË¢´ detatch ÊéâÔºåÁ°Æ‰øùÈáäÊîæËµÑÊ∫ê child.cancel(false, p.err) &#125; else &#123; // Âª∂ËøüÂàùÂßãÂåñ‰∫Ü children if p.children == nil &#123; // ‰∏∫‰ªÄ‰πàÊòØÊîæÂú®Â≠óÂÖ∏ÔºåËÄåÈùûÂàóË°®Âë¢Ôºü // ÂéüÂõ†ÂæàÁÆÄÂçïÔºåÊòØ‰∏∫‰∫ÜÊñπ‰æøÂà†Èô§ child // delete(p.children, child) p.children = make(map[canceler]struct&#123;&#125;) &#125; // ÊääÂ≠êËäÇÁÇπÊåÇËΩΩÂà∞ cancel context ÁöÑÁà∂ËäÇÁÇπ‰∏ä p.children[child] = struct&#123;&#125;&#123;&#125; &#125; p.mu.Unlock() &#125; else &#123; go func() &#123; select &#123; case &lt;-parent.Done(): // ÂØπ‰∫éÁà∂ËäÇÁÇπËøîÂõû Done channel ÁöÑËøõË°åÁõëÂê¨ child.cancel(false, parent.Err()) case &lt;-child.Done(): // Á≠âÂæÖ cancel ctx Ë¢´ÁªìÊùü // ËøôÈáåÂè™ÂèØËÉΩÊòØ timerCtx, cancelCtx // goroutine ÈÄÄÂá∫ &#125; &#125;() &#125;&#125; ÂØπ‰∫éÂèØË¢´ÂèñÊ∂àÁöÑ Context ÈÉΩÂÆûÁé∞‰∫Ü‰∏ãÈù¢ÁöÑÊé•Âè£Ôºö123456// canceler Â∞±ÊòØÂÆûÁé∞‰∫Ü cancel ÁöÑ context Á±ªÂûã„ÄÇÂú®Ê†áÂáÜÂ∫ì‰∏≠// ‰ªÖÊúâ `cancelCtx` Âíå `timerCtx` ÂÆûÁé∞‰∫ÜËØ•Êé•Âè£type canceler interface &#123; cancel(removeFromParent bool, err error) Done() &lt;-chan struct&#123;&#125;&#125; Âú®ÂàÜÊûê WithCancel ÁöÑÊ∫êÁ†ÅÊó∂ÔºåÂèØ‰ª•ÂèëÁé∞ÔºåÊàë‰ª¨ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ cancelCtx ÂÆû‰æãÔºåÂπ∂Â∞ÜÂéüÊúâÁöÑ Context ‰Ωú‰∏∫Áà∂ËäÇÁÇπËÆ∞ÂΩï‰∫Ü‰∏ãÊù•„ÄÇÈÇ£‰πà cancelCtx ÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÂë¢ÔºüÂèàÊòØÂ¶Ç‰ΩïÂ§ÑÁêÜÂèñÊ∂àÈÄªËæëÁöÑÂë¢Ôºü123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960// A cancelCtx can be canceled. When canceled, it also cancels any children// that implement canceler.type cancelCtx struct &#123; // Context ‰ºöÊåáÂêë parent Context // mu Áî®Êù•‰øùËØÅ goroutine ÂÆâÂÖ® mu sync.Mutex // protects following fields done chan struct&#123;&#125; // created lazily, closed by first cancel call // ‰πãÊâÄ‰ª•‰ΩøÁî®Â≠óÂÖ∏Êù•Â≠òÂÇ®ÔºåÊòØÂõ†‰∏∫‰∏çÂÖ≥ÂøÉÂ≠êËäÇÁÇπÈ°∫Â∫èÔºåÂêåÊó∂‰∏∫‰∫ÜÊñπ‰æøÂà†Èô§ children map[canceler]struct&#123;&#125; // set to nil by the first cancel call err error // set to non-nil by the first cancel call&#125;// Done ‰ºöËøîÂõû‰∏Ä‰∏™Âª∂ËøüÂàùÂßãÂåñÁöÑ chan ‰æõ‰∏ãÊ∏∏ÁõëÂê¨ÂÆåÊàê‰ø°Âè∑func (c *cancelCtx) Done() &lt;-chan struct&#123;&#125; &#123; c.mu.Lock() if c.done == nil &#123; // Âª∂ËøüÂàùÂßãÂåñ c.done = make(chan struct&#123;&#125;) &#125; d := c.done c.mu.Unlock() return d&#125;func (c *cancelCtx) Err() error &#123; c.mu.Lock() err := c.err c.mu.Unlock() return err&#125;// cancel Ë¥üË¥£ÂÖ≥Èó≠ c.done chanÔºåÂêåÊó∂ÂèñÊ∂àÊØè‰∏™Â≠êËäÇÁÇπ// Âπ∂Ê†πÊçÆÈúÄË¶ÅÂ∞ÜÂØπÂ∫îÁöÑËäÇÁÇπ‰ªéÂÆÉÁöÑÁà∂ËäÇÁÇπÁöÑ children ‰∏≠ÁßªÈô§func (c *cancelCtx) cancel(removeFromParent bool, err error) &#123; if err == nil &#123; panic("context: internal error: missing cancel error") &#125; c.mu.Lock() if c.err != nil &#123; c.mu.Unlock() return // already canceled &#125; c.err = err if c.done == nil &#123; // Á°Æ‰øù‰∏ãÊ¨°Ë∞ÉÁî®Êó∂Â∑≤ÁªèÂÖ≥Èó≠‰∫Ü c.done = closedchan &#125; else &#123; close(c.done) &#125; for child := range c.children &#123; // NOTE: acquiring the child's lock while holding parent's lock. // ‰æùÊ¨° cancel ÊâÄÊúâÁöÑÂ≠êËäÇÁÇπ child.cancel(false, err) &#125; c.children = nil c.mu.Unlock() if removeFromParent &#123; removeChild(c.Context, c) &#125;&#125; WithDeadline &amp; WithTimeoutÂ¶ÇÊûúÊàë‰ª¨ÈúÄË¶ÅÂØπ goroutine ËÆæÁΩÆË∂ÖÊó∂ÊàñËÄÖÂà∞ËææÊåáÂÆöÊó∂Èó¥ÂêéÈÄÄÂá∫ÁöÑËØùÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî® WithDeadline() Êàñ WithTimeout() Êù•ÂÆûÁé∞„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738// WithDeadline ‰ºöÂàõÂª∫‰∏Ä‰∏™Â∏¶ÊúâÂà∞ÊúüÊó∂Èó¥ÊéßÂà∂ÁöÑ contextÔºåÂú®Êó∂Èó¥Âà∞ËææÂêé‰ºöËá™Âä®// ÂÖ≥Èó≠ done channelÔºåÂêåÊó∂‰∏ãÊ∏∏ÁöÑËäÇÁÇπ‰πü‰ºöÊî∂Âà∞ÂèñÊ∂àÈÄöÁü•„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂØπ‰∫é// ËøôÁßçÁ±ªÂûãÁöÑ cancelÔºåÂØπÂ∫îÁöÑ Error ÊòØ DeadlineExceeded// Âè¶Â§ñÔºåËøîÂõûÁöÑ cancelFunc ‰∏ÄÂÆöË¶ÅË¢´Ë∞ÉÁî®‰∏ÄÊ¨°ÔºåÁ°Æ‰øùËµÑÊ∫êÊúÄÁªàËÉΩË¢´ÈáäÊîæfunc WithDeadline(parent Context, d time.Time) (Context, CancelFunc) &#123; // Â¶ÇÊûúÁà∂ËäÇÁÇπÊèêÂâçÁªìÊùüÔºåÂàô‰∏çÁî®ÂÜç‰∏∫Â≠êËäÇÁÇπÊ∑ªÂä†È¢ùÂ§ñÁöÑËÆ°Êó∂ËµÑÊ∫ê‰∫Ü // Âõ†‰∏∫ÂΩìÁà∂ËäÇÁÇπÁªìÊùüÊó∂ÔºåÂ≠êËäÇÁÇπ‰πü‰ºöË¢´ÈÄöÁü•Âà∞ if cur, ok := parent.Deadline(); ok &amp;&amp; cur.Before(d) &#123; // ËøôÈáåÔºåÂ¶ÇÊûúËØ¥Â∑≤ÁªèÂà∞Êúü‰∫ÜÔºåËá™ÁÑ∂Ê≤°ÂøÖË¶ÅÂºïÂÖ•‰∏Ä‰∏™ËÆ°Êó∂Âô®ËµÑÊ∫ê // ÊâÄ‰ª•Áõ¥Êé•ËøîÂõû‰∏Ä‰∏™ Cancel Context ‰∫Ü return WithCancel(parent) &#125; c := &amp;timerCtx&#123; cancelCtx: newCancelCtx(parent), deadline: d, &#125; propagateCancel(parent, c) dur := time.Until(d) if dur &lt;= 0 &#123; // Â¶ÇÊûúÊåáÂÆöÁöÑÊó∂Èó¥ÁÇπÂ∑≤ÁªèËøá‰∫ÜÁöÑËØùÔºåÂàôÁõ¥Êé•ÂèñÊ∂à c.cancel(true, DeadlineExceeded) return c, func() &#123; c.cancel(false, Canceled) &#125; &#125; c.mu.Lock() defer c.mu.Unlock() if c.err == nil &#123; c.timer = time.AfterFunc(dur, func() &#123; // ÂΩìÊó∂Èó¥Âà∞‰∫ÜÂêéÔºå‰ºöÊâßË°å cancel ÊñπÊ≥ï c.cancel(true, DeadlineExceeded) &#125;) &#125; return c, func() &#123; c.cancel(true, Canceled) &#125;&#125;// WithTimeout ÊåáÂÆöË∂ÖÊó∂Êó∂Èó¥ÁöÑ ContextÔºåÂÖ∂ÂÆûÂ∞±ÊòØÂ§çÁî®‰∫Ü WithDeadline ÊñπÊ≥ïfunc WithTimeout(parent Context, timeout time.Duration) (Context, CancelFunc) &#123; return WithDeadline(parent, time.Now().Add(timeout))&#125; timerCtx ÊòØÂÆûÁé∞Â∏¶ÂÆöÊó∂ÂäüËÉΩÁöÑ Context Á±ªÂûãÔºåÂÆÉÁöÑÂÆûÁé∞ÊØîËæÉÁÆÄÂçïÔºö12345678910111213141516171819202122type timerCtx struct &#123; cancelCtx timer *time.Timer // timer ËµÑÊ∫êÁöÑËÆøÈóÆÊòØÁî± cancelCtx ‰∏≠ÁöÑ Lock Êù•‰øùÈöúÁöÑ deadline time.Time&#125;func (c *timerCtx) Deadline() (deadline time.Time, ok bool) &#123; return c.deadline, true &#125;// cancel ‰∏ªË¶ÅÂú® timerCtx ÂèñÊ∂àÊó∂ÔºåÈáäÊîæÊéâ timer ËµÑÊ∫êfunc (c *timerCtx) cancel(removeFromParent bool, err error) &#123; // Â∞ÜÂΩìÂâçËäÇÁÇπÁöÑ done channel close ÊéâÔºåÂêåÊó∂ÂèñÊ∂àÁõ∏ÂÖ≥Â≠êËäÇÁÇπ c.cancelCtx.cancel(false, err) if removeFromParent &#123; removeChild(c.cancelCtx.Context, c) &#125; c.mu.Lock() if c.timer != nil &#123; // ÈáäÊîæ timer ËµÑÊ∫ê c.timer.Stop() c.timer = nil &#125; c.mu.Unlock()&#125; WithValueÈÄöÂ∏∏‰ΩøÁî® WithValue() ÊñπÊ≥ïÁªô Context ÈôÑÂä†‰∏Ä‰∫õËØ∑Ê±ÇÁõ∏ÂÖ≥ÁöÑ‰∏ä‰∏ãÊñáÊï∞ÊçÆÔºåÂÆÉÁöÑÂÆûÁé∞Â¶Ç‰∏ãÔºö1234567891011121314151617181920212223func WithValue(parent Context, key, val interface&#123;&#125;) Context &#123; if key == nil &#123; panic("nil key") &#125; // ‰øùËØÅ Key Êú¨Ë∫´ÊòØÂèØÊØîËæÉÁöÑÂç≥ÂèØ if !reflectlite.TypeOf(key).Comparable() &#123; panic("key is not comparable") &#125; return &amp;valueCtx&#123;parent, key, val&#125;&#125;type valueCtx struct &#123; Context key, val interface&#123;&#125;&#125;func (c *valueCtx) Value(key interface&#123;&#125;) interface&#123;&#125; &#123; if c.key == key &#123; return c.val &#125; // ÂæÄ parent ÂéªÊâæÔºå‰∏ÄÁõ¥ÊâæÂà∞‰∏∫Ê≠¢ return c.Context.Value(key)&#125; Â∫îÁî®Âú∫ÊôØ‰º†ÈÄíËØ∑Ê±ÇÁõ∏ÂÖ≥ÁöÑÊï∞ÊçÆ‰ΩøÁî® WithValue Â∞ÜÈúÄË¶ÅÁöÑËØ∑Ê±ÇÊï∞ÊçÆÂ≠òÂÇ®Âú® Context ‰∏≠ÔºåÊñπ‰æøÂêë‰∏ã‰º†ÈÄí„ÄÇÊàë‰ª¨‰∏ÄËà¨Ë¶ÅÂ∞ΩÈáèÈÅøÂÖçÂú®‰∏öÂä°‰ª£Á†Å‰∏≠Áõ¥Êé•Ëß£Êûê Context ‰∏≠ÁöÑÊüê‰∫õ Key„ÄÇ 12345678910111213141516171819202122232425262728293031type contextKey struct&#123; name string &#125;var ( // ‰∏çË¶Å‰ΩøÁî® string keyÔºåÈÅøÂÖçÂÜ≤Á™Å traceIDCtxKey = &amp;contextKey&#123;name: "request-trace-id"&#125;)// Âª∫ËÆÆ‰ΩøÁî®ÂáΩÊï∞Â∞ÅË£Ö‰∏ãÔºåÂØπÂ§ñÊèê‰æõÁªü‰∏ÄÁöÑÊé•Âè£Êñπ‰æø‰ΩøÁî®func WithTraceID(ctx context.Context, id string) context.Context &#123; return context.WithValue(ctx, traceIDCtxKey, id)&#125;func TraceIDFrom(ctx context.Context) string &#123; if traceID, ok := ctx.Value(traceIDCtxKey).(string); ok &#123; return traceID &#125; else &#123; return "" &#125;&#125;func exampleWithValue(ctx context.Context) &#123; doStuff := func(ctx context.Context) &#123; traceID := TraceIDFrom(ctx) fmt.Printf("got request trace id: %s\n", traceID) &#125; // Ê®°Êãü‰º†ÈÄíËØ∑Ê±Ç trace idÔºåËøô‰∫õÂèØ‰ª•Ë¢´Êó•ÂøóÊ°ÜÊû∂Á≠âÊèêÂèñÂπ∂Â≠òÂÇ®Âà∞Êó•Âøó‰∏≠ id, _ := uuid.GenerateUUID() ctx = WithTraceID(ctx, id) doStuff(ctx)&#125; Ë∂ÖÊó∂ÊéßÂà∂1234567891011121314151617181920212223242526// exampleWithTimeout Ê®°Êãü‰∏ÄÁªÑËØ∑Ê±ÇÔºåÂπ∂‰∏îÂÅáËÆæÊØè‰∏™ËØ∑Ê±ÇÂ§ÑÁêÜÊó∂Èó¥‰∏∫ 0~3 ÁßíÁöÑÈöèÊú∫Êó∂Èó¥// ÂêåÊó∂Êàë‰ª¨Â∞ÜË∂ÖÊó∂Êó∂Èó¥ËÆæÁΩÆ‰∏∫ 1 ÁßíÔºåËøôÊ†∑Âú®ËØ∑Ê±ÇÊúüÈó¥Â∞±‰ºöÊúâ‰∫õÂõ†‰∏∫Ë∂ÖÊó∂ËÄå‰∏ªÂä®ÁªìÊùüÂêéÁª≠ÊâßË°åÊµÅÁ®ã// ÁöÑ goroutine Êî∂Âà∞ÂèñÊ∂à‰ø°Âè∑func exampleWithTimeout(ctx context.Context) &#123; doRequest := func(ctx context.Context, id int) &#123; // Ê®°ÊãüËØ∑Ê±Ç time.Sleep(time.Duration(rand.Int63n(3)) * time.Second) select &#123; case &lt;-ctx.Done(): fmt.Printf("[%d]request canceled\n", id) default: // Â§ÑÁêÜÂÖ∂ÂÆÉ‰∏öÂä°ÈÄªËæë &#125; &#125; ctx, cancel := context.WithTimeout(ctx, time.Second*1) defer cancel() var wg sync.WaitGroup for i := 0; i &lt; 10; i++ &#123; wg.Add(1) go func(id int) &#123; defer wg.Done() doRequest(ctx, id+1) &#125;(i) &#125; wg.Wait()&#125; ÊÄªÁªì ‰∏çÂª∫ËÆÆÂ∞Ü Context Â≠òÊîæÂú®ÁªìÊûÑ‰Ωì‰∏≠ÔºåËÄåÂ∫îËØ•‰Ωú‰∏∫ÂèÇÊï∞ÊòæÂºè‰º†ÈÄíÔºõ‰∏ÄËà¨Êé•Êî∂ Context ‰Ωú‰∏∫ÂèÇÊï∞ÁöÑÂáΩÊï∞ÔºåÂ∫îËØ•Â∞ÜËØ•ÂèÇÊï∞ÊîæÂú®Á¨¨‰∏Ä‰∏™ÂèÇÊï∞‰ΩçÁΩÆÔºàËøô‰∏™ÊòØÊÉØ‰æã‰∫ÜÔºâÔºõ Âú®ÁªôÂáΩÊï∞‰º†ÈÄí Context Êó∂ÔºåÂ¶ÇÊûú‰∏çÁü•ÈÅìÁî®‰ªÄ‰πà ContextÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî® Context.TODO()ÔºåÈÅøÂÖç‰º†ÈÄí nil Context Value ÈúÄË¶ÅÊúâÁ∫¶ÊùüÔºåÂøÖÈ°ªÂ∫îËØ•Á¨¶ÂêàËØ∑Ê±ÇÁõ∏ÂÖ≥ÁöÑ‰∏ä‰∏ãÊñáÊï∞ÊçÆÔºåÂπ∂‰∏î‰∏ÄËà¨ÊòØÂú®Ê°ÜÊû∂ÊàñËÄÖ HTTP ‰∏≠Èó¥‰ª∂‰∏≠ËÆæÁΩÆ ValueÔºå‰∏öÂä°‰ª£Á†Å‰∏≠Â∞ΩÂèØËÉΩÈÅøÂÖçÁõ¥Êé•Êìç‰Ωú Context Value„ÄÇÂú®Êàë‰ª¨ÁöÑ‰∏öÂä°‰ª£Á†Å‰∏≠Â∫îÂΩìÊòæÂºè‰º†ÂèÇÔºåËøôÊ†∑ÂèØ‰ª•Âà©Áî®ÈùôÊÄÅËØ≠Ë®ÄÁöÑÁâπÊÄßÔºå‰ΩøÂæó‰∏Ä‰∫õÈóÆÈ¢òÂèØ‰ª•Âú®ÁºñËØëÈò∂ÊÆµÂ∞±ËÉΩÂèëÁé∞Ôºõ‰∏çË¶Å‰∏∫‰∫ÜÂõæÊñπ‰æøÔºåÁî® Context Â∏¶‰∏Ä‰∫õÂèØÈÄâÂèÇÊï∞„ÄÇ Âú®‰ΩøÁî® WithValue(key, value) Êó∂ÔºåKey Â∫îËØ•ÈÅøÂÖç‰ΩøÁî®Â≠óÁ¨¶‰∏≤ÔºåÈò≤Ê≠¢ÂêçÂ≠óÂÜ≤Á™ÅÂíåÊ±°ÊüìÔºõ Âú®‰ΩøÁî® WithCancel, WithTimeout, WithDeadline Êó∂Ôºå‰∏ÄÂÆöË¶Å‰øùËØÅËøîÂõûÁöÑ cancel ÊñπÊ≥ïËá≥Â∞ëË¢´Ë∞ÉÁî®‰∏ÄÊ¨°ÔºåÈÅøÂÖç goroutine Ê≥ÑÈú≤ÊàñËÄÖÂÖ∂ÂÆÉËµÑÊ∫êÊ≥ÑÈú≤Ôºõ Áî±‰∫éÁõÆÂâçÂú®Ê†áÂáÜÂ∫ì‰ª•Âèä‰∏Ä‰∫õÁ¨¨‰∏âÊñπÂ∫ì‰∏≠ÈÉΩÂú®‰ΩøÁî® ContextÔºå‰∏ÄË∑Ø‰º†ÈÄí‰∏ãÊù•ÔºåÊï¥‰ΩìÈìæË∑ØÂæàÈïø„ÄÇËÄåÂΩìÂèëÁîü Context Cancel Êó∂ÔºåÊéíÊü•Ëµ∑Êù•Â∞±ÈùûÂ∏∏È∫ªÁÉ¶„ÄÇÊâÄ‰ª•ÈúÄË¶ÅÂØπÊâÄ‰ΩøÁî®ÂêÑÁ±ªÊ°ÜÊû∂ÊàñËÄÖÂ∫ìÂú®Êï¥‰∏™ÊâßË°åËøáÁ®ãÁöÑÁîüÂëΩÂë®ÊúüÈúÄË¶ÅÊúâ‰∏ÄÂÆöÁöÑ‰∫ÜËß£ÔºåÂÜçÈÖçÂêàÊó•ÂøóÁ≠âÊâãÊÆµËøõË°åÊéíÊü•Ëµ∑Êù•‰ºöÊõ¥Âä†ÊúâÊïà„ÄÇ ÂèÇËÄÉ GoËØ≠Ë®ÄÂÆûÊàòÁ¨îËÆ∞Ôºà‰∫åÂçÅÔºâ| Go Context Go Concurrency Patterns: Context How to correctly use context.Context in Go 1.7 Go 1.7 httptrace and context debug patterns Go: Context and Cancellation by Propagation How to correctly use context.Context in Go 1.7 Ê∑±ÂÖ•ÁêÜËß£ Golang HTTP Timeout Pitfalls of context values and how to avoid or mitigate them in Go]]></content>
      <categories>
        <category>Go</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>Ê†áÂáÜÂ∫ì</tag>
        <tag>Ê∫êÁ†ÅÂ≠¶‰π†</tag>
        <tag>Context</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSS Â≠¶‰π†Á¨îËÆ∞]]></title>
    <url>%2F2019%2F07%2F16%2Fcss-learning-notes%2F</url>
    <content type="text"><![CDATA[ÂºïË®Ä‰ªé 0 Âà∞ 1 ÂÆûÁé∞‰∏Ä‰∏™ÁΩëÁ´ôÔºåÂâçÁ´ØÈÉ®ÂàÜËá™ÁÑ∂ÊòØË¶Å‰∫ÜËß£ CSS ÁöÑ„ÄÇCSS ÁöÑÂÖ®Áß∞ÊòØ Cascading Style SheetsÔºåÂÆÉÊòØ‰∏ÄÁßç‰∏ìÈó®Áî®‰∫éÁªôÁªìÊûÑÂåñÊñáÊ°£ÔºàÂ¶Ç Web HTMLÔºâÊ∑ªÂä†Ê†∑ÂºèÁöÑËØ≠Ë®Ä„ÄÇÊàë‰ª¨ÂèØ‰ª•ÈÄöËøá‰ΩøÁî® CSS Êù•‰∏∫ÁΩëÈ°µÂ∏ÉÂ±ÄÔºåËÆæÂÆöÂ≠ó‰ΩìÁöÑÊ†∑ÂºèÔºåËÆæÂÆöÂä®ÁîªÁ≠âÔºåËÆ©Êàë‰ª¨ÁöÑÁΩëÁ´ôÊõ¥Âä†ÁÇ´ÈÖ∑ÔºåÊõ¥Âä†Áé∞‰ª£Âåñ„ÄÇËÄåËøô‰∫õÈÄöËøá‰º†ÁªüÁöÑÁºñÁ®ãËØ≠Ë®ÄÊù•ÂÆûÁé∞‰ºöÈùûÂ∏∏ÁπÅÁêêÔºå‰ΩøÁî® CSS Âè™ÈúÄË¶ÅÊåâÈúÄÂÆö‰πâÂç≥ÂèØÔºåÊûÅÂ§ßÂú∞ÊèêÈ´ò‰∫ÜÂºÄÂèëÊïàÁéá„ÄÇÊú¨ÁØáÁ¨îËÆ∞‰∏ªË¶ÅÊòØËÆ∞ÂΩïÊ†∏ÂøÉÁöÑ CSS ÊäÄÂ∑ßÔºåÁõ∏ÂÖ≥ÁöÑÁªÉ‰π†‰Ωç‰∫é GitHub learning-css ‰ªìÂ∫ì„ÄÇ CSS Âü∫Á°Ä Â§öÈáçÊ†∑Âºè‰ºòÂÖàÁ∫ßÈ°∫Â∫èÔºà‰æùÊ¨°Â¢ûÂä†ÔºâÔºö ÈÄöÁî®ÈÄâÊã©Âô®Ôºà*Ôºâ ÂÖÉÁ¥†ÔºàÁ±ªÂûãÔºâÈÄâÊã©Âô® Á±ªÈÄâÊã©Âô® Â±ûÊÄßÈÄâÊã©Âô® ‰º™Á±ª ID ÈÄâÊã©Âô® ÂÜÖËÅîÊ†∑Âºè !important ËßÑÂàôÂú®Ë¢´Â∫îÁî®Ê†∑ÂºèÂ£∞Êòé‰∏≠Êó∂ÔºåËØ•Ê†∑ÂºèÂ£∞Êòé‰ºöË¶ÜÁõñ CSS ‰∏≠‰ªª‰ΩïÂÖ∂‰ªñÁöÑÂ£∞ÊòéÔºå‰ΩøÁî®ÂÆÉÂπ∂ÈùûÂ•Ω‰π†ÊÉØÔºö AlwaysÔºöË¶Å‰ºòÂåñËÄÉËôë‰ΩøÁî®Ê†∑ÂºèËßÑÂàôÁöÑ‰ºòÂÖàÁ∫ßÊù•Ëß£ÂÜ≥ÈóÆÈ¢òÔºåËÄåÈùû !important OnlyÔºöÂè™ÊúâÂú®ÈúÄË¶ÅË¶ÜÁõñÂÖ®Á´ôÊàñÂ§ñÈÉ® CSS ÁöÑÁâπÂÆöÈ°µÈù¢‰∏≠‰ΩøÁî®ÂÆÉ NeverÔºöÊ∞∏Ëøú‰∏çË¶ÅÂú®ÂÖ®Á´ôËåÉÂõ¥‰ΩøÁî®ÂÆÉ NeverÔºöÊ∞∏Ëøú‰∏çË¶ÅÂú®‰Ω†ÁöÑÊèí‰ª∂‰∏≠‰ΩøÁî®ÂÆÉ CSS ÈìæÊé•Ê†∑ÂºèÔºö ÂõõÁßçÁâπÊÆäÁä∂ÊÄÅÂèØ‰ª•ÂàÜÂà´ËÆæÁΩÆÔºö a:link: Ê≠£Â∏∏ÔºåÊú™ËÆøÈóÆËøáÁöÑÈìæÊé• a:visited: Â∑≤ËÆøÈóÆËøáÁöÑÈìæÊé• a:hover: Èº†Ê†áÊîæÂú®ÈìæÊé•‰∏äÊó∂ a:active: ÈìæÊé•Ë¢´ÁÇπÂáªÁöÑÈÇ£Âàª ‰∏äËø∞È°∫Â∫èÂæàÈáçË¶ÅÔºåÁÆÄËÆ∞ÔºöL(ink)OV(isited)E and H(over)A(ctive)TE ÊâÄÊúâÁöÑ HTML ÂÖÉÁ¥†ÈÉΩÂèØ‰ª•ÁúãÂÅöÊòØ‰∏Ä‰∏™ Box„ÄÇCSS ÁõíÊ®°ÂûãÊú¨Ë¥®‰∏äÂ∞±ÊòØÂ∞ÅË£Ö‰∫Ü HTML ÂÖÉÁ¥†ÁöÑÁõíÂ≠ê„ÄÇÂõæÁ§∫Â¶Ç‰∏ãÔºö ÂΩìÊåáÂÆö CSS ÂÖÉÁ¥†ÁöÑÈ´òÂ∫¶ÂíåÂÆΩÂ∫¶Êó∂ÔºåÂè™ÊòØÂú®ËÆæÁΩÆÂÜÖÂÆπÂå∫ÂüüÁöÑÈ´òÂ∫¶ÂíåÈ´òÂ∫¶„ÄÇÂÆûÈôÖÂÖÉÁ¥†Â∞∫ÂØ∏ËÆ°ÁÆóÔºö ÊÄªÂÆΩÂ∫¶ = ÂÜÖÂÆπÂÆΩÂ∫¶ + Â∑¶Â°´ÂÖÖ + Âè≥Â°´ÂÖÖ + Â∑¶ËæπÊ°Ü + Âè≥ËæπÊ°Ü + Â∑¶ËæπË∑ù + Âè≥ËæπË∑ù ÊÄªÈ´òÂ∫¶ = ÂÜÖÂÆπÈ´òÂ∫¶ + È°∂ÈÉ®Â°´ÂÖÖ + Â∫ïÈÉ®Â°´ÂÖÖ + ‰∏äËæπÊ°Ü + ‰∏ãËæπÊ°Ü + ‰∏äËæπË∑ù + ‰∏ãËæπË∑ù ÁõíÊ†∑ÂºèÂ∫îÁî®ÔºàÈÄÇÁî®‰∫é margin, padding Á≠âÁÆÄÂÜôÊ†∑ÂºèÁöÑÊÉÖÂÜµÔºâÔºö Âõõ‰∏™ÂÄºÔºöa, b, c, d -&gt; ‰∏äÔºå‰∏ãÔºåÂ∑¶ÔºåÂè≥ÔºàÈÄÜÊó∂ÈíàÊñπÂêëÔºâ ‰∏â‰∏™ÂÄºÔºöa, b, c -&gt; ‰∏äÔºåÂ∑¶Âè≥Ôºå‰∏ã ‰∏§‰∏™ÂÄºÔºöa, b -&gt; ‰∏ä‰∏ãÔºåÂ∑¶Âè≥ ‰∏Ä‰∏™ÂÄºÔºöa -&gt; ‰∏ä‰∏ãÂ∑¶Âè≥ outline ÊòØÂú® border Â§ñÈÉ®ÁöÑÔºåÂú®ÂÖÉÁ¥†Âë®Âõ¥ÁªòÂà∂Âá∫ÂÖÉÁ¥†ÁöÑËæπÁºòÔºåËµ∑Âà∞Á™ÅÂá∫ÂÖÉÁ¥†ÁöÑ‰ΩúÁî®„ÄÇ‰ΩøÁî®ÊñπÂºèÁ±ª‰ºº borderÔºåÂèØËÆæÂÆöÁöÑÂ±ûÊÄßÂåÖÊã¨Ôºöoutline-style, outline-color, outline-width Á≠â„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåoutline ÊòØ‰∏çÂç†Á©∫Èó¥ÁöÑÔºå‰∏ç‰ºöÂ¢ûÂä†È¢ùÂ§ñÁöÑÂÆΩÂ∫¶ÂíåÈ´òÂ∫¶„ÄÇoutline ‰πüÂèØËÉΩÊòØÈùûÁü©ÂΩ¢ÁöÑÔºåÂíåÊµèËßàÂô®ÂÆûÁé∞ÊúâÂÖ≥„ÄÇ margin &amp; paddingÔºö ÈöêËóèÂÖÉÁ¥†Ôºö display:noneÔºö‰∏ç‰ºöÂç†ÊçÆÁ©∫Èó¥Ôºå‰ºö‰ªéÂ∏ÉÂ±Ä‰∏≠ÁßªÈô§ visibility:hiddenÔºö‰ºöÂç†ÊçÆÁ©∫Èó¥ÔºåÂΩ±ÂìçÂ∏ÉÂ±Ä ÂùóÔºà blockÔºâÂÖÉÁ¥†Ôºö Âç†ÊçÆÂÖ®ÈÉ®ÂÆΩÂ∫¶ÔºåÂπ∂‰∏î‰ºö‰∫ßÁîüÊç¢Ë°å width, height, padding, margin ÈÉΩÊòØÂèØÊéßÂà∂ÁöÑ ÂùóÂÖÉÁ¥†Ôºö&lt;address/&gt;, &lt;blockquote/&gt;, &lt;center/&gt;, &lt;dir/&gt;, &lt;div/&gt;, &lt;dl/&gt;, &lt;fieldset/&gt;, &lt;form/&gt;, &lt;h1/&gt;, &lt;h2/&gt;, &lt;h3/&gt;, &lt;h4/&gt;, &lt;h5/&gt;, &lt;h6/&gt;, &lt;hr/&gt;, &lt;isindex/&gt;, &lt;menu/&gt;, &lt;noframes/&gt;, &lt;noscript&gt;, &lt;ol/&gt;, &lt;p/&gt;, &lt;pre/&gt;, &lt;table/&gt;, &lt;ul/&gt;, &lt;li/&gt; ÂÜÖËÅîÔºàinlineÔºâÂÖÉÁ¥†Ôºö Âè™Âç†ÊçÆÂøÖË¶ÅÁöÑÂÆΩÂ∫¶Ôºå‰∏ç‰ºöÊç¢Ë°å width, height, padding-top, padding-bottom, margin-top, margin-bottom ÈÉΩ‰∏çÂèØÊîπÂèò ÂÜÖËÅîÂÖÉÁ¥†Ôºö&lt;a/&gt;, &lt;abbr/&gt;, &lt;acronym/&gt;, &lt;b/&gt;, &lt;bdo/&gt;, &lt;big/&gt;, &lt;br /&gt;, &lt;cite/&gt;, &lt;code/&gt;, &lt;dfn/&gt;, &lt;em/&gt;, &lt;font/&gt;, &lt;i/&gt;, &lt;img/&gt;, &lt;input/&gt;, &lt;kbd/&gt;, &lt;label/&gt;, &lt;q/&gt;, &lt;s/&gt;, &lt;samp/&gt;, &lt;select/&gt;, &lt;small/&gt;, &lt;span/&gt;, &lt;strike/&gt;, &lt;strong/&gt;, &lt;sub/&gt;, &lt;sup/&gt;, &lt;textarea/&gt;, &lt;tt/&gt;, &lt;u/&gt;, &lt;var/&gt; ‰∏ªË¶Å‰ΩøÁî®ÁöÑ‰∏âÁßçÊ†∑ÂºèÔºö display:blockÔºöÊòæÂºè‰∏∫ÂùóÂÖÉÁ¥† display:inlineÔºöÊòæÁ§∫‰∏∫ÂÜÖËÅîÂÖÉÁ¥† display:inline-blockÔºöÊòæÁ§∫‰∏∫ÂÜÖËÅîÂùóÂÖÉÁ¥†ÔºåË°®Áé∞‰∏∫ÂêåË°åÊòæÁ§∫ÔºåÂêåÊó∂ÂèØ‰ª•‰øÆÊîπ width/height/padding/margin Á≠âÔºåÊïàÊûúÂ¶Ç‰∏ãÔºö CSS ÂÆö‰ΩçÔºàPositionÔºâÔºö staticÔºöÂÖÉÁ¥†ÈªòËÆ§ÂÆö‰ΩçÊñπÂºèÔºå‰∏çÂèó top/bottom/left/right ÁöÑÂΩ±Âìç relativeÔºöÁõ∏ÂØπÊ≠£Â∏∏‰ΩçÁΩÆÁöÑÂÅèÁßªÔºõÂéüÊú¨Á©∫Èó¥‰æùÁÑ∂‰ºöË¢´È¢ÑÁïôÂá∫Êù•ÔºåÂèØËÉΩ‰ºö‰∏éÂà´ÁöÑÂÖÉÁ¥†ÈáçÂè† fixedÔºöÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆÁõ∏ÂØπ‰∫éÊµèËßàÂô®Á™óÂè£ÊòØÂõ∫ÂÆöÁöÑÔºå‰ºöÂíåÂÖ∂ÂÆÉÂÖÉÁ¥†ÈáçÂè†ÔºõÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆÂíåÊñáÊ°£ÊµÅÊó†ÂÖ≥Ôºå‰∏çÂç†ÊçÆÁ©∫Èó¥ absoluteÔºöÁªùÂØπÂÆö‰ΩçÁöÑÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆÊòØÁõ∏ÂØπ‰∫éÊúÄËøëÁöÑÂ∑≤ÂÆö‰ΩçÁà∂ÂÖÉÁ¥†ÔºåËã•ÂÖÉÁ¥†Êó†Â∑≤ÂÆö‰ΩçÁà∂ÂÖÉÁ¥†ÔºåÂàôÂÆÉÁöÑ‰ΩçÁΩÆÊòØÁõ∏ÂØπ‰∫é Ôºõ‰∏éÊñáÊ°£ÊµÅÊó†ÂÖ≥Ôºå‰∏çÂç†ÊçÆÁ©∫Èó¥Ôºå‰ºö‰∏éÂÖ∂ÂÆÉÂÖÉÁ¥†ÈáçÂè† stickyÔºöÁ≤òÊÄßÂÆö‰ΩçÔºå‰∏éÊªöÂä®ÊúâÂÖ≥ÔºåÂèóÈôê‰∫éÊµèËßàÂô® ÂèØ‰ª•‰ΩøÁî® overflow ÊåáÂÆöÂΩìÂÜÖÂÆπÊ∫¢Âá∫Êó∂ÁöÑË°å‰∏∫ÔºàÂèØÈÄâÊã©ÊòØÂê¶Â±ïÁ§∫ÊªöÂä®Êù°ÔºâÔºå‰ΩÜÂÖ∂Âè™ÂèØÁî®‰∫éÊåáÂÆö‰∫ÜÈ´òÂ∫¶ÁöÑÂùóÂÖÉÁ¥†‰∏ä ÂÖÉÁ¥†ÁöÑÊµÆÂä®Ôºö ‰ºöËÆ©ÂÖÉÁ¥†ÂêëÂ∑¶ÊàñÂêëÂè≥ÊµÆÂä®ÔºåÂë®Âõ¥ÂÖÉÁ¥†‰πü‰ºöÈáçÊñ∞ÊéíÂàó ÂÖÉÁ¥†Ê∞¥Âπ≥ÊµÆÂä®ÔºåÊÑèÂë≥ÁùÄÂè™ËÉΩÂ∑¶Âè≥ÁßªÂä® ÊµÆÂä®ÂÖÉÁ¥†‰ºöÂ∞ΩÈáèÂêëÂ∑¶ÊàñÂêëÂè≥ÁßªÂä®ÔºåÁõ¥Âà∞ÂÆÉÁöÑÂ§ñËæπÁºòÁ¢∞Âà∞ÂåÖÊã¨Ê°ÜÊàñÂè¶‰∏Ä‰∏™ÊµÆÂä®Ê°ÜÁöÑËæπÁºò‰∏∫Ê≠¢ ËÆæÁΩÆÂ±Ö‰∏≠Ôºö ÂÖÉÁ¥†Â±Ö‰∏≠ÔºöÂèØ‰ª•ÈÄöËøá margin: auto Ëß£ÂÜ≥Ôºå‰ΩÜÊòØÂøÖÈ°ªË¶ÅËÆæÁΩÆÂÖÉÁ¥†ÁöÑÂÆΩÂ∫¶ ÊñáÊú¨Â±Ö‰∏≠ÔºöÂèØ‰ΩøÁî® text-align ÁªÑÂêàÈÄâÊã©Âô®Ôºö Âêé‰ª£ÈÄâÊã©Âô®Ôºödiv p Â≠êÂÖÉÁ¥†ÈÄâÊã©Âô®Ôºödiv&gt;p Áõ∏ÈÇªÂÖÑÂºüÈÄâÊã©Âô®Ôºödiv+p ÊôÆÈÄöÂÖÑÂºüÈÄâÊã©Âô®Ôºödiv~p ‰º™Á±ªÔºàpseudo-classesÔºâÔºö Áî®‰∫éÊ∑ªÂä†‰∏Ä‰∫õÈÄâÊã©Âô®ÁöÑÁâπÊÆäÊïàÊûú ‰º™Á±ªÈÄâÊã©ÁöÑÂÖÉÁ¥†ÊòØÂü∫‰∫éÂΩìÂâçÂÖÉÁ¥†ÊâÄÂ§ÑÁöÑÁä∂ÊÄÅÔºåÊàñËÄÖÊòØÂÖÉÁ¥†ÊâÄÂÖ∑ÊúâÁöÑÁâπÊÄßÔºåËÄåÈùûÈùôÊÄÅÊ†áÂøóÔºàÂ¶Ç class, id, Â±ûÊÄßÔºâ„ÄÇËÄåÁä∂ÊÄÅÊòØÂä®ÊÄÅÁöÑÔºåÊâÄ‰ª•ÂΩì‰∏Ä‰∏™ÂÖÉÁ¥†Âà∞Ëææ‰∏Ä‰∏™ÁâπÂÆöÁä∂ÊÄÅÁöÑÊó∂ÂÄôÔºåÂèØËÉΩÂæóÂà∞‰∏Ä‰∏™‰º™Á±ªÁöÑÊ†∑ÂºèÔºõÂΩìÁä∂ÊÄÅÊîπÂèòÊó∂ÔºåÂÆÉ‰ºöÂ§±ÂéªËøô‰∏™Ê†∑Âºè„ÄÇÂü∫‰∫éÊñáÊ°£‰πãÂ§ñÁöÑÊäΩË±°ÔºåÊïÖÁß∞‰∏∫‰º™Á±ª„ÄÇ ËØ≠Ê≥ïÔºö selector:psedudo-class { property: value } selector.class:pseudo-class { property: value } ‰º™Á±ªÂêçÁß∞‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜô Á§∫‰æãÔºöa:hover { color: red } ‰º™ÂÖÉÁ¥†Ôºàpseudo-elementÔºâÔºö Áî®‰∫éÊ∑ªÂä†‰∏Ä‰∫õÈÄâÊã©Âô®ÁöÑÁâπÊÆäÊïàÊûú ËØ≠Ê≥ïÔºöÁ±ª‰ºº‰º™Á±ª ‰º™ÂÖÉÁ¥†ÊòØÂØπÂÖÉÁ¥†‰∏≠ÁâπÂÆöÂÜÖÂÆπÈÄâÊã©Âπ∂Êìç‰ΩúÔºåÊìç‰ΩúÂ±ÇÊ¨°Ë¶ÅÊØî‰º™Á±ªÊõ¥Ê∑±ÔºåÂä®ÊÄÅÊÄßÊØî‰º™Á±ª‰Ωé„ÄÇËÆæËÆ°‰º™ÂÖÉÁ¥†ÁöÑÁõÆÁöÑÂ∞±ÊòØÈÄâÂèñËØ∏Â¶ÇÁ¨¨‰∏Ä‰∏™Â≠óÊØçÔºàË°åÔºâÁ≠âÔºåÈÄâÂèñÂÜÖÂÆπÁöÑÂâçÂêéÂπ∂Êìç‰ΩúÁ≠âÔºåËøô‰∫õÊôÆÈÄöÁöÑÈÄâÊã©Âô®ÊòØÊó†Ê≥ïÂÆåÊàêÁöÑ„ÄÇÊú¨Ë∫´ÊòØÂü∫‰∫éÂÖÉÁ¥†ÁöÑÊäΩË±°Ôºå‰∏çÂ≠òÂú®‰∫éÊñáÊ°£‰∏≠ÔºåÊïÖÁß∞‰∏∫‰º™ÂÖÉÁ¥†„ÄÇ Â±ûÊÄßÈÄâÊã©Âô®Ôºö ËØ≠Ê≥ïÔºö&lt;element&gt;[attr] { } ÊàñËÄÖ &lt;element&gt;[attr&lt;op&gt;value]{ } ÈÄâÊã©ËåÉÂõ¥Ôºö =: equal_word *=: Áõ∏ÂΩì‰∫é containsÔºåÂ¶Ç &lt;p title=&quot;buyfflowerrr&quot;&gt;&lt;/p&gt; ~=: Áõ∏ÂΩì‰∫é contains_wordÔºåÂ¶Ç &lt;p title=&quot;buy flower&quot;&gt;&lt;/p&gt; ‰∏≠ÁöÑ flower |= : Áõ∏ÂΩì‰∫é starts_with_wordÔºåÂΩìÁÑ∂ËøôÈáåÁöÑÂçïËØçÂ∫îÊòØÂîØ‰∏ÄÁöÑÔºåÊàñËÄÖÊòØÁî® - ÂàÜÈöîÁöÑ ^=: Áõ∏ÂΩì‰∫é starts_with $=: Áõ∏ÂΩì‰∫é ends_with CSS 3 ÁÆÄËÆ∞ CSS 3 Ë¢´ÊãÜÂàÜÊàê‰∫Ü„ÄåÊ®°Âùó„ÄçÔºå‰∏Ä‰∫õÈáçË¶ÅÁöÑÊ®°ÂùóÂ¶Ç‰∏ãÔºö ÈÄâÊã©Âô® ÁõíÊ®°Âûã ËÉåÊôØÂíåËæπÊ°Ü ÊñáÂ≠óÁâπÊïà 2D/3D ËΩ¨Êç¢ Âä®ÊÄÅ Â§öÂàóÂ∏ÉÂ±Ä Áî®Êà∑ÁïåÈù¢ Ê∏êÂèòÔºàGradientsÔºâÔºö Á∫øÊÄßÊ∏êÂèòÔºàLinear GradientsÔºâÔºöÂêë‰∏ã/Âêë‰∏ä/ÂêëÂ∑¶/ÂêëÂè≥/ÂØπËßíÁ∫ø ÂæÑÂêëÊ∏êÂèòÔºàRadius GradientsÔºâÔºöÁî±Áõ∏Â∫îÁöÑ‰∏≠ÂøÉÂÆö‰πâ ËØ≠Ê≥ïÔºöbackground: linear-gradient (direction, color-stop1, color-stop2, ...) box-shadow È°∫Â∫èÔºö 2D ËΩ¨Êç¢Ôºö translate, translateX, translateY rotate, rotateX, rotateY scale, scaleX, scaleY skew, skewX, scaleY matrixÔºö Êé•Êî∂ÂÖ≠‰∏™ÂèÇÊï∞Ôºöa, b, c, d, tx, ty ÂØπÁÖßÔºö ‰ΩçÁßªÔºömatrix(1, 0, 0, 1, tx, ty) = translate(tx + &quot;px&quot;, ty + &quot;px&quot;) Áº©ÊîæÔºömatrix(sx, 0, 0, sy, 0, 0) = scale(sx, sy) ÊóãËΩ¨Ôºömatrix(cosŒ∏, sinŒ∏, -sinŒ∏, cosŒ∏, 0, 0) = rotate(Œ∏ + &quot;deg&quot;) ÂÄæÊñúÔºömatrix(1, tan(Œ∏y), tan(Œ∏x), 1, 0, 0) = skew(Œ∏x + &quot;deg&quot;, Œ∏y + &quot;deg&quot;) ËÆ°ÁÆóÊñπÂºèÔºö ËøáÊ∏°ÊïàÊûúÔºötransition: property duration timing-function delay ÂÖ∂‰∏≠ÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåduration ‰∏∫ 0ÔºåÊâÄ‰ª•Â¶ÇÊûú‰∏çËÆæÁΩÆËØ•ÂÄºÔºåÂ∞ÜÁúã‰∏çÂà∞ÊïàÊûú ËøáÊ∏°Âä®ÁîªÊó∂Èó¥Êõ≤Á∫øÔºö easeÔºöÈªòËÆ§ÂÄº linear ease-in ease-out ease-in-out cubic-bezier(n, n, n, n)ÔºöË¥ùÂ°ûÂ∞îÊõ≤Á∫øÂáΩÊï∞ÔºåÂèØ‰ª•ÈÄöËøáÊåáÂÆöÂÄºÊù•ÂÆûÁé∞‰∏äËø∞ÊïàÊûúÔºåÂêåÊó∂ÂèØ‰ª•Ëá™ÂÆö‰πâÂÖ∂ÂÆÉÂÄºÂÆûÁé∞Ëá™ÂÆö‰πâÊïàÊûú ÂÖ≥ÈîÆÂ∏ßÂä®ÁîªÔºö ‰ΩøÁî® @keyframes ÂàõÂª∫Âä®ÁîªÔºåÂèØ‰ª•‰ΩøÁî® n% ËÆæÂÆöÂ§Ñ‰∫é‰∏çÂêåÈò∂ÊÆµÊó∂ÁöÑÂ±ûÊÄßÔºåËÄå from Âíå to ÂàÜÂà´‰ª£Ë°® 0% Âíå 100% ‰ΩøÁî® animation Â±ûÊÄßÁªëÂÆöÂä®ÁîªÂà∞ÈÄâÊã©Âô®‰∏äÔºåÈúÄË¶ÅËÆæÂÆö‰∏§‰∏™ÂÄºÔºö Âä®ÁîªÂêçÁß∞ Âä®ÁîªÊó∂Èïø Flex Â∏ÉÂ±ÄÔºö ÂΩìÈ°µÈù¢ÈúÄË¶ÅÈÄÇÂ∫î‰∏çÂêåÁöÑÂ±èÂπïÂ§ßÂ∞èÂèäËÆæÂ§áÁ±ªÂûãÊó∂ÔºåÁ°Æ‰øùÂÖÉÁ¥†Êã•ÊúâÊÅ∞ÂΩìÁöÑË°å‰∏∫Â∏ÉÂ±ÄÊñπÂºè Êèê‰æõ‰∏ÄÁßçÊõ¥Âä†ÊúâÊïàÁöÑÊñπÂºèÂØπ‰∏Ä‰∏™ÂÆπÂô®‰∏≠ÁöÑÂ≠êÂÖÉÁ¥†ËøõË°åÊéíÂàó„ÄÅÂØπÈΩêÂíåÂàÜÈÖçÁ©∫Èó¥ ÁªÑÊàêÔºö Flex container Flex item Â±ûÊÄßËÆæÁΩÆÔºödisplay: flex/inline-flex ËÆæÁΩÆ‰∏ªËΩ¥ÂØπÈΩêÊñπÂºèÔºöjustify-content ËÆæÁΩÆ‰æßËΩ¥ÂØπÈΩêÊñπÂºèÔºöalign-items ËÆæÁΩÆÊç¢Ë°åÔºöflex-wrap ËÆæÁΩÆÂêÑ‰∏™Ë°åÁöÑÂØπÈΩêÊñπÂºèÔºöalign-content ÂèÇËÄÉ ËèúÈ∏üÊïôÁ®ãÔºöCSS block, inline-block ÂØπÊØî Understanding the CSS Transforms Matrix CSS 2D ËΩ¨Êç¢ËØ¶Ëß£ CSS 3 ‰∏≠ Flex ÂºπÊÄßÂ∏ÉÂ±ÄËØ•Â¶Ç‰ΩïÁÅµÊ¥ªËøêÁî®Ôºü 30 ÂàÜÈíüÂ≠¶‰ºö Flex Â∏ÉÂ±Ä Flex Â∏ÉÂ±ÄÂØπÊÄßËÉΩÁöÑÂΩ±Âìç‰∏ªË¶Å‰ΩìÁé∞Âú®Âì™ÊñπÈù¢Ôºü]]></content>
      <categories>
        <category>ÂâçÁ´Ø</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>Â∏ÉÂ±Ä</tag>
        <tag>Ê†∑Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Redux ÁÆÄËÆ∞]]></title>
    <url>%2F2019%2F07%2F03%2Freact-redux-notes%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄÊ†πÊçÆÂÆòÁΩë‰ªãÁªçÔºåRedux ÊòØ‰∏Ä‰∏™ JavaScript Áä∂ÊÄÅÁÆ°ÁêÜÂÆπÂô®ÔºåÊèê‰æõ‰∫ÜÂèØÈ¢ÑÊµãÁöÑÁä∂ÊÄÅÁÆ°ÁêÜËÉΩÂäõ„ÄÇÂèØ‰ª•ÊûÑÂª∫‰∏ÄËá¥ÁöÑÂ∫îÁî®ÔºåËøêË°å‰∫éÂ§öÁßçÁéØÂ¢É‰∏ãÔºàÂÆ¢Êà∑Á´Ø„ÄÅÊúçÂä°Âô®ÂíåÂéüÁîüÂ∫îÁî®Á≠âÔºâÔºå‰∏îÊòì‰∫éÊµãËØïÔºàÁîöËá≥ÈÉΩ‰∏çË¶ÅÂú®ÂÜôÁïåÈù¢‰πãÂâçËøõË°åÊµãËØïÔºâ„ÄÇ Ê¶ÇÂøµÊ†∏ÂøÉÊÄùÊÉ≥Redux ÁöÑÊ†∏ÂøÉÂ∞±ÊòØÁÆ°ÁêÜÁä∂ÊÄÅÔºåÊâÄÊúâÁöÑÁä∂ÊÄÅÊòØÂú® store ÂØπË±°Ê†ë‰∏≠Áª¥Êä§„ÄÇ‰ΩøÁî® action Êù•ÊèèËø∞ state ÂèòÂåñÔºåËÄå‰∏∫‰∫ÜËÉΩÂ§üÂ∞Ü action Âíå state ‰∏≤ËÅîÂú®‰∏ÄÂùóÔºåÂ∞±Êúâ‰∫Ü reducer ÂáΩÊï∞ÔºåÂÆÉË¥üË¥£Ê†πÊçÆ‰∏çÂêåÁöÑ action dispatch Âà∞‰∏çÂêåÁöÑÂàÜÊîØÔºåÁÑ∂ÂêéËøîÂõûÊñ∞ÁöÑÁä∂ÊÄÅ„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåreducer ÊòØÁ∫ØÂáΩÊï∞Ôºå‰∏çÂ∫îËØ• inplace ÈÇ£ÁßçÊñπÂºè‰øÆÊîπ stateÔºåËÄåÊòØÁîüÊàêÊñ∞ÁöÑ nextState Âπ∂ËøîÂõû„ÄÇÈÄöÂ∏∏‰∏Ä‰∏™Â∫îÁî®‰∏≠ÂèØËÉΩÊúâÂ§ö‰∏™Â∞èÁöÑ reducers ÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® combineReducers Â∞ÜÂÆÉ‰ª¨ÁªÑÂêàÂú®‰∏ÄËµ∑„ÄÇ ‰∏âÂ§ßÂéüÂàô Âçï‰∏ÄÊï∞ÊçÆÊ∫êÔºöÊï¥‰∏™Â∫îÁî®ÁöÑ state ÊòØÂ≠òÂÇ®Âú®‰∏Ä‰∏™ obj tree ‰∏≠ÁöÑÔºåÂπ∂‰∏îËØ• obj tree Âè™Â≠òÂú®‰∫éÂîØ‰∏Ä‰∏Ä‰∏™ store ‰∏≠ state ÊòØÂè™ËØªÁöÑÔºöÂîØÊúâËß¶Âèë action Êâç‰ºöÊîπÂèò stateÔºå‰ΩøÁî® action Êù•ÊèèËø∞ÂèëÁîü‰∫Ü‰ªÄ‰πà ‰ΩøÁî®Á∫ØÂáΩÊï∞ÊâßË°å‰øÆÊîπÔºöÈúÄË¶ÅÁºñÂÜô reducer ÂÆûÁé∞Áä∂ÊÄÅÊîπÂèò ‰∏âÈ©æÈ©¨ËΩ¶Action Action ÊòØÊääÊï∞ÊçÆ‰ªéÂ∫îÁî®‰º†ÈÄíÂà∞ store ÁöÑÊúâÊïàËΩΩËç∑ÔºåÊòØ store Êï∞ÊçÆÁöÑÂîØ‰∏ÄÊù•Ê∫ê ‰∏ÄËà¨ÈÄöËøá store.dispatch() ÂàÜÂèë actionÔºå‰º†ÈÄíÂà∞ store ÂΩìÂ∫îÁî®ËßÑÊ®°ÂèòÂ§ßÊó∂ÔºåÂª∫ËÆÆÂ∞Ü Action ‰ΩøÁî®ÂçïÁã¨ÁöÑÊ®°ÂùóÂ≠òÊîæ Â∞ΩÈáèÂáèÂ∞ëÂú® action ‰∏≠‰º†ÈÄíÁöÑÊï∞ÊçÆ Action ÂàõÂª∫ÂáΩÊï∞ÔºöËøîÂõû action ÁöÑÂáΩÊï∞Ôºå‰ΩøÁî® bindActionCreators() ÂèØ‰ª•Ëá™Âä®Â∞ÜÂ§ö‰∏™ action ÂàõÂª∫ÂáΩÊï∞ÁªëÂÆöÂà∞ dispatch() ÊñπÊ≥ï‰∏ä Action Âè™ÊòØÊèèËø∞‰∫ÜÊúâ‰∫ãÊÉÖÂèëÁîü‰∫ÜËøôÊ†∑ÁöÑ‰∫ãÂÆûÔºå‰ΩÜ‰∏ç‰ºöÊèèËø∞Â∫îÁî®Â¶Ç‰ΩïÊõ¥Êñ∞ state Reducer Âú® reducer ‰∏≠ÂìçÂ∫î actionÔºåÂπ∂‰∫ßÁîüÊñ∞ÁöÑ stateÔºåËææÂà∞ÊîπÂèò state ÁöÑÁõÆÁöÑ ‰∏∫‰ªÄ‰πàÂè´ reducerÔºüÂèÇËÄÉ Array.prototype.reduce(reducer, ?initialValue) ÈáåÈù¢ÁöÑÂõûË∞ÉÂáΩÊï∞ÔºåÂÆÉ‰ª¨ÊØîËæÉÁ±ª‰ººÔºåÈÉΩÂøÖÈ°ªÊòØÁ∫ØÂáΩÊï∞„ÄÇreducer ÂáΩÊï∞‰∏çÊ¨¢ËøéÂ¶Ç‰∏ãÊìç‰ΩúÔºö ‰øÆÊîπ‰º†ÂÖ•ÂèÇÊï∞ ÊâßË°åÂê´ÊúâÂâØ‰ΩúÁî®ÁöÑÊìç‰ΩúÔºåÂ¶Ç API ËØ∑Ê±ÇÂíåË∑ØÁî±Ë∑≥ËΩ¨ Ë∞ÉÁî®ÈùûÁ∫ØÂáΩÊï∞ÔºåÂ¶Ç Date.now() Êàñ Math.random() ÂèØ‰ª•ÊääÊâÄÊúâÈ°∂Á∫ß reducer ÊîæÂú®Áã¨Á´ãÁöÑÊñá‰ª∂‰∏≠ÔºåÈÄöËøá export Êö¥Èú≤ÊØè‰∏™ reducer ÂáΩÊï∞Ôºö 1234import &#123; combineReducers &#125; from 'redux'import * as reducers from './reducers'const todoApp = combineReducers(recuders) Store Store ÁöÑËÅåË¥£Â¶Ç‰∏ãÔºö Áª¥ÊåÅÂ∫îÁî®ÁöÑ state Êèê‰æõ getState() ËØªÂèñÁä∂ÊÄÅ Êèê‰æõ dispatch(action) ÊñπÊ≥ïÊõ¥Êñ∞Áä∂ÊÄÅ-Êèê‰æõ subscribe(listener) ÊñπÊ≥ïÊ≥®ÂÜåÁõëËßÜÂô®ÔºåÂÖ∂ËøîÂõûÁöÑÂáΩÊï∞Áî®‰∫éÊ≥®ÈîÄÁõëËßÜÂô® Redux Â∫îÁî®ÁöÑ store Âè™‰ºöÊúâ‰∏Ä‰∏™Ôºå‰∏ÄËà¨‰ºöÊ†πÊçÆ‰∏öÂä°ÈÄªËæëÊù•ÊãÜÂàÜÂ≠êÁä∂ÊÄÅÂàÜÁªÑÔºåÂèØ‰ª•ÈÄöËøá reducers ÁªÑÂêàÂÆåÊàê createStore(reducer, ?initialState) ÂàõÂª∫Â∫îÁî® store Á§∫‰æã123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107import React, &#123; useRef &#125; from 'react'import ReactDOM from 'react-dom'import &#123; createStore, combineReducers &#125; from 'redux'function todos(state = [], action) &#123; switch (action.type) &#123; case 'ADD_TODO': console.log('Add todo: ' + action) return [ ...state, todo(undefined, action) ] case 'REMOVE_TODO': console.log('Remove todo: ' + action) return state.map((item) =&gt; todo(item, action)) case 'TOGGLE_TODO': console.log('Toggle todo: ' + action) return state.map((item) =&gt; todo(item, action)) default: return state &#125;&#125;function todo(state, action) &#123; switch (action.type) &#123; case 'ADD_TODO': return &#123; id: action.id, text: action.text, completed: action.completed, isDeleted: false, &#125; case 'REMOVE_TODO': if (state.id !== action.id) &#123; return state &#125; return &#123; ...state, isDeleted: true &#125; case 'TOGGLE_TODO': if (state.id !== action.id) &#123; return state &#125; return &#123; ...state, completed: !state.completed &#125; default: return state &#125;&#125;const todoApp = combineReducers(&#123; todos&#125;)const store = createStore(todoApp)let nextTodoId = 0function TodoItem(&#123; todo &#125;) &#123; return ( &lt;li&gt; &lt;label style=&#123;&#123; textDecoration: todo.completed ? 'line-through' : 'none' &#125;&#125; onClick=&#123;() =&gt; store.dispatch(&#123; type: 'TOGGLE_TODO', id: todo.id &#125;)&#125; &gt; &#123;todo.text&#125; &lt;/label&gt; &lt;button style=&#123;&#123; marginLeft: 10 &#125;&#125; onClick=&#123;() =&gt; &#123; store.dispatch(&#123; type: 'REMOVE_TODO', id: todo.id &#125;) &#125;&#125; &gt;ÁßªÈô§&lt;/button&gt; &lt;/li&gt; )&#125;function TodoApp(&#123; todos = [] &#125;) &#123; const todoItems = todos .filter((todo) =&gt; !todo.isDeleted) .map((todo) =&gt; &lt;TodoItem key=&#123;todo.id&#125; todo=&#123;todo&#125; /&gt;) const input = useRef() const handleClick = () =&gt; &#123; const text = input.current.value if (!text) &#123; return &#125; store.dispatch(&#123; type: 'ADD_TODO', id: nextTodoId++, text: input.current.value &#125;) &#125; return ( &lt;div&gt; &lt;input ref=&#123;input&#125; /&gt; &lt;button onClick=&#123;handleClick&#125; style=&#123;&#123; marginLeft: 10 &#125;&#125;&gt;Ê∑ªÂä†&lt;/button&gt; &lt;ul&gt; &#123;todoItems&#125; &lt;/ul&gt; &lt;/div&gt; )&#125;const render = () =&gt; &#123; const state = store.getState() ReactDOM.render( &lt;TodoApp todos=&#123;state.todos&#125; /&gt;, document.getElementById('root') )&#125;store.subscribe(() =&gt; &#123; console.log(store.getState()) render()&#125;)render() ÂÆûË∑µÊåâÁÖß Redux Êèê‰æõÁöÑÂá†‰∏™ÂÆòÊñπÁ§∫‰æãÔºåÂèØ‰ª•ÁúãÂá∫ÁºñÂÜô‰∏Ä‰∏™ÁÆÄÂçïÁöÑ Todo Â∫îÁî®ÂÖ∂ÂÆûË¶ÅËÄÉËôëÁöÑËøòÊòØÊå∫Â§öÁöÑÔºåÂ∞§ÂÖ∂ÊòØÈúÄË¶ÅÂú®ÂàÜÊï£ÁöÑÊ®°Âùó‰∏≠ÂàÜÂà´ÂÆö‰πâ actions, reducers, containers, dumb components Á≠âÔºåÁÑ∂ÂêéÊê≠ÈÖç react-redux Êù•ÂÆûÁé∞Êï¥‰ΩìÂäüËÉΩ„ÄÇ‰ª•‰∏ãÊòØ‰∏Ä‰∏™ÁªèÂÖ∏ÁöÑ React Redux Â∫îÁî®ÁöÑÁ§∫‰æãÁöÑÊñá‰ª∂ÁªìÊûÑÔºö 12345678src/ actions/ components/ consts/ containers/ reducers/ sotore.js index.js ÁúãËµ∑Êù•ÔºåÂàÜÂ±ÇÁªìÊûÑÂæàÊòéÊô∞„ÄÇ‰ΩÜËøôÈáåÊúâÂá†‰∏™ÂæàÂ§ßÁöÑÈóÆÈ¢òÔºö components Âíå containers ÂèØËÉΩ‰ºöÂá∫Áé∞Áõ∏‰∫íÂºïÁî®ÁöÑÈóÆÈ¢òÔºõ ÂØπ‰∫éÊüê‰∫õÊÉÖÂΩ¢Ôºå‰∏•Ê†ºÂå∫ÂàÜ smart components Âíå dumb components ÊØîËæÉÊ≠ªÊùøÔºõ ÁºñÂÜôËµ∑Êù•ÂæàÂ§çÊùÇ„ÄÅÂï∞Âó¶„ÄÅÂÜó‰Ωô„ÄÇ ÈíàÂØπËøô‰∏™ÁóõÁÇπÔºåÂèØ‰ª•ÂÄüÂä© rematch Ê°ÜÊû∂Ëß£ÂÜ≥„ÄÇÂÆÉÊú¨Ë¥®‰∏äÊòØ‰∏Ä‰∏™Âü∫‰∫é Redux Â∞ÅË£ÖÁöÑÊ°ÜÊû∂ÔºåÁõÆÁöÑÊòØÊèê‰æõÊúÄ‰Ω≥ÁöÑ Redux ÂÆûË∑µÔºåÂáèÂ∞ëÂ§ßÈáèÁöÑÊ†∑Êùø‰ª£Á†ÅÁºñÂÜôÔºåËß£ÊîæÁîü‰∫ßÂäõÔºÅ ‰ΩøÁî® Rematch Êó∂ÔºåÊúâ‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÊ¶ÇÂøµÂè´ÂÅö model„ÄÇ‰Ω†ÂèØ‰ª•Âú® models ÈáåÈù¢Â∞ÜÁä∂ÊÄÅ„ÄÅÂºïËµ∑Áä∂ÊÄÅÂèòÂåñreducers ÂèäÂºÇÊ≠• actions Âíå action creators Êî∂ÊïõÂà∞‰∏ÄËµ∑ÔºåÊñπ‰æøÁª¥Êä§ÂíåÊµãËØï„ÄÇÊÄªÁöÑÊù•ËØ¥Ôºåmodel ÂÆö‰πâÂåÖÂê´Â¶Ç‰∏ãÂá†‰∏™ÈÉ®ÂàÜÔºö state: ÂàùÂßãÁä∂ÊÄÅÊòØ‰ªÄ‰πà reducers: Â¶Ç‰ΩïÊîπÂèòÁä∂ÊÄÅ effects: Â§ÑÁêÜÂºÇÊ≠•ÁöÑ actionsÔºåÂ∏¶ÊúâÂâØ‰ΩúÁî®ÁöÑÊìç‰Ωú ‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑ model ÂÆö‰πâÂ¶Ç‰∏ãÔºö 12345678910111213141516export const count = &#123; state: 0, // initial state reducers: &#123; // ‰ΩøÁî®ÂêåÊ≠•ÂáΩÊï∞ÔºåÂ§ÑÁêÜÁä∂ÊÄÅÂèòÊõ¥ increment(state, payload) &#123; return state + payload &#125; &#125;, effects: (dispatch) =&gt; (&#123; // ‰ΩøÁî®Á∫ØÂáΩÊï∞Â§ÑÁêÜÁä∂ÊÄÅÂèòÊõ¥ÔºàÂºÇÊ≠• actionsÔºâ async incrementAsync(payload, rootState) &#123; await new Promise(resolve =&gt; setTimeout(resolve, 1000)) dispatch.count.increment(payload) &#125; &#125;)&#125; Êúâ‰∫Ü models ÂêéÔºåÂ∞±ÂèØ‰ª•ÂàõÂª∫ Redux storeÔºåÂπ∂‰ΩøÁî® dispatch Êù•Ëß¶Âèë reducers Âíå effects Ë∞ÉÁî®ÔºàÊó†ÈúÄÊâãÂä®ÁºñÂÜô action creators Âï¶~Ôºâ„ÄÇÂΩìÁÑ∂ÔºåÂú®Â±ïÁ§∫Â±ÇÔºåÊàë‰ª¨‰æùÁÑ∂ÂèØ‰ª•ÁªìÂêà react-redux Êù•‰ΩøÁî®„ÄÇÂÖ∑‰ΩìÂèØ‰ª•ÂèÇËÄÉÂÆòÊñπÁ§∫‰æãÔºåÊõ¥ËØ¶ÁªÜÁöÑÊñáÊ°£ÂèØ‰ª•ÂèÇËÄÉ ËøôÈáå„ÄÇ ÂèÇËÄÉ Redux ÂÆòÁΩëÊñáÊ°£ Redux ‰∏≠ÊñáËØëÊñá Redux ÂÖ•Èó®ËßÜÈ¢ëÊïôÁ®ã ‰ª•Âú∞ÈÅìÁöÑÊñπÂºè‰ΩøÁî® Redux ÊûÑÂª∫ React Â∫îÁî® Redux and Why it‚Äôs Good For You What Does Redux Do Presentational and Container ComponentsÔºå‰ΩúËÄÖÂÖ∂ÂÆûÂ∑≤Áªè‰∏çÊé®ËçêËøôÁßçÂÜôÊ≥ï‰∫Ü React Redux ÂÆòÊñπÊñáÊ°£ Âª∂‰º∏ÈòÖËØª All About React Router 4 Learning React Redux Leveling Up With React: Container Components]]></content>
      <categories>
        <category>ÂâçÁ´Ø</category>
      </categories>
      <tags>
        <tag>ÂâçÁ´Ø</tag>
        <tag>JavaScript</tag>
        <tag>React</tag>
        <tag>Redux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[React Ê†∏ÂøÉÊ¶ÇÂøµ]]></title>
    <url>%2F2019%2F07%2F02%2Freact-core-concepts%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄReact ÊòØ‰∏Ä‰∏™Áî®‰∫éÊûÑÂª∫ UI ÁöÑ JavaScript Â∫ìÔºåÂÆÉÊúâÂ£∞ÊòéÂºè„ÄÅÁªÑ‰ª∂ÂåñÁöÑÁâπÁÇπ„ÄÇ‰ΩøÁî® JSX ÁöÑËØ≠Ê≥ïÂèØ‰ª•ÈùûÂ∏∏ËΩªÊùæÂú∞ÁºñÂÜôÂêÑÁßçÁªÑ‰ª∂ÔºåËÄåÂü∫‰∫éÂêÑÁßçÁªÑ‰ª∂ÂèàÂèØ‰ª•ÊûÑÈÄ†Âá∫Êõ¥Âä†Â§çÊùÇÁöÑÂâçÁ´ØÈ°µÈù¢„ÄÇ Âü∫Á°ÄÁØáJSX JSX ÂèØ‰ª•ÂæàÂ•ΩÂú∞ÊèèËø∞ UIÔºöconst element = &lt;h1&gt;Hello, world&lt;/h1&gt; React ‰∏≠ËÆ§‰∏∫Ê∏≤ÊüìÈÄªËæëÊú¨Ë¥®‰∏äÂíå UI ÈÄªËæëÂ§©ÁÑ∂ËÄ¶ÂêàÔºåÂπ∂Ê≤°ÊúâËÆ§‰∏∫Âú∞Â∞ÜÊ†áËÆ∞‰∏éÈÄªËæëÂàÜÁ±ªÂà∞‰∏çÂêåÊñá‰ª∂ÔºåËÄåÊòØÂ∞ÜÂÆÉ‰ª¨ÊîæÂú®ÁªÑ‰ª∂ËøôÁßçÊùæÊï£ËÄ¶ÂêàÂçïÂÖÉ‰∏≠ÔºåÂÆûÁé∞ÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ª JSX Êú¨Ë∫´‰πüÊòØË°®ËææÂºèÔºåÂèØ‰ª•Âú® {} ‰∏≠‰ΩøÁî®‰ªªÊÑè JavaScript ÁöÑÂäüËÉΩ„ÄÇÂú®ËøõË°åÁºñËØëÂêéÔºåJSX ‰ºöË¢´ËΩ¨Êç¢ÊàêÊôÆÈÄöÁöÑ JavaScript ÂáΩÊï∞Ë∞ÉÁî®ÔºåÂπ∂ÂØπÂÖ∂ÂèñÂÄºÂêéÂæóÂà∞ JavaScript ÂØπË±° JSX ÂèØ‰ª•Èò≤Ê≠¢Ê≥®ÂÖ•ÊîªÂáªÔºåReactDOM Âú®Ê∏≤ÊüìÊâÄÊúâËæìÂÖ•ÂÜÖÂÆπÂâçÔºåÈªòËÆ§‰ºöËøõË°åËΩ¨‰πâ ÂÖÉÁ¥†Ê∏≤Êüì ‰∏éÁúüÂÆûÁöÑÊµèËßàÂô® DOM ÂÖÉÁ¥†Áõ∏ÊØîÔºåReact ÂÖÉÁ¥†ÊòØÈùûÂ∏∏ËΩªÈáèÁ∫ß‰∏îÂàõÂª∫ÂºÄÈîÄÂæàÂ∞èÁöÑÊôÆÈÄöÂØπË±°ÔºåReactDOM Ë¥üË¥£Êõ¥Êñ∞ DOM ‰øùÊåÅ‰∏é React ÂÖÉÁ¥†‰∏ÄËá¥ Ê∏≤ÊüìÂÖÉÁ¥†ÔºöReactDOM.render(element, container) ReactDOM ‰ºöÂ∞ÜÂÖÉÁ¥†ÂèäÂÖ∂Â≠êÂÖÉÁ¥†‰∏é‰πãÂâçÁöÑÁä∂ÊÄÅÂØπÊØîÔºåÂè™ËøõË°åÂøÖË¶ÅÁöÑÊõ¥Êñ∞‰øùËØÅ DOM ËææÂà∞È¢ÑÊúüÁä∂ÊÄÅ ÁªÑ‰ª∂ ÁªÑ‰ª∂ÁöÑÂÆö‰πâÊúâ‰∏§ÁßçÊñπÂºèÔºö 1234567891011// ÂáΩÊï∞ÁªÑ‰ª∂function Welcome(props) &#123; reuturn &lt;h1&gt;Welcome&lt;/h1&gt;&#125;// Âü∫‰∫é ES6 class ÂÆö‰πâÁöÑÁªÑ‰ª∂class Welcome2 extends Component &#123; render() &#123; return &lt;h1&gt;Welcome&lt;/h1&gt; &#125;&#125; ÊØè‰∏™ÁªÑ‰ª∂ÈÉΩÊúâËá™Â∑±ÁöÑÂ±ûÊÄßÔºàpropsÔºâÂíåÁä∂ÊÄÅÔºàstateÔºâ ÁªÑ‰ª∂ÁöÑ props ÊòØÂè™ËØªÁöÑ„ÄÇReact ÁªÑ‰ª∂ÂøÖÈ°ªË¶ÅÂÉèÁ∫ØÂáΩÊï∞‰∏ÄÊ†∑‰øùÊä§ÂÆÉ‰ª¨ÁöÑ props ‰∏çË¢´‰øÆÊîπ Áä∂ÊÄÅ state ÁªÑ‰ª∂ÁöÑ state ÊòØÁªÑ‰ª∂ÁßÅÊúâÁöÑÔºå‰∏îÂÆåÂÖ®ÂèóÊéß‰∫éÂΩìÂâçÁªÑ‰ª∂ Èô§‰∫ÜÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÂèØ‰ª•Áõ¥Êé•Áªô this.state ËµãÂÄºÂ§ñÔºå‰∏çË¶ÅÁõ¥Êé•‰øÆÊîπ stateÔºåÂê¶Âàô‰∏ç‰ºöÊ∏≤ÊüìÁªÑ‰ª∂ÔºåË¶Å‰ΩøÁî® setState() Êõ¥Êñ∞Áä∂ÊÄÅ this.props Âíå this.state ÂèØËÉΩÊòØÂºÇÊ≠•Êõ¥Êñ∞Ôºå‰∏çË¶Å‰æùËµñÂÆÉ‰ª¨ÁöÑÂÄºËøõË°å‰∏ã‰∏Ä‰∏™Áä∂ÊÄÅÊõ¥Êñ∞„ÄÇÁ§∫‰æãÂ¶Ç‰∏ãÔºö 123456789// ÈîôËØØÁöÑÂÅöÊ≥ïÔºåËøôÁßçÂèØËÉΩÊó†Ê≥ïÂæóÂà∞È¢ÑÊúüÁªìÊûúthis.setState(&#123; counter: this.state.counter + this.props.incr&#125;// Ê≠£Á°ÆÁöÑÂÅöÊ≥ïÔºå‰ΩøÁî®‰∏Ä‰∏™ÁÆ≠Â§¥ÂáΩÊï∞this.setState((state, props) =&gt; &#123; counter: state.counter + props.incr&#125;)) ‰∏çÁÆ°ÊòØÁà∂ÁªÑ‰ª∂ËøòÊòØÂ≠êÁªÑ‰ª∂ÈÉΩÊó†Ê≥ïÁü•ÈÅìÊüê‰∏™ÁªÑ‰ª∂ÊúâÊó†Áä∂ÊÄÅÔºå‰∏î‰πü‰∏ç‰ºöÂÖ≥ÂøÉÊòØÂáΩÊï∞ÁªÑ‰ª∂ËøòÊòØ class ÁªÑ‰ª∂„ÄÇÊï∞ÊçÆÊµÅÂä®ÊòØÂçïÂêëÂêë‰∏ãÁöÑÔºå‰ªéÊüê‰∏™ÁªÑ‰ª∂ state ‰∫ßÁîüÁöÑ‰ªª‰ΩïÊï∞ÊçÆÊàñ UI Âè™‰ºöÂΩ±ÂìçÊ†ë‰∏≠‰Ωé‰∫éÂÆÉ‰ª¨ÁöÑÁªÑ‰ª∂ ‰∫ã‰ª∂Â§ÑÁêÜ React ‰∫ã‰ª∂ÂëΩÂêçÊòØ camelCase È£éÊ†ºÔºåËÄåÈùûÂÉè HTML DOM ‰∏≠Á∫ØÂ∞èÂÜôÁöÑÈ£éÊ†º Â¶ÇÊûúÊÉ≥Ë¶ÅÈòªÊ≠¢‰∫ã‰ª∂ÁöÑÈªòËÆ§Ë°å‰∏∫ÔºåÂøÖÈ°ªÊòæÂºè‰ΩøÁî® e.preventDefault()ÔºõËøôÈáåÁöÑ e ÊòØ React Ê†πÊçÆ W3C ËßÑËåÉÂÆö‰πâÁöÑÂêàÊàê‰∫ã‰ª∂ÔºåÊó†ÈúÄÊãÖÂøÉË∑®ÊµèËßàÂô®ÂÖºÂÆπÈóÆÈ¢ò React ‰∏≠Ëá™ÂÆö‰πâÁöÑÊñπÊ≥ïÈªòËÆ§‰∏ç‰ºöÁªëÂÆö thisÔºåÊâÄ‰ª•ÊúâÂ§öÁßçÊñπÂºèÂèØ‰ª•ËøõË°åÁªëÂÆöÔºö Â∏∏ËßÑÔºöÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠‰ΩøÁî® this.handleChange = this.handleChange.bind(this) Êé®ËçêÔºö‰ΩøÁî® public class fields ËØ≠Ê≥ïÔºöhandleChange = () =&gt; {} Âú®Ë∞ÉÁî®Êó∂Ôºå‰ΩøÁî®ÁÆ≠Â§¥ÂáΩÊï∞ÊàñËÄÖ bind ÁªëÂÆöÔºàÊ≥®ÊÑèÔºåËøôÁßçÂèØËÉΩ‰ºöÂ∏¶Êù•ÊÄßËÉΩÈóÆÈ¢òÔºåÊØèÊ¨°ÈÉΩ‰ºöÂàõÂª∫ÂáΩÊï∞ÔºåÂ¶ÇÊûúÊòØ‰º†ÈÄíÁªôÂ≠êÁªÑ‰ª∂ÁöÑÔºåËøòÂèØËÉΩ‰ºöÂØºËá¥Â≠êÁªÑ‰ª∂ÈáçÊñ∞Ê∏≤ÊüìÔºâ ÂàóË°® &amp; Key Âú®ÂàóË°®ÂÖÉÁ¥†ÊàñËÄÖÁªÑ‰ª∂‰∏≠ÔºåÂøÖÈ°ªË¶ÅÊåáÂÆö Key„ÄÇËÄåÂ¶ÇÊûúÊ≤°ÊúâËÆæÂÆöÔºåÂàôÈªòËÆ§‰ΩøÁî®Á¥¢Âºï„ÄÇ‰ΩÜÊòØ‰ΩøÁî®Á¥¢ÂºïÂèØËÉΩ‰ºöÂ∏¶Êù•ÊÄßËÉΩÈóÆÈ¢òÂíåÁä∂ÊÄÅÈóÆÈ¢ò Key Âπ∂‰∏çÈúÄË¶ÅÂÖ®Â±ÄÂîØ‰∏ÄÔºåÂè™ÊòØÂú®Áõ∏ÈÇªËäÇÁÇπ‰πãÈó¥ÈúÄË¶Å‰øùÊåÅÂîØ‰∏ÄÂç≥ÂèØ Key ‰ºöË¢´‰º†ÈÄíÁªô ReactÔºå‰ΩÜ‰∏ç‰ºö‰º†ÈÄíÁªôÁªÑ‰ª∂ Ë°®Âçï ÂèóÊéßÁªÑ‰ª∂ÔºöÊää HTML Ë°®ÂçïÂÖÉÁ¥†Âíå React state ÁªìÂêàËµ∑Êù•ÔºåËÆ©Ê∏≤ÊüìË°®ÂçïÁöÑ React ÁªÑ‰ª∂ËøòÊéßÂà∂Áî®Êà∑ËæìÂÖ•ËøáÁ®ã‰∏≠Ë°®ÂçïÂèëÁîüÁöÑ‰∫ãÊÉÖ Âú®ÂèóÊéßÁªÑ‰ª∂‰∏äÊåáÂÆö value ÁöÑ prop ÂèØ‰ª•Èò≤Ê≠¢Áî®Êà∑Êõ¥ÊîπËæìÂÖ• ÂÖ∂ÂÆÉ ÈÄöÂ∏∏ÔºåÂ¶ÇÊûúÂ§ö‰∏™ÁªÑ‰ª∂ÂèçÊò†Áõ∏ÂêåÁöÑÊï∞ÊçÆÂèòÊõ¥ÔºåÂèØ‰ª•Â∞ÜÁä∂ÊÄÅÊèêÂçáÂà∞ÊúÄËøëÁöÑÂÖ¨ÂÖ±Áà∂ÁªÑ‰ª∂ ÁªÑÂêà‰ºò‰∫éÁªßÊâø Êúâ‰∫õÁªÑ‰ª∂Êó†Ê≥ïÊèêÂâçÁü•ÊôìÂÆÉ‰ª¨Â≠êÁªÑ‰ª∂ÁöÑÂÖ∑‰ΩìÂÜÖÂÆπÔºåÂèØ‰ª•ÈÄöËøá props.children Ëé∑ÂèñÂ≠êÁªÑ‰ª∂Ê∏≤Êüì È´òÁ∫ßÁØáContextÔºàÊ≠§ Context ÊúâÁÇπÁâπÊÆäÔºâ ËôΩÁÑ∂ÂèØ‰ª•ÈÄöËøá props Â∞ÜÂ±ûÊÄß‰ªéÁà∂ÁªÑ‰ª∂‰∏ÄÁ∫ßÁ∫ß‰º†ÈÄíÂà∞Â≠êÁªÑ‰ª∂Ê†ëÔºå‰ΩÜËøôÊ†∑ÊØïÁ´üÊØîËæÉÁπÅÁêê„ÄÇËÄåÊúâ‰∫õÊØîËæÉÂÖ®Â±ÄÁöÑÈÖçÁΩÆÔºàÂ¶Ç‰∏ªÈ¢ò„ÄÅÂú∞Âå∫Á≠âÔºâÔºåÂàôÂèØ‰ª•ÈÄöËøá Context ËøõË°åÂÖ±‰∫´ÔºåÊñπ‰æøÁªÑ‰ª∂Ê†ëËÆøÈóÆËøô‰∫õÂÖ®Â±ÄÈÖçÁΩÆ ÂàõÂª∫ contextÔºöconst ThemeContext = React.createContext(‚Äòlight‚Äô)` Á§∫‰æãÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526import React from 'react';const ThemeContext = React.createContext('light')class Button extends React.Component &#123; // ÊåáÂÆöË¶ÅËØªÂèñÁöÑ Context Á±ªÂûã // React ‰ºöËá™Âä®Êü•ÊâæÊúÄËøëÁöÑ theme provider // ÁÑ∂Âêé‰ΩøÁî®ÂÆÉÁöÑÂÄº static contextType = ThemeContext render() &#123; return ( // ‰ΩøÁî® `this.context` ÂèØ‰ª•Ëé∑ÂèñÂÄº &lt;button className="Button"&gt;&#123;this.props.text&#125; + &#123;this.context&#125;&lt;/button&gt; ) &#125;&#125;function ToolBar(props) &#123; return &lt;Button text=&#123;props.text&#125;&gt;&lt;/Button&gt;&#125;function App() &#123; return ( // ‰ΩøÁî® Provider ÊåáÂÆö ctx value &lt;ThemeContext.Provider value="yellow"&gt; &lt;ToolBar text="Â∑•ÂÖ∑ÊåâÈíÆ"&gt;&lt;/ToolBar&gt; &lt;/ThemeContext.Provider&gt; );&#125;export default App; Context ‰ΩøÁî®‰ºöÂØºËá¥ÁªÑ‰ª∂ÁöÑÂ§çÁî®ÊÄßÂèòÂ∑ÆÔºå‰ºö‰æùËµñ Context„ÄÇÂ¶ÇÊûúÂè™ÊòØÊÉ≥Ë¶ÅÈÅøÂÖçÂ±ÇÂ±Ç‰º†ÈÄíÂ±ûÊÄßÔºåÂèØ‰ª•‰ΩøÁî®ÁªÑ‰ª∂ÁªÑÂêàÁöÑÊñπÂºè API createContext: const myCtx = React.createContext(defaultValue) ÂØπ‰∫éËÆ¢ÈòÖ‰∫Ü‰∏äËø∞ ctx ÁöÑÂ≠êÁªÑ‰ª∂Ôºå‰ºöËá™Âä®Âú®Á¶ªËá™Â∑±ÊúÄËøëÁöÑÂåπÈÖç Provider Â§ÑËé∑ÂèñËÆæÁΩÆÁöÑÂÄº Â¶ÇÊûúÊú™ËÉΩÊâæÂà∞ ProviderÔºåÂàô‰ΩøÁî® defaultValue Provider ÂÖÅËÆ∏Ê∂àË¥πÁªÑ‰ª∂ËÆ¢ÈòÖ context ÁöÑÂèòÂåñ ÂèØ‰ª•‰º†ÈÄí value ÁªôÊ∂àË¥πÁªÑ‰ª∂ÔºåÂèØ‰ª•ÂµåÂ•ó Provider value ÂèòÂåñÊó∂ÔºåÂÜÖÈÉ®Ê∂àË¥πÁªÑ‰ª∂‰πü‰ºöÈáçÊñ∞Ê∏≤Êüì Provider ÂèäÊ∂àË¥πÁªÑ‰ª∂‰∏çÂèó shouldComponentUpdate ÂáΩÊï∞ÈôêÂà∂ contextType ÊåÇËΩΩÂú® class ÂØπË±°‰∏äÔºåÊåáÂêëÂàõÂª∫ÁöÑ Context ÂØπË±° ÂèØ‰ª•Âú®‰ªªÊÑèÁîüÂëΩÂë®ÊúüÈÄöËøá this.context ËÆøÈóÆÂà∞ÊúÄËøë Context ÁöÑÂÄº ConsumerÔºöËÆ¢ÈòÖ context ÂèòÊõ¥ 123&lt;MyContext.Consumer&gt; &#123;value =&gt; /* do stuff */&#125;&lt;/MyContext.Consumer&gt; Context ‰ΩøÁî®‰∫Ü reference identity Êù•ÂÜ≥ÂÆö‰ΩïÊó∂ËøõË°åÊ∏≤ÊüìÔºå‰ΩÜ‰πüÂ≠òÂú®Èô∑Èò±„ÄÇÂΩì Provider Áà∂ÁªÑ‰ª∂ÈáçÊñ∞Ê∏≤ÊüìÊó∂Ôºå‰πüÂèØËÉΩ‰ºöÂØºËá¥Ê∂àË¥πÁªÑ‰ª∂ÊÑèÂ§ñË¢´Ê∏≤Êüì Fragment Â∏∏ËßÅÊ®°ÂºèÊòØ‰∏Ä‰∏™ÁªÑ‰ª∂Ë¶ÅËøîÂõûÂ§ö‰∏™ÂÖÉÁ¥†Ôºå‰ΩøÁî® Fragment ÂèØ‰ª•Â∞ÜÂ≠êÂàóË°®ÂàÜÁªÑÔºå‰∏îÊó†ÈúÄÂêë DOM Ê∑ªÂä†È¢ùÂ§ñËäÇÁÇπ123456789101112131415161718192021222324252627function Column(props) &#123; return ( &lt;&gt; &lt;td&gt;hello 1&lt;/td&gt; &lt;td&gt;hello 2&lt;/td&gt; &lt;td&gt;hello 3&lt;/td&gt; &lt;/&gt; )&#125;function Row(props) &#123; return ( &lt;&gt; &lt;tr&gt;&lt;Column&gt;&lt;/Column&gt;&lt;/tr&gt; &lt;tr&gt;&lt;Column&gt;&lt;/Column&gt;&lt;/tr&gt; &lt;tr&gt;&lt;Column&gt;&lt;/Column&gt;&lt;/tr&gt; &lt;/&gt; )&#125;function Table(props) &#123; return ( &lt;table&gt; &lt;Row&gt;&lt;/Row&gt; &lt;/table&gt; )&#125; È´òÈò∂ÁªÑ‰ª∂ÔºàHigh Order Component, HOCÔºâ HOC ÊòØ React ‰∏≠Âü∫‰∫éÁªÑÂêàÁâπÊÄßËÄåÂΩ¢ÊàêÁöÑËÆæËÆ°Ê®°ÂºèÔºåÊòØ‰∏ÄÁßçÂ§çÁî®ÁªÑ‰ª∂ÈÄªËæëÁöÑÊäÄÂ∑ß HOC ÁöÑÂèÇÊï∞ÊòØÁªÑ‰ª∂ÔºåËøîÂõûÂÄºÊòØÊñ∞ÁªÑ‰ª∂ÁöÑÂáΩÊï∞Ôºöconst NewComponent = hoc(WrappedComponent) Èù¢ÂêëÂàáÈù¢ÁºñÁ®ãÔºåÊõø‰ª£ Mixin Ê®°ÂºèÔºõÁ∫ØÂáΩÊï∞ÔºåÊó†ÂâØ‰ΩúÁî® Á∫¶ÂÆöÔºöHOC Â∫îËØ•ÈÄè‰º†‰∏éËá™Ë∫´Êó†ÂÖ≥ÁöÑ propsÔºå‰ΩøÁî®Á±ª‰ºº‰∏ãÈù¢ÁöÑÊñπÂºèÁºñÂÜô renderÔºö 123456789101112function logProps(WrappedComponent) &#123; return class extends React.Component &#123; render() &#123; const &#123;level, ...props&#125; = this.props console.log(level) console.log(props) return ( &lt;WrappedComponent level=&#123;level&#125; &#123;...props&#125;&gt;&lt;/WrappedComponent&gt; ) &#125; &#125;&#125; Á∫¶ÂÆöÔºöÊúÄÂ§ßÂåñÂèØÁªÑÂêàÊÄß 1234567// compose ËææÂà∞ÁöÑÊïàÊûúÂ∞±ÊòØÔºöwithRouter(connect(componentSelector)(WrappedComponent)))const enhance = compose( // ÂçïÁ∫ØÁöÑ HOC withRouter, connect(componentSelector))const EnhancedComponent = enhance(WrappedComponent) Á∫¶ÂÆöÔºöËøîÂõûÊ∏ÖÊô∞ÁöÑÂêçÁß∞Ôºå‰æø‰∫éË∞ÉËØï„ÄÇÂëΩÂêç‰π†ÊÉØÔºöHOCName(wrappedComponentName) 123456789101112131415function logProps(WrappedComponent) &#123; class WithLogComponent extends React.Component &#123; render() &#123; return ( &lt;WrappedComponent &#123;...props&#125;&gt;&lt;/WrappedComponent&gt; ) &#125; &#125; WithLogComponent.displayName = `WithLogComponent($&#123;getDisplayName(WrappedComponent)&#125;)` return WithLogComponent&#125;function getDisplayName(c) &#123; return c.displayName || c.name || 'Component'&#125; Ê≥®ÊÑèÔºö ‰∏çË¶ÅÂú® render() ‰∏≠‰ΩøÁî® HOCÔºåÈÅøÂÖç React Ê∏≤ÊüìÊÄßËÉΩÈóÆÈ¢òÔºà‰∏çÊòØÊõ¥Êñ∞Â≠êÊ†ëÔºåËÄåÊòØÂç∏ËΩΩÊóßÂ≠êÊ†ëÔºåÊåÇËΩΩÊñ∞Â≠êÊ†ëÔºå‰∏îÂØºËá¥ÁªÑ‰ª∂Áä∂ÊÄÅ‰πü‰ºö‰∏¢Â§±Ôºâ„ÄÇÂ¶ÇÊûúÁöÑÁ°ÆÈúÄË¶ÅÂä®ÊÄÅË∞ÉÁî® HOCÔºåÂèØ‰ª•Âú®ÁîüÂëΩÂë®ÊúüÊñπÊ≥ïÊàñÊûÑÈÄ†ÂáΩÊï∞‰∏≠ËøõË°å ÈùôÊÄÅÊñπÊ≥ïÈúÄË¶ÅÊòæÂºèÊã∑Ë¥ùÔºåÂèØ‰ª•‰ΩøÁî® hoistNonReactStatic ÂáΩÊï∞Êã∑Ë¥ùÊâÄÊúâÈùû React ÈùôÊÄÅÊñπÊ≥ï Ref ‰∏ç‰ºöË¢´‰º†ÈÄí PropTypes ÂØπÁªÑ‰ª∂ props Á±ªÂûãËøõË°åÊ£ÄÊü•ÔºåÈÖçÁΩÆ propTypes Â±ûÊÄßÂç≥ÂèØ ËÄÉËôëÂà∞ÊÄßËÉΩÈóÆÈ¢òÔºå‰ªÖÂú®ÂºÄÂèëÊ®°Âºè‰∏ãÁîüÊïà ÂèØ‰ª•ÈÖçÁΩÆ defaultProps ËÆæÂÆöÈªòËÆ§ÂÄº ÁîüÂëΩÂë®ÊúüÂõæË∞± ÂêàÊàê‰∫ã‰ª∂ÔºàSynthetic EventÔºâ SyntheticEvent ÂÆû‰æãÊòØ‰º†ÈÄíÁªô‰∫ã‰ª∂Â§ÑÁêÜÂáΩÊï∞ÁöÑÂèÇÊï∞ÔºåÂÆÉÊòØÂØπÊµèËßàÂô®‰∫ã‰ª∂ÁöÑÂåÖË£ÖÔºåÂÖºÂÆπÊâÄÊúâÊµèËßàÂô®ÔºåÂêåÊó∂Êèê‰æõ‰∫ÜÊé•ËøëÂéüÁîü‰∫ã‰ª∂ÁöÑÊé•Âè£„ÄÇÂΩìÁÑ∂Ôºå‰πüÊèê‰æõ‰∫Ü .nativeEvent ‰æõ‰Ω†Ëé∑ÂèñÂ∫ïÂ±Ç‰∫ã‰ª∂ ÈáçË¶ÅÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÔºö boolean bubbles boolean cancelable DOMEventTarget currentTarget boolean defaultPrevented number eventPhase boolean isTrusted DOMEvent nativeEvent void preventDefault() boolean isDefaultPrevented() void stopPropagation() boolean isPropagationStopped() DOMEventTarget target number timeStamp string type SyntheticEvent Âú®ÂÆåÊàê‰∫ã‰ª∂ÂõûË∞ÉÂêéÔºåÂÖ∂Â±ûÊÄß‰ºöÊó†ÊïàÔºåÊó†Ê≥ïÂºÇÊ≠•ËÆøÈóÆËØ•‰∫ã‰ª∂ Hook Hook ÊòØ React 16.8 ‰ª•ÂêéÊñ∞Â¢ûÁöÑÁâπÊÄßÔºåÂÆÉÂèØ‰ª•ËÆ©Êàë‰ª¨Âú®‰∏çÁºñÂÜô class ÁªÑ‰ª∂ÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî® state, props Á≠â React ÁâπÊÄß Why Hook: ÂéüÊúâÁöÑÂÜôÊ≥ï‰∏≠ÔºåÁªÑ‰ª∂‰πãÈó¥Áä∂ÊÄÅÈÄªËæëÂ§çÁî®ÂæàÂõ∞Èöæ„ÄÇHook ÂèØ‰ª•ÊèêÂèñÁä∂ÊÄÅÈÄªËæëÔºåÂçïÁã¨ÊµãËØïÂíåÂ§çÁî®ÔºåÂπ∂‰∏îÊó†ÈúÄ‰øÆÊîπÂéüÊúâÁªÑ‰ª∂ÁöÑÁªìÊûÑ Â§çÊùÇÁªÑ‰ª∂ÂèòÂæóÈöæ‰ª•ÁêÜËß£„ÄÇHook ‰ºöÂ∞ÜÁªÑ‰ª∂‰∏≠Áõ∏‰∫íÂÖ≥ËÅîÁöÑÈÉ®ÂàÜÊãÜÂàÜÊàêÊõ¥Â∞èÁöÑÂáΩÊï∞Ôºå‰∏ç‰ºöÂº∫Âà∂ÊåâÁÖßÁîüÂëΩÂë®ÊúüÂàíÂàÜ Èöæ‰ª•ÁêÜËß£ÁöÑ class„ÄÇHook ÂèØ‰ª•Âú®Èùû class ÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®Êõ¥Â§öÁöÑ React ÁâπÊÄß Hook ÂèØ‰ª•ÁêÜËß£‰∏∫Âú®ÂáΩÊï∞ÁªÑ‰ª∂‰∏≠„ÄåÈí©ÂÖ•„ÄçReact State ‰ª•ÂèäÁîüÂëΩÂë®ÊúüÁ≠âÁâπÊÄßÁöÑÂáΩÊï∞ÔºåÂπ∂‰∏î‰∏çËÉΩÂÜç class ÁªÑ‰ª∂‰∏≠‰ΩøÁî® ‰ΩøÁî®ËßÑÂàôÔºö Âè™ËÉΩÂú®ÂáΩÊï∞ÊúÄÂ§ñÂ±ÇË∞ÉÁî® HookÔºå‰∏çË¶ÅÂú®Âæ™ÁéØ„ÄÅÊù°‰ª∂ÊàñÂµåÂ•óÂáΩÊï∞‰∏≠Ë∞ÉÁî® Hook Âè™ËÉΩÂú®ÂáΩÊï∞ÁªÑ‰ª∂‰∏≠Ë∞ÉÁî® Hook ÂéüÂÖàÊàë‰ª¨Âú®ÁºñÂÜôÂáΩÊï∞ÁªÑ‰ª∂Êó∂ÔºåÂ¶ÇÊûúÈúÄË¶ÅÁªôÂÖ∂ÂºïÂÖ•Áä∂ÊÄÅÔºåÊàñËÄÖÊ∑ªÂä†ÁîüÂëΩÂë®ÊúüÁöÑÈí©Â≠êÔºåÈúÄË¶ÅËΩ¨Êç¢Êàê class ÁªÑ‰ª∂„ÄÇ‰ΩÜÊúâ‰∫Ü Hook ÁâπÊÄßÂêéÔºåÂèØ‰ª•‰ΩøÁî® useState Âíå useEffect Êù•‰ª£Êõø‰∫Ü„ÄÇÊñ∞ÁöÑÂÜôÊ≥ïÂ∞Ü‰ºöÊõ¥Âä†ÁÆÄÊ¥ÅÔºåÊòì‰∫éÊäΩË±°Â§çÁî®ÂíåÊµãËØï State Hook ‰ΩøÁî® useState Hook ÂèØ‰ª•Âú®ÂáΩÊï∞ÁªÑ‰ª∂‰∏≠Ê∑ªÂä†ÂÜÖÈÉ® stateÔºåReact Âú®ÈáçÂ§çÊ∏≤ÊüìÊó∂‰øùÁïôËØ• state useState ËøîÂõûÁöÑÊõ¥Êñ∞ state ÁöÑÂáΩÊï∞Âíå this.setState Ë°å‰∏∫ÊúâÂå∫Âà´ÔºåÂâçËÄÖ‰∏ç‰ºöÊääÊñ∞Êóß state ÂêàÂπ∂ÔºåËÄåÂêéËÄÖ‰ºö Á§∫‰æãÔºö 123456789function App() &#123; const [count, setCount] = useState(0) return ( &lt;div&gt; &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;ÁÇπÊàë&lt;/button&gt; &lt;p&gt;ÁÇπÂáªËÆ°Êï∞Ôºö&#123;count&#125;&lt;/p&gt; &lt;/div&gt; )&#125; Event Hook ‰ΩøÁî® useEffect Hook ÁªôÂáΩÊï∞ÁªÑ‰ª∂Ê∑ªÂä†Êìç‰ΩúÂâØ‰ΩúÁî®ÁöÑËÉΩÂäõ„ÄÇÁõ∏ÂΩì‰∫é class ÁªÑ‰ª∂‰∏≠ componentDidMount, componentDidUpdate Âíå componentWillUnmount ÁöÑÂêà‰ΩìÔºåÂ∞ÜÂâØ‰ΩúÁî®Êìç‰ΩúÈÉΩËÅöÈõÜÂà∞ËØ• Hook ‰∏≠ Ë∞ÉÁî® useEffect Êó∂ÔºåÂ∞±Ë°®ÊòéËÆ© React Âú®ÂØπ DOM ÂÆåÊàêÊõ¥ÊîπÂêéË∞ÉÁî®Áõ∏Â∫îÁöÑÂâØ‰ΩúÁî®ÂáΩÊï∞ÔºõÂêåÊó∂ÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™ÂõûË∞ÉÂáΩÊï∞ÔºåÁî®‰∫éÂú®Ê∏ÖÈô§Êó∂ÊâßË°å‰∏Ä‰∫õÊìç‰Ωú„ÄÇReact ‰ºöÂú®ÁªÑ‰ª∂Âç∏ËΩΩÊó∂ÊâßË°åÊ∏ÖÈô§Êìç‰Ωú ‰ΩøÁî®Á§∫‰æãÔºö 1234567891011121314151617function App() &#123; const [userInfo, setUserInfo] = useState(&#123; username: 'Ê∏∏ÂÆ¢', clickCount: 0 &#125;) useEffect(() =&gt; &#123; alert("ÂΩìÂâçÁî®Êà∑‰ø°ÊÅØÔºö" + userInfo.username) return () =&gt; &#123; console.log("ÈîÄÊØÅÁªÑ‰ª∂ÔºåÈáçÊñ∞Ê∏≤Êüì") &#125; &#125;) return ( &lt;div&gt; &lt;button onClick=&#123;() =&gt; setUserInfo(&#123; username: 'iFaceless', clickCount: userInfo.clickCount &#125;)&#125;&gt;ËÆæÁΩÆÁî®Êà∑&lt;/button&gt; &lt;button onClick=&#123;() =&gt; setUserInfo(&#123; clickCount: userInfo.clickCount + 1, username: userInfo.username &#125;)&#125;&gt;ÁÇπÂáªËÆ°Êï∞&lt;/button&gt; &lt;p&gt;‰Ω†Â•ΩÔºå&#123;userInfo.username&#125;&lt;/p&gt; &lt;p&gt;ÁÇπÂáªËÆ°Êï∞ &#123;userInfo.clickCount&#125;&lt;/p&gt; &lt;/div&gt; )&#125; ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåuseEffect ‰ºöÂú®ÊØèÊ¨°Ê∏≤ÊüìÂêéÈÉΩ‰ºöÊâßË°åÔºàÂΩìÁÑ∂ÂèØ‰ª•ÊéßÂà∂ÔºâÔºåÊàë‰ª¨‰∏çÁî®ÂÖ≥ÂøÉ„ÄåÊåÇËΩΩ„ÄçÂíå„ÄåÊõ¥Êñ∞„ÄçËøôÁßçÊ¶ÇÂøµ ‰∏é componentDidMount Âíå componentDidUpdate ‰∏çÂêåÁöÑÊòØÔºåuesEffect Ë∞ÉÂ∫¶ÁöÑ effect ‰∏ç‰ºöÈòªÂ°ûÊµèËßàÂô®Êõ¥Êñ∞Â±èÂπïÔºå‰ªéËÄåËé∑ÂæóÊõ¥Â•ΩÁöÑÂìçÂ∫îÈÄüÂ∫¶„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂêåÊ≠•ÊâßË°åÔºåÂàô‰ΩøÁî® useLayoutEffect Hook Ëá™ÂÆö‰πâ Hook Ëá™ÂÆö‰πâ Hook ÈúÄË¶Å‰ª• use ÂºÄÂ§¥ÔºåËøôÊòØÁ∫¶ÂÆöÔºåÂèØ‰ª•ËÆ© React Ëá™Âä®Ê£ÄÊü• Hook ÊòØÂê¶ËøùÂèçÁõ∏ÂÖ≥ËßÑÂàô ÂèÇËÄÉ React ÂÆòÊñπÊñáÊ°£ Index as a key is an anti-pattern Formik ÁªÑ‰ª∂ÁîüÂëΩÂë®ÊúüÂõæË∞± How to fetch data with React Hooks? How to fetch data in React Making Sense of React Hooks]]></content>
      <categories>
        <category>ÂâçÁ´Ø</category>
      </categories>
      <tags>
        <tag>ÂâçÁ´Ø</tag>
        <tag>JavaScript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScript ES6 Â≠¶‰π†Á¨îËÆ∞]]></title>
    <url>%2F2019%2F06%2F23%2Fjavascript-es6-learning-note%2F</url>
    <content type="text"><![CDATA[ÂºïË®Ä2015 Âπ¥ÔºåECMAScript Á¨¨ÂÖ≠ÁâàÂæó‰ª•ÂèëÂ∏ÉÔºåËøôÂ∞±ÊòØ‰ºóÊâÄÂë®Áü•ÁöÑ ES6 Ê†áÂáÜÔºåÊ†áÂøóÁùÄ JavaScript ËØ≠Ë®ÄËøéÊù•Êñ∞Á∫™ÂÖÉ„ÄÇES6 ÂºïÂÖ•‰∫Ü‰∏Ä‰∫õÊñ∞ÁöÑËØ≠Ê≥ïÁ≥ñÔºåÂêåÊó∂Âº•Ë°•‰∫Ü‰∏Ä‰∫õÂú® ES5 ‰∏≠Â≠òÂú®ÁöÑ‰∏Ä‰∫õÁº∫Èô∑„ÄÇ Êú¨ÁØáÁ¨îËÆ∞ÊòØÂú®Â≠¶‰π†ÈòÆ‰∏ÄÂ≥∞ËÄÅÂ∏àÁöÑ„ÄäES6 ÂÖ•Èó®ÊïôÁ®ã„Äã‰∏≠ÂÅöÁöÑÁ¨îËÆ∞Ôºå‰∏ªË¶ÅÊòØËÆ∞ÂΩï‰∏Ä‰∫õËá™Â∑±‰∏çÂ§™ÁÜüÊÇâÁöÑÊàñËÄÖÂíå ES5 Â∑ÆÂºÇÂæàÂ§ßÁöÑÁâπÊÄß„ÄÇÂú®Â≠¶‰π†ËøáÁ®ã‰∏≠ÔºåÂèØ‰ª•ÂíåÂà´ÁöÑËØ≠Ë®ÄÔºàÂ¶Ç PythonÔºâËøõË°åÂØπÊØîÔºå‰πüÂèØ‰ª•ÁúãÂà∞Âú®Êüê‰∫õËÆæËÆ°ÊÄùÊÉ≥‰∏äÔºåËøô‰∫õËØ≠Ë®Ä‰πüÊòØÁõ∏ÈÄöÁöÑ„ÄÇ ÁÆÄ‰ªã ES5 ÂÖ∂ÂÆûÊòØ ES3 ÁöÑÂçáÁ∫ßÁâàÊú¨Ôºå‰πüÂ∞±ÊòØ ES3.1 ES4 ÂÖ∂ÂÆûÂπ∂Ê≤°ÊúâÂèëÂ∏ÉÔºå‰ΩÜÊòØÂ¢ûÂä†ÁöÑ‰∏Ä‰∫õÂäüËÉΩÂú® ES6 ‰∏≠ÂèëÂ∏É‰∫Ü ÊØèÂπ¥ 6 ÊúàÂèëÂ∏ÉÊñ∞ÁöÑÊ†áÂáÜÔºåES6 Ê≥õÊåá‰∏ã‰∏Ä‰ª£ JavaScript Ê†áÂáÜ Babel ËΩ¨Á†ÅÂô®ÔºöÂ∞Ü ES6 ‰ª£Á†ÅËΩ¨Êç¢Êàê ES5 ‰ª£Á†Å Google ÁöÑ Traceur ËΩ¨Á†ÅÂô®‰πüÂèØ‰ª•Â∞Ü ES6 ‰ª£Á†ÅËΩ¨‰∏∫ ES5 ‰ª£Á†Å ÊùÇËÆ∞ ÊöÇÊó∂ÊÄßÊ≠ªÂå∫Êú¨Ë¥®ÔºöÂè™Ë¶Å‰∏ÄËøõÂÖ•ÂΩìÂâç‰ΩúÁî®ÂüüÔºåÊâÄÈúÄË¶Å‰ΩøÁî®ÁöÑÂèòÈáèÂ∞±Â∑≤ÁªèÂ≠òÂú®Ôºå‰ΩÜÊòØ‰∏çÂèØËé∑ÂèñÔºåÂè™ÊúâÁ≠âÂà∞Â£∞ÊòéÂèòÈáèÁöÑÈÇ£‰∏ÄË°å‰ª£Á†ÅÂá∫Áé∞ÔºåÊâçÂèØ‰ª•Ëé∑ÂèñÂíå‰ΩøÁî®ËØ•ÂèòÈáè Âùó‰ΩúÁî®ÂüüÂèØ‰ª•‰ªªÊÑèÂµåÂ•ó Âùó‰ΩúÁî®ÂüüÂÜÖÂèØ‰ª•Â£∞ÊòéÂáΩÊï∞Ôºå‰ΩÜÊòØÂè™ËÉΩÂú®ËØ•‰ΩúÁî®Âüü‰∏ã‰ΩøÁî® ÊµèËßàÂô®‰∏∫‰∫ÜÂÖºÂÆπÂéÜÂè≤‰ª£Á†ÅÔºåÂú®Âùó‰ΩúÁî®Âüü‰∏≠Â£∞ÊòéÁöÑÂáΩÊï∞‰ºöÊèêÂçáÂà∞ÂÖ®Â±ÄÔºåÁ±ª‰ºº var Â£∞ÊòéÁöÑÂèòÈáè‰∫Ü ES6 ÊîØÊåÅ 6 ‰∏≠Â£∞ÊòéÂÖ≥ÈîÆÂ≠óÔºö var function let const import class var, function ÂëΩ‰ª§Â£∞ÊòéÁöÑÂÖ®Â±ÄÂèòÈáèÔºå‰æùÁÑ∂ÊòØÈ°∂Â±ÇÂØπË±°ÁöÑÂ±ûÊÄßÔºõlet, const, class Â£∞ÊòéÁöÑÂÖ®Â±ÄÂèòÈáèÔºåÂàô‰∏çÂÜçÂ±û‰∫éÈ°∂Â±ÇÂØπË±°ÁöÑÂ±ûÊÄß„ÄÇ‰∫åËÄÖÈúÄË¶ÅËÑ±Èí© JavaScript ‰∏≠ÁöÑÈ°∂Â±ÇÂØπË±°Âú®ÂêÑ‰∏™ÁéØÂ¢É‰∏ãÈÉΩÊòØÈúÄË¶ÅÂ≠òÂú®ÁöÑÔºå‰ΩÜÊòØÂú® Node ÂíåÊµèËßàÂô®ÁéØÂ¢É‰∏≠Áî®‰∏ÄÂ•ó‰ª£Á†ÅÊÉ≥Ë¶ÅÊãøÂà∞È°∂Â±ÇÂØπË±°ËøòÊòØÊúâ‰∫õË¥πÂä≤ÁöÑ„ÄÇÂèØË°åÁöÑÊñπÊ°àÂ¶Ç‰∏ãÔºö1234567891011121314(typeof window !== 'undefined' ? window : (typeof process === 'object' &amp;&amp; typeof require === 'function' &amp;&amp; typeof global === 'object') ? global : this);var getGlobal = function () &#123; if (typeof self !== 'undefined') &#123; return self; &#125; if (typeof window !== 'undefined') &#123; return window; &#125; if (typeof global !== 'undefined') &#123; return global; &#125; throw new Error('unable to locate global object');&#125;; Ëß£ÊûÑ Ëß£ÊûÑÔºàÁ±ª‰ºº Python ‰∏≠ÁöÑÁî®Ê≥ïÔºåÊàñËÄÖ Rust ‰∏≠ÁöÑÊ®°ÂºèÂåπÈÖçÔºâÔºö 12345678910let [a, b, c] = [1, 2, 3]// c Â∞ÜÊé•Êî∂Ââ©‰ΩôÁöÑÊï∞ÁªÑÂÖÉÁ¥†[a, b, ...c] = [1, 2, 3, 4, 5][, , c] = [1, 2, 3]// ‰∏çÂÆåÂÖ®Ëß£ÊûÑ‰πüÊòØÊîØÊåÅÁöÑ[a, b] = [1, 2, 3, 4]// Âè≥ÂÄºÂøÖÈ°ªË¶ÅÊòØÂèØËø≠‰ª£ÁöÑÔºåÂç≥ÂÆûÁé∞‰∫Ü Iterator Êé•Âè£ÔºåÂê¶Âàô‰ºöÂá∫Èîô[a, b] = NaN // TypeError: undefined is not a function ÂèØËÆæÁΩÆÈªòËÆ§ÂÄºÔºölet [foo = true] = [];ÔºåÂè™ÊúâÊï∞ÁªÑÊàêÂëò‰∏•Ê†ºÁ≠â‰∫é undefined Êâç‰ºöËÆ©ÈªòËÆ§ÂÄºÁîüÊïà Ëß£ÊûÑÂ§±Ë¥•ÔºåÂèòÈáèÂÄº‰∏∫ undefined ÂØπË±°‰πüÂèØ‰ª•Ëß£ÊûÑÔºö 123456789let o = &#123;name: "chris", age: 26&#125;let &#123; name, age &#125; = o// ÂèØ‰ª•Â∞ÜÂØπË±°ËµãÂÄºÁªôÊüê‰∏™Â∑≤ÊúâÁöÑÂèòÈáèconst &#123; log &#125; = consolelog('hello')// ÂèØ‰ª•ÊúâÂà´ÂêçÔºåname ÊòØÊ®°ÂºèÔºån ÊâçÊòØË¢´ËµãÂÄºÁöÑÂèòÈáè(&#123;name: n, age: a&#125; = o) ÂØπË±°Ëß£ÊûÑÁöÑÊú¨Ë¥®ÊòØÔºåÂÖàÊâæÂà∞ÂêåÂêçÂ±ûÊÄßÔºåÂÜçËµãÂÄºÁªôÂØπÂ∫îÁöÑÂèòÈáè Ëß£ÊûÑËµãÂÄºÁöÑÂéüÂàôÊòØÔºåÂè™Ë¶ÅÂè≥ÂÄº‰∏çÊòØÂØπË±°ÊàñÊï∞ÁªÑÔºåÈÉΩË¶ÅÂÖàËΩ¨‰∏∫ÂØπË±°ÔºàÂ¶ÇÊï∞Â≠ó‰ºöËΩ¨Êàê NumberÔºâÔºõËÄå undefined Âíå null Êó†Ê≥ïËΩ¨Êç¢‰∏∫ÂØπË±°ÔºåÊâÄ‰ª•‰ºöÊä•Èîô ÂáΩÊï∞ÁöÑÂèÇÊï∞‰πüÊîØÊåÅËß£ÊûÑËµãÂÄº Â≠óÁ¨¶‰∏≤ &quot;\u{xxxx}&quot; ÂèØ‰ª•Ë°®Á§∫Ë∂ÖËøá‰∏§‰∏™Â≠óËäÇÁöÑ Unicode Â≠óÁ¨¶ for (let c of &#39;foo&#39;) ÂèØ‰ª•Áõ¥Êé•ÈÅçÂéÜÂ≠óÁ¨¶‰∏≤ÔºåÂπ∂‰∏îÂèØ‰ª•ËØÜÂà´Â§ß‰∫é 0xFFFF ÁöÑÁ†ÅÁÇπ String.raw ËøîÂõûËΩ¨‰πâÂ≠óÁ¨¶‰∏≤Ôºö String.includes() ÊòØÂê¶Â≠òÂú®Â≠ê‰∏≤ String.startsWith() + String.endsWith() String.repeat() Êï∞ÂÄº Â§öÁßçËøõÂà∂ÂÜôÊ≥ïÔºö ‰∫åËøõÂà∂Ôºö0b010101 ÂÖ´ËøõÂà∂Ôºö0o123 ÂçÅÂÖ≠ËøõÂà∂Ôºö0x1234 Â∞ÜÂ≠óÁ¨¶‰∏≤ÁöÑÂ§öÁßçËøõÂà∂ËΩ¨Êç¢ÊàêÂçÅËøõÂà∂ÔºöNumber(target) Êñ∞Â¢û‰∫Ü Number.isFinite Âíå Number.isNaN ÊñπÊ≥ïÔºå‰ΩÜËøô‰∏§ÁßçÊñπÊ≥ïÂè™ÂØπÊï∞ÂÄºÊúâÊïàÔºåÂÖ∂ÂÆÉ‰∏ÄÂæã‰∏∫ false„ÄÇÊ≥®ÊÑè‰πüÊúâ‰∏ÄÂØπÂÖ®Â±ÄÁöÑÂáΩÊï∞ isFinite Âíå isNaNÔºåÂÆÉ‰ª¨Âàô‰ºöÂ∞ùËØïÂÖàÂ∞ÜËæìÂÖ•ÁöÑÂèÇÊï∞ËΩ¨Êç¢‰∏∫ Number ÂêéÂÜçËøõË°åÂà§Êñ≠ÔºåËøôÊòØÊúÄÈáçË¶ÅÁöÑÂå∫Âà´ ES6 Â∞Ü parseInt Âíå parseFloat Êå™Âà∞ Number ‰∏ä‰∫ÜÔºåËøôÊ†∑‰ºöÊõ¥Âä†Áªü‰∏Ä Number.EPSILON ÊµÆÁÇπÊï∞ËÆ°ÁÆó‰ºöÊúâÁ≤æÂ∫¶ÊçüÂ§±ÔºåËøô‰∏™ÊûÅÂ∞èÂÄºÂèØ‰ª•Áî®Êù•ÊåáÂÆöËØØÂ∑ÆËåÉÂõ¥ ÊåáÊï∞ËøêÁÆóÁ¨¶ **ÔºåÈááÁî®ÁöÑÊòØÂè≥ÁªìÂêàÁöÑÊ®°Âºè V8 ÂºïÊìé‰∏≠ÔºåÊåáÊï∞ËøêÁÆóÁ¨¶Âíå Math.pow ÁÆóÊ≥ïÂÆûÁé∞ÊòØ‰∏çÂêåÁöÑÔºåÂØπ‰∫éÁâπÂà´Â§ßÁöÑÁªìÊûúÔºå‰∫åËÄÖ‰ºöÊúâÁªÜÂæÆÂ∑ÆÂà´ ÂáΩÊï∞ ÈªòËÆ§ÂèÇÊï∞Ôºö function say(word = &#39;hi&#39;) { console.log(word) } Âêå‰∏Ä‰ΩúÁî®Âüü‰∏≠Ôºå‰∏çËÉΩÂá∫Áé∞ÂêåÂêçÂáΩÊï∞ÁöÑÂ£∞Êòé ÈªòËÆ§ÂèÇÊï∞ÊòØÊÉ∞ÊÄßËÆ°ÁÆóÔºåÊØèÊ¨°Ë∞ÉÁî®ÈÉΩ‰ºöÈáçÊñ∞ËÆ°ÁÆóÔºåËøôÁÇπÂíå Python ÈùûÂ∏∏‰∏çÂêåÔºÅÔºÅ ÂáΩÊï∞ÂèÇÊï∞ÊîØÊåÅËß£ÊûÑÔºå‰∏îÊîØÊåÅÈªòËÆ§ÂÄº ÊåáÂÆö‰∫ÜÂèÇÊï∞ÈªòËÆ§ÂÄºÂêéÔºåÂáΩÊï∞ÁöÑ length Â±ûÊÄßÂè™‰ºöËøîÂõûÊú™ËÆæÁΩÆÈªòËÆ§ÂÄºÁöÑÂèÇÊï∞‰∏™Êï∞ Â¶ÇÊûúËÆæÁΩÆ‰∫ÜÂèÇÊï∞Ôºå‰∏î‰∏çÊòØÂ∞æÂèÇÊï∞ÔºåÂàôÂÖ∂‰πãÂêéÁöÑÂèÇÊï∞ÈÉΩ‰∏çÁÆóÂà∞ length ‰∫ÜÔºö(function (a = 0, b, c) {}).length // 0 ÂáΩÊï∞Â¶ÇÊûúËÆæÁΩÆ‰∫ÜÈªòËÆ§ÂÄºÔºåÂàôÂú®ÂàùÂßãÂåñÊó∂‰ºöÂΩ¢Êàê‰∏Ä‰∏™ÁâπÊÆäÁöÑ‰ΩúÁî®ÂüüÔºö 1234567const x = 100// ËøôÈáåÁöÑÂèÇÊï∞ `x` Âíå `y` Â§Ñ‰∫é‰∏Ä‰∏™‰ΩúÁî®Âüü‰∏≠ÔºåÊïÖ `y` ÁöÑÈªòËÆ§ÂÄºÂ∞±ÊòØÊåáÂêëÂèÇÊï∞ `x`function foo(x, y = x) &#123; console.log(x, y)&#125;foo(200) //200, 200 ES6 ËßÑÂÆöÔºåÂè™Ë¶ÅÂáΩÊï∞‰ΩøÁî®‰∫ÜÈªòËÆ§ÂÄº„ÄÅËß£ÊûÑÂíåÊâ©Â±ïËøêÁÆóÁ¨¶ÔºåÂ∞±‰∏çËÉΩÂú®ÂÜÖÈÉ®ÊòæÂºèÊåáÂÆö‰∏∫‰∏•Ê†ºÊ®°Âºè ÁÆ≠Â§¥ÂáΩÊï∞ÔºàÊõ¥ÁÆÄÊ¥ÅÁöÑÂåøÂêçÂáΩÊï∞ÂÜôÊ≥ïÔºâÔºö Â¶ÇÊûúÁõ¥Êé•ËøîÂõû‰∏Ä‰∏™ÂØπË±°ÔºåÈúÄË¶ÅÂ∞ÜÂØπË±°Áî®ÂúÜÊã¨Âè∑ÂåÖÂõ¥ÔºåÂê¶Âàô‰ºöË¢´Ëß£Èáä‰∏∫‰ª£Á†ÅÂùóÔºölet getObj = id =&gt; ({ id: id }) ÂáΩÊï∞‰ΩìÂÜÖÁöÑ this ÊòØÂÆö‰πâÊó∂ÊâÄÂú®ÁöÑÂØπË±°ÔºåËÄåÈùû‰ΩøÁî®Êó∂ÊâÄÂú®ÁöÑÂØπË±°Ôºå‰πüÂ∞±ÊòØÂú®ÁÆ≠Â§¥ÂáΩÊï∞‰∏≠Ôºåthis ÊòØÂõ∫ÂÆöÁöÑ„ÄÇÊú¨Ë¥®‰∏äÊòØÂõ†‰∏∫Âú®ÁÆ≠Â§¥ÂáΩÊï∞‰∏≠ÔºåÊ†πÊú¨Â∞±Ê≤°Êúâ thisÔºåÂÆÉÊåáÂêëÁöÑÊòØÂ§ñÂ±ÇÁöÑ this - ‰∏çÂèØ‰ª•‰Ωú‰∏∫ÊûÑÈÄ†ÂáΩÊï∞Ôºå‰∏çËÉΩÂØπÂÆÉ‰ΩøÁî® `new` ÂëΩ‰ª§ - Ê≤°Êúâ `arguments` ÂØπË±° - ‰∏çËÉΩ‰ΩøÁî® `yield`Ôºå‰∏çÂèØ‰ª•‰Ωú‰∏∫ `Generator` Â∞æË∞ÉÁî®Ôºö ÂáΩÊï∞ÂºèÁºñÁ®ã‰∏≠ÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÊ¶ÇÂøµÔºåÊåáÁöÑÊòØÂáΩÊï∞ÁöÑÊúÄÂêé‰∏ÄÊ≠•Êìç‰ΩúÔºà‰∏ç‰∏ÄÂÆöÊòØÊúÄÂêé‰∏ÄË°åÔºåÈÄªËæë‰∏äÊòØÊúÄÂêé‰∏ÄÊ≠•ÔºâÊòØÁõ¥Êé•Ë∞ÉÁî®Âè¶‰∏Ä‰∏™ÂáΩÊï∞Âπ∂ËøîÂõûÂÖ∂ÁªìÊûúÔºö12345678function foo(x) &#123; return bar(x) &#125;// ‰ª•‰∏ã‰∏çÁ¨¶Âêàfunction foo(x) &#123; let y = bar(x); return y &#125;function foo(x) &#123; bar(x) &#125;function foo(x) &#123; return bar(x) + 1 &#125; Â∞æË∞ÉÁî®‰ºòÂåñÔºöÂè™‰øùÁïôÂÜÖÂ±ÇÂáΩÊï∞ÁöÑË∞ÉÁî®Â∏ßÔºåËäÇÁ∫¶ÂÜÖÂ≠ò ES6 ‰∏≠Âè™Ë¶Å‰ΩøÁî®‰∫ÜÂ∞æÈÄíÂΩíÔºåÂ∞±‰∏ç‰ºöÂá∫Áé∞Ë∞ÉÁî®Ê†àÊ∫¢Âá∫ÔºåÂõ†‰∏∫Âè™ÈúÄË¶ÅÁª¥Êä§‰∏Ä‰∏™Ë∞ÉÁî®Â∏ßÂç≥ÂèØ„ÄÇ‰ΩÜÂÖ∂ÂÆûËøô‰∏™‰ºòÂåñÂè™ÊúâÂú®‰∏•Ê†ºÊ®°Âºè‰∏ãÊâç‰ºöÂêØÁî®„ÄÇÊ≠£Â∏∏Ê®°Âºè‰∏ãÔºåÈúÄË¶ÅÈÄöËøáÂèòÈáè arguments, func.caller Êù•Ë∑üË∏™ÂáΩÊï∞ÁöÑË∞ÉÁî®Ê†à Êï∞ÁªÑ Êï∞ÁªÑÂ§çÂà∂Ôºöconst a2 = [...a1] ÊàñËÄÖ const [...a2] = a1 ÂèØ‰ª•Â∞ÜÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢‰∏∫Êï∞ÁªÑÔºöconst a = [...&#39;hello&#39;] Êâ©Â±ïËøêÁÆóÁ¨¶ ... ÂèØ‰ª•Â∞Ü‰ªª‰ΩïÂÆûÁé∞‰∫Ü Iterator Êé•Âè£ÁöÑÂØπË±°ËΩ¨Êç¢ÊàêÊï∞ÁªÑ Array.from ÂèØ‰ª•Êé•Âèó‰ªªÊÑèÂÆûÁé∞‰∫Ü Iterator Êé•Âè£ÁöÑÂØπË±°ÔºåËΩ¨Êç¢ÊàêÊï∞ÁªÑÔºõ‰πüÊîØÊåÅ array-like ÂØπË±° Array.of Â∞Ü‰∏ÄÁªÑÂÄºËΩ¨Êç¢‰∏∫Êï∞ÁªÑÔºåÂº•Ë°• Array ÊûÑÈÄ†ÂáΩÊï∞Âú®ÂèÇÊï∞‰∏™Êï∞‰∏çÂêåÊó∂ÔºåË°å‰∏∫‰πü‰∏çÂêåÁöÑÊØõÁóÖ„ÄÇÂÆåÂÖ®ÂèØ‰ª•Êõø‰ª£ Array() ÊàñËÄÖ new Array() Êèê‰æõ‰∫ÜÂá†‰∏™ÈÅçÂéÜÁöÑÊé•Âè£Ôºö keys() ÂÆûÈôÖÂ∞±ÊòØÁ¥¢Âºï values() ÂÄº entries() ÈîÆÂÄº includes() Âà§Êñ≠ÊòØÂê¶ÂåÖÂê´ÂÖÉÁ¥† flat Áî®‰∫éÂ∞ÜÂµåÂ•óÊï∞ÁªÑÂ±ïÂºÄÔºåÊãâÂπ≥ÔºåÈªòËÆ§Âè™Â±ïÂºÄ‰∏ÄÂ±ÇÔºåÂèØÊåáÂÆöÂ§öÂ±ÇÊàñËÄÖ Infinity flatMap Âíå flat Á±ª‰ººÔºå‰ΩÜÊòØ‰ºöÂØπÊØè‰∏™ÂÖÉÁ¥†ÊâßË°å‰∏ÄÊ¨°ÂõûË∞ÉÂáΩÊï∞Ôºå‰ΩÜÂÆÉÂè™ËÉΩÂ±ïÂºÄ‰∏ÄÂ±Ç ÂØπË±° Â±ûÊÄßÊàñËÄÖÊñπÊ≥ïÈÉΩÂèØ‰ª•ÁÆÄÂÜôÂï¶Ôºö 1234567891011let [x, y] = [1, 2]const a = &#123;x, y&#125;// Á≠âÂêå‰∫éconst a = &#123;x: x, y: y&#125;// ÊñπÊ≥ïÁöÑÁÆÄÂÜôconst o = &#123; doSomething() &#123; return true &#125; // Â∏∏ËßÑÂÜôÊ≥ï doSomething: function() &#123; return true &#125;&#125; ÂÖÅËÆ∏‰ΩøÁî®Ë°®ËææÂºè‰Ωú‰∏∫ÂØπË±°ÁöÑÂ±ûÊÄßÂêçÔºö 123456let propKey = 'foo'let obj = &#123; [properKey]: true, ['a' + 'bc']: 123&#125; ES6 ‰∏≠Â±ûÊÄßÈÅçÂéÜÁöÑÊñπÊ≥ïÔºö for...inÔºöÈÅçÂéÜÂØπË±°Ëá™Ë∫´ÂíåÁªßÊâøÁöÑÂèØÊûö‰∏æÂ±ûÊÄßÔºà‰∏çÂê´ Symbol Â±ûÊÄßÔºâ Object.keys(obj)ÔºöÂØπË±°Ëá™Ë∫´ÂèØÊûö‰∏æÂ±ûÊÄßÔºà‰∏çÂê´ Symbol Â±ûÊÄßÔºâ Object.getOwnPropertyNames(obj)ÔºöÂØπË±°Ëá™Ë∫´ÁöÑÊâÄÊúâÂ±ûÊÄßÁöÑÈîÆÂêçÔºà‰∏çÂê´ Symbol Â±ûÊÄßÔºâ Object.getOwnPropertySymbols(obj)ÔºöÂØπË±°Ëá™Ë∫´ÊâÄÊúâ Symbol Â±ûÊÄßÁöÑÈîÆÂêç Reflect.ownKeys(obj)ÔºöÂØπË±°Ëá™Ë∫´ÊâÄÊúâÁöÑÈîÆÂêçÔºàÊó†ËÆ∫ÊòØ Symbol Â±ûÊÄßÊàñËÄÖÊòØÂà´ÁöÑÂ±ûÊÄßÔºå‰∏çÂÖ≥ÂøÉÂèØÂê¶Êûö‰∏æÔºâ superÔºö ÊåáÂêëÂØπË±°ÁöÑÂéüÂûãÂØπË±°ÔºåÂú®ËøôÁßçÁî®Ê≥ï‰∏ãÔºåÂè™ËÉΩÂú®ÂØπË±°ÊñπÊ≥ï‰∏≠‰ΩøÁî® ÂØπË±°ÊñπÊ≥ïÔºöÂøÖÈ°ªÈááÁî® ES6 ÊñπÊ≥ïÁÆÄÂÜôÁöÑÊñπÂºèÔºåÊâç‰ºöË¢´ËÆ§ÂÆö‰∏∫ÂØπË±°ÊñπÊ≥ï ÂØπË±°Ëß£ÊûÑËµãÂÄºÔºö let { x, y, ...z } = { x: 1, y: 2, a: 10, b: 20 } Ëß£ÊûÑËµãÂÄºÂøÖÈ°ªÊòØÊúÄÂêé‰∏Ä‰∏™ÂèÇÊï∞ Âè≥ÂÄºÂøÖÈ°ªÊòØÂØπË±° ÈááÁî®ÁöÑÊòØÊµÖÊã∑Ë¥ù Object.is()Ôºö Êõ¥Âä†ÊòéÁ°ÆÁöÑÊØîËæÉÂØπË±°ÊòØÂê¶Á¨¶Âêà Same-value equlity Object.is(NaN, NaN) // true Object.is(+0, -0) // false Object.assign() Áî®‰∫éÂØπË±°ÂêàÂπ∂ÔºåÂ∞±ÊòØÂ∞ÜÊ∫êÂØπË±°ÊâÄÊúâÂèØÊûö‰∏æÁöÑÂ±ûÊÄßÂ§çÂà∂Âà∞ÁõÆÊ†áÂØπË±°ÔºàÂåÖÊã¨ Symbol Â±ûÊÄßÔºâ„ÄÇÊ≥®ÊÑèÁÇπÔºö ÊµÖÊã∑Ë¥ù ÂêåÂêçÂ±ûÊÄßÁõ¥Êé•ÊõøÊç¢Ôºå‰∏çËÄÉËôëÂµåÂ•ó Áî±‰∫é Object.assign Âè™ËÉΩËøõË°åÂÄºÂ§çÂà∂ÔºåÂØπ‰∫éÂèñÂÄºÂáΩÊï∞ÔºåÂàô‰ºöÂÖàÂèñÂÄºÂÜçÂ§çÂà∂ Object.assign() Â∏∏ËßÅÁî®ÈÄîÔºö ‰∏∫ÂØπË±°Ê∑ªÂä†Â±ûÊÄßÔºöObject.assign(this, { x, y }) ‰∏∫ÂØπË±°Ê∑ªÂä†ÊñπÊ≥ïÔºöObject.assign(Foo.prototype, { barMethod() { ... } }) ÂØπË±°ÂÖãÈöÜÔºöObject.assign(Object.create(originProto), origin) Â±ûÊÄßÊèê‰æõÈªòËÆ§ÂÄºÔºöObject.assign({}, DEFAULTS, options) Symbol ES6 ÂºïÂÖ• Symbol ÁöÑÂéüÂõ†Ôºö ES5 ‰∏≠ÔºåÂ±ûÊÄßÂêçÊòØÂ≠óÁ¨¶‰∏≤ÔºåÂÆπÊòìÈÄ†ÊàêÂ±ûÊÄßÂêçÂÜ≤Á™Å Symbol ÂèØ‰ª•‰øùËØÅÊØè‰∏™Â±ûÊÄßÁã¨‰∏ÄÊó†‰∫å Symbol ÊòØÊñ∞Â¢ûÁöÑÂéüÂßãÁ±ªÂûãÔºåË°®Á§∫Áã¨‰∏ÄÊó†‰∫åÁöÑÂÄº„ÄÇÁî®‰∫éÂØπË±°ÁöÑÂ±ûÊÄß„ÄÇ‰ΩøÁî® Symbol() ÂáΩÊï∞ÊûÑÈÄ† Symbol Êé•Êî∂‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤‰Ωú‰∏∫ÂèÇÊï∞ÔºåË°®Á§∫ÂØπ Symbol ÂÆû‰æãÁöÑÊèèËø∞„ÄÇÂ¶ÇÊûúÊòØ‰∏Ä‰∏™ÂØπË±°ÂèÇÊï∞ÔºåÂàô‰ºöË∞ÉÁî® obj.toString() ÂæóÂà∞ÂØπË±°ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂÜçÁîüÊàê‰∏Ä‰∏™ Symbol ÂÄº Ê≥®ÊÑèÁÇπÔºö ‰∏çÂèØ‰ª•Áõ¥Êé•‰∏éÂÖ∂ÂÆÉÁ±ªÂûãÂÄºËøêÁÆóÔºå‰∏ç‰ºöÈöêÂºèËΩ¨Êç¢‰∏∫ string ÂèØ‰ª•ÊòæÂºèËΩ¨Êç¢‰∏∫ string symbol.description ÂèØ‰ª•Ëé∑Âèñ Symbol ÁöÑÊèèËø∞‰ø°ÊÅØ ‰Ωú‰∏∫ÂØπË±°ÁöÑÂ±ûÊÄßÔºàÂè™ËÉΩÊòØÂÖ¨ÂºÄÂ±ûÊÄßÔºâÔºö 1234567891011121314151617const name = Symbol('name')let person = &#123;&#125;// Á¨¨‰∏ÄÁßçÂÆö‰πâÊñπÂºèperson[name] = "Foo"// Ëé∑ÂèñÁöÑÊñπÂºèperson[name]// Á¨¨‰∫åÁßçÂÆö‰πâÊñπÂºèlet person2 = &#123; [name]: 'Bar' // ÂøÖÈ°ªË¶ÅÊîæÂú®ÊñπÊã¨Âè∑‰∏≠&#125;// Á¨¨‰∏âÁßçÂÆö‰πâÊñπÂºèObject.defineProperty(a, mySymbol, &#123; value: 'Hello!' &#125;); ÂèØ‰ª•‰Ωú‰∏∫Â∏∏ÈáèÔºå‰øùËØÅÂÄº‰∏çÂêå ÂèØ‰ª•Á±ª‰ººÊàë‰ª¨Âú® Python ‰∏≠ÈÇ£Ê†∑ÂÆö‰πâ EnumÔºö 12345const userType = &#123; guest: Symbol(), org: Symbol(), member: Symbol(),&#125; Áî±‰∫é‰∏ç‰ºöË¢´Â∏∏ËßÑÁöÑÊñπÊ≥ïÂ¶Ç getOwnPropertyNames Á≠âÈÅçÂéÜÂà∞Ôºå‰ΩÜÂÖ∂ÂÆûÂèàÊòØÂÖ¨ÂºÄ„ÄÇËøôÁßçÁâπÊÄßÂèØ‰ª•Áî®Êù•ÂàõÂª∫‰∏Ä‰∫õÈùûÁßÅÊúâ„ÄÅ‰ªÖÂ∏åÊúõÂÜÖÈÉ®Ë∞ÉÁî®ÁöÑÊñπÊ≥ï Symbol.for Âíå Symbol.keyForÔºöÂ§çÁî®Áõ∏ÂêåÂèÇÊï∞ÊûÑÂª∫ÁöÑ SymbolÔºåÂÆÉ‰ºöÂú®ÂÖ®Â±ÄÊ≥®ÂÜåÂèÇÊï∞ÔºåÂπ∂Âú®ÂàõÂª∫ÂâçËøõË°åÊêúÁ¥¢ÔºåÂ¶ÇÊûúÂ≠òÂú®ÂàôËøîÂõûÔºåÂê¶ÂàôÊñ∞Âª∫„ÄÇÊ≥®ÊÑèËøô‰∏™ÂÖ®Â±ÄÊòØÂÖ®Â±ÄÁéØÂ¢ÉÔºåÂèØ‰ª•Âú®‰∏çÂêåÁöÑ iframe Âíå service worker ‰∏≠ÂèñÂà∞ÂêåÊ†∑ÁöÑÂÄºÔºö 123456let s1 = Symbol.for('s1')Symbol.for('s1') === s1 // trueSymbol.keyFor(s1) // 's1'let s2 = Symbol('s2')Symbol.keyFor(s2) // undefined ÂÜÖÁΩÆÁöÑ Symbol ÂÄºÔºåÊåáÂêëËØ≠Ë®ÄÂÜÖÈÉ®‰ΩøÁî®ÁöÑÊñπÊ≥ïÔºö Symbol.hasInstanceÔºåÊØè‰∏™ÂØπÂ∫îÂèØ‰ª•Ëá™ÂÆö‰πâËøô‰∏™ Symbol ÊñπÊ≥ïÔºå‰ªéËÄåËÆ© instanceof ËøêÁÆóÁ¨¶ÊåâÁÖßÊúüÊúõÁöÑË°®Áé∞ Symbol.isConcatSpreadable Â±ûÊÄßÔºåË°®Á§∫Âú® Array.prototype.concat() Êó∂ÔºåËÉΩÂê¶Â±ïÂºÄ Symbol.species Â±ûÊÄßÔºåÊåáÂêë‰∏Ä‰∏™ÊûÑÈÄ†ÂáΩÊï∞„ÄÇÂú®ÂàõÂª∫Ë°çÁîüÂØπË±°Êó∂Ôºå‰ºö‰ΩøÁî®ËØ•Â±ûÊÄß Symbol.iterator ÊåáÂêëÂØπË±°ÁöÑÈªòËÆ§ÈÅçÂéÜÂô® Symbol.toPrimitive ÊåáÂêëËΩ¨Êç¢ÊàêÂéüÂßãÁ±ªÂûãÁöÑÊñπÊ≥ï Set Âíå Map Êï∞ÊçÆÁªìÊûÑ Set ÊûÑÈÄ†ÂáΩÊï∞ÂèØÊé•Âèó‰ªªÊÑè Iterable ÁöÑÂØπË±° Êù•Áúã‰∏ãÊ∂àÈô§Êï∞ÁªÑ‰∏≠ÈáçÂ§çÂÖÉÁ¥†ÁöÑÊñπÊ≥ï‰∏é Python ÁöÑÂå∫Âà´Ôºö 12345678// Python ‰∏≠ÁöÑÂÜôÊ≥ïlist(set([1, 1, 2]))// JS ES6 ‰∏≠ÁöÑÂÜôÊ≥ï[...new Set([1, 1, 2])]// ÊàñËÄÖArray.from(new Set([1, 1, 2)]) WeakSet Âº±ÂºïÁî®ËÆ°Êï∞ÔºåÂè™ËÉΩÂ≠òÊîæÂØπË±°„ÄÇ‰∏çÂèØÈÅçÂéÜ Map ÁöÑÊûÑÈÄ†Ôºö 123456// ÂÖàÁúãÁúã Python ‰∏≠‰∏Ä‰∏™Á±ª‰ººÁöÑÊûÑÈÄ†ÊñπÂºèdict(zip(['name', 'age'], ['chris', 22]))// ÈÇ£‰πàÂú® ES6 ‰∏≠ÁöÑÂÜôÊ≥ï// ÂÆûÈôÖ‰∏ä‰ªªÊÑè Iterable ÁöÑÂØπË±°Ôºå‰∏îÊàêÂëòÂùá‰∏∫ÂèåÂÖÉÁ¥†ÁöÑÊï∞ÁªÑÁöÑÊï∞ÊçÆÁªìÊûÑÈÉΩÂèØ‰ª•‰Ωú‰∏∫ Map ÁöÑÊûÑÈÄ†ÂáΩÊï∞new Map([['name', 'age'], ['chris', 22]]) WeakMap Proxy Â±û‰∫éÂÖÉÁºñÁ®ãËåÉÁï¥ÔºåÂèØ‰ª•Êã¶Êà™‰∏Ä‰∫õÊìç‰ΩúÔºåÂπ∂ËøõË°åÈáçÂÆö‰πâ ÊûÑÈÄ†ÂáΩÊï∞Ôºövar proxy = new Proxy(target, handler) Ë¶ÅÊÉ≥ËÆ© Proxy Ëµ∑‰ΩúÁî®ÔºåÂøÖÈ°ªË¶ÅÈíàÂØπÂÖ∂ÂÆû‰æãËøõË°åÊìç‰ΩúÔºåËÄåÈùûÁõÆÊ†áÂØπË±° 123456789101112131415161718let handler = &#123; get (target, name, receiver) &#123; if (name === "name" || name == "age") &#123; return Reflect.get(target, name, receiver) &#125; else &#123; throw ReferenceError(`property '$&#123;name&#125;' not found`) &#125; &#125;&#125;let user = &#123; name: "Chris", age: 26,&#125;let proxy = new Proxy(user, handler)console.log(proxy)console.log(proxy.age)console.log(proxy.name)console.log(proxy.foo) Proxy.revocable ÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™ÂèØÂèñÊ∂àÁöÑ Proxy ÂÆû‰æã Reflect Reflect ‰πüÊòØ‰∏∫‰∫ÜÊìç‰ΩúÂØπË±°ËÄåÊèê‰æõÁöÑÊñ∞ÁöÑ APIÔºåËÆæËÆ°ÁõÆÊ†áÔºö Â∞Ü Object ÂØπË±°‰∏≠ÊòéÊòæÂ±û‰∫éÂÜÖÈÉ®ÁöÑÊñπÊ≥ïÂâ•Á¶ªÂá∫Êù•ÔºåÊîæÂà∞ Reflect ÂØπË±°‰∏ä ‰øÆÊîπÊüê‰∫õ Object ÊñπÊ≥ïÁöÑËøîÂõûÁªìÊûúÔºåÊõ¥Âä†Êñπ‰æø‰ΩøÁî® Â∞ÜÊüê‰∫õÂëΩ‰ª§ÂºèÁöÑÊìç‰ΩúÔºåÂèòÊàêÂáΩÊï∞ÔºåÂ¶ÇÔºöname in obj =&gt; Reflect.has(obj, name)Ôºådelete obj[name] =&gt; Reflect.deleteProperty(obj, name) ‰∏é Proxy ‰∏≠Êã¶Êà™ÊñπÊ≥ï‰∏ÄÊ†∑ÔºåÂèØ‰ª•Êõø‰ª£ÊâßË°åÂØπË±°ÁöÑÈªòËÆ§Ë°å‰∏∫ Reflect.apply(Math.floor, undefined, [1]) Promise ÂºÇÊ≠•ÁºñÁ®ãËß£ÂÜ≥ÊñπÊ°à„ÄÇÊâÄË∞ì PromiseÔºåÂ∞±ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂÆπÂô®Ôºå‰øùÂ≠òÁùÄÊú™Êù•Êâç‰ºöÁªìÊùüÁöÑ‰∫ãÊÉÖÔºàÈÄöÂ∏∏ÊòØ‰∏Ä‰∏™ÂºÇÊ≠•ÁªìÊûúÔºâ ÁâπÁÇπÔºö ÂØπË±°ÁöÑÁä∂ÊÄÅ‰∏çÂèóÂ§ñÁïåÂΩ±ÂìçÔºàpending, fulfilled, rejectedÔºâ ‰∏ÄÊó¶Áä∂ÊÄÅÊîπÂèòÔºåÂ∞±‰∏ç‰ºöÂÜçÂèòÔºå‰ªª‰ΩïÊó∂ÂÄôÈÉΩÂèØ‰ª•ÂæóÂà∞ÁªìÊûú ‰ª•Êõ¥Âä†ÂêåÊ≠•ÁöÑÊñπÂºèÁºñÁ®ãÔºåÊòì‰∫éÊèê‰æõÁªü‰∏ÄÁöÑÊé•Âè£Ôºå‰æø‰∫éÁª¥Êä§ Áº∫ÁÇπÔºö Êó†Ê≥ïÂèñÊ∂à Ëã•‰∏çËÆæÁΩÆÂõûË∞ÉÔºåPromise ÂÜÖÈÉ®ÊäõÂá∫ÈîôËØØ‰∏ç‰ºöÂèçÈ¶àÂà∞Â§ñÈÉ® pending Áä∂ÊÄÅÊó∂ÔºåÊó†Ê≥ïÂæóÁü•ÂÖ∑‰ΩìËøõÂ±ïÊÉÖÂÜµ Promise.prototype.then() ÂèØÊé•Âèó‰∏§‰∏™ÂõûË∞ÉÔºå‰∏Ä‰∏™ÊòØ resolved Êó∂ÁöÑ ÂõûË∞ÉÔºåËøòÊúâ‰∏Ä‰∏™ÊòØ rejected Êó∂ÁöÑÂõûË∞É„ÄÇÁ¨¨‰∫å‰∏™ÂõûË∞ÉÂèØÈÄâ Promise.prototype.then() ËøîÂõûÁöÑÊòØ‰∏ÄÂÄãÊñ∞ÁöÑ Promise ÂØ¶‰æã Promise.prototype.catch() ÊòØ .then(undefined, rejection) Êàñ .then(null, rejection) ÁöÑÂà´ÂêçÔºåÁî®‰∫éÊåáÂÆöÂèëÁîüÈîôËØØÊó∂ÁöÑÂõûË∞ÉÂáΩÊï∞ Promise ÂØπË±°ÁöÑÈîôËØØÂÖ∑ÊúâÂÜíÊ≥°ÁöÑÊÄßË¥®Ôºå‰ºö‰∏ÄÁõ¥ÂêëÂêé‰º†ÈÄíÔºåÁõ¥Âà∞Ë¢´ÊçïËé∑‰∏∫Ê≠¢„ÄÇÈîôËØØÊÄªÊòØ‰ºöË¢´‰∏ã‰∏Ä‰∏™ catch ÊçïËé∑ Promise.prototype.finally Áî®‰∫éÊåáÂÆö‰∏çÁÆ° Promise ÂØπË±°ÊúÄÁªàÂ¶Ç‰ΩïÔºåÈÉΩ‰ºöÊâßË°åÁöÑÊìç‰ΩúÔºåES2018 ÂºïÂÖ•„ÄÇÊó†Ê≥ïÂú® finally ‰∏≠Ëé∑Âèñ Promise ÁöÑÁä∂ÊÄÅÔºåÂÆÉÁöÑÊâßË°å‰∏éÁä∂ÊÄÅÊó†ÂÖ≥ Promise.allÔºö ÂèÇÊï∞ÂøÖÈ°ªÊòØ Iterable ÁöÑÂØπË±°ÔºåÂÖÉÁ¥†Â∫îÂΩìÊòØ Promise ÂÆû‰æã Áä∂ÊÄÅÁî±ÊàêÂëòÂÜ≥ÂÆöÔºåÂè™ÊúâÈÉΩÊòØ fulfilled Êó∂ÔºåÊï¥‰ΩìÁöÑÁä∂ÊÄÅÊâç‰ºöÂèòÊàê fulfilled Â¶ÇÊûú‰ªª‰Ωï‰∏Ä‰∏™ rejcted ÔºåÂàôÊï¥‰ΩìÊï¥‰ΩìÂ∞±ÊòØ rejectedÔºåÂπ∂‰∏îËøîÂõûÁ¨¨‰∏Ä‰∏™Ë¢´ reject ÁöÑÂÆû‰æãÁöÑËøîÂõûÂÄº Promise.raceÔºåÁ±ª‰ºº Promise.any ÁöÑÊÑüËßâÔºåÂ∞±ÊòØÂè™Ë¶ÅÊúâ‰∏Ä‰∏™Áä∂ÊÄÅÊîπÂèòÔºåÊï¥‰ΩìÁä∂ÊÄÅÂ∞±ÂèòÂåñÔºõÁéáÂÖàÂèòÂåñÁöÑ Promise ÂÆû‰æãËøîÂõûÂÄº‰ºö‰º†ÈÄíÁªô p ÁöÑÂõûË∞ÉÂáΩÊï∞ Iterator &amp; for‚Ä¶of Iterator ÈÅçÂéÜËøáÁ®ãÔºö ÂàõÂª∫‰∏Ä‰∏™ÊåáÂêëÂèØËø≠‰ª£ÂØπË±°ÁöÑÊåáÈíàÂØπË±° Ë∞ÉÁî® nextÔºåÂèØÂæóÂà∞Á¨¨‰∏Ä‰∏™ÊàêÂëòÔºàËøîÂõûÁªìÊûúÂåÖÊã¨‰∏§‰∏™Â±ûÊÄßÔºövalue + doneÔºåÂèØÂàÜÂà´ÁúÅÁï•Ôºâ ‰∏çÊñ≠Ë∞ÉÁî® next Áõ¥Âà∞Ê∂àË¥πÂÆå ÂÆûÁé∞‰∫Ü Iterator Êé•Âè£ÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ∞±ÊòØÂèØÈÅçÂéÜÁöÑÔºàIterableÔºâ„ÄÇÁ§∫‰æãÔºö 1234567891011121314151617181920class RangeIterator &#123; constructor(start = 0, stop = 100) &#123; this._value = start this._stop = stop &#125; [Symbol.iterator]() &#123; return this &#125; next() &#123; let val = this._value if (val &lt; this._stop) &#123; this._value++ return &#123;done: false, value: val&#125; &#125; return &#123;done: true, value: undefined&#125; &#125;&#125;for (const x of new RangeIterator()) &#123; console.log(x)&#125; ‰ΩïÊó∂Ëß¶Âèë Iterator ÔºàÂç≥ Symbol.iteratorÔºâÊé•Âè£Ë∞ÉÁî®Ôºü Ëß£ÊûÑËµãÂÄº Êâ©Â±ïËøêÁÆóÁ¨¶ yield* for...of Array.from() Map(), Set(), WeakMap(), WeakSet() Promise.all() Promise.race() ÂèØ‰ª•‰ΩøÁî® Generator ÂáΩÊï∞ÂÆûÁé∞ÂèØËø≠‰ª£Ôºö 123456789101112131415class RangeIterator &#123; constructor(start = 0, stop = 10) &#123; this._value = start this._stop = stop &#125; *[Symbol.iterator]() &#123; while (this._value &lt; this._stop) &#123; this._value++ yield this._value &#125; &#125;&#125;for (const x of new RangeIterator()) &#123; console.log(x)&#125; ÈÅçÂéÜÂô®ÂØπË±°Èô§‰∫ÜÊúâ next ÊñπÊ≥ïÂ§ñÔºåËøòÂèØ‰ª•Ê∑ªÂä†‰∏Ä‰∏™ return ÊñπÊ≥ïÔºåÁî®‰∫éÂ§ÑÁêÜ for...of ÊèêÂâçÈÄÄÂá∫ÔºàÂ¶ÇÂá∫ÈîôÔºåÊàñËÄÖ breakÔºâÊó∂Ë¶ÅÂÅöÁöÑ‰∫ãÊÉÖ„ÄÇËÄå throw ÊñπÊ≥ï‰∏ÄËà¨ÊòØÈÖçÂêà Generator ÂáΩÊï∞‰ΩøÁî® Generator ÂáΩÊï∞ ÂÆö‰πâÊñπÂºèÔºöfunction* funcName() { yield 1; return &quot;end&quot; } Ë∞ÉÁî® Generator ÂáΩÊï∞ÔºåËøîÂõû‰∏Ä‰∏™ÈÅçÂéÜÂô®ÂØπË±°Ôºå‰ª£Ë°® Generator ÂáΩÊï∞ÂÜÖÈÉ®ÊåáÈíà yield Âè™ËÉΩÁî®‰∫é Generator ÂáΩÊï∞‰∏≠ÔºàËøô‰∏™Âíå Python ‰∏çÂêå„ÄÇÂú® Python ‰∏≠ÔºåGenerator ÂáΩÊï∞‰ªéË°®Êòé‰∏äÁúãÂíåÊôÆÈÄöÂáΩÊï∞ÂÆö‰πâÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂè™ÊòØÂÆûÁé∞‰∏çÂêåÔºâ yield Ë°®ËææÂºèÊú¨Ë∫´Êó†ËøîÂõûÂÄºÔºåÊàñËÄÖÊÄªËøîÂõû undefined„ÄÇnext ÊñπÊ≥ïÂèØ‰ª•Â∏¶ÂèÇÊï∞Ôºå‰Ωú‰∏∫ yield Ë°®ËææÂºèÁöÑËøîÂõûÂÄº Á¨¨‰∏ÄÊ¨°Â∏¶ÂèÇÊï∞Ë∞ÉÁî® next ÊñπÊ≥ïÊó∂ÔºåÂèÇÊï∞ÊòØÊó†ÊïàÁöÑ„ÄÇÂõ†‰∏∫ next ÊñπÊ≥ïÁöÑÂèÇÊï∞Ë°®Á§∫‰∏ä‰∏Ä‰∏™ yield Ë°®ËææÂºèÁöÑËøîÂõûÂÄº ËØ≠‰πâ‰∏äÔºåÁ¨¨‰∏ÄÊ¨°Ë∞ÉÁî® next ÊòØÂêØÂä®ÈÅçÂéÜÂô®ÂØπË±° Generator.prototype.throw() ÂèØ‰ª•Âú®ÂáΩÊï∞‰ΩìÂ§ñÂêë Generator ÂáΩÊï∞ÊäõÈîô„ÄÇÂ¶ÇÊûúÁîüÊàêÂô®‰∏≠Ê≤°Êúâ try...catch ÂùóÔºåÈîôËØØ‰ºö‰º†ÈÄíÂà∞Â§ñÈÉ® Â¶ÇÊûú‰∏Ä‰∏™ Generator ÊâßË°åËøáÁ®ã‰∏≠Âá∫ÈîôÔºå‰∏îÊ≤°ÊúâÂÜÖÈÉ®ÊçïËé∑ÔºåÂàô‰ºöËÆ§‰∏∫ÂÆÉÂ∑≤ÁªèÊâßË°åÁªìÊùü‰∫Ü Generator.prototype.return() ÂèØ‰ª•ÁªàÊ≠¢ GeneratorÔºåÂ¶ÇÊûú return Â∏¶ÂèÇÊï∞ÔºåÂàô‰ºö‰Ωú‰∏∫ÊúÄÂêéÁöÑËøîÂõûÂÄº„ÄÇÂ¶ÇÊûú Generator ‰∏≠Âê´Êúâ try...finally ËØ≠Âè•ÂùóÔºåÂàô‰ºö‰ºòÂÖàÊâßË°å finallyÔºåÂª∂ËøüËøîÂõû yield* Ë°®ËææÂºèÂèØ‰ª•ÂèÇËÄÉ Python ‰∏≠ÁöÑ yield from ÂºÇÊ≠•ÁºñÁ®ãÊ®°ÂºèÔºö ÂõûË∞ÉÂáΩÊï∞ ‰∫ã‰ª∂ÁõëÂê¨ ÂèëÂ∏É/ËÆ¢ÈòÖ Promise ÂØπË±° async ÂáΩÊï∞ async ÊòØ Generator ËØ≠Ê≥ïÁ≥ñÔºåÂÜôÂºÇÊ≠•ÊâßË°åÁöÑÂáΩÊï∞Êõ¥Âä†‰æøÊç∑ ÊîπËøõÁÇπÔºö ÂÜÖÁΩÆÊâßË°åÂô®ÔºåÊó†ÈúÄ co ‰πãÁ±ªÁöÑÊ®°ÂùóÊéßÂà∂ Generator ÊâßË°åÊµÅÁ®ã‰∫Ü Êõ¥Â•ΩÁöÑËØ≠‰πâ Êõ¥ÂπøÁöÑÈÄÇÁî®ÊÄß„ÄÇawait ÂèØ‰ª•ÊòØ Promise ÂØπË±°ÔºåÂ¶ÇÊûúÊòØÂéüÂßãÁ±ªÂûãÂÄºÔºåÂàô‰ºöËá™Âä®ËΩ¨Êç¢‰∏∫ resolved Promise ÂØπË±° ËøîÂõûÂÄºÊòØ Promise ÂÆö‰πâÊñπÂºèÔºö 123456789101112131415161718192021// ÂáΩÊï∞Â£∞Êòéasync function foo() &#123; &#125;// ÂáΩÊï∞Ë°®ËææÂºèconst foo = async function () &#123; &#125;// ÂØπË±°ÁöÑÊñπÊ≥ïlet o = &#123; async foo() &#123; &#125; &#125;// Á±ª‰∏≠ÂÆö‰πâclass Storage &#123; constructor() &#123; this.cachePromise = caches.open("avatars") &#125; async getAvatar(name) &#123; const cache = await this.cachePromise return cache.match(`/avatars/$&#123;name&#125;.jpg`) &#125;&#125;const store = new Storage()store.getAvatar("jake").then().cach()// ÁÆ≠Â§¥ÂáΩÊï∞const foo = async () =&gt; &#123;&#125; ÈîôËØØÂ§ÑÁêÜÔºöÂ¶ÇÊûú await ÂêéÈù¢ÁöÑÂºÇÊ≠•Êìç‰ΩúÂá∫ÈîôÔºåÁ≠âÂêå‰∫é async ÂáΩÊï∞ËøîÂõûÁöÑ Promise ÂØπË±°Ë¢´ reject„ÄÇÊçïËé∑ÈîôËØØÁöÑ‰∏§ÁßçÊñπÂºèÔºö 123456789101112async function foo() &#123; try &#123; await doSomething() &#125; catch (e) &#123; console.error(e) &#125;&#125;// Âè¶Â§ñ‰∏ÄÁßçasync function bar() &#123; await doSomething().catch(e =&gt; &#123; console.error(e) &#125;)&#125; ÂØπ‰∫é‰∏çÁõ∏‰∫í‰æùËµñÁöÑÁã¨Á´ãÊìç‰ΩúÔºå‰∏çÂª∫ËÆÆÂàÜÂà´ awaitÔºåÈÇ£Ê†∑ÂíåÂêåÊ≠•ÊúâÊØõÁ∫øÂå∫Âà´„ÄÇÂª∫ËÆÆÁî®‰∏ãÈù¢ÁöÑÊñπÂºèÔºö 1234567let [foo, bar] = await Promise.all([foo(), bar()])// Âè¶Â§ñ‰∏ÄÁßçÂÜôÊ≥ïlet fooPromise = foo()let bar Promise = bar()let fooResult = await fooPromiselet barResult = await barPromise ÂÆûÁé∞ÂéüÁêÜÔºöÂ∞±ÊòØÂ∞Ü Generator ÂáΩÊï∞ÂíåËá™Âä®ÊâßË°åÂô®ÂåÖË£ÖÂú®‰∏ÄËµ∑Ôºö 12345678910async function fn(args) &#123; // ...&#125;// Á≠â‰ª∑‰∫éfunction fn(args) &#123; return spaw(function *() &#123; //... &#125;)&#125; Class ES6 ‰∏≠ÁöÑ class Êú¨Ë¥®‰∏äËøòÊòØ Function ÂØπË±°ÔºåÊâÄÊúâÂÆö‰πâÁöÑÊñ∞ÊñπÊ≥ïÈÉΩÊòØÂú® prototype ‰∏ä„ÄÇ‰ΩÜÊòØÔºåÁ±ªÂÜÖÈÉ®ÂÆö‰πâÁöÑÊâÄÊúâÊñπÊ≥ïÈÉΩÊòØ‰∏çÂèØÊûö‰∏æÁöÑÔºåËøôÁÇπÂíå ES5 ‰∏≠Áõ¥Êé•Áªô prototype ÊåÇËΩΩÊñπÊ≥ï‰∏çÂêå ÊØè‰∏™Á±ªÈÉΩÂøÖË¶ÅÊúâ constructorÔºåÂ¶ÇÊûúÊ≤°Êúâ‰ºöÊúâ‰∏Ä‰∏™Á©∫ÁöÑ constructor Â≠òÂú® Á±ªÂøÖÈ°ª‰ΩøÁî® new Ë∞ÉÁî®ÔºåÂê¶Âàô‰ºöÊä•Èîô this ÊåáÂêëÔºö Á±ªÁöÑÊñπÊ≥ïÂÜÖÈÉ®Â¶ÇÊûúÂê´Êúâ thisÔºåÈªòËÆ§ÊåáÂêëÁ±ªÁöÑÂÆû‰æã„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÂçïÁã¨‰ΩøÁî®ÔºåÂèØËÉΩÂá∫Èîô Ëß£ÂÜ≥ÊñπÊ≥ïÊúâ‰∏§ÁßçÔºåÂõ∫ÂÆö thisÔºö ÈááÁî® bind ‰ΩøÁî®ÁÆ≠Â§¥ÂáΩÊï∞ ÈùôÊÄÅÊñπÊ≥ïÔºö ‰ΩøÁî® static ÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ ‰∏ç‰ºöË¢´ÂÆû‰æãÁªßÊâøÂíåË∞ÉÁî®ÔºàËøôÁÇπÂíå Python ‰∏çÂêåÔºåÂú® Python ‰∏≠ static ÊñπÊ≥ïÂèØ‰ª•Ë¢´ÂÆû‰æãË∞ÉÁî®ÔºåËÄå‰∏çÈúÄË¶ÅÈÄöËøáÁ±ªÂêçÔºâ Â¶ÇÊûúÈùôÊÄÅÊñπÊ≥ï‰∏≠ÂåÖÂê´ thisÔºåÂÖ∂ÊåáÂêëÁöÑ‰∏çÊòØÂÆû‰æãÔºåËÄåÊòØÁ±ª ÈùôÊÄÅÊñπÊ≥ïÂèØ‰ª•ÂíåÈùûÈùôÊÄÅÊñπÊ≥ïÈáçÂêç Áà∂Á±ªÁöÑÈùôÊÄÅÊñπÊ≥ïÂèØ‰ª•Ë¢´Â≠êÁ±ªÁªßÊâø ÁªßÊâøÔºö ‰ΩøÁî® extends ÂÖ≥ÈîÆÂ≠ó ÂçïÁªßÊâø Â≠êÁ±ªÂøÖÈ°ªË¶ÅÂú®Ëá™ÂÆö‰πâÁöÑ constructor ÊñπÊ≥ï‰∏≠Ë∞ÉÁî® superÔºåËß¶ÂèëÁà∂Á±ªÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®ÂêéÔºåÊâçÂèØ‰ª•‰ΩøÁî® this Âà§Êñ≠‰∏Ä‰∏™Á±ªÊòØÂê¶ÁªßÊâøËá™Êüê‰∏™Á±ªÂÆû‰æãÔºöReflect.getPrototypeOf(ColoredPoint) === Point super ÂÖ≥ÈîÆÂ≠óÔºö ÂΩì‰ΩúÂáΩÊï∞‰ΩøÁî®Ôºå‰ª£Ë°®Ë∞ÉÁî®Áà∂Á±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºàÊ≥®ÊÑèÔºåÊ≠§Êó∂ super Ë∞ÉÁî®ÂêéËøîÂõûÁöÑÊòØÂü∫Á±ªÁöÑÂÆû‰æãÔºâÔºåÂè™ËÉΩÁî®‰∫éÊûÑÈÄ†ÂáΩÊï∞ ÂΩì‰ΩúÂØπË±°ÔºåÂú®ÊôÆÈÄöÊñπÊ≥ï‰∏≠ÊåáÂêëÁà∂Á±ªÁöÑÂéüÂûãÂØπË±°ÔºõÂú®ÈùôÊÄÅÊñπÊ≥ï‰∏≠ÔºåÊåáÂêëÁà∂Á±ª ES6 ËßÑÂÆöÔºåÂú®Â≠êÁ±ªÊôÆÈÄöÊñπÊ≥ï‰∏≠Ë∞ÉÁî® super.xxx() Êó∂ÔºåÊñπÊ≥ï‰∏≠ÁöÑ this ÊåáÂêëÁöÑÊòØÂΩìÂâçÁöÑÂ≠êÁ±ªÂÆû‰æã Âú®Â≠êÁ±ªÈùôÊÄÅÊñπÊ≥ï‰∏≠ÈÄöËøá super Ë∞ÉÁî®Áà∂Á±ªÊñπÊ≥ïÊó∂ÔºåÂÜÖÈÉ®ÁöÑ this ÊåáÂêëÂΩìÂâçÁöÑÂ≠êÁ±ªÔºåËÄåÈùûÂ≠êÁ±ªÁöÑÂÆû‰æã ES5 ÂéüÁîüÊûÑÈÄ†ÂáΩÊï∞Êó†Ê≥ïÁªßÊâøÔºàÂ≠êÁ±ªÊó†Ê≥ïËé∑ÂæóÂéüÁîüÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂÜÖÈÉ®Â±ûÊÄßÔºâ„ÄÇÂÖ∑‰ΩìÂéüÂõ†ÊòØ ES5 ‰∏≠ÔºåÊòØÊñ∞Âª∫Â≠êÁ±ªÁöÑÂÆû‰æãÂØπË±° thisÔºåÂÜçÂ∞ÜÁà∂Á±ªÁöÑÂ±ûÊÄßÊ∑ªÂä†ÈÉΩÂ≠êÁ±ª‰∏äÔºõËÄåÁà∂Á±ªÁöÑÂÜÖÈÉ®Â±ûÊÄßÊó†Ê≥ïËé∑ÂèñÔºåÊïÖÊó†Ê≥ïÁªßÊâøÔºö Boolean() Number() String() Array() Date() Function() RegExp() Error() Object() ES6 ÂàôÂÖÅËÆ∏ÁªßÊâø‰∏äËø∞ÂéüÁîüÊûÑÈÄ†ÂáΩÊï∞‰∫Ü„ÄÇÂéüÂõ†ÊòØ ES6 ‰∏≠ÔºåÊòØÂÖàÊñ∞Âª∫Áà∂Á±ªÁöÑÂÆû‰æãÂØπË±° thisÔºåÂÜçÁî®Â≠êÁ±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞‰øÆÈ•∞ thisÔºå‰ΩøÂæóÁà∂Á±ªÁöÑË°å‰∏∫ÂèØ‰ª•ÁªßÊâø Ê®°Âùó Êó©Êúü JS Êó†Ê®°ÂùóÁÆ°ÁêÜÊú∫Âà∂Ôºå‰∏çÂà©‰∫éÂºÄÂèëÂ§ßÂûãÈ°πÁõÆ Á§æÂå∫Êèê‰æõ‰∫Ü CommonJS Âíå AMD ‰∏§ÁßçÊñπÊ°àÔºåÂàÜÂà´Áî®‰∫éÊúçÂä°Á´ØÂíåÊµèËßàÂô®Á´ØÔºõ‰∫åËÄÖÈÉΩÊòØËøêË°åÊó∂Á°ÆÂÆöÊ®°Âùó‰æùËµñ ES6 Ê®°ÂùóÁöÑËÆæËÆ°ÊÄùÊÉ≥ÊòØÂ∞ΩÂèØËÉΩÈùôÊÄÅÂåñÔºåÁºñËØëÊó∂Á°ÆÂÆöÊ®°Âùó‰æùËµñÂÖ≥Á≥ªÂèäËæìÂÖ•ËæìÂá∫ÂèòÈáè import ‰ΩøÁî®Ê≥®ÊÑèÔºö import { foo } from &#39;mod&#39; ÂØºÂÖ•ÁöÑÂèòÈáèÈÉΩÊòØÂè™ËØªÁöÑ ÂØºÂÖ•ÁöÑË∑ØÂæÑÊó¢ÂèØ‰ª•ÊòØÁõ∏ÂØπË∑ØÂæÑÔºå‰πüÂèØ‰ª•ÊòØÁªùÂØπË∑ØÂæÑ .js ÂêéÁºÄÂèØÁúÅÁï• Â¶ÇÊûúÂè™ÊòØÊ®°ÂùóÂêçÁß∞ÔºåÊó†Ë∑ØÂæÑÂàôÈúÄË¶ÅÈÖçÁΩÆÊñá‰ª∂ÂëäÁü• JS ÂºïÊìéÂÖ∑‰ΩìÁöÑÊ®°Âùó‰ΩçÁΩÆ ÂÖ∑ÊúâÊèêÂçáÁöÑÊïàÊûú ÈùôÊÄÅÊâßË°åÔºåÊó†Ê≥ï‰ΩøÁî®Ë°®ËææÂºèÂíåÂèòÈáè Single Ê®°ÂºèÔºåÊúâÁºìÂ≠òÊú∫Âà∂ Êï¥‰ΩìÂä†ËΩΩÂ∏¶Âà´ÂêçÔºöimport * as mod from &#39;longNameMod&#39; export default Êú¨Ë¥®‰∏äÊòØËæìÂá∫‰∏Ä‰∏™Âè´ÂÅö default ÁöÑÂèòÈáèÂíåÊñπÊ≥ïÔºåÁÑ∂ÂêéÁ≥ªÁªüÂÖÅËÆ∏ÈáçÂêç Âú®‰∏ÄÊù°ËØ≠Âè•‰∏≠ÂêåÊó∂ËæìÂÖ•ÈªòËÆ§ÊñπÊ≥ïÂíåÂÖ∂ÂÆÉÊé•Âè£Ôºöimport _, { each } from &#39;lodash&#39; Â§çÂêàÂÜôÊ≥ïÔºöexport { foo, bar } from &#39;my_mod&#39;ÔºåÊ≥®ÊÑè‰∏ç‰ºöÂú®ÂΩìÂâçÊ®°ÂùóÂØºÂÖ•Ëøô‰∏§‰∏™ÂèòÈáèÔºåËÄåÂè™ÊòØËΩ¨ÂèëÂà∞Â§ñÈù¢‰∫Ü Ê®°ÂùóÂä†ËΩΩËßÑÂàô ÊµèËßàÂô®‰∏≠ÂèØ‰ΩøÁî®ÁöÑÊñπÂºèÔºö &lt;script src=&quot;path/to/foo.js&quot; [async/defer]/&gt; ES6 Ê®°ÂùóÂä†ËΩΩÔºàÈªòËÆ§Â∞±ÊòØ defer Ê®°ÂºèÔºâÔºö&lt;script type=&quot;module&quot; src=&quot;./mod.js&quot;/&gt; &lt;script type=&quot;model&quot;&gt; /ÂèØ‰ª•Ê≠£Â∏∏ÂÜô import xx from xxx ËøôÁßçÔºåÊ®°Âùó‰ΩúÁî®Âüü/` ES6 ‰∏é CommonJS ÂâçËÄÖËæìÂá∫ÊòØÂÄºÂºïÁî®ÔºåÂêéËÄÖËæìÂá∫ÁöÑÊòØÂÄºÊã∑Ë¥ù ÂâçËÄÖÊòØÁºñËØëÊó∂ËæìÂá∫Êé•Âè£ÔºåÂêéËÄÖÊòØËøêË°åÊó∂Âä†ËΩΩ ÂâçËÄÖÊòØÂä®ÊÄÅÂºïÁî®ÔºåÂêéËÄÖ‰ºöÁºìÂ≠òÂÄº Âú® Node ‰∏≠ import ÊòØÂºÇÊ≠•Âä†ËΩΩ ES6 Ê®°Âùó‰∏≠ÔºåÈ°∂Â±Ç this ÊåáÂêë undefinedÔºõÂêéËÄÖÂàôÊåáÂêëÂΩìÂâçÊ®°Âùó ‰∫åËøõÂà∂Êï∞ÁªÑÔºàÁ±ªÊï∞ÁªÑÔºâ ‰∫åËøõÂà∂Êï∞ÁªÑÁªÑÊàêÂØπË±°Ôºö ArrayBuffer ÂØπË±°Ôºö‰ª£Ë°®ÂÜÖÂ≠ò‰∏≠ÁöÑ‰∏ÄÊÆµ‰∫åËøõÂà∂Êï∞ÊçÆÔºåÂèØÈÄöËøá„ÄåËßÜÂõæ„ÄçÊìç‰Ωú TypedArray ËßÜÂõæÔºöÂèØÁî®‰∫éËØªÂÜôÁÆÄÂçïÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆÔºåÂåÖÊã¨ 9 ÁßçÁ±ªÂûãËßÜÂõæÔºö Int8 Uint8 Uint8CÔºöËá™Âä®ËøáÊª§Ê∫¢Âá∫ÔºåDataView ËßÜÂõæ‰∏çÊîØÊåÅ Int16 Uint16 Int32 Uint32 Float32 Float64 DateView ËßÜÂõæÔºöÂèØËá™ÂÆö‰πâÂ§çÂêàÊ†ºÂºèÁöÑËßÜÂõæÔºåËØªÂÜôÂ§çÊùÇÁ±ªÂûãÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆ ÂèÇËÄÉ ECMAScript 6 ÂÖ•Èó® ES5 Âíå ES6 ‰∏≠ÁöÑÁªßÊâø Babel]]></content>
      <categories>
        <category>ÂâçÁ´Ø</category>
      </categories>
      <tags>
        <tag>ÂâçÁ´Ø</tag>
        <tag>JavaScript</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScript ES5 ÂÖ•Èó®Á¨îËÆ∞]]></title>
    <url>%2F2019%2F06%2F23%2Fjavascript-es5-learning-note%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄÊúÄËøëÊäΩÁ©∫Â≠¶‰π†‰∫Ü‰∏ã JavaScript ËØ≠Ë®ÄÔºåÂΩìÁÑ∂ËøòÊòØÂÖ•Èó®Á∫ßÂà´ÁöÑÈÇ£Áßç„ÄÇÂ≠¶‰π†ËøáÁ®ã‰∏≠‰πüÂÅö‰∫Ü‰∫õÁ¨îËÆ∞„ÄÇÊÄªÁöÑÊù•ËØ¥ÔºåES5 Â≠¶ÂÆåÂêéÔºåÂØπ JavaScript Êú¨Ë∫´‰∫ÜËß£‰∫ÜÂ§ßÊ¶ÇÔºåËØ≠Ë®ÄÊú¨Ë∫´ËÆæËÆ°‰∏ä‰πüÂ≠òÂú®‰∏Ä‰∫õÂùëÔºåÊâÄ‰ª•Êê≠ÈÖç„ÄäJavaScript Á≤æÁ≤π„ÄãËøôÊú¨‰π¶ÁúãÁúãÔºåÂèØ‰ª•Ëøõ‰∏ÄÊ≠•‰∫ÜËß£ÊúâÂì™‰∫õÊØîËæÉÂ•ΩÁöÑÂÜôÊ≥ïÈÅøÂÖçË∏©Âùë„ÄÇ Âü∫Á°ÄÁØá Âà§Êñ≠ÊòØÂê¶‰∏∫Êú™ÂÆö‰πâÁöÑÂèòÈáèÔºö 123456789// ÈîôËØØÁöÑÂÜôÊ≥ïif (v) &#123;// ...&#125;// ReferenceError: v is not defined// Ê≠£Á°ÆÁöÑÂÜôÊ≥ïif (typeof v === "undefined") &#123;// ...&#125; typeof null ‰πüÊòØ object ‰ΩøÁî® instanceof ÂèØ‰ª•Âà§Êñ≠ÊòØÂê¶‰∏∫Êï∞ÁªÑÔºöv instanceof Array null Âíå undefined ÈùûÂ∏∏Á±ª‰ººÔºåÁîöËá≥ null == undefined ÈÉΩÊàêÁ´ãÔºå‰ΩÜÊòØÂÆÉ‰ª¨Âú® JavaScript ‰∏≠ËøòÊòØÊúâÂå∫Âà´Ôºö null Ë°®Á§∫Á©∫ÂØπË±°ÔºåÂèØËΩ¨Êç¢‰∏∫Êï∞ÂÄº 0ÔºöNumber(null) //0 undefined Ë°®Á§∫Ê≤°ÊúâÂÆö‰πâÁöÑÂéüÂßãÂÄºÔºåËΩ¨Êç¢‰∏∫Êï∞ÂÄº‰∏∫ NaN JS ‰∏≠ÊâÄÊúâÊï∞Â≠óÈÉΩÊòØ‰ª• 64 ‰ΩçÊµÆÁÇπÊï∞Â≠òÂÇ®ÁöÑÔºåÂØπ‰∫éÊüê‰∫õËøêÁÆóÔºåÂè™ËÉΩÁî®Êï¥Êï∞ÔºåJS ‰ºöÂ∞ÜÊï∞Â≠óËΩ¨Êç¢‰∏∫ 32 ‰ΩçÊï¥Êï∞ÂÜçÂÅöËøêÁÆó Êï∞ÂÄºËÆ°ÁÆóÊØîËæÉÈúÄË¶ÅÊ≥®ÊÑèÔºåÂõ†‰∏∫ÊµÆÁÇπÊï∞ÊúâÁ≤æÂ∫¶‰∏¢Â§±ÁöÑÈóÆÈ¢ò„ÄÇÊØîÂ¶ÇÔºö0.3-0.2 !== 0.2-0.„ÄÇ JavaScript ÂØπ 15 ‰ΩçÁöÑÂçÅËøõÂà∂Êï∞ÈÉΩÂèØ‰ª•Á≤æÁ°ÆÂ§ÑÁêÜ„ÄÇ ÂØπ‰∫éÁ†ÅÁÇπÂú® U+10000 Âà∞ U+10FFFF ‰πãÈó¥ÁöÑÂ≠óÁ¨¶ÔºåJavaScript ÊÄªÊòØËÆ§‰∏∫ÂÆÉ‰ª¨ÊòØ‰∏§‰∏™Â≠óÁ¨¶Ôºàlength Â±ûÊÄß‰∏∫ 2Ôºâ base64 ËΩ¨Êç¢Ôºöbtoa, atob Â±ûÊÄßÂà†Èô§ deleteÔºö ‰∏çËÉΩÂà†Èô§ÂØπË±°Êú¨Ë∫´ Êó†ËÆ∫Â±ûÊÄßÊòØÂê¶Â≠òÂú®ÔºåÂà†Èô§ÊÄª‰ºöËøîÂõû true ÁªßÊâøÁöÑÂ±ûÊÄß‰∏çËÉΩÂà†Èô§ÔºåËôΩÁÑ∂‰πü‰ºöËøîÂõû true ‰ΩøÁî® defineProperty ÂÆö‰πâÁöÑÊ†áËÆ∞‰∏∫‰∏çÂèØÂà†Èô§ÁöÑÂ±ûÊÄßÔºådelete ËøîÂõû false ÂØπË±°Â±ûÊÄßÂ≠òÂú®Êñ∞Âà§Êñ≠Ôºö in ÂèØ‰ª•Âà§Êñ≠Ôºå‰ΩÜÊòØ‰∏çËÉΩÂå∫ÂàÜÊòØÁªßÊâøÁöÑËøòÊòØËá™Ë∫´Êã•ÊúâÁöÑ hasOwnProperty ÂèØ‰ª•Âº•Ë°•‰∏äËø∞Áº∫ÁÇπ for...in Áî®‰∫éÈÅçÂéÜÂØπË±°ÁöÑÂ±ûÊÄßÔºö ÂØπË±°Â±ûÊÄßÂøÖÈ°ªÊòØÂèØÈÅçÂéÜÁöÑÔºàenumerableÔºâ ÂØπ‰∫éÁªßÊâøÁöÑÂ±ûÊÄß‰πü‰ºöË¢´ÈÅçÂéÜÂà∞ÔºåÂ¶ÇÊûú‰∏çÊÉ≥Ë¶ÅÔºåÂèØ‰ª•Êê≠ÈÖç hasOwnProperty ËøáÊª§Êéâ ‰∏ÄËà¨‰πüÂèØ‰ª•‰ΩøÁî® Object.keys(o).map(k =&gt; { /*do stuff*/ } ÂáΩÊï∞Â£∞ÊòéÂá†ÁßçÊñπÂºèÔºö function func_name(params) {} let say = function (word) {}ÔºåÂåøÂêçÂáΩÊï∞ let say = function f(word) { console.log(f) }ÔºåÊ≥®ÊÑèÔºåËøôÈáåÁöÑÂáΩÊï∞Âêç f Âè™ÂèØ‰ª•Âú®ËØ•ÂáΩÊï∞ÂÜÖÈÉ®ËÆøÈóÆÂà∞ÔºåÊúâ‰∏§‰∏™Â•ΩÂ§ÑÔºö ÈÅçÂéÜÂú®ÂáΩÊï∞ÂÜÖÈÉ®Ë∞ÉÁî®Ëá™Â∑± Êñπ‰æøË∞ÉËØïÔºåÊéíÈîôÊó∂ÁúãÂà∞ÂÖ∑‰ΩìÁöÑÂáΩÊï∞ÂêçÔºåËÄå‰∏çÂÜçÊòØÂåøÂêçÂáΩÊï∞ ‰ΩøÁî® Function ÊûÑÈÄ†ÂáΩÊï∞ÔºåÊ≥®ÊÑèÔºåËøîÂõûÁöÑÂáΩÊï∞ÁöÑ type ÁöÑÁ°Æ‰πüÊòØ functionÔºà‰∏çÊé®Ëçê‰ΩøÁî®Ôºâ JS ÂºïÊìéÂ∞ÜÂáΩÊï∞ÂêçËßÜ‰∏∫ÂèòÈáèÂêçÔºåÊâÄ‰ª•‰πüÂ≠òÂú®„ÄåÂáΩÊï∞ÂêçÊèêÂçá„ÄçÁöÑÊïàÊûúÔºåÂõ†Ê≠§ÔºåÂú®ÂáΩÊï∞Â£∞Êòé‰ΩçÁΩÆÁöÑ‰∏äÊñπË∞ÉÁî®‰πü‰∏ç‰ºöÂá∫Èîô ÂáΩÊï∞ÊâßË°åÊó∂ÊâÄÂú®ÁöÑ‰ΩúÁî®ÂüüÔºåÊòØÂÆö‰πâÊó∂ÁöÑ‰ΩúÁî®ÂüüÔºåËÄå‰∏çÊòØË∞ÉÁî®Êó∂ÊâÄÂú®ÁöÑ‰ΩúÁî®Âüü arguments ÂØπË±°ÂèØ‰ª•Ëé∑ÂèñÂà∞ÂáΩÊï∞‰º†ÂÖ•ÁöÑÂèÇÊï∞ÂÄºÔºö ËØ•ÂØπË±°‰∏çÊòØÊï∞ÁªÑÔºåÊâÄ‰ª•ÂÉè slice, forEach ÊñπÊ≥ïÂ∞±‰∏çÂ≠òÂú® Â¶ÇÊûúÊÉ≥Ë¶ÅËΩ¨Êç¢ÊàêÊï∞ÁªÑÔºå‰∏ÄÁßçÊñπÂºèÂ∞±ÊòØÔºölet args = Array.prototype.slice.call(arguments) Âú®‰∏•Ê†ºÊ®°Âºè‰∏ãÔºå‰∏çËÉΩÈÄöËøá arguments.callee Ë∞ÉÁî®ÂáΩÊï∞Ëá™Ë∫´ÔºõÂØπ arguments ÁöÑ‰øÆÊîπ‰∏ç‰ºöÂØπÂéüÂßã‰º†ÂÖ•ÁöÑÂèÇÊï∞‰∫ßÁîüÂΩ±Âìç Á´ãÂç≥Ë∞ÉÁî®ÂáΩÊï∞ÁöÑ‰∏§ÁßçÊñπÂºèÔºö (function () {console.log(10)})() (function () {console.log(10)}()) Êï∞ÁªÑÊòØÁâπÊÆäÁöÑÂØπË±°ÔºåÂÖ∂ÈîÆÂêçÂ∞±ÊòØ‰∏ÄÁªÑÊï∞Â≠óÔºåÂèØ‰ª•ÈÄöËøá Object.keys ËøîÂõûÊâÄÊúâÁöÑÈîÆÂêç Êï∞ÁªÑÁöÑ length Â±ûÊÄß‰∏çËøáÊª§Á©∫‰Ωç„ÄÇÊâÄ‰ª•Ôºå‰ΩøÁî® length Â±ûÊÄßËøõË°åÊï∞ÁªÑÈÅçÂéÜÔºå‰∏ÄÂÆöË¶ÅÈùûÂ∏∏Â∞èÂøÉ„ÄÇÂ¶Ç delete arr[3] ‰πãÂêéÔºå‰æùÁÑ∂‰∏ç‰ºöÂΩ±Âìç lengthÔºåÂè™ÊòØ‰∫ßÁîü‰∫Ü‰∏Ä‰∏™Á©∫‰ΩçÔºõÊâÄ‰ª•ÂèØ‰ª•‰ΩøÁî® forEach Êõø‰ª£ÔºåÂèØ‰ª•ËøáÊª§Á©∫‰ΩçÔºà‰ΩÜÁ©∫‰Ωç‰∏çÁ≠âÂêå‰∫é undefinedÔºâ„ÄÇ‰πüÂ∞±ÊòØËØ¥ var a = [, , ,] Ë°®Á§∫ÁöÑÊØè‰∏™‰ΩçÁΩÆÈÉΩÊòØÁ©∫‰ΩçÔºõvar a = [undefined, undefined] ÂàôÊòØÂèØÈÅçÂéÜÂà∞ÁöÑÔºåÂè™ÊòØÂÄº‰∏∫ undefined ËÄåÂ∑≤ Á±ª‰ººÊï∞ÁªÑÁöÑÊï∞ÁªÑÔºàArray like objectÔºâÔºö ÂØπË±°Êã•ÊúâÁ±ª‰ºº‰∏ãÈù¢ÁöÑÂÆö‰πâÔºö12345678// ÊâÄÊúâÁöÑÈîÆÈÉΩÊòØÊï∞Â≠ó// Â∏¶Êúâ length Â±ûÊÄßvar obj = &#123; 0: &apos;a&apos;, 1: &apos;b&apos;, 2: &apos;c&apos;, length: 3&#125;; ÂáΩÊï∞ÁöÑ argumentsÔºåÂ≠óÁ¨¶‰∏≤ÔºåËøòÊúâÂ§öÊï∞ÁöÑ DOM ÂÖÉÁ¥†ÈÉΩÊòØ array-like ÁöÑÂØπË±°„ÄÇÂèØ‰ª•‰ΩøÁî® Array.prototype.slice.call(xx) ËΩ¨Êç¢ÊàêÊï∞ÁªÑ void ËøêÁÆóÁ¨¶Ôºö‰ΩúÁî®ÊòØÊâßË°å‰∏Ä‰∏™Ë°®ËææÂºèÔºå‰∏çËøîÂõû‰ªª‰ΩïÂÄºÔºàËøîÂõû undefinedÔºâÔºö Êé®ËçêÁî®Ê≥ïÔºövoid (x = 5) ‰ΩøÁî®Âú∫ÊôØÔºåÈò≤Ê≠¢ÁΩëÈ°µË∑≥ËΩ¨Ôºö&lt;a href=&quot;javascript: void f()&quot;&gt;ÊñáÂ≠ó&lt;/a&gt; ÈÄóÂè∑ËøêÁÆóÁ¨¶ËøîÂõûÊúÄÂêé‰∏Ä‰∏™ÂÄº &#39;a&#39;, &#39;b&#39; // &quot;b&quot; ËØ≠Ê≥ï‰∏ìÈ¢ò Number Áî®‰∫éÂº∫Âà∂ËΩ¨Êç¢ÊàêÊï∞ÂÄºÁ±ªÂûãÔºå‰∏é parseInt Áõ∏ÊØîÔºåËΩ¨Êç¢Ë¶Å‰∏•Ê†ºÂæóÂ§öÔºåÂè™Ë¶ÅÈÅáÂà∞‰∏çÂèØËΩ¨Êç¢‰∏∫Êï∞ÂÄºÁöÑÂ≠óÁ¨¶ÔºåËΩ¨Êç¢Â∞±Â§±Ë¥• Boolean ÊâÄÊúâÂØπË±°ÔºàÂê´Á©∫ÂØπË±°ÔºâÁöÑËΩ¨Êç¢ÁªìÊûúÈÉΩÊòØ trueÔºåÂ¶Ç Boolean(new Boolean(false)) // true JS ‰∏≠ÊâÄÊúâÊäõÂá∫ÁöÑÈîôËØØÈÉΩÊòØ new Error(xx) Âá∫Êù•ÁöÑÔºåError ÁöÑÂü∫Êú¨Â±ûÊÄßÔºö messageÔºöÈîôËØØÊèêÁ§∫‰ø°ÊÅØÔºàÂøÖÈ°ªÔºâ nameÔºöÈîôËØØÂêçÁß∞ÔºàÈùûÊ†áÂáÜÂ±ûÊÄßÔºåÁúã JS ÂºïÊìéÔºâ stackÔºöÈîôËØØÁöÑÂ†ÜÊ†àÔºàÈùûÊ†áÂáÜÂ±ûÊÄßÔºåÁúã JS ÂºïÊìéÔºâ Ê¥æÁîüÈîôËØØÂØπË±°Ôºö SyntaxError ReferenceError RangeErrorÔºöÊï∞ÁªÑÈïøÂ∫¶‰∏∫Ë¥üÊï∞ÔºõNumber ÂØπË±°ÁöÑÊñπÊ≥ïÂèÇÊï∞Ë∂ÖÂá∫ËåÉÂõ¥ÔºõÂáΩÊï∞Â†ÜÊ†àË∂ÖËøáÊúÄÂ§ßÂÄº TypeError URIError throw ÂèØ‰ª•ÊäõÂá∫‰ªªÊÑèÁ±ªÂûãÁöÑÂÄºÔºåÂπ∂‰∏îÂú® throw ÁöÑ‰ΩçÁΩÆÂ∞±‰∏≠Êñ≠‰∫ÜÊâßË°åÔºåJS ÂºïÊìé‰ºöÊé•Êî∂Âà∞ÊäõÂá∫ÁöÑ‰ø°ÊÅØ console ‰∏Ä‰∫õÈáçË¶ÅÁöÑÊñπÊ≥ïÔºö info error debug warn table log dirÔºöÁ±ª‰ºº inspect ÂèØ‰ª•Âú®ÈúÄË¶ÅÁöÑÂú∞ÊñπÂä† debugger ‰Ωú‰∏∫Êñ≠ÁÇπÔºåÁî®‰∫éË∞ÉËØï Ê†áÂáÜÂ∫ì Object() ÂáΩÊï∞ÂèØ‰ª•Â∞Ü‰ªªÊÑèÂÄºËΩ¨Êç¢ÊàêÂØπË±°ÔºåÂ¶ÇÊûú‰º†ÂÖ•ÁöÑÂèÇÊï∞ÊòØÂéüÂßãÁ±ªÂûãÂÄºÔºåÂàô‰ºöËΩ¨Êç¢ÊàêÂÖ∂ÂåÖË£ÖÂØπË±°ÁöÑÂÆû‰æãÔºõÂ¶ÇÊûúÂÖ•ÂèÇÂ∑≤ÁªèÊòØÂØπË±°‰∫ÜÔºåÂàô‰∏ç‰ºöËΩ¨Êç¢ ÂèØ‰ª•Âà©Áî®‰∏äËø∞ÁâπÊÄßÂà§Êñ≠ÂèòÈáèÊòØÂê¶‰∏∫ÂØπË±°Ôºövalue === Object(value) Object.keys() ÈùôÊÄÅÊñπÊ≥ïÂèØ‰ª•ËøîÂõûÂØπË±°ÁöÑÊâÄÊúâÂ±ûÊÄßÂêçÔºàÈùûÁªßÊâøÔºå‰∏îÂèØÊûö‰∏æÔºâÔºåËØ•ÈÅçÂéÜÊñπÊ≥ï‰ºòÂÖà Object.getOwnPropertyNames() ÈùôÊÄÅÊñπÊ≥ïÂàô‰ºöËøîÂõûÂØπË±°ÁöÑÊâÄÊúâÂ±ûÊÄßÂêçÔºàÂåÖÊã¨‰∏çÂèØÊûö‰∏æÁöÑÔºâ Object.prototype.xxx ÂÆû‰æãÊñπÊ≥ïÔºö valueOf()ÔºöËøîÂõûÂØπË±°ÁöÑÂÄºÔºåÈªòËÆ§‰∏∫Ëá™Ë∫´ toString()ÔºöËøîÂõûÂØπË±°ÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ Object.prototype.toString.call(value) ËøîÂõû [object &lt;TypeName&gt;]ÔºåÁ¨¨‰∫å‰∏™ÂÖÉÁ¥†ÂèØ‰ª•ÂæóÂà∞ÂÖ∑‰ΩìÁöÑÂÄºÁ±ªÂûã JS Êèê‰æõ‰∫ÜÂÜÖÈÉ®Êï∞ÊçÆÁªìÊûÑÔºåÊèèËø∞ÂØπË±°ÁöÑÂ±ûÊÄßÔºåÊéßÂà∂ÂÖ∂Ë°å‰∏∫ÔºåÁ§∫‰æãÂ¶Ç‰∏ãÔºö 12345678&#123; value: 123, writeable: false, enumerable: true, configurable: false, get: undefined, set: undefined&#125; Object.getOwnPropertyDescriptor(obj, &#39;a&#39;) ÂèØ‰ª•Ëé∑ÂèñÂ±ûÊÄßÊèèËø∞ÂØπË±° ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúÂ±ûÊÄßË¢´ËÆæÁΩÆ‰∏∫ writeable=false ÂêéÔºåÁªßÊâøËÄÖÂ∞ÜÊó†Ê≥ïÈáçÊñ∞ÂÆö‰πâÂêåÂêçÂ±ûÊÄßÔºõÈô§ÈùûÂèØ‰ª•ÈÄöËøáË¶ÜÁõñÂ±ûÊÄßÊèèËø∞ÂØπË±°Êù•ÁªïËøáÈôêÂà∂ Â¶ÇÊûúÂ±ûÊÄßÁöÑ enumerable ‰∏∫ falseÔºåÂàôÊúâ‰∏âÁßçÊìç‰Ωú‰∏çËÉΩÂèñÂà∞ËØ•Â±ûÊÄßÔºö for...in Object.keysÔºöÊó†Ê≥ïËé∑ÂèñÂØπË±°ÁªßÊâøÁöÑÂ±ûÊÄßÔºåÊ≠§Êó∂ÂèØ‰ª•Áî® getOwnPropertyNames JSON.stringify configurableÔºöÊéßÂà∂ÊòØÂê¶ÂèØ‰ª•‰øÆÊîπÊèèËø∞Á¨¶Â±ûÊÄßÔºåÂπ∂‰∏îÂΩì configurable=fasle Êó∂ÔºåÊó†Ê≥ïÂà†Èô§ Âà§Êñ≠ÂØπË±°ÊòØÂê¶‰∏∫Êï∞ÁªÑÔºöArray.isArray Èù¢ÂêëÂØπË±° JavaScript ‰∏≠ÁöÑÂØπË±°‰ΩìÁ≥ªÔºåÊòØÂü∫‰∫éÊûÑÈÄ†ÂáΩÊï∞ constructor ÂíåÂéüÂûãÈìæ prototype ÁöÑ„ÄÇÊûÑÈÄ†ÂáΩÊï∞Â∞±ÊòØÂØπË±°ÁîüÊàêÁöÑ„ÄåÊ®°Êùø„Äç ÊûÑÈÄ†ÂáΩÊï∞ÁâπÁÇπÔºö ÂÜÖÈÉ®‰ΩøÁî® thisÔºåÊåáÂêëÁîüÊàêÁöÑÂØπË±°ÂÆû‰æã ÈúÄË¶ÅÈÖçÂêà new ÂÖ≥ÈîÆÂ≠ó new Âπ≤‰∫Ü‰ªÄ‰πàÔºö Êñ∞Âª∫Á©∫ÂØπË±°Ôºå‰Ωú‰∏∫Ë¶ÅËøîÂõûÁöÑÂØπË±° Â∞ÜÁ©∫ÂØπË±°ÁöÑ __proto__ ÊåáÂêëÊûÑÈÄ†ÂáΩÊï∞ÁöÑ prototype Â∞ÜËØ•Á©∫ÂØπË±°ËµãÂÄºÁªôÂáΩÊï∞ÂÜÖÈÉ®ÁöÑ this ÂÖ≥ÈîÆÂ≠ó ÊâßË°åÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÁöÑ‰ª£Á†Å ÂáΩÊï∞ÂÜÖÈÉ®ÂèØ‰ΩøÁî® new.target Âà§Êñ≠ÊòØÂê¶‰ΩøÁî®‰∫Ü new Ë∞ÉÁî®ÊûÑÈÄ†ÂáΩÊï∞ this Âú®ÂáΩÊï∞‰ΩìÂÜÖÈÉ®ÔºåÊåáÂêëÂΩìÂâçÁöÑËøêË°åÁéØÂ¢É Â¶ÇÊûú this ÊâÄÂú®ÁöÑÊñπÊ≥ï‰∏çÂú®ÂØπË±°ÁöÑÁ¨¨‰∏ÄÂ±ÇÔºåËøôÊó∂ this Âè™ÊòØÊåáÂêëÂΩìÂâç‰∏ÄÂ±ÇÁöÑÂØπË±°ÔºåËÄå‰∏ç‰ºöÁªßÊâøÊõ¥‰∏äÈù¢ÁöÑÂ±Ç ÂáΩÊï∞ÂÆû‰æãÁöÑ call ÊñπÊ≥ïÂèØ‰ª•ÊåáÂÆö this ÊåáÂêëÁöÑÁéØÂ¢ÉÔºåÊ≠§Â§ñÂèØ‰ª•Ë∑≥ËøáÂêåÂêçÂáΩÊï∞Ë¶ÜÁõñÔºåÁõ¥Êé•‰ΩøÁî®ÂéüÂßãÁöÑÂáΩÊï∞Ôºõappy Âíå call Á±ª‰ººÔºåÂè™ÊòØÊé•Êî∂‰∏Ä‰∏™ÂàóË°®ÂèÇÊï∞ bind ‰πüÂèØ‰ª•ÁªëÂÆöÂØπË±°ÔºåÂèòÊç¢ this ÊåáÂêë JS ÁªßÊâøÊú∫Âà∂ÁöÑÊ†∏ÂøÉÔºöÂéüÂûã‰∏≠ÊâÄÊúâÂ±ûÊÄßÂíåÊñπÊ≥ïÈÉΩÂèØ‰ª•Ë¢´Â§ö‰∏™ÂÆû‰æãÂÖ±‰∫´ instanceof ËøêÁÆóÁ¨¶Ôºö Âè™ËÉΩÁî®‰∫éÈùûÂéüÂßãÁ±ªÂûãÂØπË±° ÂØπË±°ÁöÑÂéüÂûã prototype Âùá‰∏∫ null Êó∂Â§±Êïà undefined instanceof Object Âíå null instanceof Object Âùá‰∏∫ false ÂºÇÊ≠• Promise ÁöÑÂõûË∞ÉÂáΩÊï∞‰∏çÊòØÊ≠£Â∏∏ÁöÑÂºÇÊ≠•‰ªªÂä°ÔºåËÄåÊòØÂæÆ‰ªªÂä°„ÄÇÂâçËÄÖ‰ºöËøΩÂä†Âà∞‰∏ã‰∏ÄËΩÆ‰∫ã‰ª∂Âæ™ÁéØÔºåËÄåÂæÆ‰ªªÂä°ÂàôËøΩÂä†Âà∞Êú¨ËΩÆ‰∫ã‰ª∂Âæ™ÁéØ„ÄÇÊâÄ‰ª•ÂæÆ‰ªªÂä°ÊâßË°åË¶ÅÊó©‰∫éÂ∏∏ËßÑÂºÇÊ≠•‰ªªÂä°„ÄÇ setTimeout(f, 0) ÂèØ‰ª•ËÆ©‰ªªÂä°Âú®‰∏ãËΩÆ‰∫ã‰ª∂Âæ™ÁéØ‰∏≠ÊâßË°å DOM ÂÖÉÁ¥†ÁöÑ hidden Â±ûÊÄßÂè™ÊúâÂú® CSS Ê≤°ÊúâÊòéÁ°ÆËÆæÂÆöÂΩìÂâçÂÖÉÁ¥†ÁöÑÂèØËßÅÊÄßÊó∂Êâç‰ºöÁîüÊïàÔºå‰πüÂ∞±ÊòØ CSS ÁöÑ display Áî®‰∫éÂèØËßÅÊÄßÊéßÂà∂ÁöÑ‰ºòÂÖàÁ∫ßÈ´ò‰∫éÂÖÉÁ¥†Ëá™Ë∫´ÁöÑ hidden Â±ûÊÄß ÁΩëÈ°µÂÖÉÁ¥†ÂèØ‰ª•Ëá™ÂÆö‰πâ data-* Â±ûÊÄßÔºåÊ∑ªÂä†Êï∞ÊçÆÔºåÂèØ‰ª•‰ΩøÁî® .dataset ËøîÂõûÊï∞ÊçÆÂØπË±° ‰∏∫Èò≤Ê≠¢ÈÅ≠ÂèóÊîªÂáªÔºåÂØπ‰∫éÊñáÊú¨ÂÜÖÂÆπÔºåÂª∫ËÆÆ‰ΩøÁî® textContent Êõø‰ª£ innerHTML ËÆæÁΩÆÊñáÊú¨ CSS CSS Ë¥üË¥£ËßÜËßâÊïàÊûúÔºõJavaScript Ë¥üË¥£‰∏éÁî®Êà∑ÁöÑË°å‰∏∫‰∫íÂä® ÂèØ‰ª•ÈÄöËøá style Â±ûÊÄßËÆæÁΩÆ CSS Ê†∑Âºè CSSStyleDeclaration ÂØπË±°Áî®‰∫éÊìç‰ΩúÂÖÉÁ¥†ÁöÑÊ†∑ÂºèÔºåÂåÖÊã¨Ôºö ÂÖÉÁ¥†ÁöÑ style Â±ûÊÄß CSSStyle ÂÆû‰æãÁöÑ style Â±ûÊÄß window.getComputedStyle() ËøîÂõûÂÄºÔºàÂÖÉÁ¥†ÁöÑÂÖ®ÈÉ®Ê†∑ÂºèÈúÄË¶ÅÂÆÉËé∑ÂèñÂà∞Ôºâ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåCSSStyleDeclaration ÁöÑÂ±ûÊÄßÂêçÂíåÂéüÁîü CSS ËøòÊòØÊúâÁÇπÂå∫Âà´ÔºåÂëΩÂêçÈúÄË¶Å‰øÆÊîπÔºåÂ¶Ç backgroud-color -&gt; backgroudColorÔºõÂ¶ÇÊûúÊòØ JS ÁöÑ‰øùÁïôÂ≠óÔºåÂàôÈúÄË¶ÅÂä†‰∏ä css ÂâçÁºÄ Â±ûÊÄßÊìç‰ΩúÔºö setProperty removeProperty DOM ÂèòÂä®ÁõëÊéß Mutation Observer APIÔºöDOM ÁöÑÂèòÂä®ÔºàËäÇÁÇπÂ¢ûÂáè„ÄÅÂ±ûÊÄßÂèòÂä®„ÄÅÊñáÊú¨ÂÜÖÂÆπÂèòÂä®ÔºâÔºåÈÉΩÂèØ‰ª•ÈÄöËøáËØ• API Ëé∑ÂæóÈÄöÁü• ‰∏é‰∫ã‰ª∂ÁöÑÂå∫Âà´Ôºö MO ‰∫ã‰ª∂ÊòØÂú® DOM ÂèòÂä®Êó∂ÂºÇÊ≠•Ëß¶ÂèëÔºåÂπ∂‰∏îÊòØÁ≠âÂà∞ÂΩìÂâçÊâÄÊúâ DOM Êìç‰ΩúÈÉΩÁªìÊùüÊâçËß¶Âèë ‰∫ã‰ª∂ÂàôÊòØÂêåÊ≠•Ëß¶ÂèëÔºåDOM ÂèòÂä®Á´ãÂàªËß¶Âèë ÊÄªÁªìÊù•ËØ¥Ôºö Á≠âÂæÖÊâÄÊúâËÑöÊú¨‰ªªÂä°ÂÆåÊàêÂêéÔºåÊâç‰ºöËß¶Âèë Êää DOM ÂèòÂä®ËÆ∞ÂΩïÂ∞ÅË£ÖÊàê‰∏Ä‰∏™Êï∞ÁªÑÂ§ÑÁêÜÔºåËÄåÈùûÊØèÊù°ÈÉΩÂàÜÂà´Â§ÑÁêÜ Êó¢ÂèØ‰ª•ËßÇÂØü DOM ÊâÄÊúâÁ±ªÂûãÂèòÂä®Ôºå‰πüÂèØ‰ª•ÊåáÂÆöËßÇÂØüÊüêÁ±ªÂèòÂä® Áî®Ê≥ïÔºö 12345const observer = new MutationObserver((mutations, observer) =&gt; &#123;&#125;)// ÊåáÂÆöÁõëÂê¨ÁöÑÂÖÉÁ¥†ÂíåÁ±ªÂûãconst article = document.querySelector("article")observer.observe(article, &#123;'childList': true, 'attritubes': true&#125;) ‰∫ã‰ª∂ DOM ÁöÑ‰∫ã‰ª∂Êìç‰ΩúÔºàÁõëÂê¨„ÄÅËß¶ÂèëÔºâÔºåÈÉΩÊòØ EventTarget ‰∏≠ÂÆö‰πâÁöÑ„ÄÇ‰∏ªË¶ÅÊé•Âè£Â¶Ç‰∏ãÔºö addEventListener removeEventListener dispatchEvent HTML ‰∏≠ÂèØ‰ª•Áõ¥Êé•Âú®ÂÖÉÁ¥†Â±ûÊÄß‰∏≠ÔºåÂÆö‰πâÊüê‰∫õÁõëÂê¨‰ª£Á†Å„ÄÇÂ¶Ç onloadÔºåËøôÁ±ªÁõëÂê¨‰ª£Á†ÅÂè™Âú®ÂÜíÊ≥°Èò∂ÊÆµËß¶Âèë ÂÖÉÁ¥†ÁöÑ onclick Â±ûÊÄßÔºå‰πüÂèØ‰ª•ÊåáÂÆöÁõëÂê¨ÂáΩÊï∞ÔºåÂπ∂‰∏îÂú®ÂÜíÊ≥°Èò∂ÊÆµËß¶Âèë ‰∫ã‰ª∂‰º†Êí≠Ôºö Á¨¨‰∏ÄÈò∂ÊÆµÔºö‰ªé window ÂØπË±°‰º†ÂØºÂà∞ÁõÆÊ†áËäÇÁÇπÔºà‰∏äÂ±Ç‰º†Âà∞Â∫ïÂ±ÇÔºâÔºåÂç≥‰∏∫„ÄåÊçïËé∑Èò∂ÊÆµ„ÄçÔºàcapture phaseÔºâ Á¨¨‰∫åÈò∂ÊÆµÔºö‰ªéÁõÆÊ†áËäÇÁÇπ‰∏äËß¶ÂèëÔºåÂè´ÂÅö„ÄåÁõÆÊ†áÈò∂ÊÆµ„ÄçÔºàtarget phaseÔºâ Á¨¨‰∏âÈò∂ÊÆµÔºö‰ªéÁõÆÊ†áËäÇÁÇπ‰º†ÂØºÂõû window ÂØπË±°Ôºà‰ªéÂ∫ïÂ±Ç‰º†Âõû‰∏äÂ±ÇÔºâÔºåÂè´ÂÅö„ÄåÂÜíÊ≥°Èò∂ÊÆµ„ÄçÔºàbubbling phaseÔºâ e.StopPropagation ÂàôÊòØ‰ºöÈòªÊ≠¢‰∫ã‰ª∂‰º†Êí≠Ôºå‰ΩÜ‰∏ç‰ºöÂ§ÑÁêÜÂÖ∂ÂÆÉÁöÑÁõëÂê¨‰∫ã‰ª∂ e.stopImmediatePropagation ‰ºöÂΩªÂ∫ïÂèñÊ∂àÂêåÂêçÁöÑÊó∂Èó¥ ÁΩëÈ°µ‰∏≠Èô§‰∫ÜÂÖÉÁ¥†ËäÇÁÇπÈªòËÆ§‰∏çÂèØ‰ª•ÊãñÊãâÔºåÂÖ∂ÂÆÉÔºàÂõæÁâá„ÄÅÈìæÊé•„ÄÅÈÄâ‰∏≠ÁöÑÊñáÂ≠óÔºâÈÉΩÊòØÂèØ‰ª•ÊãñÊãâÁöÑÔºåÂèØÈÄöËøáÂ∞ÜÂÖÉÁ¥†ËäÇÁÇπÁöÑ draggable Â±ûÊÄßËÆæÁΩÆ‰∏∫ true ÂÆûÁé∞ ‰∏ÄÊó¶Êüê‰∏™ÂÖÉÁ¥†ËäÇÁÇπË¢´ËÆæÁΩÆ‰∏∫ÂèØÊãñÊãΩÂêéÔºåÂ∞±Êó†Ê≥ïÈÄöËøáÈº†Ê†áÈÄâ‰∏≠ËäÇÁÇπÂÜÖÈÉ®ÁöÑÊñáÂ≠óÊàñÂ≠êËäÇÁÇπ‰∫Ü ÊµèËßàÂô®ÂØπË±° ÂµåÂÖ•ËÑöÊú¨Êó∂Ôºå&lt;script&gt; ÂÖÉÁ¥†ÁöÑ type Â±ûÊÄßÈªòËÆ§‰∏∫ text/javascriptÔºåÊñ∞ÊµèËßàÂô®ÂèØ‰ª•ÂÜôÊàê application/javascript„ÄÇÂΩìÁÑ∂Ôºå‰πüÂèØ‰ª•‰∏çÂ°´ÂÜô„ÄÇÂè¶Â§ñÔºåintegrity Â±ûÊÄßÂèØ‰ª•ËÆæÁΩÆËÑöÊú¨ÁöÑ SHA256 Á≠æÂêçÔºåÂØπ‰∫éÈùûÊ≥ïËÑöÊú¨ÊµèËßàÂô®‰ºöÊãíÁªùÂä†ËΩΩ async Âíå defer ÂêåÊó∂Â≠òÂú®ÔºåÂàôÂêéËÄÖ‰∏çËµ∑‰ΩúÁî® window.navigator ÊåáÂêëÂåÖÂê´ÊµèËßàÂô®ÂíåÁ≥ªÁªü‰ø°ÊÅØÁöÑ Navigator ÂØπË±°ÔºåÂèØ‰ª•‰∫ÜËß£Áî®Êà∑ÁöÑÁéØÂ¢É‰ø°ÊÅØ Cookie ÊòØÊúçÂä°Âô®‰øùÂ≠òÂú®ÊµèËßàÂô®ÁöÑ‰∏ÄÂ∞èÊÆµÊñáÊú¨‰ø°ÊÅØÔºåÊØè‰∏™ Cookie ÁöÑÂ§ßÂ∞è‰∏ÄËà¨‰∏çË∂ÖËøá 4KBÔºåÊØèÊ¨°ËØ∑Ê±ÇÊúçÂä°Âô®ÔºåÈÉΩ‰ºöÈôÑÂ∏¶ËØ•‰ø°ÊÅØ Cookie ÂåÖÊã¨ÁöÑ‰ø°ÊÅØÔºö ÂêçÂ≠ó ÂÄº Âà∞ÊúüÊó∂Èó¥ ÊâÄÂ±ûÂüüÂêçÔºàÈªòËÆ§ÂΩìÂâçÂüüÂêçÔºâ ÁîüÊïàÁöÑË∑ØÂæÑÔºàÈªòËÆ§ÂΩìÂâçÁΩëÁ´ôÔºâ ÊµèËßàÂô®ÁöÑÂÆâÂÖ®Âü∫Á°ÄÊòØ„ÄåÂêåÊ∫êÊîøÁ≠ñ„ÄçÔºàsame-origin policyÔºâ ÂêåÊ∫êÁöÑÂê´‰πâÔºö Áõ∏ÂêåÁöÑÂçèËÆÆ Áõ∏ÂêåÁöÑÂüüÂêç Áõ∏ÂêåÁöÑÁ´ØÂè£ ÈùûÂêåÊ∫êÁöÑÈôêÂà∂Ôºö Êó†Ê≥ïËØªÂèñÈùûÂêåÊ∫êÁΩëÈ°µÁöÑ Cookie, LocalStorage Âíå IndexedDB Êó†Ê≥ïÊé•Ëß¶ÈùûÂêåÊ∫êÁΩëÈ°µÁöÑ DOM Êó†Ê≥ïÂêëÈùûÂêåÊ∫êÂú∞ÂùÄÂèëÈÄÅ AJAX ËØ∑Ê±ÇÔºàÂç≥‰æøÂèëÈÄÅÔºåÊµèËßàÂô®‰πü‰ºöÊãíÁªùÊé•ÂèóÂìçÂ∫îÔºâ document.domain ËÆæÁΩÆÂèØÂÖ±‰∫´ CookieÔºåÈÄÇÁî®‰∫é ifame Âíå CookieÔºåÂØπ‰∫é LocalStorage Âíå IndexedDB Êó†ÊïàÔºõÊ≠§Â§ñÔºåÊúçÂä°Âô®ÂèØ‰ª•Âú®ËÆæÁΩÆ Cookie Êó∂Â∞±ÊåáÂÆöÂ•ΩÊâÄÂ±û‰∏ÄÁ∫ßÂüüÂêçÔºö.example.comÔºå‰πüÂèØ‰ª•ÂØπÂ≠êÂüüÂêçËææÂà∞ÂÖ±‰∫´ Cookie ÁöÑÁõÆÁöÑ ÂØπ‰∫éÂÆåÂÖ®‰∏çÂêåÊ∫êÁöÑÁ™óÂè£ÔºåÊÉ≥Ë¶ÅÈÄö‰ø°Êúâ‰∏§ÁßçÊñπÂºèÔºö fragment identifierÔºöÁâáÊÆµÊ†áËØÜÁ¨¶„ÄÇhttp://example.com/x.html#fragment Âè™ÊòØÊîπÂèò #fragment ‰∏ç‰ºöÂØºËá¥ÁΩëÈ°µÂà∑Êñ∞ÔºåÂ±û‰∫éÁ†¥Ëß£Êó†Ê≥ïÈÄö‰ø°‰πãÊ≥ï H5 Êèê‰æõ‰∫ÜÊñ∞ÁöÑ postMessage ÊñπÊ≥ïÂèëÈÄÅÊ∂àÊÅØÔºåÁõëÂê¨ÊñπÂèØ‰ª•ÁõëÂê¨ message ‰∫ã‰ª∂Ëé∑ÂèñÊ∂àÊÅØ AJAX Á™ÅÁ†¥ÂêåÊ∫êÈôêÂà∂ÁöÑÊñπÊ≥ïÔºö JSONP WebSocket CORS (Cross-Origin Resource Sharing) CORS ÈÄö‰ø°Ôºö W3C Ê†áÂáÜÔºåÂÖÅËÆ∏ÊµèËßàÂô®Ë∑®ÂüüËØ∑Ê±Ç ËØ¶ÁªÜ‰ªãÁªç Âå∫ÂàÜÁÆÄÂçïËØ∑Ê±ÇÂíåÈùûÁÆÄÂçïËØ∑Ê±ÇÔºåÊµÅÁ®ã‰∏çÂêå ÁÆÄÂçïËØ∑Ê±Ç‰∏≠ÔºåOrigin Header ÂæàÈáçË¶Å ÈùûÁÆÄÂçïËØ∑Ê±ÇÔºåÂÖàËøõË°å /OPTIONS È¢ÑÂÖàÊ£ÄÊü•ÔºåÁÑ∂ÂêéÂêéÁª≠ÊµÅÁ®ãÁ±ª‰ººÁÆÄÂçïËØ∑Ê±Ç Storage Êé•Âè£Ôºö sessionStorageÔºö‰øùÂ≠òÁöÑÊï∞ÊçÆÁî®‰∫éÊµèËßàÂô®‰∏ÄÊ¨°‰ºöËØùÔºåÁªìÊùüÂêé‰ºöË¢´Ê∏ÖÁêÜ localStorage ‰øùÂ≠òÊï∞ÊçÆÈïøÊúüÂ≠òÂú® Âè™ÊúâÂêåÂüüÂêç‰∏ãÁöÑÁΩëÈ°µÊâçÂèØ‰ª•ËØªÂèñÔºåË∑®Âüü‰ºöÊä•Èîô length ËøîÂõûÊï∞ÊçÆÈ°π‰∏™Êï∞ setItem ‰øùÂ≠ò key + value getItem ËøîÂõû‰øùÂ≠òÁöÑ key ÂØπÂ∫îÁöÑ value clear key ËøîÂõûÂØπÂ∫î‰ΩçÁΩÆÁöÑÈîÆÂÄº ÂèÇËÄÉ JavaScript ÂÖ•Èó® MDN JavaScript]]></content>
      <categories>
        <category>ÂâçÁ´Ø</category>
      </categories>
      <tags>
        <tag>ÂâçÁ´Ø</tag>
        <tag>JavaScript</tag>
        <tag>ES5</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Rocket Web Ê°ÜÊû∂ÂÖ•Èó®]]></title>
    <url>%2F2019%2F02%2F24%2Frust-rocket-quick-start%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄRocket Ê°ÜÊû∂ ÊòØ Rust ÁîüÊÄÅ‰∏≠ÊØîËæÉÊµÅË°åÁöÑ Web Ê°ÜÊû∂‰πã‰∏ÄÔºåÂÖ∂ÊúÄÂ§ßÁöÑÁâπÁÇπÊòØÊã•ÊúâÁ±ª‰ºº Flask ÈÇ£Ê†∑ÊØîËæÉÁÆÄÊ¥ÅÁöÑÂÜôÊ≥ïÔºåÂèØ‰ª•ÈùûÂ∏∏ËΩªÊùæÂú∞ÁºñÂÜô RESTful APIÔºåÂêåÊó∂ËøòÊîØÊåÅ‰∏≠Èó¥‰ª∂Á≠âÊú∫Âà∂ÔºåÊòì‰∫éÊâ©Â±ï„ÄÇÂΩìÁÑ∂ÔºåÁõÆÂâçËØ•Ê°ÜÊû∂ÊúÄÂ§ßÁöÑÁº∫ÁÇπÊòØ‰ΩøÁî®‰∫ÜÂæàÂ§ö rust-nightly ÁâàÊú¨‰∏≠ÁöÑÁâπÊÄßÔºåÂØºËá¥Êó†Ê≥ïÂú® rust-stable ÂàÜÊîØ‰∏ãÁºñËØë„ÄÇËøôÂØπ‰∫é‰∏Ä‰∏™ÈúÄË¶ÅÈïøÊúüÁª¥Êä§ÁöÑËæÉÂ§ßÁöÑÈ°πÁõÆÊù•ËØ¥ÔºåÂ∞±Â≠òÂú®‰∏ÄÂÆöÁöÑÂçáÁ∫ßÈ£éÈô©„ÄÇ‰∏çËøáÈâ¥‰∫éÁõÆÂâçÊàë‰ª¨‰∏çÂ§ßÂèØËÉΩÂú®Áîü‰∫ßÁéØÂ¢É‰∏≠‰ΩøÁî® Rust Êù•ÁºñÂÜô Web APIÔºåÊöÇ‰∏îËøò‰∏çÁî®ÊãÖÂøÉËøô‰∫õÈóÆÈ¢ò„ÄÇ ‰Ω†Â•ΩÔºåRocketÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºå‰∏ãÈù¢ÁöÑÁ§∫‰æã‰ª£Á†ÅÊòØÂú® rustc 1.34.0-nightly ÁéØÂ¢É‰∏ãÁºñËØëÂπ∂ËøêË°åÁöÑ~ È¶ñÂÖàÔºåÈúÄË¶ÅÊñ∞Âª∫È°πÁõÆ hello-rocketÔºö1cargo new hello-rocket --bin Áî±‰∫éÈúÄË¶Å‰ΩøÁî® rust-nightly ÁâàÊú¨ÔºåÊâÄ‰ª•ËøôÈáåÈúÄË¶ÅÂàáÊç¢ÁâàÊú¨Âπ∂Êõ¥Êñ∞Â∑•ÂÖ∑Èìæ„ÄÇÊñπÊ≥ïÂ¶Ç‰∏ãÔºö12# Â∞ÜÂΩìÂâçÈ°πÁõÆÁéØÂ¢ÉÂàáÂà∞ nightly ÁâàÊú¨rustup override set nightly &amp;&amp; rustup update ÂáÜÂ§áÂ∑•‰ΩúÂÆåÊàêÂêéÔºåÊàë‰ª¨Â∞±ÈúÄË¶ÅÁªôÈ°πÁõÆÊ∑ªÂä† rocket crate ‰æùËµñÂï¶Ôºö 1cargo add rocket ÂèØ‰ª•Âú® Cargo.toml ‰∏≠ÁúãÂà∞Ê∑ªÂä†ÁöÑ‰æùËµñÔºö 123...[dependencies]rocket = "0.4.0" Êé•‰∏ãÊù•ÔºåÊàë‰ª¨Âú® main.rs ‰∏≠ÁºñÂÜô‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑ APIÔºåË¥üË¥£Âú®ËÆøÈóÆÂØπÂ∫îË∑ØÁî±Êó∂ÊâìÂç∞Âá∫ Hello, Rocket„ÄÇÂèØ‰ª•Â∞Ü‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÁ≤òË¥¥Âà∞‰Ω†ÁöÑÊñá‰ª∂‰∏≠Ôºö 1234567891011#![feature(proc_macro_hygiene, decl_macro)]// Êàë‰ª¨ÈúÄË¶Å‰ΩøÁî® rocket ‰∏≠ÂÆö‰πâÁöÑË∑ØÁî±ÂàõÂª∫ÂÆè `routes!`#[macro_use]extern crate rocket;#[get("/")]fn index() -&gt; String &#123; "Hello, Rocket".to_string()&#125;fn main() &#123; rocket::ignite().mount("/", routes![index]).launch();&#125; ‰ª•‰∏äÂ∞±ÂÆåÊàê‰∫Ü‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑ API ÁºñÂÜô„ÄÇÊúÄÂêéÁºñËØëÂπ∂ÂêØÂä® Web ÊúçÂä°ÂêéÔºåÂèØ‰ª•Âú®ÁªàÁ´Ø‰∏≠ÁúãÂà∞‰∏ãÈù¢ÁöÑËæìÂá∫„ÄÇ‰Ω†ÂèØ‰ª•Âú®ÊµèËßàÂô®‰∏≠ËÆøÈóÆ localhost:8000 Êù•Êü•ÁúãÂìçÂ∫îÂÜÖÂÆπÔºö 123456789101112Configured for development. =&gt; address: localhost =&gt; port: 8000 =&gt; log: normal =&gt; workers: 8 =&gt; secret key: generated =&gt; limits: forms = 32KiB =&gt; keep-alive: 5s =&gt; tls: disabledMounting /: =&gt; GET / (index)Rocket has launched from http://localhost:8000 Rocket ÁöÑÁâπÊÄßÂú®ÂÖ∂ÂÆòÁΩëÁöÑ Overview ‰∏≠ÔºåÂèØ‰ª•ÁúãÂà∞ Rocket Ê°ÜÊû∂ÁöÑ‰∏ªË¶ÅÁâπÊÄß„ÄÇ Ë∑ØÁî±ÔºàRoutingÔºâRocket ÁöÑ‰∏ªË¶Å‰ªªÂä°‰æøÊòØË∑ØÁî±ËØ∑Ê±ÇÂà∞ÂêàÈÄÇÁöÑËØ∑Ê±ÇÂ§ÑÁêÜ Handler„ÄÇË∑ØÁî±ÊòØÈÄöËøá get Â±ûÊÄßÂ£∞ÊòéÁöÑÔºåÁúãËµ∑Êù•ÂÉèÊòØ Python ‰∏≠ÁöÑË£ÖÈ•∞Âô®Ôºö 1234#[get("/")]fn index() -&gt; &amp;'static str &#123; "Hello, Rocket!"&#125; ‰ª•‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂùó‰∏∫‰æãÔºåËøô‰∏™Ë∑ØÁî±ÁöÑÂêçÁß∞‰∏∫ indexÔºåÂíå HTTP GET / ÂåπÈÖç„ÄÇËØ∑Ê±ÇÂ§ÑÁêÜÂáΩÊï∞‰ºöËøîÂõû‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤‰Ωú‰∏∫ HTTP ÂìçÂ∫îÁöÑ body„ÄÇ Âä®ÊÄÅÂèÇÊï∞ÔºàDynamic ParamsÔºâRocket ÂèØ‰ª•Âä®ÊÄÅÂú∞ËØÜÂà´ËØ∑Ê±ÇË∑ØÂæÑÂ§ö‰∏™ÈÉ®ÂàÜÔºåÂπ∂ÂíåÂ§ÑÁêÜÂáΩÊï∞ÁöÑÂèÇÊï∞‰∏Ä‰∏ÄÂåπÈÖçÔºåÁ§∫‰æãÂ¶Ç‰∏ãÔºö 1234#[get("/hello/&lt;name&gt;/&lt;age&gt;")]fn hello(name: String, age: u8) -&gt; String &#123; format!("Hello, &#123;&#125; year old, named &#123;&#125;!", age, name)&#125; ‰∏äËø∞Á§∫‰æãË°®Á§∫Ôºåhello Ë∑ØÁî±‰ºöÂä®ÊÄÅÂåπÈÖçÂà∞Ë∑ØÂæÑ‰∏≠ÁöÑ &lt;name&gt; Âíå &lt;age&gt; ÈÉ®ÂàÜ„ÄÇÊØè‰∏™Âä®ÊÄÅÂèÇÊï∞ÈÉΩË¶ÅÊúâÂÖ∑‰ΩìÁöÑÁ±ªÂûãÔºåRocket ‰ºöÂ∞ùËØïÂ∞Ü path ‰∏≠ÂØπÂ∫î‰ΩçÁΩÆÁöÑÂèÇÊï∞ËΩ¨Êç¢‰∏∫ÁõÆÊ†áÁ±ªÂûã„ÄÇÂè™ÊúâÂèÇÊï∞Ê≠£Á°ÆËΩ¨Êç¢ÂêéÔºåÊâç‰ºöË∞ÉÁî®Áõ∏Â∫îÁöÑË∑ØÁî±Â§ÑÁêÜÂáΩÊï∞„ÄÇ‰∏∫‰∫ÜËß£ÊûêÂ≠óÁ¨¶‰∏≤ÔºåRocket ‰ºö‰ΩøÁî® FromParam traitÔºå‰Ω†‰πüÂèØ‰ª•‰∏∫Ëá™ÂÆö‰πâÁ±ªÂûãÂÆûÁé∞ËØ• trait„ÄÇ ËØ∑Ê±ÇÊï∞ÊçÆÂ§ÑÁêÜÔºàHandling DataÔºâËØ∑Ê±ÇÁöÑ body Êï∞ÊçÆÊòØÈÄöËøá FromData trait Êù•Â§ÑÁêÜÁöÑ„ÄÇËØ∑Ê±ÇÁöÑ body Êï∞ÊçÆÂèØ‰ª•Ê¥æÁîü‰ªª‰ΩïÂÆûÁé∞‰∫Ü FromData ÁöÑÁ±ªÂûã„ÄÇ‰Ω†ÂèØ‰ª•ÂÉè‰∏ãÈù¢ËøôÊ†∑ÊåáÂÆöÊúüÊúõÈÄöËøáÂì™‰∏™ÂèÇÊï∞‰ΩøÁî®ËØ∑Ê±ÇÁöÑ bodyÔºö 1234#[post("/login", data = "&lt;user_form&gt;")]fn login(user_form: Form&lt;UserLogin&gt;) -&gt; String &#123; format!("Hello, &#123;&#125;!", user_form.name)&#125; Form Á±ªÂûãÊòØ Rocket ÂÜÖÂª∫ÁöÑÁ±ªÂûãÔºåÂÆÉÂèØ‰ª•Â∞Ü Web Ë°®ÂçïËΩ¨Êç¢ÊàêÁªìÊûÑ‰Ωì„ÄÇRocket ‰ºöËá™Âä®Â∞ùËØïÂ∞ÜËØ∑Ê±ÇÁöÑ body Êï∞ÊçÆËΩ¨Êç¢Êàê FormÔºåÁÑ∂ÂêéÂú®ËΩ¨Êç¢ÊàêÂäüÂêéË∞ÉÁî® login Â§ÑÁêÜÂáΩÊï∞„ÄÇÂÖ∂ÂÆÉÂÜÖÂª∫ÁöÑ FormData Á±ªÂûãËøòÊúâ Data„ÄÅJson Âíå Flash„ÄÇ ËØ∑Ê±ÇÊä§Âç´ÔºàRequest GuardsÔºâÈô§‰∫ÜÂä®ÊÄÅË∑ØÂæÑÂíåÊï∞ÊçÆÂèÇÊï∞Â§ñÔºåËØ∑Ê±ÇÂ§ÑÁêÜÂáΩÊï∞ËøòÂèØ‰ª•ÂåÖÂê´Á¨¨‰∏âÁßçÁ±ªÂûãÁöÑÂèÇÊï∞Ôºörequest guards„ÄÇRequest guards ‰∏çÁî®Âú®Ë∑ØÁî±Â±ûÊÄß‰∏≠Â£∞ÊòéÔºåËÄåÊòØÂá∫Áé∞Âú®ËØ∑Ê±ÇÂ§ÑÁêÜÂáΩÊï∞ÁöÑÂèÇÊï∞Á≠æÂêç‰∏≠ÔºåÂπ∂‰∏îÊîØÊåÅ‰ªªÊÑèÂ§ö‰∏™„ÄÇ Request guards ÁöÑ‰ΩúÁî®ÊòØÂØπËØ∑Ê±ÇÁöÑÂÖÉ‰ø°ÊÅØËøõË°åÂà§Êñ≠ÔºåÂ¶ÇÊûúÊª°Ë∂≥ÊåáÂÆöÊù°‰ª∂ÔºåÊâçËøêË°åÂ§ÑÁêÜÂáΩÊï∞ÔºåËµ∑Âà∞‰øùÊä§‰ΩúÁî®„ÄÇÊØîÂ¶ÇÔºö 1234#[get("/sensitive")]fn sensitive(key: ApiKey) &#123;&#125; ‰æãÂ≠ê‰∏≠ ApiKey Áî®‰∫é‰øùÊä§ sensitive Â§ÑÁêÜÂáΩÊï∞ÔºåÂè™ÊúâÂú®ËØ∑Ê±ÇÂ§¥‰∏≠ÁöÑ API ÂØÜÈí•ËÆ§ËØÅÈÄöËøáÂêéÔºåÊâç‰ºöÊâßË°å„ÄÇApiKey Á±ªÂûãÈúÄË¶ÅËøáÂÆûÁé∞ FromRequest traitÔºåÁÑ∂ÂêéÂú®ÂÆûÁé∞ÈÄªËæë‰∏≠Ê£ÄÊü• API ÂØÜÈí•Â§¥„ÄÇRequest guards ÊòØ Rocket ‰∏≠ÈùûÂ∏∏Âº∫Â§ß‰∏îÁã¨ÁâπÁöÑÊ¶ÇÂøµ„ÄÇ ÂìçÂ∫îÔºàResponderÔºâËØ∑Ê±ÇÂ§ÑÁêÜÂáΩÊï∞ÁöÑËøîÂõûÁ±ªÂûãÂèØ‰ª•ÊòØ‰ªª‰ΩïÂÆûÁé∞‰∫Ü Responder ÁöÑÁ±ªÂûãÔºö12#[get("/")]fn route() -&gt; T &#123;&#125; ‰∏äËø∞‰æãÂ≠ê‰∏≠ÔºåT ÂøÖÈ°ªË¶ÅÂÆûÁé∞ Responder„ÄÇRocket Â∑≤Áªè‰∏∫Ê†áÂáÜÂ∫ì‰∏≠ÂæàÂ§öÁ±ªÂûãÂÆûÁé∞‰∫Ü ResponderÔºö&amp;str„ÄÅString„ÄÅFile„ÄÅOption ‰ª•Âèä Result„ÄÇRocket ‰πüÂÆûÁé∞‰∫Ü‰∏Ä‰∫õËá™ÂÆö‰πâÁöÑ ResponderÔºåÂ¶Ç Redirect„ÄÅFlash Âíå Template„ÄÇ Responder ÁöÑ‰ªªÂä°Â∞±ÊòØÂ∞ΩÂèØËÉΩÁîüÊàê ResponseÔºåÂÆÉ‰πüÂèØ‰ª•Âú®Â§±Ë¥•Êó∂Êèê‰æõÁä∂ÊÄÅÁ†Å„ÄÇÂ¶ÇÊûúÊåáÂÆö‰∫ÜÁä∂ÊÄÅÁ†ÅÔºåRocket Â∞±‰ºöË∞ÉÁî®Áõ∏Â∫îÁöÑÈîôËØØÊçïËé∑ÂáΩÊï∞„ÄÇcatch Ë∑ØÁî±ÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºö 12#[catch(404)]fn not_found() -&gt; T &#123;&#125; ËøêË°åÔºàLaunchingÔºâ‰∏∫‰∫ÜËøêË°å Rocket Â∫îÁî®ÔºåÈ¶ñÂÖàÈúÄË¶ÅÊåÇËΩΩË∑ØÁî±ÔºõÁÑ∂ÂêéÊâçÂèØ‰ª•ÂêØÂä®„ÄÇÁ§∫‰æãÂ¶Ç‰∏ãÔºö 123rocket::ignite() .mount("/base", routes![index, another]) .launch(); Ë∞ÉÁî® launch Âêé‰ºöÂêØÂä®ÊúçÂä°Âô®ÔºåÂºÄÂèëÁéØÂ¢É‰∏≠ÔºåRocket ‰ºöÊâìÂç∞Âá∫‰∏Ä‰∫õÊØîËæÉÊúâÁî®ÁöÑÁä∂ÊÄÅ‰ø°ÊÅØÔºö 1üöÄ Rocket has launched from http://localhost:8000 Rocket ÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÔºüÊØè‰∏Ä‰∏™ Rocket Web Â∫îÁî®‰ªéÊé•ÂèóÂà∞ËØ∑Ê±ÇÂà∞ËøõË°åÂìçÂ∫îÔºåÈÉΩ‰ºöÁªèÂéÜÊ†áÂáÜÁöÑ‰∏â‰∏™Ê≠•È™§ÔºàËøô‰πüÊòØÂ∏∏ËßÑ Web Ê°ÜÊû∂ÈÉΩ‰ºöÂÅöÁöÑ‰∫ãÊÉÖÔºâ„ÄÇ Ê†°È™åÈ¶ñÂÖàÔºåRocket ‰ºöÊ†°È™åÂåπÈÖçÁöÑËØ∑Ê±ÇÔºåÁ°Æ‰øùÂ§ÑÁêÜÂáΩÊï∞‰∏≠ÁöÑÊØè‰∏™Á±ªÂûãÈÉΩÂèØ‰ª•Ê¥æÁîüËá™ÂΩìÂâçËØ∑Ê±Ç„ÄÇÂ¶ÇÊûúÊüê‰∏™Á±ªÂûãÊó†Ê≥ïÊ¥æÁîüÔºåÂàô‰ºöÂÆöÂêëÂà∞‰∏ã‰∏Ä‰∏™ÂåπÈÖçÁöÑË∑ØÁî±ÔºåÁõ¥Âà∞ÊâÄÊúâÁ±ªÂûãÊ†°È™åÈÉΩÊ≤°ÈóÆÈ¢òÊàñËÄÖÊ≤°Êúâ‰ªª‰ΩïÂèØÂ∞ùËØïÁöÑË∑ØÁî±‰∏∫Ê≠¢„ÄÇÂ¶ÇÊûúÊâÄÊúâÁöÑË∑ØÁî±ÈÉΩ‰∏çÂåπÈÖçÔºåÂàô‰ºöËøîÂõûËá™ÂÆö‰πâÁöÑ 404 ÈîôËØØÔºö 1234#[post("/user", data = "&lt;new_user&gt;")]fn new_user(admin: AdminUser, new_user: Form&lt;User&gt;) -&gt; T &#123; ...&#125; ‰ª•‰∏äËø∞‰æãÂ≠êÊù•ËØ¥ÊòéÔºö ËØ∑Ê±ÇÊñπÊ≥ïÂøÖÈ°ªÊòØ POST ËØ∑Ê±ÇË∑ØÂæÑÂøÖÈ°ªÊòØ /user ËØ∑Ê±Ç‰∏≠ÂøÖÈ°ªÂåÖÂê´ body Êï∞ÊçÆ ËØ∑Ê±ÇÁöÑÂÖÉ‰ø°ÊÅØÂøÖÈ°ªÊòØÈÄöËøáËÆ§ËØÅÁöÑ AdminUser ËØ∑Ê±Ç‰ΩìÂøÖÈ°ªËÉΩÂ§üËΩ¨Êç¢Êàê User ÁªìÊûÑ‰Ωì Â§ÑÁêÜÊé•‰∏ãÊù•ÔºåËØ∑Ê±Ç‰ºöË¢´‰ªªÊÑèÁöÑ Handler Â§ÑÁêÜ„ÄÇËøôÈáåÂ∞±ÊòØÊâßË°åÂÖ∑‰ΩìÁöÑ‰∏öÂä°ÈÄªËæë‰∫Ü„ÄÇRocket ‰∏≠ÁöÑ Handler Â∞±ÊòØÁÆÄÂçïÁöÑÂáΩÊï∞ÔºåÂîØ‰∏ÄË¶ÅÊ≥®ÊÑèÁöÑÊòØËøîÂõûÂÄºÂøÖÈ°ªË¶ÅÊòØÂÆûÁé∞‰∫Ü Responder trait ÁöÑÁ±ªÂûã„ÄÇ ÂìçÂ∫îÊúÄÂêéÔºåRocket ‰ºöÂ∞Ü Handler ËøîÂõûÂÄºËΩ¨Êç¢Êàê HTTP ÂìçÂ∫îÔºåÁÑ∂ÂêéÁªôÂÆ¢Êà∑Á´ØÂèëÈÄÅÂìçÂ∫îÔºö 1fn route() -&gt; T &#123;&#125; ‰∏äËø∞‰æãÂ≠ê‰∏≠ÁöÑ T ÂøÖÈ°ªÊòØÂÆûÁé∞‰∫Ü Responder ÁöÑÁ±ªÂûãÔºåRocket ÁõÆÂâçÊèê‰æõ‰∫ÜÂæàÂ§öÂ∏∏Áî®ÁöÑÂìçÂ∫îÁ±ªÂûãÔºö Json&lt;T&gt;: Â∞ÜÁ±ªÂûã T ËΩ¨Êç¢Êàê JSON Âπ∂ËøîÂõû Template: Ê∏≤ÊüìÊ®°ÊùøÂπ∂ËøîÂõû Redirect: ËøîÂõûÂêàÈÄÇÁöÑÈáçÂÆöÂêëÂìçÂ∫î NamedFile: ÂêëÂÆ¢Êà∑Á´ØÊµÅ‰º†ËæìÊåáÂÆöÁöÑÊñá‰ª∂ÔºåContent-Type ËÆæÁΩÆ‰∏∫Êñá‰ª∂Â§πÁöÑÊâ©Â±ïÂêç Stream: ÂêëÂÆ¢Êà∑Á´ØÊµÅ‰º†Ëæì‰ªªÊÑè Read ÂÄº Êõ¥Â§öÊâ©Â±ïÂäüËÉΩRocket Ê°ÜÊû∂ÂèØÊèíÊãîÁöÑÁâπÊÄßËÉΩËÉΩÂ§üÁªô‰Ω†Â∏¶Êù•ÂæàÂ§öÈ¢ùÂ§ñÁöÑÁâπÊÄßÔºåËøô‰∫õÁâπÊÄßÂú®ÂÖ∂ÊñáÊ°£‰∏≠ÊúâËØ¶ÁªÜÁöÑ‰ªãÁªç„ÄÇ Ê®°Êùø Cookies ÊµÅ‰º†Ëæì Êòì‰∫éÈÖçÁΩÆÁöÑÂºÄÂèëÁéØÂ¢É ÂÜÖÂª∫ÂçïÂÖÉÊµãËØïÂ∑•ÂÖ∑ Á±ªÂûãÂÆâÂÖ®ÁöÑ URIs ÂèÇËÄÉ Rocket Overview]]></content>
      <categories>
        <category>Web ÂºÄÂèë</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>Rust</tag>
        <tag>Rocket</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Thrift ÂàùÊé¢]]></title>
    <url>%2F2019%2F02%2F18%2Fexplore-thrift%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄÁü•‰πé‰ΩøÁî®ÁöÑ RPC Ê°ÜÊû∂ÊòØÂü∫‰∫é Thrift ÊûÑÂª∫ÁöÑ„ÄÇËá™ÁÑ∂Â∞±ÂæàÊúâÂøÖË¶Å‰∫ÜËß£‰∏ã Thrift ÊòØ‰ªÄ‰πàÔºüÂ¶Ç‰Ωï‰ΩøÁî®Ôºü‰ª•ÂèäÊúâ‰ªÄ‰πàÊúÄ‰Ω≥ÂÆûË∑µÔºü Thrift ÂÆòÊñπÊòØËøôÊ†∑‰ªãÁªçËá™Â∑±ÁöÑÔºö Thrift is a software framework for scalable cross-language services development. It combines a software stack with a code generation engine to build services that work efficiently and seamlessly between C++, Java, Python, PHP, Ruby, Erlang, Perl, Haskell, C#, Cocoa, JavaScript, Node.js, Smalltalk, and OCaml. ‰ª•‰∏ãÊòØ Thrift ÂçèËÆÆÊ†àÁ§∫ÊÑèÂõæÔºö Input CodeÔºöÊòØ‰æùÁÖß Thrift ËØ≠Ê≥ïÁºñÂÜôÁöÑÊúçÂä°ÔºàÂåÖÂê´ÂèòÈáè„ÄÅÊúçÂä°ÊñπÊ≥ï„ÄÅÂºÇÂ∏∏Á≠âÂÆö‰πâÔºâ Generated CodeÔºö‰ΩøÁî® thrift gen ÁºñËØëÁîüÊàêÁöÑÊåáÂÆöÊüêÁßçËØ≠Ë®ÄÁöÑÂÆ¢Êà∑Á´Ø‰ª£Á†ÅÔºå‰ª•‰æø‰∫éÂú®‰∏öÂä°‰∏≠Ë∞ÉÁî®ÊúçÂä°ÁöÑ RPC Êé•Âè£ Service Client write()/read() TProtocolÔºöÊèê‰æõ‰∫ÜÂèØÈÄâÁöÑÂçèËÆÆÂ±Ç TTransportÔºöÊèê‰æõ‰∫ÜÊª°Ë∂≥‰∏çÂêåÈúÄÊ±ÇÁöÑ‰º†ËæìÂ±ÇÊúçÂä° ËøêË°åÊó∂Â∫ìÔºàRuntime LibraryÔºâÊï¥‰∏™ÂçèËÆÆÂ±ÇÂíå‰º†ËæìÂ±ÇÈÉΩÊòØËøêË°åÊó∂Â∫ìÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇËøôÂ∞±ÊÑèÂë≥ÁùÄÔºåÊàë‰ª¨ÂèØ‰ª•Âú®‰∏äÂ±ÇÂÆö‰πâÂ•ΩÊúçÂä°ÂêéÔºåÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÈöèÊó∂ÊõøÊç¢ÂçèËÆÆÂ±ÇÊàñ‰º†ËæìÂ±ÇÔºåËÄåÊó†ÈúÄÈáçÊñ∞ÁºñËØëÁîüÊàêÂÆ¢Êà∑Á´Ø‰ª£Á†Å„ÄÇ ÂçèËÆÆÂ±ÇÔºàProtocol LayerÔºâÂçèËÆÆÂ±ÇÁöÑ‰∏ªË¶Å‰ΩúÁî®ÊòØÊèê‰æõÂ∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñÁöÑËÉΩÂäõÔºåÁõÆÂâçÊîØÊåÅÁöÑÁ±ªÂûãÂ¶Ç‰∏ãÔºö TBinaryProtocolÔºöÁõ¥Êé•‰∫åËøõÂà∂Ê†ºÂºèÔºåÊï∞Â≠ó‰ºöË¢´ÁºñÁ†ÅÊàê‰∫åËøõÂà∂ÔºåËÄåÈùûÊñáÊú¨ TCompactProtocolÔºöÂºÇÂ∏∏È´òÊïà„ÄÅÁ¥ßÂáëÁöÑÊï∞ÊçÆÁºñÁ†ÅÊ†ºÂºè TDenseProtocolÔºöÁ±ª‰ºº‰∫é TCompactProtocolÔºå‰ΩÜÊòØÂú®‰º†ËæìÊó∂‰ºöÁßªÈô§ meta ‰ø°ÊÅØÔºåËÄåÂú®Êé•Êî∂Êó∂Ë°•Âõû meta ‰ø°ÊÅØ TJSONProtocolÔºö‰ΩøÁî® JSON Ê†ºÂºèËøõË°åÁºñÁ†Å TSimpleJSONProtocolÔºö‰ΩøÁî® JSON ÁºñÁ†ÅÔºå‰∏îÂè™Áî®‰∫éÂÜôÁöÑÂçèËÆÆ„ÄÇÈÄÇÁî®‰∫éËÑöÊú¨ËØ≠Ë®ÄËß£Êûê TDebugProtocolÔºö‰ΩøÁî®‰∫∫Á±ªÂèãÂ•ΩÁöÑÊñáÊú¨Ê†ºÂºèÔºå‰æø‰∫éË∞ÉËØï ÊúçÂä°Á´ØÊîØÊåÅ‰º†ËæìÂ±ÇË¥üË¥£ËØªÂèñÂíåÂÜôÂÖ•„ÄÇÁõÆÂâçÊîØÊåÅÁöÑÂá†ÁßçÊñπÂºèÂ¶Ç‰∏ãÔºö TSocketÔºö‰ΩøÁî®ÈòªÂ°ûÂºèÁΩëÁªú IO ‰º†Ëæì TFramedTransportÔºöÈÄêÂ∏ßÂèëÈÄÅÊï∞ÊçÆÔºåÊØèÂ∏ßÊï∞ÊçÆÈÉΩÂú®ÂâçÈù¢Âä†‰∏äÈïøÂ∫¶‰ø°ÊÅØ„ÄÇÂØπ‰∫é‰ΩøÁî®ÈùûÈòªÂ°ûÂºèÁöÑÊúçÂä°Êù•ËØ¥ÔºåÈúÄË¶Å‰ΩøÁî®ËøôÁßç‰º†ËæìÊñπÊ≥ï TFileTransportÔºö‰ΩøÁî®Êñá‰ª∂‰Ωú‰∏∫‰º†ÈÄÅÂ™í‰ªã TMemoryTransportÔºöÂÄüÂä©ÂÜÖÂÆπ‰º†Ëæì„ÄÇJava ÁöÑÂÆûÁé∞‰∏≠‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑ ByteArrayOutputStream Êù•ÂÆûÁé∞ TZlibTransportÔºö‰ΩøÁî® zlib ÂéãÁº©ÔºåÂèØ‰ª•ÂíåÂÖ∂ÂÆÉ‰º†ËæìÊñπÂºèÁªÑÂêàÂú®‰∏ÄÂùó ProcessorProcessor Â∞ÜËæìÂÖ•ÂíåËæìÂá∫ÂçèËÆÆ‰Ωú‰∏∫ÂèÇÊï∞„ÄÇÂÆÉË¥üË¥£‰ªéËæìÂÖ•ËØªÂèñÊï∞ÊçÆÔºåÈÄöËøáÁî®Êà∑Ëá™ÂÆö‰πâÁöÑ Handler Â§ÑÁêÜÊï∞ÊçÆÔºåÁÑ∂ÂêéÂÜçÂ∞ÜÊï∞ÊçÆÂÜôÂà∞ËæìÂá∫„ÄÇ ÊîØÊåÅÁöÑÊúçÂä°Ê®°ÂºèÔºàSupported ServersÔºâÊúçÂä°Âô®Ëá™ÁÑ∂ÊòØÁî®‰∫éÂú®ÊåáÂÆöÁ´ØÂè£ÁõëÂê¨ËØ∑Ê±ÇÔºåÂπ∂Â∞ÜÊé•Êî∂Âà∞ÁöÑÊï∞ÊçÆÂèëÈÄÅÂà∞ Processor Â§ÑÁêÜ„ÄÇÊúâËøô‰πàÂá†ÁßçÊúçÂä°ÂèØ‰ª•Áî®‰ΩøÁî®Ôºö TSimpleServerÔºöÂçïÁ∫øÁ®ãÈòªÂ°û IOÔºåÊñπ‰æøÊµãËØï ThreadPoolServerÔºöÂ§öÁ∫øÁ®ãÈòªÂ°û IO TNonblockingServerÔºöÂ§öÁ∫øÁ®ãÈùûÈòªÂ°û IOÔºåÈúÄË¶Å‰ΩøÁî® TFramedTransport ‰º†ËæìÊñπÂºè Thrift ËØ≠Ë®ÄÊåáÂçóÁ±ªÂûãÁ≥ªÁªüThrift Á±ªÂûãÁ≥ªÁªü‰∏ªË¶ÅÂåÖÊã¨Â¶Ç‰∏ãÂá†‰∏™ÈÉ®ÂàÜÔºö È¢ÑÂÆö‰πâÁöÑÂü∫Êú¨Á±ªÂûã Áî®Êà∑ÂÆö‰πâÁöÑÁªìÊûÑ‰Ωì ÂÆπÂô®Á±ªÂûã ÂºÇÂ∏∏ ÊúçÂä° Âü∫Êú¨Á±ªÂûã boolÔºöÂ∏ÉÂ∞îÁ±ªÂûãÔºàÂèØÈÄâÂÄº true Êàñ falseÔºâÔºåÂç†Áî®‰∏Ä‰∏™Â≠óËäÇ byteÔºöÊúâÁ¨¶Âè∑ÂçïÂ≠óËäÇ i16Ôºö16 ‰ΩçÊúâÁ¨¶Âè∑Êï¥Âûã i32Ôºö32 ‰ΩçÊúâÁ¨¶Âè∑Êï¥Âûã i64Ôºö64 ‰ΩçÊúâÁ¨¶Âè∑Êï¥Âûã doubleÔºö64 ‰ΩçÊµÆÁÇπÊï∞Á±ªÂûã binaryÔºöÂ≠óËäÇ‰∏≤ stringÔºöÁºñÁ†ÅÊú™Áü•ÊñáÊú¨Êàñ‰∫åËøõÂà∂Â≠óÁ¨¶‰∏≤ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåThrfit Âπ∂‰∏çÊîØÊåÅÊó†Á¨¶Âè∑Êï¥Êï∞ÔºåÂõ†‰∏∫Âú®ÂæàÂ§öÁºñÁ®ãËØ≠Ë®Ä‰∏≠Âπ∂Ê≤°ÊúâÁõ¥Êé•ÁöÑÊò†Â∞Ñ„ÄÇ ÂÆπÂô® list&lt;T&gt;ÔºöÂàóË°®ÔºåÁ±ª‰ºº Python ‰∏≠ÁöÑ list set&lt;T&gt;ÔºöÊó†Â∫èÈõÜÂêà map&lt;K, V&gt;ÔºöÂ≠óÂÖ∏ÔºåÁ±ª‰ºº Python ‰∏≠ÁöÑ dict ÂÆπÂô®‰ΩøÁî®ÁöÑÁ±ªÂûãÂèØ‰ª•ÊòØ‰ªªÊÑèÂêàÊ≥ïÁöÑ Thrfit Á±ªÂûãÔºàÂ¶ÇÁªìÊûÑ‰Ωì„ÄÅÂºÇÂ∏∏Á≠âÔºâÔºå‰ΩÜ„ÄåÊúçÂä°„ÄçÈô§Â§ñ„ÄÇ ÁªìÊûÑ‰Ωì‰∏éÂºÇÂ∏∏Thrift ÁªìÊûÑ‰ΩìÂÆö‰πâÁ±ª‰ºº C ËØ≠Ë®Ä‰∏≠ÁöÑ structÔºåÂØπ‰∫éÊüê‰∫õ OO ËØ≠Ë®ÄÔºåÁªìÊûÑ‰Ωì‰ºöË¢´ÁøªËØëÊàê Class„ÄÇ ÂºÇÂ∏∏ÁöÑÂÆö‰πâÁ±ª‰ººÁªìÊûÑ‰ΩìÔºåÂèØ‰ª•ÂåÖÂê´‰∏çÂêåÁöÑÂ≠óÊÆµÁªÑÊàêÔºå‰ΩÜÊòØÁî® exception ÂÖ≥ÈîÆÂ≠ó„ÄÇÊàë‰ª¨Âú®ÂÆö‰πâÊúçÂä° RPC Êó∂ÔºåÂèØ‰ª•ËÆ©Êüê‰∫õÊñπÊ≥ïÊäõÂá∫ÂºÇÂ∏∏ÔºàÂ¶ÇËµÑÊ∫êÊú™ÊâæÂà∞Ôºâ„ÄÇ ÊúçÂä°ÊúçÂä°ÁöÑÂÆö‰πâÁ±ª‰ºº OO ÁºñÁ®ã‰∏≠ÂÆö‰πâÁöÑ interfaceÔºåÊàñËÄÖ Rust ‰∏≠ÁöÑ trait„ÄÇThrift ÁºñËØëÂô®‰ºöÁîüÊàêÂÆåÊï¥ÁöÑÂÆûÁé∞‰∫ÜÊé•Âè£ÁöÑÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÊ°©ÔºàStubÔºâ„ÄÇ Á±ªÂûãÂÆö‰πâ12typedef i32 inttypedef Tweet ReTweet Êûö‰∏æÁ±ª C ÁöÑÊûö‰∏æÂÆö‰πâÔºö123456enum TweetType &#123; TWEET, RETWEET = 2, DM = 0xa, REPLY &#125; ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå‰∏çÂÉè Protocol BuffersÔºåThrift Ëøò‰∏çÊîØÊåÅÂµåÂ•ó Enum ÂÆö‰πâÔºàÊàñËÄÖÂµåÂ•óÁªìÊûÑ‰ΩìÔºâÔºåÊûö‰∏æÂÄºÂøÖÈ°ªÊòØ 32 ‰ΩçÊ≠£Êï¥Êï∞„ÄÇ Ê≥®Èáä1234567# ËøôÊòØÂêàÊ≥ïÁöÑÊ≥®Èáä/* * Â§öË°åÊ≥®ÈáäÔºåÁ±ª‰ºº C ËØ≠Ë®ÄÊîØÊåÅÁöÑÈÇ£Ê†∑ */// ÂçïË°åÊ≥®Èáä ÂëΩÂêçÁ©∫Èó¥Thrift ‰∏≠ÁöÑÂëΩÂêçÁ©∫Èó¥Á±ª‰ºº C++ ‰∏≠ÁöÑÈÇ£Ê†∑ÔºåÊàñËÄÖ Java ‰∏≠ÁöÑÂåÖÁöÑÊ¶ÇÂøµ„ÄÇÁî±‰∫éÊØèÁßçËØ≠Ë®ÄÈÉΩÊúâËá™Â∑±ÁöÑÂåÖÁÆ°ÁêÜÊú∫Âà∂ÔºàÂ¶Ç Python ÊúâÊ®°ÂùóÁöÑÊ¶ÇÂøµÔºâÔºåThrift ÂÖÅËÆ∏ÈíàÂØπ‰∏çÂêåÁöÑËØ≠Ë®ÄÂÆöÂà∂ÂëΩÂêçÁ©∫Èó¥Ë°å‰∏∫Ôºö 12345// ÁøªËØëÊàê C++ `namespace com &#123; namespace example &#123; namespace project &#123;`namespace cpp com.example.project// ÁøªËØëÊàê Java ÂåÖÂ∞±ÊòØ `package com.example.project`namespace java com.example.project IncludesÊàë‰ª¨ÈÄöÂ∏∏ÂèØ‰ª•Â∞Ü Thrift ÂÆö‰πâÊãÜÂàÜÂà∞Â§ö‰∏™Êñá‰ª∂‰∏≠‰ª•‰æøÁª¥Êä§„ÄÅÂ§çÁî®Ôºå‰ΩøÁî®Ê®°ÂùóÂåñÁöÑÊñπÂºèËøõË°åÁªÑÁªá„ÄÇThrift ËøêË°åÂú®‰∏Ä‰∏™Êñá‰ª∂‰∏≠ include ÂÖ∂ÂÆÉÊñá‰ª∂„ÄÇË¢´ include ÁöÑÊñá‰ª∂‰ºöÂú®ÂΩìÂâçÁõÆÂΩïÊàñËÄÖ‰ΩøÁî® -I ÁºñËØëÊ†áÂøóÊåáÂÆöÁöÑÁõÆÂΩï‰∏≠Êü•Êâæ„ÄÇ 123456include &quot;tweet.thrift&quot; // Ê≥®ÊÑèÊ≤°Êúâ `;` ÁªìÂ∞æ...struct TweetSearchResult &#123; 1: list&lt;tweet.Tweet&gt; tweets;&#125; Â∏∏Èáè12345const i32 MAX_PROCS = 120; // ÂàÜÂè∑ÊòØÂèØÈÄâÁöÑ// ‰πüÂèØ‰ª•ÂÆö‰πâÂ§çÊùÇÁ±ªÂûãÁöÑÂ∏∏ÈáèÔºåÊîØÊåÅÁªìÊûÑ‰Ωì„ÄÅÂ≠óÂÖ∏Á≠â// ‰ΩøÁî® JSON ÁöÑÊ†ºÂºèÂàùÂßãÂåñconst map&lt;string, string&gt; MAP_CONST = &#123;&quot;hello&quot;: &quot;world&quot;&#125;; ÁªìÊûÑ‰ΩìÂÆö‰πâÂú® Thrfit IDL (Interface Defenition Language) ‰∏≠ÔºåÁªìÊûÑ‰ΩìÊòØÂü∫Êú¨ÁöÑÊûÑÂª∫Âü∫Áü≥„ÄÇÁªìÊûÑ‰ΩìÁªÑÂêà‰∫ÜÂ§ö‰∏™Â≠óÊÆµÔºåÊØè‰∏™Â≠óÊÆµÊúâÁã¨Á´ãÁöÑÊ†áËØÜÁ¨¶ÔºåÁ±ªÂûãÔºåÂêçÁß∞‰ª•ÂèäÂèØÈÄâÁöÑÈªòËÆ§ÂÄº„ÄÇ 123456789101112struct Location &#123; 1: required double latitude; 2: required double longitude;&#125;struct Tweet &#123; 1: required i32 user_id; 2: required string user_name; 3: required: string description; 4: optional: Location loc; 5: optional: string contry = &quot;China&quot;;&#125; ÂØπ‰∫é‰ΩøÁî® required Ê†áËÆ∞ÁöÑÂ≠óÊÆµÔºåÂÆû‰æãÂåñÊó∂ÂøÖÈ°ªË¶ÅËµãÂÄºÔºåÂê¶Âàô‰ºöÊä•Èîô„ÄÇÂØπ‰∫é optional Â≠óÊÆµÔºåÂ¶ÇÊûúÊ≤°ÊúâËÆæÁΩÆÂÄºÔºåÂ∞±‰∏ç‰ºöÂú®Â∫èÂàóÂåñÊó∂‰º†Ëæì„ÄÇÂ¶ÇÊûú optional Â≠óÊÆµËÆæÁΩÆ‰∫ÜÈªòËÆ§ÂÄºÔºåÂΩìËß£ÊûêÁªìÊûÑ‰ΩìÁöÑÊó∂ÂÄô‰ºöÁªôÁõ∏Â∫îÂ≠óÊÆµËµã‰∫àÈªòËÆ§ÂÄº„ÄÇ ‰∏çÂêå‰∫éÊúçÂä°ÔºåÁªìÊûÑ‰ΩìÊòØ‰∏çÂÖÅËÆ∏ÁªßÊâøÁöÑÔºå‰πüÂ∞±ÊòØËØ¥‰∏çÂÖÅËÆ∏Êâ©Â±ïËá™ÂÖ∂ÂÆÉÁªìÊûÑ‰Ωì„ÄÇ Required Is ForeverÂú®Â∞Ü‰∏Ä‰∏™Â≠óÊÆµËÆæÁΩÆ‰∏∫ required ‰πãÂâç‰∏ÄÂÆöË¶Å‰∏âÊÄùÂïäÔºÅÂ¶ÇÊûú‰Ω†ÊÉ≥Âú®‰ªÄ‰πàÊó∂ÂÄôÂÅúÊ≠¢ÂèëÈÄÅÊüê‰∏™ required Â≠óÊÆµÊó∂ÔºàÂ¶ÇËÆæÁΩÆ‰∏∫ optionalÔºâÔºåÂ∞±ÂæàÂÆπÊòìÂá∫ÈóÆÈ¢òÔºöÊóßÁâàÊú¨ÁöÑËØªÂèñÂô®‰ºöËÆ§‰∏∫Ê≤°ÊúâÂéüÂÖà required Â≠óÊÆµÁöÑÊ∂àÊÅØÊòØ‰∏çÂÆåÊï¥ÁöÑÔºåÂèØËÉΩ‰ºöÊãíÁªùÁîöËá≥Êó†ÊÑè‰∏≠‰∏¢ÂºÉÊéâ„ÄÇÊâÄ‰ª•ËøôÊó∂ÂèØËÉΩÂ∞±ÈúÄË¶ÅÁºñÂÜôÁâπÂÆöÁöÑËá™ÂÆö‰πâÊ†°È™åÈÄªËæëÊù•Ëß£ÂÜ≥ÈóÆÈ¢ò„ÄÇÊúâ‰∫õ‰∫∫ËÆ§‰∏∫‰ΩøÁî® required ÂºäÂ§ß‰∫éÂà©Ôºõ‰ªñ‰ª¨Êõ¥ÂñúÊ¨¢Âè™Áî® optional„ÄÇÁÑ∂ËÄåÔºåËøô‰∏™‰πüÊòØÂõ†‰∫∫ËÄåÂºÇÔºåÁúãÂú∫ÊôØÈúÄË¶ÅÁöÑ‰∫Ü„ÄÇ ÂÆö‰πâÊúçÂä°ËôΩÁÑ∂Â∑≤ÁªèÊúâÂæàÂ§öÊµÅË°åÁöÑÂ∫èÂàóÂåñ/ÂèçÂ∫èÂàóÂåñÊ°ÜÊû∂ÔºàÂ¶Ç Protocol BuffersÔºâ‰∫ÜÔºå‰ΩÜÂæàÂ∞ëÊúâÊ°ÜÊû∂Êèê‰æõÂºÄÁÆ±Âç≥Áî®ÁöÑË∑®ËØ≠Ë®Ä RPC ÊúçÂä°ÁöÑÊîØÊåÅÔºåËøô‰πüÊòØ Thrift ÊúÄ‰∏ªË¶ÅÁöÑ‰∫ÆÁÇπ‰πã‰∏Ä„ÄÇ ÂèØ‰ª•ÊääÊúçÂä°ÂÆö‰πâÂΩìÂÅö Java ‰∏≠ÁöÑÊé•Âè£ÂÆö‰πâÔºå‰Ω†ÈúÄË¶ÅÊèê‰æõÁõ∏Â∫îÁöÑÊñπÊ≥ïÂêçÁß∞„ÄÅÁ≠æÂêçÁ≠âÔºõÊ≠§Â§ñÔºåÊúçÂä°‰πüÂèØ‰ª•Êâ©Â±ïËá™ÂÖ∂ÂÆÉÊúçÂä°Ôºà‰ΩøÁî® extends ÂÖ≥ÈîÆÂ≠óÔºâ„ÄÇ Thrift ÁºñËØëÂô®‰ºöÊ†πÊçÆÈÄâÊã©ÁöÑÁõÆÊ†áÁºñÁ®ãËØ≠Ë®ÄÁîüÊàêÁõ∏Â∫îÁöÑÊé•Âè£‰ª£Á†ÅÔºàServer Á´ØÔºâ‰ª•Âèä StubsÔºàÂÆ¢Êà∑Á´ØÔºâ„ÄÇThrift ‰∏∫Â§ßÂ§öÊï∞ËØ≠Ë®ÄÊèê‰æõ‰∫ÜÁî®‰∫éËøêË°åÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÁöÑ RPC Â∫ì„ÄÇ 123456789101112service Twitter &#123; // ÊñπÊ≥ïÂÆö‰πâÊ†ºÂºèÁ±ª‰ºº C ËØ≠Ë®Ä„ÄÇÈúÄË¶ÅÊåáÂÆöËøîÂõûÁ±ªÂûã„ÄÅÂèÇÊï∞ÂàóË°®ÔºåÂèØËÉΩ‰ºöÊäõÁöÑÂºÇÂ∏∏ÂàóË°® // ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÂèÇÊï∞ÂàóË°®ÂíåÂºÇÂ∏∏ÂàóË°®‰ΩøÁî®ÁöÑÂÆö‰πâÊñπÂºèÁ±ª‰ººÁªìÊûÑ‰ΩìÂ≠óÊÆµÂÆö‰πâ void ping(); // ÁúãÂà∞Ê≤°Ôºå‰πüÂèØ‰ª•‰ΩøÁî®ÈÄóÂè∑ÁªìÂ∞æ // ‰∏çËøáËøòÊòØÂª∫ËÆÆ‰ΩøÁî®ÂàÜÂè∑Âêß bool post_tweet(1: Tweet tweet) throws (1: TwitterUnavailable unavailable), TweetSearchResult search_tweets(1: string query); // `async` Ë°®Á§∫ÂÆ¢Êà∑Á´ØÂ∞ΩÁÆ°ËØ∑Ê±ÇÔºåËÄåÊó†ÈúÄÁ≠âÂæÖÂÖ∂ÂìçÂ∫î„ÄÇËøôÁßçÊñπÊ≥ïÂøÖÈ°ªÊòØ `void` async void zip();&#125; ‰ª£Á†ÅÁîüÊàêÂú®ÂâçÈù¢ÁöÑ ÂçèËÆÆÊ†à Â∞èËäÇÂØπÊï¥‰∏™ Thrift ÂçèËÆÆÊ†àÊúâ‰∫ÜÊ¶ÇÊã¨ÊÄßÁöÑ‰∫ÜËß£ÔºåÊé•‰∏ãÊù•Â∞Ü‰ªé‰ª£Á†ÅÁîüÊàêÁöÑËßíÂ∫¶ËÆ≤ËÆ≤ Thrift ÂçèËÆÆÊ†à„ÄÇ Âü∫Êú¨Ê¶ÇÂøµ‰ª•‰∏ãÊòØ Thrift ÁΩëÁªúÊ†àÁöÑÊ¶ÇÂøµÂõæÔºö 1234567891011121314151617+-------------------------------------------+| cGRE || Server || (single-threaded, event-driven etc) |+-------------------------------------------+| cBLU || Processor || (compiler generated) |+-------------------------------------------+| cGRE || Protocol || (JSON, compact etc) |+-------------------------------------------+| cGRE || Transport || (raw TCP, HTTP etc) |+-------------------------------------------+ ‰º†ËæìÂ±ÇÔºàTransport LayerÔºâ‰º†ËæìÂ±ÇÊèê‰æõ‰∫ÜÁΩëÁªúËØªÂÜôÁöÑÁÆÄÂçïÊäΩË±°ÔºåËøôÊ†∑ÂèØ‰ª•Â∞ÜÂ∫ïÂ±ÇÁöÑ‰º†ËæìÂíåÁ≥ªÁªüÂÖ∂ÂÆÉÈÉ®ÂàÜËß£ËÄ¶ÂºÄÊù•ÔºàÂ¶ÇÂ∫èÂàóÂåñ„ÄÅÂèçÂ∫èÂàóÂåñÁ≠âÔºâ„ÄÇ‰ª•‰∏ãÊòØ Transport Êé•Âè£Êèê‰æõÁöÑÊñπÊ≥ïÔºö open close read write flush Èô§‰∫Ü Transport Êé•Âè£ÔºåThrift ‰πü‰ΩøÁî®‰∫Ü ServerTransport Êé•Âè£Êé•Êî∂ÊàñÂàõÂª∫ÂéüÂßãÁöÑ‰º†ËæìÂØπË±°„ÄÇÈ°æÂêçÊÄù‰πâÔºåServerTransport ‰∏ªË¶ÅÁî®‰∫éÊúçÂä°Á´Ø‰∏∫ËøõÂÖ•ÁöÑËøûÊé•ÂàõÂª∫ Transport ÂØπË±°„ÄÇÂÖ∂Êèê‰æõÁöÑÊñπÊ≥ïÂ¶Ç‰∏ãÔºö open listen accept close ‰ª•‰∏ãÊòØÂ§ßÈÉ®ÂàÜ Thrift ÊîØÊåÅÁöÑËØ≠Ë®ÄÈÉΩ‰ºöÊèê‰æõÁöÑ‰º†ËæìÊñπÂºèÔºö file: ‰ªéÁ£ÅÁõòËøô‰∏§‰∏™ËØªÂèñÊàñÂÜôÂÖ• http ÂçèËÆÆÂ±ÇÔºàProtocol LayerÔºâÂçèËÆÆÊäΩË±°Êèê‰æõ‰∫ÜÂ∞ÜÂÜÖÂ≠òÊï∞ÊçÆÁªìÊûÑÊò†Â∞ÑÊàê‰º†ËæìÊ†ºÂºèÁöÑÊú∫Âà∂Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÂçèËÆÆÂÆö‰πâ‰∫ÜÊï∞ÊçÆÁ±ªÂûãÂ¶Ç‰ΩïÂà©Áî®Â∫ïÂ±ÇÁöÑ Transport Â±ÇÊù•ÁºñËß£Á†ÅËá™Â∑±„ÄÇÂõ†Ê≠§ÔºåÂçèËÆÆÂ±ÇÂÆûÁé∞Ë¥üË¥£ Schema ÁºñÁ†Å‰ª•ÂèäÂ∫èÂàóÂåñ/ÂèçÂ∫èÂàóÂåñ„ÄÇÂ∏∏Áî®ÁöÑÂçèËÆÆÂåÖÊã¨ÔºöJSON„ÄÅXML„ÄÅÁ∫ØÊñáÊú¨ÂíåÂéãÁº©‰∫åËøõÂà∂Á≠â„ÄÇ ‰ª•‰∏ãÊòØ Protocol Êé•Âè£ÂÆö‰πâÔºö 12345678910111213141516171819202122232425262728293031323334353637383940writeMessageBegin(name, type, seq)writeMessageEnd()writeStructBegin(name)writeStructEnd()writeFieldBegin(name, type, id)writeFieldEnd()writeFieldStop()writeMapBegin(ktype, vtype, size)writeMapEnd()writeListBegin(etype, size)writeListEnd()writeSetBegin(etype, size)writeSetEnd()writeBool(bool)writeByte(byte)writeI16(i16)writeI32(i32)writeI64(i64)writeDouble(double)writeString(string)name, type, seq = readMessageBegin() readMessageEnd()name = readStructBegin() readStructEnd()name, type, id = readFieldBegin() readFieldEnd()k, v, size = readMapBegin() readMapEnd()etype, size = readListBegin() readListEnd()etype, size = readSetBegin() readSetEnd()bool = readBool()byte = readByte()i16 = readI16()i32 = readI32()i64 = readI64()double = readDouble()string = readString() Thrift ÂçèËÆÆÂ±ÇÈááÁî®Èù¢ÂêëÊµÅÔºàStream OrientedÔºâÁöÑËÆæËÆ°„ÄÇ‰æãÂ¶ÇÔºåÊ≤°ÂøÖË¶ÅÂú®Áü•ÈÅìÂ≠óÁ¨¶‰∏≤ÊàñÂàóË°®‰∏≠ÁöÑÂÖÉÁ¥†Êï∞ÈáèÁöÑÈïøÂ∫¶ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊâçÂèØ‰ª•Â∫èÂàóÂåñÂÆÉ‰ª¨„ÄÇ ‰ª•‰∏ãÊòØ Thrift ÊîØÊåÅÁöÑËØ≠Ë®Ä‰∏≠ÈÄöÂ∏∏‰ºöÊèê‰æõÁöÑÂçèËÆÆÔºö binary compact json Â§ÑÁêÜÂô®ÔºàProcessorÔºâProcessor ÂØπ‰∫é‰ªéËæìÂÖ•ÊµÅËØªÂèñÊï∞ÊçÆÂíåÂÜôÂá∫Âà∞ËæìÂá∫ÊµÅÊìç‰ΩúÂÅö‰∫ÜÂ∞ÅË£ÖÔºåËæìÂÖ•ÂíåËæìÂá∫ÊµÅ‰ΩøÁî® Protocol ÂØπË±°Ë°®Á§∫„ÄÇÊé•Âè£ÂÆö‰πâÈùûÂ∏∏ÁÆÄÂçïÔºö 123interface TProcessor &#123; bool process(TProtocol in, TProtocol out) throws TException&#125; ÊúçÂä°Âô®ÔºàServerÔºâÊúçÂä°Âô®ÂåÖÂê´Â¶Ç‰∏ãÂäüËÉΩÔºö ÂàõÂª∫ Transport ‰∏∫ Transport ÂàõÂª∫ËæìÂÖ•„ÄÅËæìÂá∫ Protocols Âü∫‰∫éËæìÂÖ•ËæìÂá∫ Protocols ÂàõÂª∫‰∏Ä‰∏™ Processor Á≠âÂæÖËøûÊé•ÔºåÂπ∂Â∞ÜÂÆÉ‰ª¨‰∏¢Áªô Processor Â§ÑÁêÜ ÊúÄ‰Ω≥ÂÆûË∑µÁâàÊú¨Âåñ„ÄÅÂÖºÂÆπÊÄßËÄÉÈáèÂçèËÆÆÈöèÁùÄÊó∂Èó¥‰ºö‰∏çÊñ≠ËøõÂåñÁöÑ„ÄÇÂ¶ÇÊûúÁé∞ÊúâÁöÑÊ∂àÊÅØÁ±ªÂûã‰∏çÂÜçÊª°Ë∂≥ÂΩìÂâçÈúÄÊ±ÇÔºà‰æãÂ¶ÇÂ∏åÊúõÁªôÊüê‰∏™ÁªìÊûÑ‰ΩìÊñ∞Â¢û‰∏Ä‰∏™Â≠óÊÆµÔºâÊó∂Ôºå‰ΩÜÊòØÂ∏åÊúõÊóßÁâàÊú¨Ê†ºÂºèÁîüÊàêÁöÑ‰ª£Á†ÅÁªßÁª≠ÂÖºÂÆπÔºàÂêëÂâçÂÖºÂÆπÔºâÔºå‰∏çË¶ÅÊãÖÂøÉÔºÅ‰Ω†ÂèØ‰ª•ÈùûÂ∏∏ËΩªÊùæÂú∞Êõ¥Êñ∞ÂçèËÆÆËÄå‰∏çÁî®ÊãÖÂøÉÁ†¥Âùè‰πãÂâçÁöÑ‰ªª‰Ωï‰ª£Á†Å„ÄÇ‰∏çËøáÔºåÂâçÊèêÊòØÈúÄË¶ÅÈÅµÂæ™‰∏Ä‰∫õËßÑÂàôÔºö ÂØπ‰∫é‰ªª‰ΩïÂ∑≤ÊúâÁöÑÂ≠óÊÆµÔºå‰∏çË¶Å‰øÆÊîπÂâçÈù¢ÁöÑ Tag Number ‰ªª‰ΩïÊñ∞Â¢ûÁöÑÂ≠óÊÆµÈÉΩÂ∫îÊ†áËÆ∞‰∏∫ÂèØÈÄâÁöÑ„ÄÇ‰πüÂ∞±ÊòØËØ¥Ôºå‰ΩøÁî®ÊóßÁâàÊú¨Ê∂àÊÅØÊ†ºÂºèÁîüÊàêÁöÑ‰ª£Á†ÅÂ∫èÂàóÂåñÁöÑÊ∂àÊÅØÊòØÂèØ‰ª•Ë¢´Êñ∞ÁîüÊàêÁöÑ‰ª£Á†ÅÊ≠£Á°ÆËß£ÊûêÁöÑÔºåÂõ†‰∏∫ÂÆÉ‰ª¨‰∏ç‰ºö‰∏¢Â§±‰ªª‰ΩïÂøÖÈ°ªÁöÑÂ≠óÊÆµ„ÄÇÂØπ‰∫éËøô‰∫õÂ≠óÊÆµÂ∫îÂΩìËÆæÁΩÆÂêàÁêÜÁöÑÈªòËÆ§ÂÄºÔºåËøôÊ†∑Êñ∞ÁöÑ‰ª£Á†ÅÂèØ‰ª•Ê≠£Á°ÆÂú∞‰∏éÊóß‰ª£Á†ÅÁîüÊàêÁöÑÊ∂àÊÅØ‰∫§‰∫í„ÄÇÂêåÊ†∑Âú∞Ôºå‰ΩøÁî®Êñ∞‰ª£Á†ÅÁîüÊàêÁöÑÊ∂àÊÅØ‰πüÂèØ‰ª•Ë¢´Êóß‰ª£Á†ÅÊ≠£Á°ÆËß£ÊûêÔºåÂè™ÊòØÂøΩÁï•ÊéâÊñ∞Â¢ûÁöÑÂ≠óÊÆµ„ÄÇÁÑ∂ËÄåÔºåÊú™Áü•Â≠óÊÆµÂπ∂‰∏ç‰ºöË¢´ÈÅóÂºÉÔºåÂ¶ÇÊûúÊ∂àÊÅØ‰πãÂêéË¢´Â∫èÂàóÂåñÔºåÊú™Áü•Â≠óÊÆµËøòÊòØ‰ºöÂèÇ‰∏éÂ∫èÂàóÂåñÁöÑ„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûúÊ∂àÊÅØË¢´ÂèëÈÄÅÂà∞Êñ∞ÁâàÊú¨‰ª£Á†ÅÔºåÊñ∞Â¢ûÂ≠óÊÆµ‰æùÁÑ∂ÂèØÁî®„ÄÇ ÈùûÂøÖÈ°ªÁöÑÂ≠óÊÆµÂèØ‰ª•Ë¢´ÁßªÈô§ÊéâÔºåÂâçÊèêÊòØ Tag Number ‰∏çË¶ÅÂÜçÊ¨°‰ΩøÁî®ÔºàÊé®ËçêÈáçÂëΩÂêçÂ∫üÂºÉÂ≠óÊÆµÔºåÂèØ‰ª•Ê∑ªÂä† OBSOLETE_ ÂâçÁºÄÔºâ ÂèØËÉΩÈÄ†ÊàêÁâàÊú¨‰∏çÂåπÈÖçÁöÑÊÉÖÂÜµÂàÜÊûê ÂèÇËÄÉ Thrift Tutorial Thrift The Missing Guide Thrift docs Paper: Scalable Cross-Language Services Implementation Paper: Apache Thrift Á´û‰∫âÂØπÊâã Data Serialization Comparison Schema evolution in Avro, Protocol Buffers and Thrift]]></content>
      <categories>
        <category>Thrift</category>
      </categories>
      <tags>
        <tag>Thrift</tag>
        <tag>RPC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Beanstalkd Ê∫êÁ†ÅÂàùÊé¢]]></title>
    <url>%2F2019%2F02%2F04%2Flearning-beanstalkd-source-code%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄBeanstalkd ÊòØ‰∏Ä‰∏™ÊØîËæÉËΩªÈáèÁ∫ßÁöÑÊ∂àÊÅØÈòüÂàóÊúçÂä°ÔºåÂØπ‰∫éÊÄßËÉΩÂíåÁ®≥ÂÆöÊÄßË¶ÅÊ±Ç‰∏çÊòØÁâπÂà´È´òÔºàÁõ∏ÂØπ‰∫é RabbitMQ, Redis, Kafka Á≠âÔºâÔºåÂπ∂‰∏îÈúÄË¶ÅÂª∂ËøüÊâßË°å‰ªªÂä°ÁöÑÂú∫ÊôØÈùûÂ∏∏ÂêàÈÄÇÔºõÊ≠§Â§ñÔºåÂÆÉ‰πüÊîØÊåÅÁªô‰ªªÂä°ËÆæÁΩÆ‰∏çÂêåÁöÑ‰ºòÂÖàÁ∫ß„ÄÅÊâßË°åË∂ÖÊó∂Êó∂Èó¥Á≠â„ÄÇÂú®Êàë‰ª¨ÁöÑ‰∏öÂä°‰∏≠ÔºåÁªèÂ∏∏‰ºöÂÄüÂä© Beanstalkd ÊâßË°åÈòüÂàó‰ªªÂä°ÔºåÂ∏∏ËßÅÁöÑÁî®‰æãÂ¶Ç‰∏ãÔºö Áî®Êà∑ÂÆåÊàê‰ºöÂëòË¥≠‰π∞Âπ∂ÊøÄÊ¥ªÂêéÔºåÂèëÈÄÅÁßÅ‰ø°ÈÄöÁü•„ÄÅÈáçÁΩÆË¥¶Âè∑ÈáçÂëΩÂêçÁä∂ÊÄÅÁ≠âÔºõ Áî®Êà∑ÂÆåÊàêËØÑËÆ∫ÂêéÔºåÂºÇÊ≠•Êõ¥Êñ∞ËØÑËÆ∫ËÆ°Êï∞Ôºõ Áî®Êà∑ÂØπÁßÅÂÆ∂ËØæÊî∂Âê¨ËÆ∞ÂΩï‰∏äÊä•ÂêéÔºåÂºÇÊ≠•Êõ¥Êñ∞ÊúÄËøëÊî∂Âê¨ÁöÑÂ∞èËäÇ„ÄÅÁ¥ØÁßØÊî∂Âê¨Êó∂Èïø„ÄÅÂêåÊ≠•Âà∞ÂÖ∂ÂÆÉÁ≥ªÁªüÁ≠âÔºõ Áî®Êà∑ËÆ∞ÂΩïÊ∑ªÂä†ÂêéÔºå‰ºöÂêåÊ≠•Ëá≥ RedisÔºå‰∏∫‰øùËØÅÊï∞ÊçÆÂ∫ìÂíå Redis ÁöÑÊï∞ÊçÆÊúÄÁªà‰∏ÄËá¥ÊÄßÔºå‰ºöÊèêÂâçÂêØÂä®‰∏Ä‰∏™Âª∂ËøüÊ†°È™åÁöÑ‰ªªÂä°ÔºàÂ¶Ç 5s ÂêéÔºâÔºåÊ£ÄÊü• Redis ‰∏≠‰∏éÊï∞ÊçÆÂ∫ìËÆ∞ÂΩïÊòØÂê¶‰∏ÄËá¥„ÄÇ Beanstalkd ÂàùËØÜÁâπÁÇπ Âü∫‰∫é TCP Âπ∂ÈááÁî® ASCII ÁºñÁ†ÅÁöÑÊñáÊú¨ÂçèËÆÆ„ÄÇËØ¶ÁªÜÂÆö‰πâÂèÇËßÅÔºöprotocol.txtÔºö ÂÆ¢Êà∑Á´ØË¥üË¥£‰∏éÊúçÂä°Á´ØÁöÑ‰∫§‰∫íÔºöËøûÊé•„ÄÅÂèëÈÄÅÂëΩ‰ª§ÂíåÊï∞ÊçÆ„ÄÅÁ≠âÂæÖÂìçÂ∫î„ÄÅÂÖ≥Èó≠ËøûÊé• ÊúçÂä°Á´Ø‰∏≤Ë°åÂ§ÑÁêÜÊØè‰∏™ÂÆ¢Êà∑Á´ØËøûÊé• ÂçèËÆÆÁî±‰∏§‰∏™ÈÉ®ÂàÜÁªÑÊàêÔºöÊñáÊú¨Ë°åÔºàÁî®‰∫éÂÆ¢Êà∑Á´ØÂëΩ‰ª§ÂíåÊúçÂä°Á´ØÂìçÂ∫îÔºâÂíåÈùûÁªìÊûÑÂåñÁöÑÊï∞ÊçÆÂùóÔºàÁî®‰∫é‰º†ÈÄÅ‰ªªÂä° body Âíå stats ‰ø°ÊÅØÔºâ ÈòüÂàóÊ∂àÊÅØÊòØÂ≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑÔºå‰ΩÜÁî®Êà∑ÂèØ‰ª•ÈÄâÊã©ÂºÄÂêØ WAL Êú∫Âà∂ÔºàbinlogÔºâÔºåËøôÊ†∑ÈáçÂêØÂêéÂèØ‰ª•ÂõûÊîæ‰ªªÂä°ÔºåÊèêÈ´ò‰∫ÜÂèØÁî®ÊÄß ÈááÁî®Á±ª‰ºº Redis ÁöÑÂçïÁ∫øÁ®ãÊ®°ÂûãÔºàIO Â§öË∑ØÂ§çÁî®Êú∫Âà∂ÔºâÔºåÂõ†Ê≠§‰∏çÂøÖËÄÉËôëÂ§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÁ∫øÁ®ãÂêåÊ≠•„ÄÅÂä†ÈîÅÁ≠âÔºåÁÆÄÂåñÂÆûÁé∞ ÂÖ≥ÈîÆËØç TubeÔºöÁ±ª‰ºº Kafka ‰∏≠ÁöÑ TopicÔºåÊàñËÄÖÂÖ∂ÂÆÉÈòüÂàóÁ≥ªÁªü‰∏≠ÁöÑ Channel JobÔºöÂÆ¢Êà∑Á´ØÁîü‰∫ßÂíåÊ∂àË¥πÁöÑÂü∫Êú¨ÂçïÂÖÉ„ÄÇÊØè‰∏™‰ªªÂä°ÈÉΩÊúâÁâπÂÆöÁöÑ idÔºåÂèØËÆæÂÆö‰ºòÂÖàÁ∫ßÔºåË∂ÖÊó∂Êó∂Èó¥ÔºåÂª∂ËøüÊâßË°åÊó∂Èó¥Á≠â WAL (Write Ahead Log)ÔºöË¥üË¥£ binlog ÁÆ°ÁêÜÔºàÂÜôÂÖ•„ÄÅÂéãÁº©„ÄÅÊó•ÂøóÊñá‰ª∂Ê∏ÖÁêÜ„ÄÅ‰ªªÂä°ÊÅ¢Â§çÁ≠âÔºâ ServerÔºöBeanstalkd ÊúçÂä°Á´Ø ConnÔºöBeanstalkd ÂÆ¢Êà∑Á´ØËøûÊé•Â§ÑÁêÜ ‰ªªÂä°Áä∂ÊÄÅÊµÅËΩ¨ ‰ªªÂä°ÂÖ∏ÂûãÁîüÂëΩÂë®Êúü Â∑•‰ΩúÊñπÂºèÊèèËø∞ ÊúçÂä°Á´Ø‰ºöÊúâ‰∏ÄÂà∞Â§ö‰∏™ tubesÔºàÂú®Êï∞ÁªÑ‰∏≠Áª¥Êä§Ôºâ„ÄÇÊØè‰∏™ tube ÈÉΩ‰ºöÂåÖÂê´‰∏Ä‰∏™Â∞±Áª™ÈòüÂàóÔºàÂú®ÊúÄÂ∞èÂ†ÜÁª¥Êä§Ôºâ‰ª•Âèä‰∏Ä‰∏™Âª∂ËøüÈòüÂàóÔºà‰πüÂú®ÊúÄÂ∞èÂ†ÜÁª¥Êä§Ôºâ„ÄÇÊØè‰∏™‰ªªÂä°ÈÉΩ‰ºöÂú®‰∏Ä‰∏™ÁâπÂÆöÁöÑ tube ‰∏≠Â∫¶ËøáÂÖ®ÈÉ®ÁöÑÁîüÂëΩÂë®Êúü ÂÆ¢Êà∑Á´ØÂèØ‰ª•‰ΩøÁî® watch Êåá‰ª§ËÆ¢ÈòÖÊüê‰∏™ tubeÔºå‰πüÂèØ‰ª•‰ΩøÁî® ignore ÂèñÊ∂àËÆ¢ÈòÖÔºåÊ∂àË¥πËÄÖÂèØ‰ª•ÂêåÊó∂ËÆ¢ÈòÖÂ§ö‰∏™ tubeÔºåÂΩìÊ∂àË¥πËÄÖ reserve ‰ªªÂä°Êó∂ÔºåËØ•‰ªªÂä°ÂèØËÉΩÊù•Ëá™ÂÖ∂ watch list ‰∏≠ÁöÑ‰ªªÊÑè‰∏Ä‰∏™ tube ÂΩìÂÆ¢Êà∑Á´ØËøûÊé•Êó∂ÔºåÈªòËÆ§‰ºö‰ΩøÁî® default tubeÔºåÂèØ‰ª•‰ΩøÁî® use ÂàáÊç¢ tube tube ÊòØ‰ºöÊ†πÊçÆÈúÄË¶ÅÈöèÊó∂ÂàõÂª∫ÁöÑÔºåÂΩìÊ≤°ÊúâÂÆ¢Êà∑Á´ØÂºïÁî®Êó∂ÔºåÂ∞±‰ºöË¢´Âà†Èô§ ÂÆâË£ÖÂÄüÂä© Docker ÂêØÂä®‰∏Ä‰∏™ Beanstalkd ÊúçÂä°ÈùûÂ∏∏ËΩªÊùæÔºåËØ∑ËøêË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§Ë°åÂç≥ÂèØÔºö 1docker run -d -p 11300:11300 schickling/beanstalkd Â¶ÇÊûú‰∏äËø∞ÂëΩ‰ª§Ë°åÊâßË°åÊ≠£Â∏∏ÔºåÂàô Beanstalkd ÊúçÂä°Â∫îËØ•ÂêØÂä®‰∫ÜÔºåÂÖ∂ÈªòËÆ§ÁõëÂê¨ÁöÑÁ´ØÂè£Âè∑‰∏∫ 11300ÔºåËøêË°å docker ps ÂèØ‰ª•Êü•ÁúãÊúçÂä°ÊòØÂê¶Ê≠£Â∏∏ÂêØÂä®Âπ∂ËøêË°åÔºö ÁºñËØë &amp; ËøêË°å &amp; Ë∞ÉËØïÈ¶ñÂÖàÔºåÈúÄË¶ÅÂâçÂæÄ beanstalkd ‰ªìÂ∫ìÂÖãÈöÜ Master ÂàÜÊîØÊ∫êÁ†ÅËá≥Êú¨Âú∞„ÄÇ ‰∏∫‰∫ÜÊñπ‰æøÁÆ°ÁêÜ C È°πÁõÆÔºåËøôÈáå‰ΩøÁî®‰∫Ü JET BRAINS ÂÆ∂ÊóèÁöÑ Clion„ÄÇÂΩìÁÑ∂Ôºå‰Ω†‰πüÂèØ‰ª•‰ΩøÁî®Ëá™Â∑±ÂñúÊ¨¢ÁöÑÂ∑•ÂÖ∑ÊâìÂºÄ„ÄÇ Áî±‰∫é Clion ‰ΩøÁî®‰∫Ü CMake ÁÆ°ÁêÜ C&amp;C++ È°πÁõÆÔºåÊâÄ‰ª•ÊâìÂºÄÈ°πÁõÆÊó∂ÈúÄË¶ÅÂú®ÂÖ∂Ê†πÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™ CMakeLists.txt Êñá‰ª∂ÔºåÂπ∂Â°´ÂÜôÂ¶Ç‰∏ãÂÜÖÂÆπÔºö 12345678cmake_minimum_required(VERSION 3.13)project(beanstalkd C)set(BUILD_DIR .)add_custom_target(beanstalkd ALL COMMAND make WORKING_DIRECTORY $&#123;CMAKE_CURRENT_SOURCE_DIR&#125;)add_custom_command(TARGET beanstalkd POST_BUILD COMMAND echo copy $&#123;PROJECT_NAME&#125; to $&#123;CMAKE_CURRENT_BINARY_DIR&#125; COMMAND cp $&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/beanstalkd $&#123;CMAKE_CURRENT_BINARY_DIR&#125;) üéâ Ëá≥Ê≠§ÔºåÂáÜÂ§áÂ∑•‰ΩúÂ∑≤ÁªèÂÅöÂÆåÂï¶„ÄÇÊé•‰∏ãÊù•ÔºåÂèØ‰ª•Â∞ùËØïÁÇπÂáª„ÄåÊûÑÂª∫„ÄçÊåâÈíÆÔºåËøõË°åÁºñËØë„ÄÇÁºñËØëÁªìÊùüÂêéÔºåÂ∞±ÂèØ‰ª•ÁÇπÂáªËøêË°åÂêØÂä® Beanstalkd ÊúçÂä°Âï¶„ÄÇÂì¶ÔºåÂØπ‰∫ÜÔºåÂ¶ÇÊûúÈúÄË¶ÅË∞ÉËØïÊîØÊåÅÁöÑËØùÔºåÁõ¥Êé•Âú®ÈúÄË¶ÅÁöÑÂú∞ÊñπÊâì‰∏äÊñ≠ÁÇπÔºåÂπ∂ÁÇπÂáª„ÄåË∞ÉËØï„ÄçÊåâÈíÆÂç≥ÂèØÂºÄÂßã„ÄÇ ÂÖ≥‰∫é MakefileÊü•Áúã Makefile Êñá‰ª∂ÔºåÂèØ‰ª•ÁúãÂà∞ÊúâÂ¶Ç‰∏ãÂá†‰∏™ÂëΩ‰ª§ÂèØ‰ª•ÊâßË°åÔºö make all: ÁºñËØë„ÄÅÈìæÊé•Âπ∂ÁîüÊàêÂèØÊâßË°åÁöÑ‰∫åËøõÂà∂Êñá‰ª∂ beanstalkd„ÄÇÁî±‰∫éÊàë‰ª¨Â∑≤ÁªèÂ∞ÜËØ•ÂëΩ‰ª§ÊîæÂà∞ CMakeLists.txt Êñá‰ª∂‰∏≠ÔºåÂú®‰ΩøÁî® Clion ÊûÑÂª∫Êó∂ÂèØËá™Âä®Ëß¶Âèë make install: Â∞ÜÁîüÊàêÁöÑÂèØÊâßË°åÊñá‰ª∂ beanstalkd ÂÆâË£ÖÂà∞ BINDIR=$(DESTDIR)/usr/local/bin ÁõÆÂΩï‰∏ã make clean: Ê∏ÖÁêÜÁîüÊàêÁöÑ *.o Êñá‰ª∂ make bench: Ë∑ë Benchmark Áî® ÂÆ¢Êà∑Á´Ø‰ΩøÁî®Á§∫‰æã‰∏ãÈù¢Áúã‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠ê„ÄÇÁîü‰∫ßËÄÖË¥üË¥£Â∞Ü‰∏ÄÁªÑÂæÖÊäìÂèñÁöÑ URLs ÊîæÂà∞ÈòüÂàó‰∏≠ÔºåÂÜçÁî±‰∏ÄÁªÑÊ∂àË¥πËÄÖÂπ∂ÂèëËÆøÈóÆÈòüÂàó‰∏≠ÁöÑ URLs„ÄÇ‰∏ªÊµÅÁ®ãÁöÑÁ§∫‰æã‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819// ‰ºöÈ¶ñÂÖàÂêØÂä® NUM_WORKERS ‰∏™Ê∂àË¥πËÄÖÂú®‰∏çÂêåÁöÑÁ∫øÁ®ã‰∏≠ÁõëÂê¨// ÁÑ∂ÂêéËÆ©Áîü‰∫ßËÄÖÂêëÈòüÂàó‰∏≠Â°´ÂÖÖ URLsÔºå‰æõÊ∂àË¥πËÄÖ‰ΩøÁî®fn main() &#123; const NUM_WORKERS: isize = 5; let mut handles = vec![]; for i in 0..NUM_WORKERS &#123; // ÂêØÂä® NUM_WORKERS ‰∏™Ê∂àË¥πËÄÖ let hd = thread::spawn(move || consume_urls(i)); handles.push(hd); &#125; produce_urls(); // Á≠âÂæÖÊ∂àË¥πËÄÖÁªìÊùü for hd in handles &#123; hd.join().unwrap(); &#125;&#125; Áîü‰∫ßËÄÖ1234567891011121314151617181920fn produce_urls() &#123; let mut client = Beanstalkd::localhost().unwrap(); client.tube("urls").unwrap(); let urls = vec![ "https://github.com/iFaceless/ifaceless.github.io", "https://github.com/iFaceless/gic", "https://github.com/iFaceless/rust-exercises", "https://github.com/iFaceless/learning-rust", "https://github.com/iFaceless/fixture", "https://github.com/iFaceless/rest", "https://github.com/iFaceless/bigcache", "https://github.com/iFaceless/leetgogo", "https://github.com/iFaceless/freecache", ]; for url in urls &#123; client.put(url, 0, 0, 1000).unwrap(); &#125;&#125; Ê∂àË¥πËÄÖ123456789101112131415161718fn consume_urls(id: isize) &#123; println!("[Consumer &#123;&#125;] started...", id); let mut client = Beanstalkd::localhost().unwrap(); client.watch("urls").unwrap(); loop &#123; let (job_id, url) = match client.reserve() &#123; Ok(job) =&gt; job, Err(e) =&gt; &#123; println!("[Consumer &#123;&#125;] error happens: &#123;&#125;", id, e); break; &#125; &#125;; println!("[Consumer &#123;&#125;] got job &lt;&#123;&#125;&gt;: &#123;&#125;", id, job_id, url); client.delete(job_id).unwrap(); &#125;&#125; Ê∫êÁ†ÅÊé¢Á¥¢Ê®°ÂùóÂàÜÁ±ªÂõæ‰∏∫‰∫ÜÊñπ‰æøÈòÖËØªÊ∫êÁ†ÅÔºåÁ≤óÁï•Âú∞Ê†πÊçÆËá™Â∑±ÁöÑÁêÜËß£ÁªôÂêÑ‰∏™Êñá‰ª∂ÂÅö‰∫ÜÁÆÄÂçïÁöÑÂàÜÁ±ªÔºö Ê®°Âùó UML ÂõæËôΩËØ¥ Beanstalkd ÁöÑÊ∫êÁ†ÅÊòØ‰ΩøÁî® C ÁºñÂÜôÁöÑÔºå‰ΩÜÊòØÂÖ∂‰∏≠ÁöÑËÆæËÆ°ÊÄùÊÉ≥‰æùÁÑ∂ÂèØ‰ª•‰ªéÈù¢ÂêëÂØπË±°ÁöÑËßíÂ∫¶Êù•Ëß£Èáä„ÄÇÊØîÂ¶ÇÊ®°ÂùóÂåñËÆæËÆ°„ÄÅÊé•Âè£ËÆæËÆ°„ÄÅÂ§öÊÄÅÁ≠â„ÄÇÊ†πÊçÆËá™Â∑±ÁöÑÁêÜËß£ÔºåÂØπÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∫õÊ†∏ÂøÉÊ®°ÂùóÂÅö‰∫ÜÊ¢≥ÁêÜÔºåÂπ∂ÁªòÂà∂‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑ UML ÂõæÊù•Âä†Ê∑±ÁêÜËß£Ôºö Âü∫Êú¨Êï∞ÊçÆÁªìÊûÑÊúÄÂ∞èÂ†Ü‰∫åÂèâÂ†ÜÔºàHeapÔºâ ÊòØ‰∏ÄÁßçÂæàÂ∏∏ËßÅÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÊú¨Ë¥®‰∏äÊòØ‰∏ÄÊ£µÂÆåÂÖ®‰∫åÂèâÊ†ë„ÄÇÂÖ∂ÂàÜ‰∏∫ÊúÄÂ§ßÂ†ÜÔºà‰πüÂè´Â§ßÊ†πÂ†ÜÔºâ Âíå ÊúÄÂ∞èÂ†ÜÔºà‰πüÂè´Â∞èÊ†πÂ†ÜÔºâÔºö ÊúÄÂ§ßÂ†ÜÔºöÊ†πÁªìÁÇπÁöÑÈîÆÂÄºÊòØÊâÄÊúâÂ†ÜÁªìÁÇπÈîÆÂÄº‰∏≠ÊúÄÂ§ßËÄÖÁöÑÂ†Ü ÊúÄÂ∞èÂ†ÜÔºöÊ†πÁªìÁÇπÁöÑÈîÆÂÄºÊòØÊâÄÊúâÂ†ÜÁªìÁÇπÈîÆÂÄº‰∏≠ÊúÄÂ∞èËÄÖÁöÑÂ†Ü Âú® beanstalkd/heap.c ÊòØÂØπÊúÄÂ∞èÂ†ÜÁöÑÂÆûÁé∞„ÄÇÈÇ£‰πàÔºåbeanstalkd ‰∏≠Âì™‰∫õÂú∞ÊñπÁî®Âà∞‰∫ÜÊúÄÂ∞èÂ†ÜÂë¢Ôºü Tube ‰∏≠ÁöÑÂª∂Ëøü‰ªªÂä°ÈòüÂàóÔºàÊúÄÂÖàÂà∞ÊúüÁöÑ‰ªªÂä°‰ºöÂú®Â†ÜÈ°∂ÔºåËøôÊ†∑ÂèØ‰ª•Âú® O(1) Êó∂Èó¥Â§çÊùÇÂ∫¶Ëé∑ÂèñÂà∞Ôºâ Tube ‰∏≠ÁöÑÂ∞±Áª™‰ªªÂä°ÈòüÂàóÔºàÂü∫‰∫é‰ºòÂÖàÁ∫ßÊéíÂàóÔºå‰ºòÂÖàÁ∫ßÊúÄÈ´òÁöÑ‰ªªÂä°‰ºöÂú®Â†ÜÈ°∂Ôºâ Server ‰∏≠ÁöÑÂÆ¢Êà∑Á´ØËøûÊé•ÈòüÂàóÔºàÂü∫‰∫é tickat Êó∂Èó¥ÊéíÂàóÔºâ Êé•‰∏ãÊù•ÔºåÊàë‰ª¨ÁúãÁúãÊúÄÂ∞èÂ†ÜÁöÑÂÆûÁé∞Ôºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566intheapinsert(Heap *h, void *x)&#123; int k; // Êâ©ÂÆπÁ≠ñÁï•Ôºö2 ÂÄçÈïøÂ∫¶ if (h-&gt;len == h-&gt;cap) &#123; void **ndata; int ncap = (h-&gt;len+1) * 2; /* allocate twice what we need */ ndata = malloc(sizeof(void*) * ncap); if (!ndata) &#123; return 0; &#125; memcpy(ndata, h-&gt;data, sizeof(void*)*h-&gt;len); free(h-&gt;data); // ÊåáÂêëÊñ∞ÁöÑ‰ΩçÁΩÆ h-&gt;data = ndata; // Êõ¥Êñ∞ÂÆπÈáè h-&gt;cap = ncap; &#125; k = h-&gt;len; h-&gt;len++; set(h, k, x); siftdown(h, k); return 1;&#125;void *heapremove(Heap *h, int k)&#123; void *x; if (k &gt;= h-&gt;len) &#123; return 0; &#125; x = h-&gt;data[k]; h-&gt;len--; // Áî®ÂéüÊù•ÁöÑÊï∞ÁªÑÊúÄÂêé‰∏Ä‰ΩçË¶ÜÁõñË¢´Âà†Èô§ÁöÑ‰ΩçÁΩÆ set(h, k, h-&gt;data[h-&gt;len]); siftdown(h, k); siftup(h, k); h-&gt;rec(x, -1); return x;&#125;static voidset(Heap *h, int k, void *x)&#123; h-&gt;data[k] = x; // ËøôÈáå‰ºöÂéªË∞ÉÁî®Áõ∏Â∫îÁöÑÂõûË∞ÉÂáΩÊï∞ h-&gt;rec(x, k);&#125;// Âà§Êñ≠‰ΩçÁΩÆ a ÊåáÂêëÁöÑÂØπË±°ÊòØÂê¶Â∞è‰∫é b ÊåáÂêëÁöÑÂØπË±°static intless(Heap *h, int a, int b)&#123; // h-&gt;less ÊòØ‰∏Ä‰∏™Âà§Êñ≠Â§ßÂ∞èÁöÑÂõûË∞É // ÂÖ∂ÂÆûË¶ÅÂú®Èù¢ÂêëÂØπË±°ÁöÑËØ≠Ë®Ä‰∏≠ÔºåÂÆåÂÖ®ÂèØ‰ª•Ëá™ÂÆö‰∏Ä‰∏™ÂÆûÁé∞‰∫ÜÊØîËæÉÂ§ßÂ∞èÁöÑÊé•Âè£ // ÊØîÂ¶ÇÂú® Rust ‰∏≠ÔºåÂèØ‰ª•‰ΩøÁî® `PartialEq` ÈôêÂÆö... return h-&gt;less(h-&gt;data[a], h-&gt;data[b]);&#125; ÂèòÈïøÊï∞ÁªÑÂú® C ËØ≠Ë®ÄÊ†áÂáÜÂ∫ì‰∏≠ÊòØÊ≤°ÊúâÂèØÂèòÈïøÂ∫¶ÁöÑÊï∞ÁªÑÂÆûÁé∞ÁöÑÔºåÊâÄ‰ª•Âú® beanstalkd/ms.c ÂÆûÁé∞‰∫Ü‰∏ÄÁßçÁ±ª‰ººÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂÆÉÂÖ∑ÊúâÂ¶Ç‰∏ãÁâπÁÇπÔºö ms ÁªìÊûÑ‰ΩìÁª¥Êä§‰∏Ä‰∏™ÂèØÂä®ÊÄÅÊâ©ÂÆπÁöÑÊï∞ÁªÑÔºà**itemsÔºâ Êâ©ÂÆπÁ≠ñÁï•ÂæàÁ≤óÊö¥ÔºåÁõ¥Êé•Êâ©ÂÖÖ‰∏∫ÂéüÊù•ÂÆπÈáèÁöÑ‰∏§ÂÄç ÊèíÂÖ•ÁöÑÂπ≥ÂùáÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(1) Âà†Èô§ÁöÑÂπ≥ÂùáÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(1) Áî±‰∫éÂà†Èô§Êó∂Ôºå‰ºöÂ∞ÜÂ∞æÈÉ® item ÊõøÊç¢ÊéâË¢´Âà†Èô§ÁöÑ itemÔºåÊâÄ‰ª•‰∏çËÉΩ‰æùËµñÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†È°∫Â∫èÔºàÈ°∫Â∫è‰∏ç‰øùËØÅÂíåÊ∑ªÂä†Êó∂‰∏ÄËá¥Ôºâ Âà†Èô§ item ÂêéÔºåÂÖ∂ÂÆûÊï∞ÁªÑÂç†Áî®ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ËøòÂú®ÔºàÂπ∂Ê≤°ÊúâÂä®ÊÄÅÁº©ÂÆπÁöÑÁ≠ñÁï•Ôºâ ÈÇ£ÂÖ∑‰ΩìÂú®Âì™‰∫õÂú∞ÊñπÁî®Âà∞‰∫Ü ms ËøôÁßçÊï∞ÊçÆÁªìÊûÑÂë¢ÔºüÊ¢≥ÁêÜÂêéÔºå‰∏ªË¶ÅÂèëÁé∞‰ª•‰∏ãÂá†Â§ÑÔºö ÂÖ®Â±ÄÁöÑ Tube ÂàóË°® ÂÆ¢Êà∑Á´ØËøûÊé•ÁöÑ Conn ‰∏≠Áª¥Êä§ÁöÑ watch list ‰∏é Tube ÂÖ≥ËÅîÁöÑÁ≠âÂæÖËøûÊé•ÔºàconnsÔºâÂàóË°® ‰∏ãÈù¢ÁúãÁúãÂÖ∂ÂÖ∑‰ΩìÁöÑÂÆûÁé∞Ôºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263// ÂàùÂßãÂåñÊï∞ÁªÑÔºåÂπ∂Ê≥®ÂÜåÊèíÂÖ•ÂíåÁßªÈô§ÁöÑÂõûË∞ÉÂáΩÊï∞voidms_init(ms a, ms_event_fn oninsert, ms_event_fn onremove)&#123; a-&gt;used = a-&gt;cap = a-&gt;last = 0; a-&gt;items = NULL; a-&gt;oninsert = oninsert; a-&gt;onremove = onremove;&#125;// ÊéßÂà∂Êï∞ÁªÑÂ¢ûÈïøstatic voidgrow(ms a)&#123; void **nitems; // ÂÄçÈÄüÂ¢ûÈïøÔºö1, 2, 4, ... size_t ncap = (a-&gt;cap &lt;&lt; 1) ? : 1; nitems = malloc(ncap * sizeof(void *)); if (!nitems) return; // ÊóßÁöÑÊï∞ÊçÆÊã∑Ë¥ùÂà∞Êñ∞ÂºÄËæüÁöÑÁ©∫Èó¥ memcpy(nitems, a-&gt;items, a-&gt;used * sizeof(void *)); // ÈáäÊîæÊóßÁöÑÂÜÖÂ≠òÁ©∫Èó¥ free(a-&gt;items); // ÊåáÂêëÊñ∞ÁöÑ‰ΩçÁΩÆ a-&gt;items = nitems; // Êõ¥Êñ∞Êï∞ÁªÑÂÆπÈáè a-&gt;cap = ncap;&#125;// Âú®Êï∞ÁªÑÂ∞æÈÉ®ÊèíÂÖ•Êñ∞ÁöÑ item// O(1)intms_append(ms a, void *item)&#123; // ÊåâÈúÄÊâ©Â±ïÂÆπÈáè if (a-&gt;used &gt;= a-&gt;cap) grow(a); // Êâ©ÂÆπÂ§±Ë¥•ÔºåÂ∞±ËøîÂõûÔºå‰πüÂ∞±ÊòØ‰∏çËÉΩÂÜçÊñ∞Â¢û item ‰∫Ü if (a-&gt;used &gt;= a-&gt;cap) return 0; a-&gt;items[a-&gt;used++] = item; // Â¶ÇÊûúÊúâÂõûË∞ÉÔºåÂàôËß¶ÂèëÂõûË∞ÉÂáΩÊï∞ if (a-&gt;oninsert) a-&gt;oninsert(a, item, a-&gt;used - 1); return 1;&#125;// Âà†Èô§ÊåáÂÆö‰ΩçÁΩÆÁöÑ item// O(1)static intms_delete(ms a, size_t i)&#123; void *item; if (i &gt;= a-&gt;used) return 0; item = a-&gt;items[i]; // Áõ∏ÂΩì‰∫éÊääÂ∞æÈÉ® item ÂÜôÂà∞Ë¢´Âà†Èô§ÁöÑ‰ΩçÁΩÆÔºåÂπ∂„ÄåÁº©ÂÆπ„Äç a-&gt;items[i] = a-&gt;items[--a-&gt;used]; /* it has already been removed now */ if (a-&gt;onremove) a-&gt;onremove(a, item, i); return 1;&#125; Â≠óÂÖ∏ Âú® beanstalkd/job.c ‰∏≠Ôºå‰∏∫‰∫ÜÊñπ‰æøÂü∫‰∫é job_id Âø´ÈÄüÂÆö‰ΩçÂà∞ÂÖ∑‰ΩìÁöÑ‰ªªÂä°Ôºå‰ΩúËÄÖÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Â≠óÂÖ∏Êï∞ÊçÆÁªìÊûÑ„ÄÇËøôÈáåÊòØÂíå job ËÄ¶ÂêàÂú®‰∏ÄËµ∑ÂÆûÁé∞ÁöÑÔºåÊ†πÊçÆÂØπÊ∫êÁ†ÅÁöÑÂàÜÊûêÔºåÂèØ‰ª•ÂæóÂá∫ËØ•Â≠óÂÖ∏Êï∞ÊçÆÁªìÊûÑÁöÑÁâπÁÇπÂ¶Ç‰∏ãÔºö ÈááÁî®Âü∫‰∫é job_id ÂìàÂ∏åÂèñÊ®°ÁöÑÊñπÂºèËÆ°ÁÆó slot_id ‰ΩøÁî®ÈìæÂú∞ÂùÄÊ≥ïËß£ÂÜ≥ÂìàÂ∏åÂÜ≤Á™Å Ê†πÊçÆË¥üËΩΩÂõ†Â≠êËá™Âä®ËøõË°å rehashÔºàËøõË°åÊâ©ÂÆπÊàñÁº©ÂÆπÔºâÔºåÊâ©ÂÆπÊàñËÄÖÁº©ÂÆπÁöÑÁ≥ªÊï∞Ê†πÊçÆ beanstalkd/primes.c ËÆæÁΩÆ rehash ËøáÁ®ãÂπ∂Ê≤°ÊúâÈááÁî®Á±ª‰ºº Redis ‰∏≠Ê∏êËøõÂºè rehash Êú∫Âà∂ÔºåËÄåÊòØÈòªÂ°ûÂºèÂÆåÊàêÊï¥‰∏™ÂìàÂ∏åË°®ÁöÑ rehash ÂêéÊâçÂèØ‰ª•ËøõË°åÂêéÁª≠Êìç‰Ωú Â≠òÊîæ job Âèä rehash ÁöÑËØ¶ÁªÜÊ∫êÁ†ÅÂàÜÊûêÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566// Â≠òÊîæ‰∏Ä‰∏™ jobstatic voidstore_job(job j)&#123; int index = 0; index = _get_job_hash_index(j-&gt;r.id); j-&gt;ht_next = all_jobs[index]; // Â¶ÇÊûúÂ≠òÂú®ÂÜ≤Á™ÅÔºåÂ∞±ÈááÁî®ÈìæÂú∞ÂùÄÊ≥ï all_jobs[index] = j; all_jobs_used++; /* accept a load factor of 4 */ // Ë¥üËΩΩÂõ†Â≠êËÆæÁΩÆ‰∏∫ 4ÔºåË∂ÖËøáÈòàÂÄºÊó∂Â∞±‰ºöËøõË°å rehash // ÁúãËµ∑ËøôÈáåÊòØÈòªÂ°ûÁöÑÊñπÂºèÊù•ËøõË°å rehash ‰∫ÜÔºåÂ¶ÇÊûú hash Ë°®Â§™Â§ßÔºå‰ºöË¢´ÈòªÂ°û // Âπ∂Ê≤°Êúâ‰ΩøÁî®Á±ª‰ºº redis ÈÇ£Ê†∑Ê∏êËøõÂºè rehash ÊÄùË∑Ø if (all_jobs_used &gt; (all_jobs_cap &lt;&lt; 2)) rehash(1);&#125;// ÊîØÊåÅÊâ©ÂÆπÂíåÁº©ÂÆπstatic voidrehash(int is_upscaling)&#123; job *old = all_jobs; // ËÆ∞ÂΩï‰∏ãÊóßÁöÑ hash Ë°®ÂÆπÈáèÔºåÂÖÉÁ¥†‰∏™Êï∞ size_t old_cap = all_jobs_cap, old_used = all_jobs_used, i; int old_prime = cur_prime; int d = is_upscaling ? 1 : -1; if (cur_prime + d &gt;= NUM_PRIMES) return; if (cur_prime + d &lt; 0) return; if (is_upscaling &amp;&amp; hash_table_was_oom) return; cur_prime += d; all_jobs_cap = primes[cur_prime]; all_jobs = calloc(all_jobs_cap, sizeof(job)); if (!all_jobs) &#123; // ÈíàÂØπÊâ©ÂÆπÂ§±Ë¥•ÁöÑÂ§ÑÁêÜÔºåÊÅ¢Â§çÂéüÊù•ÁöÑ‰∏çÂèòÔºå‰ΩÜÊòØÊ†áËÆ∞ OOM twarnx("Failed to allocate %zu new hash buckets", all_jobs_cap); hash_table_was_oom = 1; cur_prime = old_prime; all_jobs = old; all_jobs_cap = old_cap; all_jobs_used = old_used; return; &#125; // ÈáçÁΩÆ hash Ë°®Áä∂ÊÄÅ all_jobs_used = 0; hash_table_was_oom = 0; // ÂÖ∂ÂÆûÂ∞±ÊòØÊää Hash Ë°®‰∏äÊâÄÊúâÁöÑ jobs ÂÖ®ÈÉ®Êò†Â∞ÑÂà∞Êñ∞ÁöÑÁ©∫Èó¥ for (i = 0; i &lt; old_cap; i++) &#123; while (old[i]) &#123; job j = old[i]; old[i] = j-&gt;ht_next; j-&gt;ht_next = NULL; store_job(j); &#125; &#125; // ÁÑ∂ÂêéÊääÂéüÊù•ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÈáäÊîæÊéâ if (old != all_jobs_init) &#123; free(old); &#125;&#125; ÈìæË°®ÈìæË°®ËøôÁßçÊï∞ÊçÆÁªìÊûÑÂú® Beanstalkd ÂÆûÁé∞‰∏≠Áî®ÂæóÊØîËæÉÈ¢ëÁπÅÔºåÊØîÂ¶Ç beanstalkd/walg.c ‰∏≠‰ΩøÁî®‰∫ÜÂçïÂêëÈìæË°®ÁöÑ‰∏≤ËÅî‰∫Ü‰∏Ä‰∫õÂàóÁöÑÊó•ÂøóÊñá‰ª∂ÔºàÂèÇËßÅ‰∏â‰∏™Ê∏∏Ê†áÊåáÈíàÔºöhead, cur, tailÔºâ beanstalkd/conn.c ‰ΩøÁî®ÂèåÂêëÈìæË°®ËøûÊé•‰∫Ü‰∏Ä‰∫õÂàóË¢´ reserve ÁöÑ‰ªªÂä° Âú® beastalkd/job.cÔºåÂèØ‰ª•ÁúãÂà∞‰ªªÂä°ÂèåÂêëÈìæË°®ÂÆûÁé∞Ôºö 123456789101112131415161718192021222324252627282930intjob_list_any_p(job head)&#123; return head-&gt;next != head || head-&gt;prev != head;&#125;jobjob_remove(job j)&#123; if (!j) return NULL; if (!job_list_any_p(j)) return NULL; /* not in a doubly-linked list */ j-&gt;next-&gt;prev = j-&gt;prev; j-&gt;prev-&gt;next = j-&gt;next; j-&gt;prev = j-&gt;next = j; return j;&#125;voidjob_insert(job head, job j)&#123; if (job_list_any_p(j)) return; /* already in a linked list */ j-&gt;prev = head-&gt;prev; j-&gt;next = head; head-&gt;prev-&gt;next = j; head-&gt;prev = j;&#125; ÈÉ®ÂàÜÊ®°ÂùóÊ∫êÁ†ÅÂ≠¶‰π†main.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657intmain(int argc, char **argv) &#123; int r; // Â≠òÊîæ‰ªªÂä°ÁöÑÈìæË°® struct job list = &#123;&#125;; progname = argv[0]; // ËÆæÁΩÆ‰ΩøÁî®Ë°åÁºìÂ≠òÔºåË°®‰ΩøÁî®Ê†áÂáÜËæìÂá∫‰Ωú‰∏∫ÊâìÂç∞ÁõÆÊ†á // ËØ¶ÁªÜÊñáÊ°£ÂèÇËßÅÔºöhttps://linux.die.net/man/3/setlinebuf // ÊÑèÊÄùÊòØÔºåÂè™ÊúâÂú®Êª°Ë∂≥‰∏ÄË°åÔºàÊç¢Ë°åÔºâÊó∂ÊâçËæìÂá∫ setlinebuf(stdout); // ÂëΩ‰ª§Ë°åÂ§ÑÁêÜ optparse(&amp;srv, argv + 1); if (verbose) &#123; printf("pid %d\n", getpid()); &#125; // ÊúçÂä°Âô®Á´Ø socket ÂàùÂßãÂåñÁ≠âÔºåËøîÂõû‰∏Ä‰∏™ÊåáÂêë socket ÁöÑ file descriptor r = make_server_socket(srv.addr, srv.port); if (r == -1) twarnx("make_server_socket()"), exit(111); srv.sock.fd = r; // ÂçèËÆÆÂ§ÑÁêÜÊ®°ÂùóÂàùÂßãÂåñ prot_init(); if (srv.user) su(srv.user); set_sig_handlers(); if (srv.wal.use) &#123; // We want to make sure that only one beanstalkd tries // to use the wal directory at a time. So acquire a lock // now and never release it. // WAL Âç≥ Write Ahead Log DirectoryÔºå‰∏ªË¶ÅÊòØËÆ∞ÂΩïÊó•ÂøóÁî® // ËøôÈáåÊòØË¶Å‰øùËØÅÊØèÊ¨°Âè™ËÉΩÊúâ‰∏Ä‰∏™ beanstalkd ÂÆû‰æã‰ΩøÁî® WAL ÁõÆÂΩïÔºåÈò≤Ê≠¢Áõ∏‰∫íÂÜôÂÖ•ÂÜ≤Á™Å // ÈÇ£‰º∞ËÆ°‰ª•ÂêéÂ∞±Ê≤°Ê≥ï‰ªé binlog ÊÅ¢Â§ç‰ªªÂä°‰∫Ü„ÄÇ„ÄÇ„ÄÇ if (!waldirlock(&amp;srv.wal)) &#123; twarnx("failed to lock wal dir %s", srv.wal.dir); exit(10); &#125; // ÂàùÂßãÂåñ‰ªªÂä°ÈìæË°®ÔºàÂèåÂêëÈìæË°®Ôºâ list.prev = list.next = &amp;list; // ÂàùÂßãÂåñ WALÔºåÂ¶ÇÊûú log ‰∏≠Êúâ‰ªªÂä°ÔºåËøòË¶ÅÊÅ¢Â§çÂõûÊù•ÔºåÊåÇËΩΩÂà∞ job list walinit(&amp;srv.wal, &amp;list); // ÂõûÊîæ‰ªªÂä°ÊâßË°å r = prot_replay(&amp;srv, &amp;list); if (!r) &#123; twarnx("failed to replay log"); return 1; &#125; &#125; // Ê≠£ÂºèÂêØÂä® serverÔºåÂπ∂ÁõëÂê¨ËØ∑Ê±ÇÔºåÂ§ÑÁêÜËØ∑Ê±Ç‰∫Ü srvserve(&amp;srv); return 0;&#125; serv.c1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556voidsrvserve(Server *s)&#123; int r; Socket *sock; int64 period; if (sockinit() == -1) &#123; twarnx("sockinit"); exit(1); &#125; s-&gt;sock.x = s; // ÊåáÂÆöÂõûË∞ÉÔºåÂΩìÊé•Êî∂Âà∞ `r` ‰∫ã‰ª∂ÂêéÔºåÂ∞±‰ºöËß¶ÂèëËøô‰∏™ÂõûË∞É s-&gt;sock.f = (Handle)srvaccept; // Server Áª¥Êä§‰∫ÜÂÖ≥ËÅîÁöÑÂÆ¢Êà∑Á´ØËøûÊé•ÔºàÊúÄÂ∞èÂ†ÜÔºâ s-&gt;conns.less = (Less)connless; s-&gt;conns.rec = (Record)connrec; r = listen(s-&gt;sock.fd, 1024); if (r == -1) &#123; twarn("listen"); return; &#125; // Ê≥®ÂÜå r = sockwant(&amp;s-&gt;sock, 'r'); if (r == -1) &#123; twarn("sockwant"); exit(2); &#125; for (;;) &#123; // ÊâßË°åÂë®ÊúüÊÄßÁöÑ‰ªªÂä° // Â¶ÇÊûú tick ‰∏≠ÊâßË°åÁöÑ‰ªªÂä°Êó∂Èó¥Ëøá‰πÖÔºå‰ºöÈòªÂ°ûÂêéÈù¢ÁöÑ socket connection Â§ÑÁêÜ // ‰∏•Èáç‰ºöÂØºËá¥Ë∂ÖÊó∂ÔºåËÄåÂ¶ÇÊûúÂÆ¢Êà∑Á´ØÈáçËØïËøáÂ§öÔºåÂàôÂõûÂ¢ûÂä†ÊúçÂä°Á´ØË¥üËΩΩ period = prottick(s); // ËΩÆËØ¢ÊòØÂê¶ÊúâÂ∞±Áª™ÁöÑËØ∑Ê±ÇÔºàrwÔºâÔºåÂÖ∂ÂÆûÂ∞±ÊòØ‰∏™ÈÄÇÈÖçÂô®ÔºåÂ∞ÜÂÖ∑‰ΩìÂπ≥Âè∞‰∏ãËøîÂõûÁöÑÁä∂ÊÄÅ // ËΩ¨Êç¢ÊàêÁªü‰∏ÄÁöÑ `r`, `w`, `h` // Linux ‰ΩøÁî® epoll Â∞ÅË£ÖÔºàÂèÇËßÅ `linux.c`Ôºâ // Unix ‰ΩøÁî® kqueue Â∞ÅË£ÖÔºàÂèÇËßÅ `darwin.c`Ôºâ int rw = socknext(&amp;sock, period); if (rw == -1) &#123; twarnx("socknext"); exit(1); &#125; if (rw) &#123; // Â¶ÇÊûúËΩÆËØ¢Âà∞ÈúÄË¶ÅÂ§ÑÁêÜÁöÑËØ∑Ê±ÇÔºåÂàôÊâßË°åÁõ∏Â∫îÁöÑÂõûË∞É Handle // Ê≥®ÊÑèÔºåËøôÈáåÁöÑÂõûË∞É‰æùÁÑ∂Âú®‰∏ªÁ∫øÁ®ã‰∏≠ÊâßË°åÁöÑÔºåÊâÄ‰ª•Â¶ÇÊûú‰∏ªÁ∫øÁ®ãË¢´ÈòªÂ°ûÔºåÂ∞±ÂëµÂëµÂìí‰∫Ü sock-&gt;f(sock-&gt;x, rw); &#125; &#125;&#125; tube.c12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394// Êñ∞Âª∫ tubeÔºåËøôÈáåÈúÄË¶ÅÁªôÂÆö tube ÂêçÁß∞// ËøôÈáåÂèØ‰ª•ÁúãÂà∞‰∏Ä‰∏™ tube ÊúâÂá†‰∏™ÊØîËæÉÈáçË¶ÅÁöÑÁªÑÊàêÔºö// 1. Áª¥Êä§Â∞±Áª™‰ªªÂä°ÁöÑÂ†Ü// 2. Áª¥Êä§Âª∂ËøüÊâßË°å‰ªªÂä°ÁöÑÂ†Ü// 3. Áª¥Êä§Â§Ñ‰∫é buried Áä∂ÊÄÅÁöÑ‰ªªÂä°ÈìæË°®// 4. Áª¥Êä§‰∏Ä‰∏™Á≠âÂæÖÂàóË°®tubemake_tube(const char *name)&#123; tube t; // ÂàÜÈÖçÂÜÖÂ≠òÁ©∫Èó¥ÔºåÁî®‰∫éÂ≠òÂÇ® tube ÁªìÊûÑ‰ΩìÂÄº t = new(struct tube); if (!t) return NULL; // ÂàùÂßãÂåñ tube ÂêçÁß∞ t-&gt;name[MAX_TUBE_NAME_LEN - 1] = '\0'; strncpy(t-&gt;name, name, MAX_TUBE_NAME_LEN - 1); if (t-&gt;name[MAX_TUBE_NAME_LEN - 1] != '\0') twarnx("truncating tube name"); // ready Â†ÜÁª¥Êä§ÁùÄ‰∏Ä‰∫õÂ∑≤ÁªèÂ∞±Áª™ÁöÑ jobsÔºåËøôÈáåÊòØÊåáÂÆöÊåâÁÖß job ‰ºòÂÖàÁ∫ßÁöÑÊñπÂºèÊØîËæÉÂ§ßÂ∞è // ËøôÊ†∑ÔºåËøô‰∏™Â†ÜÈ°∂Â∞±ÊòØ‰ºòÂÖàÁ∫ßÊúÄÈ´òÁöÑ job t-&gt;ready.less = job_pri_less; // delay Â†ÜÁª¥Êä§ÁùÄ‰∏Ä‰∫õË¢´Âª∂ËøüÊâßË°åÁöÑ jobsÔºåËøôÈáåÊòØÊåâÁÖß job delay Êó∂Èó¥ÊØîËæÉÂ§ßÂ∞è // ËøôÊ†∑ÔºåËøô‰∏™Â†ÜÈ°∂Â∞±ÊòØÂª∂ËøüÊó∂Èó¥ÊúÄÁü≠ÁöÑ job t-&gt;delay.less = job_delay_less; // Áî®‰∫éËÆ∞ÂΩï job Âú®Â†Ü‰∏äÁöÑ‰ΩçÁΩÆ t-&gt;ready.rec = job_setheappos; t-&gt;delay.rec = job_setheappos; t-&gt;buried = (struct job) &#123; &#125;; // ‰ΩøÁî®ÈìæË°®Áª¥Êä§ÁùÄË¢´ bury ÊéâÁöÑ job t-&gt;buried.prev = t-&gt;buried.next = &amp;t-&gt;buried; // ÂàùÂßãÂåñÊéíÈòüÂàóË°® ms_init(&amp;t-&gt;waiting, NULL, NULL); return t;&#125;// ÈáäÊîæ tubestatic voidtube_free(tube t)&#123; // ÂÆûÈôÖÂ∞±ÊòØ‰ªéÂÖ®Â±ÄÁöÑ tubes ÂàóË°®‰∏≠ÁßªÈô§ËØ• tube prot_remove_tube(t); // ÈáäÊîæÂ∞±Áª™ÁöÑ‰ªªÂä° free(t-&gt;ready.data); // ÈáäÊîæÂª∂ËøüÁöÑ‰ªªÂä° free(t-&gt;delay.data); // Ê∏ÖÁ©∫Á≠âÂæÖÂàóË°® ms_clear(&amp;t-&gt;waiting); // ÈáäÊîæ tube ÊåáÂêëÁöÑÂÜÖÂ≠ò free(t);&#125;// ÂºïÁî®ËÆ°Êï∞ÔºöÂáèÂºïÁî®voidtube_dref(tube t)&#123; if (!t) return; if (t-&gt;refs &lt; 1) return twarnx("refs is zero for tube: %s", t-&gt;name); --t-&gt;refs; // Ê≤°ÊúâÂºïÁî®ÂêéÂ∞±ÂèØ‰ª•ÈáäÊîæËØ• tube ‰∫Ü if (t-&gt;refs &lt; 1) tube_free(t);&#125;// ÂºïÁî®ËÆ°Êï∞ÔºöÂ¢ûÂä†ÂºïÁî®voidtube_iref(tube t)&#123; if (!t) return; ++t-&gt;refs;&#125;// Êñ∞Âª∫‰∏Ä‰∏™ tubeÔºåÁÑ∂ÂêéÊ≥®ÂÜåÂà∞ÂÖ®Â±Ä tubes ÂàóË°®static tubemake_and_insert_tube(const char *name)&#123; int r; tube t = NULL; t = make_tube(name); if (!t) return NULL; /* We want this global tube list to behave like "weak" refs, so don't * increment the ref count. */ // ËøôÈáåÊòØÊÉ≥ËÆ©ÂÖ®Â±Ä tube ÂàóË°®Ë°®Áé∞‰∏∫Âº±ÂºïÁî®ÔºåÊâÄËøôÈáåÂπ∂Ê≤°ÊúâÂÅöÂ¢ûÂä†ÂºïÁî®ÁöÑÊìç‰Ωú r = ms_append(&amp;tubes, t); // Â¶ÇÊûúÊ≥®ÂÜå tube Â§±Ë¥•ÔºåÂáèÂºïÁî®ÔºåÂøÖË¶ÅÁöÑËØù‰ºöË¢´ÈáäÊîæÊéâ if (!r) return tube_dref(t), (tube) 0; return t;&#125; job.cÂú® Tube ‰∏≠Êúâ‰∏§‰∏™ÊúÄÂ∞èÂ†ÜÊï∞ÊçÆÁªìÊûÑÂàÜÂà´Â≠òÊîæË¢´Âª∂ËøüÁöÑ‰ªª‰ΩïÂíåÂ∞±Áª™ÁöÑ‰ªªÂä°ÔºåËøô‰∏§Áßç‰ΩøÁî®ÁöÑÊéíÂ∫èÊñπÂºèÊòØ‰∏çÂêåÁöÑ„ÄÇÊàë‰ª¨ÁúãÂà∞Âú®‰∏äÈù¢ÁöÑ Tube ÂàùÂßãÂåñÊó∂ÔºåÁªô‰∏§‰∏™Â†ÜÁªëÂÆö‰∫Ü‰∏çÂêåÁöÑÊØîËæÉÂ§ßÂ∞èÁöÑÂõûË∞ÉÔºö 12t-&gt;ready.less = job_pri_less;t-&gt;delay.less = job_delay_less; ‰ª•‰∏ãÂèØ‰ª•ÁúãÂà∞ÂÖ∑‰ΩìÁöÑÊéíÂ∫èÊñπÂºèÔºö 12345678910111213141516171819// ÂõûË∞ÉÂáΩÊï∞ÔºåÂÖàÂü∫‰∫é‰ºòÂÖàÁ∫ßÊØîËæÉÂì™‰∏™Â∞èÔºåÂÜçÂü∫‰∫é id ÊØîËæÉÂì™‰∏™Â∞èintjob_pri_less(void *ax, void *bx)&#123; job a = ax, b = bx; if (a-&gt;r.pri &lt; b-&gt;r.pri) return 1; if (a-&gt;r.pri &gt; b-&gt;r.pri) return 0; return a-&gt;r.id &lt; b-&gt;r.id;&#125;// ÂõûË∞ÉÂáΩÊï∞ÔºåÂÖàÂü∫‰∫éÂà∞ÊúüÊó∂Èó¥ÊØîËæÉÂì™‰∏™Â∞èÔºåÂÜçÂü∫‰∫é id ÊØîËæÉÂì™‰∏™Â∞èintjob_delay_less(void *ax, void *bx)&#123; job a = ax, b = bx; if (a-&gt;r.deadline_at &lt; b-&gt;r.deadline_at) return 1; if (a-&gt;r.deadline_at &gt; b-&gt;r.deadline_at) return 0; return a-&gt;r.id &lt; b-&gt;r.id;&#125; ËØªÂêéÊÑüÊï¥‰∏™ Beanstalkd ÁöÑÊ†∏ÂøÉÁöÑ‰ª£Á†Å‰∏çËøá‰∫îÂçÉË°åÂ∑¶Âè≥Ôºå‰ΩÜËøôÂ∞±ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Áîü‰∫ßÁ∫ßÂà´ÁöÑÊ∂àÊÅØÈòüÂàóÔºåÁöÑÁ°ÆÊòØÂæàÂéâÂÆ≥„ÄÇ‰∏çËøáÔºå‰πüÊ≠£Âõ†‰∏∫ÂÖ∂ÂÆûÁé∞ÊØîËæÉÁÆÄÂçïÔºåÊâÄ‰ª•‰πüÊ≤°ÊúâÊèê‰æõÁ±ª‰ºº Redis ÁöÑ‰∏ª‰ªéÊú∫Âà∂Á≠â„ÄÇÂΩìÁÑ∂ÔºåÂú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÂπ∂Ê≤°ÊúâÂÆåÊï¥Âú∞ÂâñÊûêÊâÄÊúâÁöÑÊ®°ÂùóÂÆûÁé∞ÔºåÂè™ÊòØÂàóÂá∫‰∫Ü‰∏™‰∫∫ÊØîËæÉÊÑüÂÖ¥Ë∂£ÁöÑÊ®°ÂùóÔºõÂÖ≥‰∫é binlog ÁÆ°ÁêÜÁöÑÊ∫êÁ†ÅÔºàÊØîÂ¶ÇÂûÉÂúæÂõûÊî∂ÔºåÂéãÁº©ÔºåÈ¢ÑÁïôÁ©∫Èó¥Áî≥ËØ∑Ôºå‰ªªÂä°ÊÅ¢Â§çÁ≠âÔºâÂè™ÊòØÁ≤óÁï•Âú∞ÈòÖËØª‰∫Ü‰∏ãÔºåÂ∞±‰∏çÂú®Ê≠§Â§ÑÁåÆ‰∏ëÂï¶~ ÊÄªÁöÑÊù•ËØ¥ÔºåÂØπ‰∫éÂçïÊú∫Ê∂àÊÅØÈòüÂàóÂÆûÁé∞ÊÑüÂÖ¥Ë∂£ÁöÑÂêåÂ≠¶ËøòÊòØÊé®ËçêÈòÖËØª‰∏ãËØ•Á≥ªÁªüÁöÑÊ∫êÁ†ÅÔºåÂèØ‰ª•Â≠¶‰π†ÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∫õËÆæËÆ°ÊÄùÊÉ≥ÔºåÂÆûÁé∞ÊÄùË∑ØÁ≠â~ ÂèÇËÄÉ beanstalkd ÁöÑ‰∏Ä‰∫õÁúãÊ≥ï beanstalkd repo beanstalkd docs Ê∂àÊÅØÈòüÂàó beanstalkd Ê∫êÁ†ÅËØ¶Ëß£ ÊúÄÂ§ß‚ÄîÊúÄÂ∞èÂ†Ü Âª∂‰º∏ÈòÖËØª Kqueue ‰∏é Epoll Êú∫Âà∂ ‰ªé 0Âà∞ 100‚Äî‚ÄîÁü•‰πéÊû∂ÊûÑÂèòËøÅÂè≤]]></content>
      <categories>
        <category>Ê∂àÊÅØÈòüÂàó</category>
      </categories>
      <tags>
        <tag>Ê∫êÁ†ÅÂ≠¶‰π†</tag>
        <tag>Ê∂àÊÅØÈòüÂàó</tag>
        <tag>Beanstalkd</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„ÄäÊû∂ÊûÑÊï¥Ê¥Å‰πãÈÅì„ÄãÂ≠¶‰π†Á¨îËÆ∞‰πãÁºñÁ®ãËåÉÂºè]]></title>
    <url>%2F2019%2F01%2F03%2Fclean-arch-notes-paradigms%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄËøëÊù•ÂºÄÂßãÈòÖËØª Robert C. Martin ÁöÑÊñ∞Ëëó„ÄäÊû∂ÊûÑÊï¥Ê¥Å‰πãÈÅì„ÄãÔºàClean ArchitectureÔºâ„ÄÇÊ≤°Êúâ‰∫∫ÊÑøÊÑèÁúãÂà∞Âõ¢ÈòüÂÜÖÁöÑÈ°πÁõÆÈÄêÊ∏êÂèëÂ±ïÊàê‰∏ÄÂõ¢‰π±È∫ªÔºåÁõ∏‰∫íÁ∫†Áº†„ÄÇÈÇ£Â¶Ç‰Ωï‰ªéÊ†πÊú¨‰∏äÂáèÂ∞ëËøôÁßçÈóÆÈ¢òÁöÑÂèëÁîüÂë¢ÔºüËøôÂ∞±ÈúÄË¶ÅÊàë‰ª¨ÊéåÊè°‰∏Ä‰∫õÂÆèËßÇÂ±ÇÈù¢ÁöÑËÆæËÆ°ÊÄùÊÉ≥Ôºå‰ªéÁªôÈ°πÁõÆÊâìÂü∫Á°ÄÊó∂Â∞±Â∫îËØ•ËÄÉËôëÂ•ΩÂêÑ‰∏™Ê®°Âùó„ÄÅÁ±ª„ÄÅÂáΩÊï∞Á≠âÂ¶Ç‰ΩïËÆæËÆ°ÊàêÈ´òÂÜÖËÅö„ÄÅ‰ΩéËÄ¶ÂêàÁöÑÁªìÊûÑ„ÄÇÊï¥Ê¥ÅÁöÑÈ°πÁõÆÊû∂ÊûÑÊòØÂà©‰∫éÈïøËøúÂèëÂ±ïÁöÑÔºåËøôÁØáÁ¨îËÆ∞Â∞Ü‰ºöËÆ∞ÂΩï‰∏Ä‰∫õ‰ªé‰π¶‰∏≠Â≠¶‰π†Âà∞ÁöÑÈáçË¶ÅÁü•ËØÜÁÇπÔºå‰æø‰∫éÂêéÊúüÂ§ç‰π†ÂíåÂèÇËÄÉ„ÄÇ ÂΩìÁÑ∂Ôºå‰ΩúËÄÖËøòÊúâ‰∏ÄÊú¨Â§ßÂêçÈºéÈºéÁöÑËëó‰Ωú„Ää‰ª£Á†ÅÊï¥Ê¥Å‰πãÈÅì„Äã‰πüÈùûÂ∏∏ÂÄºÂæóÈòÖËØªÔºåÂÖ≥‰∫éËøôÊú¨‰π¶‰πüÂÅö‰∫ÜÁÇπÁ¨îËÆ∞ÔºåÂèÇËßÅ„Ää‰ª£Á†ÅÊï¥Ê¥Å‰πãÈÅì„ÄãËØª‰π¶Á¨îËÆ∞~ Ë¶ÅÁÇπËÆ∞ÂΩï‰∏âÂ§ßÁºñÁ®ãËåÉÂºèÊòØÊ†πÂü∫ÔºåÊØèÁßçËåÉÂºèÂÖ∂ÂÆûÈÉΩÁªôÊàë‰ª¨Â∏¶Ëµ∞‰∫Ü‰∏Ä‰∫õ‰∏úË•øÔºögoto ËØ≠Âè•„ÄÅÂáΩÊï∞ÊåáÈíà„ÄÅËµãÂÄº„ÄÇ‰∏âÁßçÁºñÁ®ãËåÉÂºèÁöÑÊÄªÁªìÔºö ÁªìÊûÑÂåñÁºñÁ®ãÔºöDiscovered by Edsger Wybe Dijkstra in 1968. Structured programming imposes discipline on direct transfer of control. Èù¢ÂêëÂØπË±°ÁºñÁ®ãÔºöDiscovered by Ole Johan and Kristen Nygaard in 1966. Object-oriented programming imposes discipline on indirect transfer of control. ÂáΩÊï∞ÂºèÁºñÁ®ãÔºöInvented by Alonzo Church in 1936. Functional programming imposes discipline upon assignment. ‰ª•‰∏ä‰∏âÁßçÁºñÁ®ãËåÉÂºè‰ºöÂΩ±ÂìçÂà∞Êû∂ÊûÑÁöÑÊñπÊñπÈù¢Èù¢ÔºöÊàë‰ª¨‰ΩøÁî®Â§öÊÄÅÊú∫Âà∂Ë∑®Ë∂äÊû∂ÊûÑËæπÁïåÔºõ‰ΩøÁî®ÂáΩÊï∞ÂºèÁºñÁ®ãÂΩ±ÂìçÊï∞ÊçÆ‰ΩçÁΩÆÂíåËÆøÈóÆÔºõ‰ΩøÁî®ÁªìÊûÑÂåñÁºñÁ®ãÊûÑÂª∫Âü∫Á°ÄÁÆóÊ≥ïÊ®°ÂùóÔºàÂü∫Áü≥Ôºâ„ÄÇÂèØ‰ª•ÂØπÁÖßËΩØ‰ª∂Êû∂ÊûÑ‰∏âÂ§ßÊ¶ÇÂøµÔºöÂäüËÉΩ„ÄÅÁªÑ‰ª∂ÈöîÁ¶ªÂíåÊï∞ÊçÆÁÆ°ÁêÜ„ÄÇ ÁªìÊûÑÂåñÁºñÁ®ã ‰ªª‰ΩïÁ®ãÂ∫èÈÉΩÂèØ‰ª•Áî±‰∏âÁßçÁªìÊûÑÁªÑÊàêÔºö Sequence Selection Iteration ÁªìÊûÑÂåñÁºñÁ®ãÂÖÅËÆ∏Ê®°ÂùóÂèØ‰ª•Ë¢´ÈÄíÂΩíÂú∞ÂàÜÂâ≤ÊàêÂæàÂ§öÂ∞èÁöÑÂèØË¢´ËØÅÊòéÁöÑÂçïÂÖÉÔºåËøô‰πüÂ∞±ÊÑèÂë≥ÁùÄÊ®°ÂùóÂèØ‰ª•ÊåâÁÖßÂäüËÉΩËß£ËÄ¶ ÁßëÂ≠¶Âπ∂Èùû‰æùÈù†ËØÅÊòéÊüê‰∫õÂ£∞ÊòéÊ≠£Á°ÆËÄåÂ≠òÂú®ÔºåËÄåÊòØËØÅÊòéÂÆÉ‰ª¨ÊòØÈîôËØØÁöÑÔºàScience does not work by proving statements true, but rather by proving statements falseÔºâ„ÄÇÂπ∂ÈùûÊâÄÊúâÁöÑ‰∫ãÊÉÖÈÉΩÂèØ‰ª•Ë¢´ËØÅÂÆûÁöÑ~ Mathmematics is the discipline of proving provable statements true. Science, in contrast, is the discipline of proving provable statements false Dijkstra ÊõæÁªèËØ¥Ëøá Testing shows the presence, not the absence, of bugs„ÄÇÊµãËØïÂπ∂‰∏çËÉΩ‰øùËØÅ‰Ω†ÁöÑÁ®ãÂ∫è‰∏ÄÂÆöÊ≠£Á°ÆÔºå‰ΩÜÊòØÂèØ‰ª•ÈÄöËøáÊµãËØïËØÅÊòé‰Ω†ÁöÑÁ®ãÂ∫èÂ≠òÂú®ÈîôËØØÔºåÂπ∂ÈÄöËøáÂÖÖÂàÜÊµãËØïÔºåËÆ©‰Ω†ÁöÑÁ®ãÂ∫èÊõ¥Âä†Ê≠£Á°ÆÔºåÁõ¥Âà∞Êª°Ë∂≥Êàë‰ª¨ÁöÑÈ¢ÑÊúü Èù¢ÂêëÂØπË±°ÁºñÁ®ã ËÆæËÆ°ËâØÂ•ΩÁöÑÊû∂ÊûÑÈúÄË¶ÅÊàë‰ª¨ÁêÜËß£Âπ∂Â∫îÁî® OO ÁöÑ‰∏Ä‰∫õÂéüÂàô ‰ªÄ‰πàÊòØÈù¢ÂêëÂØπË±°Ôºö Êï∞ÊçÆ + Ë°å‰∏∫ÁöÑÁªÑÂêà ‰∏∫ÁúüÂÆû‰∏ñÁïåÂª∫Ê®° Â∞ÅË£ÖÔºàEncapsulationÔºâ„ÄÅÁªßÊâøÔºàInheritanceÔºâÂíåÂ§öÊÄÅÔºàPolymorphismÔºâ UNIX Á≥ªÁªüË¶ÅÊ±ÇÊØè‰∏™ IO ËÆæÂ§áÈ©±Âä®ÈÉΩÈúÄË¶ÅÊèê‰æõ‰∫î‰∏™Ê†áÂáÜÂáΩÊï∞Ôºöopen, close, read, write Âíå seek Â§öÊÄÅÂÆûÈôÖ‰∏äÂ∞±ÊòØÂáΩÊï∞ÊåáÈíàÁöÑÂ∫îÁî®ÔºåËá™‰ªéÂÜØËØ∫‰æùÊõºÊû∂ÊûÑËØûÁîü‰ª•Êù•ÔºåÁ®ãÂ∫èÂëò‰ª¨Â∞±‰∏ÄÁõ¥Âú®‰ΩøÁî®ËøôÁßçÊäÄÊúØ‰∫Ü„ÄÇ‰ΩÜÊòØÊòæÂºèÂú∞‰ΩøÁî®ÂáΩÊï∞ÊåáÈíàÊòØÂæàÂç±Èô©ÁöÑÔºåÂπ∂‰∏î‰ΩøÁî®Êó∂ÈúÄË¶ÅÈÅµÂæ™‰∏Ä‰∫õÂéüÂàôÔºåÊØîËæÉÈ∫ªÁÉ¶„ÄÇOO ÂàôÂ∞Ü‰Ω†‰ªé‰∏≠Ëß£ÊîæÂá∫Êù•ÔºåËÆ©‰Ω†Êõ¥Âä†ËΩªÊùæÂú∞ÂÆûÁé∞Â§öÊÄÅ„ÄÇ OO ÂÖÅËÆ∏Âú®‰ªª‰ΩïÂú∞ÊñπÔºå‰∏∫‰ªª‰ΩïÊÉÖÂΩ¢‰ΩøÁî®Êèí‰ª∂ÂºèÊû∂ÊûÑÔºà‰∏ªË¶ÅÊòØÂ§öÊÄÅÁöÑÂ®ÅÂäõÔºåÂÖ∂ÂÆûÂú®ÂÖ∂ÂÆÉËØ≠Ë®Ä‰∏≠ÔºåÂ¶Ç Rust/GoÔºå‰ΩøÁî®Êé•Âè£Êú∫Âà∂‰πüËÉΩËææÂà∞Á±ª‰ººÁöÑÁõÆÁöÑÔºâ ‰ΩøÁî® OO ËØ≠Ë®ÄÂèØ‰ª•ÂÆåÂÖ®ÊéßÂà∂Á≥ªÁªü‰∏≠Ê∫êÁ†ÅÁöÑ‰æùËµñÊñπÂêë„ÄÇÂ§öÊÄÅÊú∫Âà∂ÂèØ‰ª•ËÆ©‰ªª‰ΩïÊ∫êÁ†Å‰æùËµñÈÉΩÂèØ‰ª•Ë¢´ÂÄíÁΩÆÔºåÊó†ËÆ∫ÂÆÉ‰ª¨Âú®Âì™ÂÑø OO Â∏¶Êù•ÁöÑÂ•ΩÂ§ÑÔºåÁî®Âá†‰∏™ÂÖ≥ÈîÆÂ≠óÊ¶ÇÊã¨Ôºö ‰æùËµñÂÄíÁΩÆÔºàDependency inversionÔºâ ÂèØÁã¨Á´ãÈÉ®ÁΩ≤ÊÄßÔºàIndependent deployabilityÔºâ ÂèØÁã¨Á´ãÂºÄÂèëÊÄßÔºàIndependent developabilityÔºâ ‰ªéËΩØ‰ª∂Êû∂ÊûÑÁöÑËßíÂ∫¶ÁúãÔºåÈù¢ÂêëÂØπË±°ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®Âº∫Â§ßÁöÑÂ§öÊÄÅÊú∫Âà∂ÔºåÊù•ÊéßÂà∂Á≥ªÁªüÊ∫êÁ†Å‰æùËµñ„ÄÇËøôÊ†∑ÂèØ‰ª•ÂàõÂª∫Âá∫Êèí‰ª∂ÂºèÊû∂ÊûÑÔºåÂèØ‰ª•Â∞ÜÊõ¥È´òÂ±ÇÁöÑÊäΩË±°Á≠ñÁï•ÂíåÂ∫ïÂ±ÇÁöÑÂÆûÁé∞ÈöîÁ¶ªÂºÄ„ÄÇÂ∫ïÂ±ÇÁöÑÂÆûÁé∞ÁªÜËäÇ‰∫§ÁªôÂêÑ‰∏™Êèí‰ª∂ÂéªÂÆåÊàêÔºåÂπ∂‰∏îÂÆÉ‰ª¨ÂèØ‰ª•Ë¢´Áã¨Á´ãÂºÄÂèëÂíåÈÉ®ÁΩ≤ÔºåËÄå‰∏ç‰ºöÂíåÊõ¥È´òÂ±ÇÁöÑÊ®°ÂùóËÄ¶Âêà„ÄÇ ÂáΩÊï∞ÂºèÁºñÁ®ã ÊâÄÊúâÁöÑÁ´û‰∫âÊù°‰ª∂„ÄÅÊ≠ªÈîÅÊù°‰ª∂ÂíåÂπ∂ÂèëÊõ¥Êñ∞ÁöÑÈóÆÈ¢òÈÉΩÊòØÁî±ÂèØÂèòÂèòÈáèÂØºËá¥ÁöÑ„ÄÇÂáΩÊï∞ÂºèÁºñÁ®ãÂàôÈôêÂà∂‰∫ÜÂèòÈáè‰øÆÊîπ Â∞ÜÂèØÂèòÂíå‰∏çÂèØÂèòÁöÑÁªÑ‰ª∂ÈöîÁ¶ªÂºÄÊù•Ôºö‰∏çÂèØÂèòÁªÑ‰ª∂‰ΩøÁî®ÂáΩÊï∞ÂºèÊâßË°å‰ªªÂä°Ôºà‰∏ç‰ΩøÁî®‰ªª‰ΩïÂèØÂèòÈáèÔºâÔºõ‰∏çÂèØÂèòÁªÑ‰ª∂ÈÄöËøáÂíåÂèØÂèòÁªÑ‰ª∂ÈÄö‰ø°ÁöÑÊñπÂºèÊù•ÂÅöÁä∂ÊÄÅÂèòÊõ¥ Event Sourcing: Ê†∏ÂøÉÁ≠ñÁï•ÊòØ‰∏çÂ≠òÂÇ®Áä∂ÊÄÅÔºåËÄåÊòØÂ≠òÂÇ®‰∫ãÂä°„ÄÇÂΩìÈúÄË¶ÅËé∑ÂèñÁä∂ÊÄÅÊó∂ÔºåÂè™ÈúÄË¶Å‰ªéÊúÄÂºÄÂßãÂõûÊîæ‰∫ãÂä°ÔºåÊúÄÁªàÂæóÂà∞ÊÉ≥Ë¶ÅÁöÑÁä∂ÊÄÅ„ÄÇËøôÊ†∑ÁöÑÁ≥ªÁªüÂ∞±Âè™Êúâ CRÔºàÂàõÂª∫„ÄÅËØªÂèñÔºâ ‰∫ÜÔºåËÄå‰∏ç‰ºöÂ≠òÂú®Áä∂ÊÄÅÊõ¥Êñ∞ÂíåÂà†Èô§„ÄÇÂõ†Ê≠§ÔºåÂæàÂ§öÂπ∂ÂèëÂºïÊù•ÁöÑÊõ¥Êñ∞ÈóÆÈ¢òÈÉΩ‰∏ç‰ºöÂèëÁîüÔºàÂÖ∂ÂÆûÂèØ‰ª•ÂØπÊØî‰∏ãÂü∫‰∫éÊó•ÂøóÂºè LSM ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºâ„ÄÇ ÊÄªÁªìÁªìÊûÑÂåñÁºñÁ®ã„ÄÅÂáΩÊï∞ÂºèÁºñÁ®ã‰ª•ÂèäÈù¢ÂêëÂØπË±°ÁºñÁ®ãÈÉΩÂàÜÂà´ÁªôÊàë‰ª¨Â∏¶Êù•‰∫Ü‰∏çÂêåÁöÑÈôêÂà∂ÔºàTo tell us what not to doÔºâÔºåËÄåÈùûÂ∏¶Êù•Êñ∞ÁöÑÂäüËÉΩ„ÄÇËΩØ‰ª∂Âπ∂ÈùûÂø´ÈÄüÂèëÂ±ïÁöÑÈ´òÁßëÊäÄÔºåÂõ†Ê≠§ÂæàÂ§öÂéüÂàôËá≥‰ªä‰æùÁÑ∂ÈÄÇÁî®„ÄÇ‰∏çÁÆ°Êú∫Âô®ÊÄé‰πàÂèòÂåñ„ÄÅÂ∑•ÂÖ∑Â¶Ç‰ΩïÂèòÂæóÊõ¥Â•ΩÔºå‰ΩÜËΩØ‰ª∂ÁöÑÊú¨Ë¥®ËøòÊòØ‰∏ÄÊ†∑„ÄÇÊâÄË∞ìÁöÑËΩØ‰ª∂Á®ãÂ∫è‰∏çËøáÂ∞±ÊòØÁî±È°∫Â∫è„ÄÅÈÄâÊã©„ÄÅÂæ™ÁéØÁªìÊûÑÔºàÈó¥Êé•ÔºâÁªÑÊàêÔºå‰∏çÂ§ö‰∏çÂ∞ë„ÄÇ]]></content>
      <categories>
        <category>Â≠¶‰π†Á¨îËÆ∞</category>
      </categories>
      <tags>
        <tag>Êû∂ÊûÑ</tag>
        <tag>ËÆæËÆ°ÊÄùÁª¥</tag>
        <tag>ÁºñÁ®ãËåÉÂºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Rust ÂÖ•ÂùëËÆ∞]]></title>
    <url>%2F2018%2F12%2F31%2Frust-learning-notes%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄË∞¢Â§©Ë∞¢Âú∞ÔºåÊÄªÁÆóËµ∂Âú® 2018 Âπ¥ÁªìÊùüÂâçÂÆåÊàê‰∫Ü Rust ‰πãÊóÖÔºàÂΩìÁÑ∂ËøòÊòØÂÖ•Èó®Á∫ßÂà´Ôºâ„ÄÇ‰πãÊâÄ‰ª•ÊÉ≥Ë¶ÅÂÖ•ÂùëËøôÈó®ËØ≠Ë®ÄÔºå‰πüÊòØÊÉ≥Ë¶ÅÂú®Á†îÁ©∂ TiKV Êó∂ÂÄô‰∏çË¶ÅË¢´ËØ≠Ë®ÄÂç°‰∏ª„ÄÇÂè¶Â§ñÔºåÂ≠¶‰π†Êñ∞ÁöÑËØ≠Ë®Ä‰πüÊòØ‰∏∫‰∫ÜÂºÄÈòîËßÜÈáéÔºåÂ≠¶‰π†Êñ∞ÁöÑÊÄùË∑Ø~Ê≠£Â¶ÇÂæàÂ§öÂâçËæàÊâÄË®ÄÔºåRust ÁöÑÈó®ÊßõÂÖ∂ÂÆûÊå∫È´òÁöÑÔºåÊâÄ‰ª•ÁªùÂØπ‰∏çÈÄÇÂêàÊñ∞Êâã‰Ωú‰∏∫ÂÖ•Èó®ËØ≠Ë®ÄÔºÅÂπ∏ËøêÁöÑÊòØÔºåÊó©‰∫õÂπ¥Â∞±Êé•Ëß¶Âπ∂Â≠¶‰π†‰∫Ü C, Java, C#, Python, Go Á≠âËØ≠Ë®ÄÔºåÊâÄ‰ª•ÂØπ‰∫éÂÖ∂‰∏≠Êüê‰∫õÁ±ª‰ººÁöÑÊ¶ÇÂøµÁêÜËß£Ëµ∑Êù•Â∞±ÊØîËæÉËΩªÊùæÔºàÂ¶Ç trait, struct Âíå‰∏Ä‰∫õÈù¢ÂêëÂØπË±°ÁöÑÊ®°ÂºèÁ≠âÔºâ„ÄÇ‰ΩÜÊòØÔºåËøôÈó®ËØ≠Ë®ÄËøòÊòØÊúâÂæàÂ§öÊØîËæÉÊñ∞ÁöÑÊ¶ÇÂøµÈùûÂ∏∏‰∏é‰ºó‰∏çÂêåÔºö ÊâÄÊúâÊùÉÂíåÁîüÂëΩÂë®Êúü„ÄÅÁîüÂëΩÂë®ÊúüÊ≥®Ëß£ Trait Âíå Trait Objects Â£∞ÊòéÂÆèÂíåËøáÁ®ãÂÆè Êô∫ËÉΩÊåáÈíàÔºàÊàëÊ≤°‰∫ÜËß£Ëøá C++ ÁöÑÊô∫ËÉΩÊåáÈíàÔºå‰∏çÂ•ΩÂØπÊØîÔºâ ÈùûÂ∏∏Âº∫Â§ßÁöÑÊ®°ÂºèÂåπÈÖçÔºàËä±Ê†∑ÈùûÂ∏∏Â§öÔºâ ÈùûÂ∏∏ÂèØÁà±ÁöÑÈîôËØØÂ§ÑÁêÜÊñπÂºèÔºàÂØπÊØî‰∏ã Go ÂëÜÊùøÂ§ÑÁêÜÊñπÂºèÂ∞±Áü•ÈÅì‰∫ÜÔºâ ÂÖ≥‰∫éËØ≠Ê≥ïÊñπÈù¢ÔºåÂÄíÊòØËßâÂæóÂèØ‰ª•„ÄåÂøçÂèó„ÄçÔºåÊØïÁ´ü‰π†ÊÉØ‰∫Ü‰πüÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ‰ΩÜÊòØÁî±‰∫éÊ¶ÇÂøµÂæàÂ§öÔºåÂåÖÊã¨‰ΩøÁî®ÁöÑÁ¨¶Âè∑Â§™Â§öÔºàÈîÆÁõò‰∏ä‰Ω†ËÉΩÁúãÂà∞ÁöÑÁ¨¶Âè∑Âü∫Êú¨ÈÉΩÁî®‰∏ä‰∫ÜÔºâÔºåËøòÊòØÈúÄË¶ÅÂº∫Â§ßÁöÑÁêÜËß£ÂäõÂíåËÆ∞ÂøÜÂäõÊâçÂèØ‰ª•ÊääÊåÅ‰ΩèÂêßÔºåËá≥Â∞ëÂÉèÊàëËøôÊ†∑ÁöÑËÄÅ‰∫∫ÂÆ∂Ë°®Á§∫ÁúãÂÆå‰∏ÄÈÅçÊ†πÊú¨‰∏çË°åÔºå‰∏çÁÆ°ÊÄé‰πàÊ†∑ÔºåÂÖàÂÖ•Âùë~ ÂÖ•ÂùëÊó∂Â≠¶‰π†ÁöÑÊòØÂÆòÊñπÊé®ËçêÁöÑ Rust BookÔºåÂØπÂ∫îÁöÑ‰∏≠ÊñáÁøªËØëÁâàÊú¨ÂèØ‰ª•ÂèÇËÄÉ Rust Á®ãÂ∫èËÆæËÆ°ËØ≠Ë®Ä„ÄÇ‰ΩÜÊòØÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå‰∏≠ÊñáËØëÊú¨Êúâ‰∫õÁøªËØë‰∏çÂ§™ÈÄöÈ°∫ÁöÑÂú∞ÊñπÔºåÊâÄ‰ª•ÂèØ‰ª•ÂØπÁÖßÁùÄÂéªÁúãËã±ÊñáÁâà~ ÂâçÊÆµÊó∂Èó¥ Rust 1.31.0 ÂèëÂ∏É‰∫ÜÔºåÊâÄ‰ª•‰πüË∑üÁùÄÂçáÁ∫ß‰∫Ü‰∏ã„ÄÇÁî±‰∫é‰π¶‰∏≠ÁöÑ‰æãÂ≠êÂ∫îËØ•ÊòØ‰ª• Rust 2015 ÁâàÊú¨‰∏∫‰∏ªÁöÑÔºåÊâÄ‰ª•ÊúâÊûÅÂ∞ëÈÉ®ÂàÜÁ§∫‰æã‰∏çËÉΩÂú® Rust 2018 ‰∏≠‰ΩøÁî®ÔºåÂèØ‰ª•ÂèÇÁÖßÊèêÁ§∫Ôºå‰ΩøÁî® cargo fix ‰∏Ä‰∏ãÂç≥ÂèØÂÆåÊàêËøÅÁßª~ Â≠¶‰π†ËøáÁ®ã‰∏≠Êï≤‰∫Ü‰∫õ‰ª£Á†ÅÔºåÂèÇËßÅ Learning Rust ‰ªìÂ∫ìÔºåÊúâÂÖ¥Ë∂£‰πüÂèØ‰ª•ÂéªÁúãÔºå‰ª£Á†Å‰∏≠Ê∑ªÂä†ÂæàÂ§öÊ≥®ÈáäÔºåÂ∫îËØ•ÂèØ‰ª•Â∏ÆÂä©ÁêÜËß£~ ‰∏ãÈù¢ÊääÂ≠¶‰π†ÊúüÈó¥ÂÅöÁöÑÁ¨îËÆ∞ÂÅö‰∏™Ê±áÊÄªÔºåÊñπ‰æøËÄÅ‰∫∫ÂÆ∂ÂõûÈ°æ~ ÂèòÈáè Rust ‰∏≠ÂèòÈáèÂàÜ‰∏∫‰∏§ÁßçÔºö ‰∏çÂèØÂèòÁöÑÂèòÈáèÔºàÂè™ËØªÔºâ ÂèØÂèòÁöÑÂèòÈáèÔºàmut Â£∞ÊòéÔºâ Â£∞ÊòéÁöÑÂêåÂêçÂèòÈáèÂÖ∑Êúâ shadowing ÊïàÊûú ÂèØ‰ª•ÂÆö‰πâÂ∏∏ÈáèÔºå‰ΩøÁî®ÂÖ≥ÈîÆËØç const ÂÆö‰πâ ÂèòÈáè‰∏éÂ∏∏ÈáèÁöÑÂå∫Âà´Ôºö ÂèòÈáèÁöÑËµãÂÄºÂèØ‰ª•Êù•Ëá™Êüê‰∏™ÂáΩÊï∞ÔºàËøêË°åÊó∂Á°ÆÂÆöÔºâ Â∏∏ÈáèÁöÑËµãÂÄºÂàôÈúÄË¶ÅÂàôÂè™ËÉΩÊù•Ëá™ÁÆÄÂçïÁöÑË°®ËææÂºè ‰ΩúÁî®Âüü‰∏çÂêåÔºåÂ∏∏ÈáèÁöÑ‰ΩúÁî®ÂüüÂÖ®Â±Ä Â£∞ÊòéÊñπÂºè‰∏çÂêåÔºåÂ∏∏ÈáèÂú®ÂÆö‰πâÊó∂ÈúÄË¶ÅÊåáÂÆöÁ±ªÂûãÔºåÊó†Ê≥ï‰ΩøÁî®Á±ªÂûãÊé®Êñ≠ ÊâÄÊúâÊùÉRust ÁöÑÊâÄÊúâÊùÉÊú∫Âà∂Áõ∏ÂØπÂÖ∂ÂÆÉËØ≠Ë®ÄËøòÊòØÊØîËæÉÁã¨ÁâπÁöÑ„ÄÇÂèØ‰ª•ÁúãÂà∞ÂÆÉÊòØÂ¶Ç‰ΩïÂÄüÂä©ÊâÄÊúâÊùÉÊù•ÁÆ°ÁêÜÊâÄÊúâÂú®Â†Ü‰∏äÁî≥ËØ∑ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÁöÑ„ÄÇ‰∏éÂÖ∂ÂÆÉÊã•Êúâ GC ÊàñËÄÖÈúÄË¶ÅÊâãÂä®ÁÆ°ÁêÜÂÜÖÂ≠òÁöÑËØ≠Ë®ÄÊù•ËØ¥ÔºåÈÄöËøáÊâÄÊúâÊùÉÁÆ°ÁêÜÂÜÖÂ≠òËøòÊòØÊå∫ÁâπÂà´ÁöÑ„ÄÇ Rust ÁºñËØëÂô®ËÉΩÂ§üÂú®ÁºñËØëÊó∂Êèê‰æõÂæàÂ§öÂÆâÂÖ®Ê£ÄÊü•ÔºåÊØîÂ¶ÇÂ≠òÂú®Êï∞ÊçÆÂÜôÂÖ•Á´û‰∫âÁöÑÁ®ãÂ∫èÈÉΩÊó†Ê≥ïÈÄöËøáÁºñËØëÔºåËøôÊ†∑Â∞±Â§ßÂ§ßÂáèÂ∞ë‰∫ÜËøêË°åÊó∂ÊéíÊü•ÈîôËØØÁöÑÂèØËÉΩ„ÄÇ ËßÑÂàô Rust ‰∏≠ÊØè‰∏Ä‰∏™ÂÄºÈÉΩÊúâ‰∏Ä‰∏™Ë¢´Áß∞‰∏∫ÂÖ∂ÊâÄÊúâËÄÖ Owner ÁöÑÂèòÈáè ÂÄºÊúâ‰∏îÂè™ËÉΩÊúâ‰∏Ä‰∏™ÊâÄÊúâËÄÖ ÂΩìÊâÄÊúâËÄÖÔºàÂèòÈáèÔºâÁ¶ªÂºÄ‰ΩúÁî®ÂüüÔºåÂÄº‰ºöË¢´ÊäõÂºÉÔºàÂÜÖÂ≠òÂõûÊî∂Ôºâ Ê≥®ÊÑèÁÇπ Rust ‰∏≠ÂèòÈáèÁöÑËµãÂÄºÔºåÂíå‰º†ÁªüËØ≠Ë®Ä‰∏çÈÄöÔºåÂÆÉÂÅöÁöÑÊòØÊâÄÊúâÊùÉËΩ¨ÁßªÁöÑÂ∑•‰ΩúÔºå‰πüÂ∞±ÊòØ‰πãÂâçÁöÑÂèòÈáèÂ∞±‰ºöË¢´Â§±Êïà‰∫Ü Â¶ÇÊûú‰∏Ä‰∏™Á±ªÂûãÊúâ Copy traitÔºå‰∏Ä‰∏™ÊóßÁöÑÂèòÈáèÂú®Â∞ÜÂÖ∂ËµãÂÄºÁªôÂÖ∂ÂÆÉÂèòÈáèÂêé‰ªçÁÑ∂ÂèØÁî®ÔºàÂ¶ÇÂú®Ê†à‰∏äÂàÜÈÖçÁöÑÊï¥Êï∞Ôºâ Rust Ê∞∏Ëøú‰∏ç‰ºöËá™Âä®ÂàõÂª∫Êï∞ÊçÆÁöÑ„ÄåÊ∑±Êã∑Ë¥ù„ÄçÔºåÊâÄ‰ª•‰ªª‰ΩïËá™Âä®ÁöÑÂ§çÂà∂ÔºåÂèØ‰ª•ËÆ§‰∏∫ÂØπËøêË°åÊó∂ÁöÑÊÄßËÉΩÂΩ±ÂìçËæÉÂ∞è ÂºïÁî®ÂíåÂÄüÁî® Âú®‰ªªÊÑèÁªôÂÆöÁöÑÊó∂Èó¥ÔºåË¶Å‰πàÂè™ËÉΩÊúâ‰∏Ä‰∏™ÂèØÂèòÂºïÁî®ÔºåË¶Å‰πàÂè™ËÉΩÊúâÂ§ö‰∏™‰∏çÂèØÂèòÂºïÁî® ÂºïÁî®ÂøÖÈ°ªÊÄªÊòØÊúâÊïà Slice ÂàáÁâá Ê≤°ÊúâÊâÄÊúâÊùÉÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÂÖÅËÆ∏ÂºïÁî®ÈõÜÂêà‰∏≠‰∏ÄÊÆµËøûÁª≠ÁöÑÂÖÉÁ¥†Â∫èÂàóÔºåËÄå‰∏çÁî®ÂºïÁî®Êï¥‰∏™ÈõÜÂêà ÂàáÁâáËØ≠Ê≥ïÔºàÊÑüËßâÂíå Python ÊàñËÄÖ Go Á±ª‰ººÔºâÔºö start..end ÂØπÂ∫îÁöÑÊòØ [start, end) ËøôÊ†∑ÁöÑÂå∫Èó¥ ËÄå start..=end ÂàôË°®Á§∫ [start, end] Âå∫Èó¥ start.. Ë°®Á§∫‰ªé start ÂºÄÂßãÂà∞ÁªìÂ∞æ .. ÂàôË°®Á§∫‰ªéÂ§¥Âà∞Â∞æ Â≠óÁ¨¶‰∏≤Â≠óÈù¢ÂÄºÂ∞±ÊòØ Slice &amp;str ÁªìÊûÑ‰Ωì struct ÂèØ‰ª•Áî®Êù•Ëá™ÂÆö‰πâÊï∞ÊçÆÁ±ªÂûãÔºåÁ±ª‰ººÈù¢ÂêëÂØπË±°ËØ≠Ë®Ä‰∏≠ÁöÑÊï∞ÊçÆÂ±ûÊÄß ÁªìÊûÑ‰ΩìÂàùÂßãÂåñÔºåÊØè‰∏™Â≠óÊÆµÈÉΩÈúÄË¶ÅÊòæÂºèËµãÂÄºÔºåÂ≠óÊÆµÂàùÂßãÂåñÈ°∫Â∫èÂèØ‰ª•‰∏çÁî®ÂÖ≥ÂøÉ mut Âíå imut ÊòØÈíàÂØπÊï¥‰∏™ÁªìÊûÑ‰ΩìËÄåË®ÄÁöÑÔºå‰∏çÂÖÅËÆ∏ÁªìÊûÑ‰ΩìÈÉ®ÂàÜÂ≠óÊÆµËÆæÁΩÆ‰∏∫ mut ÂèòÈáè‰∏éÂ≠óÊÆµÂêåÂêçÊó∂ÔºåÂèØ‰ª•ÁÆÄÂåñÁªìÊûÑ‰ΩìÂàùÂßãÂåñÂÜôÊ≥ï ÂÖÉÁªÑÁªìÊûÑ‰ΩìÔºåÁõ∏ÂΩì‰∫éÁªôÂÖÉÁªÑÁ±ªÂûãÂëΩÂêç‰∫ÜÔºåËøôÊ†∑ÂèØ‰ª•ÊúâÂà´‰∫éÂÖ∂‰ªñÁ±ªÂûãÂÖÉÁªÑÔºåÂè™ÈúÄË¶ÅÊåáÂÆöÁ±ªÂûãÔºå‰∏çÈúÄË¶ÅÂëΩÂêçÂ≠óÊÆµ Á±ªÂçïÂÖÉÁªìÊûÑ‰ΩìÔºàunit-like structsÔºâÔºö Ê≤°Êúâ‰ªª‰ΩïÂ≠óÊÆµÁöÑÁªìÊûÑ‰Ωì Á±ª‰ºº () ÈÄÇÁî®‰∫éÂú®Êüê‰∏™Á±ªÂûã‰∏äÂÆûÁé∞ traitÔºå‰ΩÜ‰∏çÈúÄË¶ÅÂ≠òÂÇ®Êï∞ÊçÆ ÁîüÂëΩÂë®Êúü‰ºö‰øùËØÅÁªìÊûÑ‰ΩìÂºïÁî®ÁöÑÊï∞ÊçÆÊúâÊïàÊÄßÂíåÁªìÊûÑ‰Ωì‰øùÊåÅ‰∏ÄËá¥ ÂæàÂ§öÂü∫Êú¨Á±ªÂûãÈÉΩÂÆûÁé∞‰∫Ü Display traitÔºåÊâÄ‰ª•Âú®‰ΩøÁî® println!(&quot;{}&quot;) Êó∂ÂèØ‰ª•Ê≠£Â∏∏ÊâìÂç∞Ôºõ‰ΩÜ rust ÈªòËÆ§‰∏ç‰ºöÊâìÂç∞Âá∫ÁªìÊûÑ‰ΩìÁöÑÂ±ïÁ§∫‰ø°ÊÅØÔºå‰ΩøÁî® {:?} ‰ºö‰ΩøÁî® Debug traitÔºå‰ªéËÄåÊâìÂç∞Âá∫ÁªìÊûÑ‰ΩìÁöÑË∞ÉËØï‰ø°ÊÅØ„ÄÇ‰ΩøÁî® derive Ê≥®Ëß£ÔºåÂèØ‰ª•‰ΩøÁî® trait„ÄÇ Rust ÊúâËá™Âä®ÂºïÁî®ÂíåËß£ÂºïÁî®ÁöÑÂäüËÉΩÔºå‰ºöËá™Âä®‰∏∫ object Ê∑ªÂä† &amp;, &amp;mut Êàñ *Ôºå‰ªéËÄåÂíåÊñπÊ≥ïÁöÑÁ≠æÂêçÂåπÈÖç Rust ‰∏≠ÁöÑÂÖ≥ËÅîÂáΩÊï∞Ôºàassociated functionsÔºâÊòØÊîæÂú® impl Âùó‰∏≠Ôºå ÂíåÁªìÊûÑ‰ΩìÊú¨Ë∫´ÊúâËæÉÂ§ßÁöÑÁõ∏ÂÖ≥ÊÄßÔºå‰ΩÜ‰∏çÊòØÊñπÊ≥ï Á¨¨‰∏Ä‰∏™ÂèÇÊï∞‰πü‰∏çÊòØ self ‰æùÁÑ∂ÊòØÂáΩÊï∞ Á±ª‰ººÂÖ∂ÂÆÉËØ≠Ë®Ä‰∏≠ÁöÑÁ±ªÁöÑÈùôÊÄÅÊñπÊ≥ï ÊØè‰∏™ÁªìÊûÑ‰ΩìÈÉΩÂÖÅËÆ∏Êã•ÊúâÂ§ö‰∏™ impl Âùó ÁªìÊûÑ‰ΩìÂπ∂ÈùûÂàõÂª∫Ëá™ÂÆö‰πâÁ±ªÂûãÁöÑÂîØ‰∏ÄÊñπÊ≥ïÔºÅ Êûö‰∏æ‰∏éÊ®°ÂºèÂåπÈÖç Rust ‰∏≠ÁöÑÊûö‰∏æÁ±ª‰ºº‰∫é F#, OCaml Âíå Haskell ËøôÁßçÂáΩÊï∞ÂºèÁºñÁ®ãËØ≠Ë®Ä‰∏≠ÁöÑ**‰ª£Êï∞Êï∞ÊçÆÁ±ªÂûãÔºàalgebraic data typesÔºâ Êûö‰∏æËøòÂèØ‰ª•Â≠òÂÇ®Êï∞ÊçÆÔºàËá™ÂÆö‰πâÁöÑÈÇ£ÁßçÔºåÁ±ª‰ººÁöÑÊ¶ÇÂøµÂèØ‰ª•Áî®ÁªìÊûÑ‰ΩìÊù•Ë°®ËææÔºå‰ΩÜÊòØÊØîËæÉÈ∫ªÁÉ¶Ôºâ Êûö‰∏æÁöÑÊØè‰∏™ÊàêÂëòÂèØ‰ª•Â§ÑÁêÜ‰∏çÂêåÁ±ªÂûãÂíåÊï∞ÈáèÁöÑÊï∞ÊçÆÔºàÂèØ‰ª•Â∞Ü‰ªªÊÑèÁ±ªÂûãÊï∞ÊçÆÊîæÂÖ•Êûö‰∏æÊàêÂëò‰∏≠Ôºâ Rust Êûö‰∏æÂÆûÂú®Â§™Âº∫Â§ß‰∫ÜÔºåÁîöËá≥ÂèØ‰ª•ÂÆûÁé∞ÊñπÊ≥ïÔºåËøú‰∏çÊòØ Python/Go ‰∏≠ÈÇ£ÁßçÁÆÄÂçïÁöÑÊûö‰∏æÂèØÊØîÁöÑ ‰∏Ä‰∏™Â∏∏Áî®ÁöÑÊ†áÂáÜÂ∫ìÊûö‰∏æÁ±ªÂûã OptionÔºåÂ∫îÂØπÁöÑÂú∫ÊôØÔºö‰∏Ä‰∏™ÂÄºË¶Å‰πàÊúâÂÄºË¶Å‰πàÊ≤°ÂÄºÔºàWTF?Ôºâ Rust ‰∏≠Ê≤°ÊúâÁ©∫ÂÄºÔºàNullÔºâÁöÑÂäüËÉΩÔºöÁ©∫ÂÄºÂíåÈùûÁ©∫ÂÄº Âè™Ë¶Å‰∏Ä‰∏™ÂÄº‰∏çÊòØ Option&lt;T&gt; Á±ªÂûãÔºåÂ∞±ÂèØ‰ª•ÂÆâÂÖ®ÁöÑËÆ§‰∏∫ÂÆÉÁöÑÂÄº‰∏ç‰∏∫Á©∫ match ÊòØÈùûÂ∏∏Âº∫Â§ßÁöÑÊéßÂà∂ÊµÅËøêÁÆóÁ¨¶ÔºåÂèØ‰ª•Â∞Ü‰∏Ä‰∏™ÂÄºÂíå‰∏ÄÁ≥ªÂàóÁöÑÊ®°ÂºèÁõ∏ÊØîËæÉÔºåÂπ∂Ê†πÊçÆÁõ∏ÂåπÈÖçÁöÑÊ®°ÂºèÊâßË°åÁõ∏Â∫îÁöÑ‰ª£Á†Å Rust ‰∏çÂÖÅËÆ∏ match Ê≤°ÊúâÂåπÈÖçÂ§ÑÁêÜÂêÑÁßçÊÉÖÂÜµÔºåRust ‰∏≠ÁöÑÂåπÈÖçÊòØÁ©∑Â∞ΩÁöÑ ÔºàÔºâ ÊòØ‰∏Ä‰∏™ unit ÂÄº if let ÈÄÇÂêàÂåπÈÖç‰∏ÄÁßçÊÉÖÂÜµÁöÑÊó∂ÂÄôÊõø‰ª£ matchÔºåÂáèÂ∞ëÊ†∑Êùø‰ª£Á†ÅÁºñÂÜôÔºåmatch ÁöÑËØ≠Ê≥ïÁ≥ñ Ê®°Âùó‰∏é‰ª£Á†ÅÂ§çÁî® Ê®°ÂùóÔºàmoduleÔºâÊòØ‰∏Ä‰∏™ÂåÖÂê´ÂáΩÊï∞ÊàñÁ±ªÂûãÂÆö‰πâÁöÑÂëΩÂêçÁ©∫Èó¥ mod Â£∞ÊòéÊñ∞Ê®°ÂùóÔºåÊ®°Âùó‰∏≠ÁöÑ‰ª£Á†ÅË¶Å‰πàÁõ¥Êé•‰Ωç‰∫éÂ£∞ÊòéÂêéÁöÑÂ§ßÊã¨Âè∑‰∏≠ÔºåË¶Å‰πà‰Ωç‰∫éÂè¶‰∏Ä‰∏™Êñá‰ª∂ ÂáΩÊï∞„ÄÅÁ±ªÂûã„ÄÅÂ∏∏ÈáèÂíåÊ®°ÂùóÈªòËÆ§ÈÉΩÊòØÁßÅÊúâÁöÑÔºåpub ÂèØ‰ª•ÊéßÂà∂ÂÖ∂Âú®Ê®°ÂùóÂ§ñÂèØËßÅ use ÂÖ≥ÈîÆÂ≠óÂ∞ÜÊ®°ÂùóÊàñËÄÖÊ®°Âùó‰∏≠ÁöÑÂÆö‰πâÂºïÂÖ•Âà∞‰ΩúÁî®Âüü‰∏≠‰ª•‰æø‰∫éÂºïÁî®ÂÆÉ‰ª¨ Rust ‰∏≠Â§ö‰∏™Ê®°ÂùóÂèØ‰ª•‰Ωç‰∫é‰∏Ä‰∏™Êñá‰ª∂‰∏≠Ôºå‰∏îÊ®°ÂùóÂèØ‰ª•ÂµåÂ•óÔºå‰ª•ÊûÑÊàêÊõ¥Á¨¶ÂêàÈÄªËæëÁöÑÁªìÊûÑ Rust ÈªòËÆ§Âè™Áü•ÈÅì lib.rs ÂÜÖÂÆπÔºåÊâÄ‰ª•Ê®°ÂùóÁöÑÂ£∞ÊòéÊàñËÄÖÂÆö‰πâÈÉΩÈúÄË¶ÅÊîæÂú®ËØ•Êñá‰ª∂ Ê®°ÂùóÊñá‰ª∂Á≥ªÁªüÁöÑËßÑÂàôÔºö Â¶ÇÊûú foo Ê®°ÂùóÊ≤°ÊúâÂ≠êÊ®°ÂùóÔºåÂ∫îËØ•Â∞Ü foo ÁöÑÂ£∞ÊòéÊîæÂú® foo.rs ÁöÑÊñá‰ª∂‰∏≠ Â¶ÇÊûú foo Ê®°ÂùóÊúâÂ≠êÊ®°ÂùóÔºåÂ∫îËØ•Â∞Ü foo ÁöÑÂ£∞ÊòéÊîæÂú® foo/mod.rs ÁöÑÊñá‰ª∂‰∏≠ Rust ‰∏≠Ê®°ÂùóÂíåÂáΩÊï∞ÈªòËÆ§Âùá‰∏∫ÁßÅÊúâÁöÑÔºåÂøÖÈ°ªË¶ÅÂêåÊó∂ËÆæÁΩÆ‰∏∫ÂÖ¨ÊúâÔºåÊâçËÉΩÂú®Â§ñÈÉ®ËÆøÈóÆÊ®°Âùó‰∏≠ÁöÑÂáΩÊï∞ ÁßÅÊúâÊÄßËßÑÂàôÔºö Â¶ÇÊûú‰∏Ä‰∏™È°πÊòØÂÖ¨ÊúâÁöÑÔºåÂÆÉËÉΩË¢´‰ªª‰ΩïÁà∂Ê®°ÂùóËÆøÈóÆ Â¶ÇÊûú‰∏Ä‰∏™È°πÊòØÁßÅÊúâÁöÑÔºåÂÆÉËÉΩË¢´Áõ¥Êé•Áà∂Á∫ßÊ®°ÂùóÂèäÂÖ∂‰ªª‰ΩïÂ≠êÊ®°ÂùóËÆøÈóÆ use Âè™Â∞ÜÊåáÂÆöÁöÑÊ®°ÂùóÂºïÂÖ•‰ΩúÁî®ÂüüÔºå‰ΩÜ‰∏ç‰ºöÂ∞ÜÂÖ∂Â≠êÊ®°Âùó‰πüÂºïÂÖ• ÈÄöÁî®ÈõÜÂêàÁ±ªÂûã ÈõÜÂêà ÊòØ‰∏Ä‰∫õÂàóÊúâÁî®ÁöÑÊï∞ÊçÆÁªìÊûÑ‰ΩìÔºå‰∏çÂêå‰∫éÂÜÖÂª∫Êï∞ÁªÑÂíåÂÖÉÁªÑÔºåËøô‰∫õÈõÜÂêàÊåáÂêëÁöÑÊï∞ÊçÆÊòØÂ≠òÂÇ®Âú®Â†Ü‰∏äÁöÑ ‰∏âÁßçÂπøÊ≥õ‰ΩøÁî®ÁöÑÈõÜÂêàÔºö vectorÔºöÂèòÈïøÔºåËøûÁª≠Â≠òÂÇ®‰∏ÄÁ≥ªÂàóÂÄºÔºàÁ±ª‰ºº Python ÁöÑ listÔºâ Â≠óÁ¨¶‰∏≤ÔºöÂ≠óÁ¨¶ÈõÜÂêà ÂìàÂ∏åÔºöÂ∞±ÊòØ map vector Âè™ËÉΩÂ≠òÂÇ®Áõ∏ÂêåÁ±ªÂûãÁöÑÂÄºÔºåÂÖ∂Â≠òÂÇ®ÁöÑÂÄºÂú®ÂÜÖÂ≠ò‰∏≠ÂΩºÊ≠§Áõ∏ÈÇªÊéíÂàó vector ÁöÑÁªìÂ∞æÂú®Êñ∞Â¢ûÂÖÉÁ¥†Êó∂ÔºåÂ¶ÇÊûúÊ≤°ÊúâË∂≥Â§üÁ©∫Èó¥Â∞ÜÊâÄÊúâÂÖÉÁ¥†‰æùÊ¨°Áõ∏ÈÇªÂ≠òÊîæÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØËÉΩ‰ºöË¶ÅÊ±ÇÂàÜÈÖçÂÜÖÂ≠òÔºåÂπ∂Â∞ÜËÄÅÁöÑÂÖÉÁ¥†Êã∑Ë¥ùÂà∞Êñ∞ÁöÑÁ©∫Èó¥„ÄÇÊâÄ‰ª• Rust ÊòØ‰∏çÂÖÅËÆ∏Âú®ÂºïÁî®ÁöÑÊüê‰∏™ÂÖÉÁ¥†Êó∂Ôºå‰∏çÂèØ‰ª•ËøõË°å‰øÆÊîπ ÂèØ‰ª•ÂÄüÂä© enum ÂÆûÁé∞Âú® vector ‰∏≠Â≠òÂÇ®Â§öÁßçÁ±ªÂûãÂÖÉÁ¥†ÁõÆÊ†á Rust ÁöÑÊ†∏ÂøÉËØ≠Ë®Ä‰∏≠Âè™Êúâ‰∏ÄÁßçÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºöstrÔºåÂç≥Â≠óÁ¨¶‰∏≤ sliceÔºå‰ª•ÂÄüÁî®ÁöÑÂΩ¢ÂºèÂá∫Áé∞ &amp;strÔºåUTF-8 ÁºñÁ†Å String Á±ªÂûãÊòØÁî±Ê†áÂáÜÂ∫ìÊèê‰æõÁöÑÔºåÂèØÂèòÈïø„ÄÅÊúâÊâÄÊúâÊùÉ„ÄÅUTF-8 ÁºñÁ†ÅÁöÑÂ≠óÁ¨¶‰∏≤Á±ªÂûã Rust Ê†áÂáÜÂ∫ìËøòÊèê‰æõ‰∫ÜÂÖ∂‰ªñÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºöOsString, OsStr, CString, CStrÔºåÂÆÉ‰ª¨Âíå String ÊàñËÄÖ str Êã•Êúâ‰∏çÂêåÁöÑÁºñÁ†ÅÊàñÂÜÖÂ≠òË°®Áé∞ÂΩ¢ÂºèÔºåÂêÑËá™Êã•Êúâ‰∏Ä‰∫õ‰ΩøÁî®Âú∫ÊôØ String ÊîØÊåÅ + ËøêÁÆóÁ¨¶„ÄÅformat! ÊãºÊé•Â≠óÁ¨¶‰∏≤ format! Âíå print! ÂÆèÁ±ª‰ººÔºåÂπ∂‰∏î‰∏ç‰ºöËé∑ÂèñÂèÇÊï∞ÁöÑÊâÄÊúâÊùÉ Rust ‰∏≠ÔºåString ÊàñËÄÖ str Á±ªÂûãÊòØ‰∏çÊîØÊåÅÁ¥¢ÂºïËé∑ÂèñÁöÑÔºö String Âú®Â∫ïÂ±Ç‰ΩøÁî® Vec&lt;u8&gt; Â≠òÂÇ®Â≠óÁ¨¶Â≠óËäÇÔºåÁî±‰∫é‰∏çÂêåÁöÑËØ≠Ë®Ä‰ΩøÁî® UTF-8 ÁºñÁ†ÅÊó∂ÔºåÈúÄË¶ÅÁöÑÂ≠óËäÇÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÔºå‰∏∫‰∫ÜÈÅøÂÖçËøîÂõûÊó†ÊïàÁöÑÔºàÊó†ÊÑè‰πâÔºâÂ≠óËäÇÂÄºÔºåRust ÈÄâÊã©‰∏çÁºñËØëËøôÁßçÁ¥¢ÂºïËÆøÈóÆÁöÑÊÉÖÂÜµ Áî±‰∫éÁ¥¢ÂºïÊìç‰ΩúÈ¢ÑÊúüÊòØÂ∏∏Êï∞Êó∂Èó¥ O(1)Ôºå‰ΩÜ String ‰∏≠ÂÆûÁé∞Á¥¢Âºï‰∏çËÉΩ‰øùËØÅËøôÊ†∑ÁöÑÊÄßËÉΩ ‰ΩøÁî®Â≠óÁ¨¶‰∏≤ Slice Êó∂ÈúÄË¶ÅË∞®ÊÖéÔºåÈò≤Ê≠¢ &amp;s[n..m] Êìç‰ΩúÂèñÂá∫Êù•ÁöÑÊòØÈùûÊ≥ïÁöÑÂ≠óÁ¨¶ÔºàÁºñËØëÊó∂‰ºöËÆ©ÈÄöËøáÔºâÔºåÂΩìÁÑ∂ Rust ‰ºöÂú®ËøêË°åÊó∂Áõ¥Êé• panic ÂèØ‰ª•ÂØπ &amp;String.chars() ÈÅçÂéÜËé∑ÂæóÊØè‰∏™Â≠óÁ¨¶ÔºåÂØπ &amp;String.bytes() ÈÅçÂéÜËé∑ÂæóÊØè‰∏™Â≠óËäÇ HashMap&lt;k, v&gt; Á±ª‰ººÂÖ∂ÂÆÉËØ≠Ë®Ä‰∏≠ÁöÑÂ≠óÂÖ∏ÔºàmapÔºâ„ÄÇÂÖ∂Âπ∂‰∏çÂú® preclude ‰∏≠ÔºåÊâÄ‰ª•Âú®‰ΩøÁî®Êó∂ÔºåÈúÄË¶Å use ÂØºÂÖ•Âà∞‰ΩúÁî®Âüü ÈîôËØØÂ§ÑÁêÜ Rust ‰∏≠Â∞ÜÈîôËØØÂàÜ‰∏∫‰∏§Â§ßÁ±ªÔºöÂèØÊÅ¢Â§çÈîôËØØÔºàrecoverableÔºâ Âíå ‰∏çÂèØÊÅ¢Â§çÈîôËØØÔºàunrecoverableÔºâ„ÄÇÂèØÊÅ¢Â§çÁöÑÈîôËØØÈÄöÂ∏∏‰ª£Ë°®ÂêëÁî®Êà∑Êä•ÂëäÈîôËØØÂíåÈáçËØïÊìç‰ΩúÊòØÂê¶ÂêàÁêÜÁöÑÊÉÖÂÜµÔºåÂ¶ÇÊñá‰ª∂‰∏çÂ≠òÂú®„ÄÇËÄå‰∏çÂèØÊÅ¢Â§çÁöÑÈîôËØØÂàôÈÄöÂ∏∏ÊòØÂæà‰∏•ÈáçÁöÑ bug ÂèØÊÅ¢Â§çÁöÑÈîôËØØÊòØ Result&lt;T, E&gt;ÔºåËÄå panic! ‰ºöÂú®ÈÅáÂà∞‰∏çÂèØÊÅ¢Â§çÁöÑÈîôËØØÊó∂ÁªàÊ≠¢ÊâßË°å„ÄÇÊ≥®ÊÑèËøô‰∏™ÂíåÂÖ∂ÂÆÉËØ≠Ë®Ä‰∏≠ÁöÑÂºÇÂ∏∏Êú∫Âà∂ËøòÊòØ‰∏çÂ§™‰∏ÄÊ†∑ÁöÑ panic Êó∂ÔºåÈªòËÆ§‰ºöÂºÄÂßãÂ±ïÂºÄÔºàunwindingÔºâÔºå‰ªéËÄåÂõûÊ∫ØÊ†àÂπ∂Ê∏ÖÁêÜÈÅáÂà∞ÁöÑÊØè‰∏™ÂáΩÊï∞ÁöÑÊï∞ÊçÆÔºå‰ΩÜËøô‰∏™ÂõûÊ∫ØÂπ∂Ê∏ÖÁêÜÁöÑËøáÁ®ãÊúâÂæàÂ§öÂ∑•‰Ωú„ÄÇ‰Ω†ÂèØ‰ª•ÈÄâÊã©Áõ¥Êé•ÁªàÊ≠¢ÔºàabortÔºâÔºåËÆ©Êìç‰ΩúÁ≥ªÁªüÊù•Ê∏ÖÁêÜÂÜÖÂ≠ò„ÄÇ Â¶ÇÊûúÂ∏åÊúõ‰∫åËøõÂà∂Êñá‰ª∂Ë∂äÂ∞èË∂äÂ•ΩÔºåÂèØ‰ª•Âú® Cargo.toml ‰∏≠Ê∑ªÂä†‰∏ãÈù¢ÁöÑÈÖçÁΩÆÔºåËøôÊ†∑Âú® panic Êó∂Áõ¥Êé•ÁªàÊ≠¢ÊâßË°åÔºö 12[profile.release]panic = 'abort' Êàë‰ª¨‰ΩøÁî® Result Á±ªÂûãÊù•‰Ωú‰∏∫ËøîÂõûÔºåÁî®‰∫éÂ∫î‰ªò‰∏Ä‰∫õÂ∏∏ËßÑÈîôËØØÔºàÂ¶ÇÊñá‰ª∂‰∏çÂ≠òÂú®ÔºâÔºåÂÆö‰πâÂ¶Ç‰∏ãÔºö 1234enum Result&lt;T, E&gt; &#123; Ok(T), Err(E),&#125; ÂèØ‰ª•‰ΩøÁî®Èó≠ÂåÖÔºàclosureÔºâÊù•ÂáèÂ∞ëÂõ†ÈîôËØØÂ§ÑÁêÜËÄåÂµåÂ•óÂ§öÂ±Ç match ÁöÑÈóÆÈ¢ò ÂΩìÁÑ∂ÔºåËøòÂèØ‰ª•‰ΩøÁî® unwrap Âíå expect Â§ÑÁêÜÈîôËØØ ÈîôËØØ‰º†ÈÄíÂú® Rust ‰∏≠ÂæàÂ∏∏ËßÅÔºåÊâÄ‰ª•Êúâ‰∏™ ? Êìç‰ΩúÁ¨¶ËØ≠Ê≥ïÁ≥ñÂèØ‰ª•Êõø‰ª£ÁπÅÁêêÁöÑ match ÂÜôÊ≥ï„ÄÇÊ≠§Â§ñÔºå? ËøòÂ∞ÜÈîôËØØÂÄº‰º†ÈÄíÁªô from ÂáΩÊï∞ÔºàÂÆö‰πâ‰∫é From trait` ‰∏≠ÔºâÔºåÁî®‰∫éÂ∞Ü‰∏ÄÁßçÈîôËØØÁ±ªÂûãËΩ¨Êç¢‰∏∫Âè¶‰∏ÄÁßçÁ±ªÂûã ? Êìç‰ΩúÁ¨¶Âè™ËÉΩË¢´Áî®‰∫éËøîÂõû Result Á±ªÂûãÁöÑÂáΩÊï∞‰∏≠ ÂÖ≥‰∫éÊï∞ÊçÆÊ†°È™åÔºåÂèØ‰ª•ÂÆö‰πâ‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªÂûãÔºåÊääÊ†°È™åÈÄªËæëÊî∂ÊïõÂà∞ new ÊñπÊ≥ïÔºåËøôÊ†∑ÊâÄÊúâÂáΩÊï∞Âùá‰ΩøÁî®ËØ•Á±ªÂûãÔºå‰ªéËÄåËÆ©ÂêÑ‰∏™‰æùËµñËØ•ÂèÇÊï∞ÁöÑÂáΩÊï∞‰∏çÁî®ÁºñÂÜôÁπÅÁêêÁöÑÊ†°È™åÈÄªËæë Ë¶Å‰∏çË¶Å panic!ËøôÈáåÁªôÂá∫‰∏Ä‰∫õÊåáÂØºÊÄßÂéüÂàôÔºåÊù•Â∏ÆÂä©‰Ω†Âú®‰∏çÂêåÂú∫ÊôØ‰∏ãÔºåÂ¶Ç‰ΩïÊõ¥Â•ΩÁöÑÂ§ÑÁêÜÈîôËØØÔºåÂÜ≥ÂÆöÊòØÂê¶ÈúÄË¶Å panic! ËøòÊòØ‰º†ÈÄíÈîôËØØÂà∞‰∏äÂ±Ç„ÄÇ Âú®ÁºñÂÜôÁ§∫‰æã„ÄÅÂéüÂûã‰ª£Á†ÅÊàñËÄÖÊµãËØïÊó∂ÔºåÂª∫ËÆÆÁî® unwrap ÊàñËÄÖ expectÔºåÁÆÄÂçïÂ§ÑÁêÜÈîôËØØÁöÑÊÉÖÂÜµÔºàÁõ¥Êé• panic! ÊéâÔºâÔºåÊääÁÑ¶ÁÇπÊîæÂú®Ê†∏ÂøÉÂäüËÉΩÂÆûÁé∞‰∏äÔºåÁÑ∂ÂêéÂÜçÂ§ÑÁêÜÂÖ∑‰ΩìÁöÑÈîôËØØ ÈÅáÂà∞ÈùûÂ∏∏ËßÑÂèØÈ¢ÑÊúüÁöÑÈîôËØØÁä∂ÊÄÅÊó∂ÔºåÂª∫ËÆÆ panic! Êéâ Ê≥õÂûã„ÄÅTrait ÂíåÁîüÂëΩÂë®Êúü ÂæàÂ§öËØ≠Ë®ÄÈÉΩÊúâÂ§ÑÁêÜÈáçÂ§çÊ¶ÇÂøµÁöÑÂ∑•ÂÖ∑ÔºåRust ‰∏≠ÁöÑÂ∑•ÂÖ∑‰πã‰∏ÄÂ∞±ÊòØÊ≥õÂûãÔºàgenericsÔºâ Ê≥õÂûãÂèØ‰ª•ËÆ§‰∏∫ÊòØÂÖ∑‰ΩìÁ±ªÂûãÁöÑÈ´òÂ±ÇÊäΩË±°ÔºåÊàë‰ª¨ÂèØ‰ª•Âü∫‰∫éÊ≥õÂûãÂéªÂÆûÁé∞‰∏Ä‰∫õÈÄöÁî®ÁöÑÂÖ≥ËÅîÊñπÊ≥ïÔºåËÄå‰∏çÈúÄË¶ÅÁü•ÈÅì concrete type„ÄÇÊÉ≥ÊÉ≥ Go Ê≤°ÊúâÊ≥õÂûãÔºåÂ∞±Áü•ÈÅìÂ§öÊÉ®‰∫Ü trait ÂèØ‰ª•‰∏éÊ≥õÂûãÁªìÂêàÔºåÂ∞ÜÊ≥õÂûãÈôêÂà∂‰∏∫Êã•ÊúâÁâπÂÆöË°å‰∏∫ÁöÑÁ±ªÂûãÔºåËÄå‰∏çÊòØ‰ªªÊÑèÁ±ªÂûã ‰ªª‰ΩïÂ≠óÁ¨¶ÈÉΩÂèØ‰ª•‰Ωú‰∏∫Á±ªÂûãÂèÇÊï∞ÂêçÔºå‰πãÊâÄ‰ª•Áî® T ÊòØ Rust ÁöÑ‰π†ÊÉØÁî®Ê≥ïÔºåT ‰Ωú‰∏∫ type ÁöÑÁº©ÂÜô‰πüÂæàÂêàÈÄÇ ‰ΩøÁî® &lt;&gt; Êù•ÂÆö‰πâÊ≥õÂûã Rust ‰∏≠‰ΩøÁî®Ê≥õÂûãÂÆûÁé∞ÁöÑ‰ª£Á†ÅÂíå‰ΩøÁî®ÂÖ∑‰ΩìÁ±ªÂûãÂÆûÁé∞ÁöÑ‰ª£Á†ÅÔºåÂú®ÊÄßËÉΩ‰∏ä‰∏ç‰ºöÊúâ‰ªª‰ΩïÊçüÂ§±„ÄÇRust ÈÄöËøáÂú®ÁºñËØëÊó∂ËøõË°åÊ≥õÂûã‰ª£Á†ÅÂçïÊÄÅÂåñÔºàmonomorphizationÔºâÊù•‰øùËØÅÊïàÁéá„ÄÇÂçïÊÄÅÂåñÊòØÊåáÈÄöËøáÂ°´ÂÖÖÁºñËØëÊó∂‰ΩøÁî®ÁöÑÂÖ∑‰ΩìÁ±ªÂûãÔºåÂ∞ÜÈÄöÁî®‰ª£Á†ÅËΩ¨‰∏∫ÁâπÂÆö‰ª£Á†ÅÁöÑËøáÁ®ã trait ‰ª•‰∏ÄÁßçÊäΩË±°ÁöÑÊñπÂºèÂÆö‰πâÂÖ±‰∫´Ë°å‰∏∫ÔºåÂèØ‰ª•‰ΩøÁî® trait bounds ÊåáÂÆöÊ≥õÂûãÊòØ‰ªª‰ΩïÊã•ÊúâÁâπÂÆöË°å‰∏∫ÁöÑÁ±ªÂûã trait ÂÆö‰πâÊòØ‰∏ÄÁßçÂ∞ÜÊñπÊ≥ïÁ≠æÂêçÁªÑÂêàËµ∑Êù•ÁöÑÊñπÊ≥ïÔºåÁõÆÁöÑÊòØÂÆö‰πâ‰∏Ä‰∏™ÂÆûÁé∞Êüê‰∫õÁõÆÁöÑÊâÄÂøÖÈ°ªÁöÑË°å‰∏∫ÈõÜÂêà Ê≥®ÊÑèÔºöÂè™ÊúâÂΩì trait ÊàñËÄÖË¶ÅÂÆûÁé∞ trait ÁöÑÁ±ªÂûã‰Ωç‰∫é crate ÁöÑÊú¨Âú∞‰ΩúÁî®ÂüüÊó∂ÔºåÊâçËÉΩ‰∏∫ËØ•Á±ªÂûãÂÆûÁé∞ trait trait ‰∏≠ÂÆö‰πâÁöÑÊñπÊ≥ïÊòØÂèØ‰ª•ÊúâÈªòËÆ§ÂÆûÁé∞ÁöÑÔºåÂÖ∑‰ΩìÁ±ªÂûãÂú®ÂÆûÁé∞ trait Êó∂ÂèØ‰ª•ÈÄâÊã©ÈáçËΩΩÊñπÊ≥ïÔºå‰ΩÜ‰∏çÊîØÊåÅË∞ÉÁî®ÈªòËÆ§ÊñπÊ≥ïÔºàOopsÔºâ trait ÂèØ‰ª•‰Ωú‰∏∫ÂèÇËµõÔºàÁ±ª‰ºº Go ÈáåÈù¢ÁöÑÂáΩÊï∞Êé•Êî∂‰∏Ä‰∏™ interfaceÔºâ Ê≥®ÊÑè‰∏ãÈù¢‰∏§ÁßçÊòØ‰∏çÂêåÁöÑÔºö 123456// ËøôÈáåÂÖÅËÆ∏ item1 Âíå item2 ÊòØ‰∏çÂêåÁöÑÁ±ªÂûãÔºåÂè™Ë¶ÅÈÉΩÂÆûÁé∞‰∫Ü `SomeTrait`pub fn notify(item1: impl SomeTrait, item2: impl SomeTrait);// ËøôÈáåÂ∞±‰ºöË¶ÅÊ±Ç item1 Âíå item2 ÊòØ‰∏çÂêåÁöÑÁ±ªÂûãÔºå‰πüÂ∞±ÊòØÂè™Êúâ trait bound ËøôÁßçÂÜôÊ≥ï// ÊâçÂèØ‰ª•ÂÅöÂà∞ËøôÊ†∑ÁöÑÈôêÂà∂pub fn notify&lt;T: SomeTrait&gt;(item1: T, item2: T); ‰∏é Go ÁöÑÂáΩÊï∞ÂèØ‰ª•ËøîÂõû interface Á±ª‰ººÔºåRust ÊîØÊåÅËøîÂõû traitÔºå‰ΩÜÊòØ‰∏çÂêåÁöÑÊòØÔºåÂè™ËÉΩËøîÂõû‰∏ÄÁßçÂÆûÁé∞‰∫ÜËØ• trait ÁöÑÁ±ªÂûã„ÄÇ‰∏çËøá‰æùÁÑ∂‰ºöÊúâÊõ¥È´òÁ∫ßÁöÑÊñπÊ≥ïÂÅöÂà∞ÔºåËØ∑ÁªßÁª≠ÂæÄÂêéÂ≠¶‰π†ÔºÅ ‰ªª‰ΩïÊª°Ë∂≥ÁâπÂÆö trait bound ÁöÑÁ±ªÂûãÂÆûÁé∞ trait Ë¢´Áß∞‰∏∫ blanket implementationsÔºåÂπøÊ≥õÂ∫îÁî®‰∫é Rust Ê†áÂáÜ‰∏≠„ÄÇÂ¶ÇÊ†áÂáÜÂ∫ì‰∏∫‰ªª‰ΩïÂÆûÁé∞‰∫Ü Display trait ÁöÑÁ±ªÂûãÂÆûÁé∞‰∫Ü ToString ÊñπÊ≥ï ÁîüÂëΩÂë®ÊúüÂíåÂºïÁî®ÊúâÊïàÊÄß ÁîüÂëΩÂë®ÊúüÁöÑ‰∏ªË¶ÅÁõÆÊ†áÊòØÈÅøÂÖçÊÇ¨ÂûÇÂºïÁî® Rust ÁºñËØëÂô®‰∏≠ÁöÑÂÄüÁî®Ê£ÄÊü•Âô®Ôºàborrow checkerÔºâÊòØÁî®Êù•ÊØîËæÉ‰ΩúÁî®ÂüüÔºå‰ªéËÄåÁ°Æ‰øùÊâÄÊúâÁöÑÂÄüÁî®ÈÉΩÊòØÊúâÊïàÁöÑ ÁîüÂëΩÂë®ÊúüÊ≥®ÈáäÔºö 12345678910&#123; let r; // ---------+-- 'a // | &#123; // | let x = 5; // -+-- 'b | r = &amp;x; // | | &#125; // -+ | // | println!("r: &#123;&#125;", r); // |&#125; // ---------+ ÁîüÂëΩÂë®ÊúüÁöÑÊ≥®Ëß£Âπ∂‰∏ç‰ºöÊîπÂèò‰ªª‰ΩïÂºïÁî®ÁöÑÁîüÂëΩÂë®ÊúüÈïøÁü≠„ÄÇÂΩìÂáΩÊï∞ÊåáÂÆö‰∫ÜÊ≥õÂûãÁîüÂëΩÂë®ÊúüÂêéÔºåÂèØ‰ª•Êé•Âèó‰ªª‰ΩïÁîüÂëΩÂë®ÊúüÁöÑÂºïÁî®„ÄÇÁîüÂëΩÂë®ÊúüÊ≥®Ëß£ÊèèËø∞‰∫ÜÂ§ö‰∏™ÂºïÁî®ÁîüÂëΩÂë®ÊúüÁöÑÁõ∏‰∫íÂÖ≥Á≥ªÔºåËÄå‰∏çÂΩ±ÂìçÂÖ∂ÁîüÂëΩÂë®Êúü„ÄÇÁîüÂëΩÂë®ÊúüÊ≥®Ëß£Âú®ÂÄüÁî®Ê£ÄÊü•Âô®ÁöÑÂ∏ÆÂä©‰∏ãÔºå‰ºöÊåáÂá∫‰∏çÈÅµÂÆàÂçèËÆÆÁöÑÂÖ•ÂèÇ„ÄÇ Ê≥õÂûãÁîüÂëΩÂë®Êúü &#39;a ÁöÑÂÖ∑‰ΩìÁîüÂëΩÂë®ÊúüÁ≠âÂêå‰∫éÂ§ö‰∏™ÂáΩÊï∞ÂèÇÊï∞‰∏≠ÁîüÂëΩÂë®ÊúüËæÉÂ∞èÁöÑÈÇ£‰∏™ ÁîüÂëΩÂë®ÊúüËØ≠Ê≥ïÊòØÁî®‰∫éÂ∞ÜÂáΩÊï∞ÁöÑÂ§ö‰∏™ÂèÇÊï∞‰∏éÂÖ∂ËøîÂõûÂÄºÁöÑÁîüÂëΩÂë®ÊúüËøõË°åÂÖ≥ËÅîÁöÑÔºå‰∏ÄÊó¶ÂÆÉ‰ª¨ÂΩ¢Êàê‰∫ÜÊüêÁßçÂÖ≥ËÅîÔºåRust Â∞±ÊúâË∂≥Â§üÁöÑ‰ø°ÊÅØÊù•ÂÖÅËÆ∏ÂÜÖÂ≠òÂÆâÂÖ®ÁöÑÊìç‰ΩúÂπ∂ÈòªÊ≠¢‰∫ßÁîüÊÇ¨ÂûÇÊåáÈíàÊàñËøùÂèçÂÜÖÂ≠òÂÆâÂÖ®ÁöÑË°å‰∏∫ Rust Â≠òÂú®ÁîüÂëΩÂë®ÊúüÁúÅÁï•ËßÑÂàôÔºàlifetime elision rulesÔºâÔºåËøô‰∫õËßÑÂàôÊòØ‰∏ÄÁ≥ªÂàóÁâπÂÆöÂú∫ÊôØÔºåÂ¶ÇÊûúÁ¨¶ÂêàËßÑÂàôÔºåÊó†ÈúÄÊâãÂä®ÊåáÂÆöÁîüÂëΩÂë®Êúü ÁîüÂëΩÂë®ÊúüÁúÅÁï•ËßÑÂàôÔºö ÂáΩÊï∞ÊàñÊñπÊ≥ïÁöÑÂèÇÊï∞ÁîüÂëΩÂë®ÊúüÂè´ÂÅöËæìÂÖ•ÁîüÂëΩÂë®Êúü ËøîÂõûÂÄºÁöÑÁîüÂëΩÂë®ÊúüÂè´ÂÅöËæìÂá∫ÁîüÂëΩÂë®Êúü ËßÑÂàôÈÄÇÁî®‰∫é fn Âíå impl Âùó ËßÑÂàô‰∏ÄÔºöÊØè‰∏Ä‰∏™ÊòØÂºïÁî®ÁöÑÁîüÂëΩÂë®ÊúüÈÉΩÊúâÂÖ∂Ëá™Â∑±ÁöÑÁîüÂëΩÂë®ÊúüÂèÇÊï∞ÔºàÂêÑ‰∏™ÁîüÂëΩÂë®ÊúüÂèÇÊï∞ÊòØ‰∏çÂêåÁöÑÔºâ ËßÑÂàô‰∫åÔºöÂ¶ÇÊûúÂè™Êúâ‰∏Ä‰∏™ËæìÂÖ•ÁîüÂëΩÂë®ÊúüÂèÇÊï∞ÔºåÂàôÂÆÉ‰ºöË¢´Ëµã‰∫àÊâÄÊúâËæìÂá∫ÁîüÂëΩÂë®ÊúüÂèÇÊï∞ ËßÑÂàô‰∏âÔºöÂ¶ÇÊûúÊñπÊ≥ïÊúâÂ§ö‰∏™ÁîüÂëΩÂë®ÊúüÂèÇÊï∞Ôºà&amp;self Âíå &amp;mut selfÔºâÔºåÂàô &amp;self ÁöÑÁîüÂëΩÂë®ÊúüË¢´Ëµã‰∫àÁªôÊâÄÊúâËæìÂá∫ÁîüÂëΩÂë®ÊúüÂèÇÊï∞ ÈùôÊÄÅÁîüÂëΩÂë®ÊúüÔºö &#39;staticÔºåÁîüÂëΩÂë®ÊúüÂ≠òÊ¥ª‰∫éÊï¥‰∏™Á®ãÂ∫èËøêË°åÊúüÈó¥ ÊâÄÊúâÂ≠óÁ¨¶‰∏≤Â≠óÈù¢ÂÄºÈÉΩÊúâ &#39;static ÁîüÂëΩÂë®Êúü Â¶ÇÊûúÁºñËØëÂô®ÊèêÁ§∫Âä† &#39;static ÁîüÂëΩÂë®ÊúüÂª∫ËÆÆÊó∂ÔºåÂ∫îËØ•ÁúãÁúãÊòØ‰∏çÊòØËá™Â∑±ÁöÑÂÆûÁé∞ÊñπÂºèÊúâÈóÆÈ¢òÔºåËÄå‰∏çÊòØÁõ≤ÁõÆÊ∑ªÂä† &#39;static ÁîüÂëΩÂë®Êúü ÂçïÂÖÉÊµãËØï‰∏éÈõÜÊàêÊµãËØï Edsger W. Dijkstra: Program testing can be a very effective way to show the presence of bugs, but it is hopelessly inadequate for showing their absence. Rust ‰∏≠ÁöÑÊµãËØïÂáΩÊï∞ÊòØÁî®‰∫éÈ™åËØÅÈùûÊµãËØï‰ª£Á†ÅÊòØÂê¶ÊåâÁÖßÈ¢ÑÊúüÊñπÂºèËøêË°åÁöÑ„ÄÇÊµãËØïÂáΩÊï∞‰ΩìÈÄöÂ∏∏Ë¶ÅÊâßË°åÁöÑÊìç‰ΩúÂ¶Ç‰∏ãÔºö ËÆæÁΩÆ‰ªª‰ΩïÊâÄÈúÄÁöÑÊï∞ÊçÆÊàñÁä∂ÊÄÅ ËøêË°åÈúÄË¶ÅÊµãËØïÁöÑ‰ª£Á†Å Êñ≠Ë®ÄÂÖ∂ÁªìÊûúÊòØÂê¶‰∏∫ÊúüÊúõÁöÑ Rust ‰∏≠ÁöÑÊµãËØïÊòØ‰∏Ä‰∏™Â∏¶Êúâ test Â±ûÊÄßÊ≥®Ëß£ÁöÑÂáΩÊï∞„ÄÇÂ±ûÊÄßÊòØ Rust ‰ª£Á†ÅÁâáÊÆµÁöÑÂÖÉÊï∞ÊçÆÔºå‰∏∫‰∫ÜÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞ÂèòÊàêÊµãËØïÂáΩÊï∞ÔºåÈúÄË¶ÅÂú® fn ‰πãÂâçÂä†‰∏ä #[test]„ÄÇcargo test ÂëΩ‰ª§ÊâßË°åÊó∂ÔºåRust ‰ºöÊûÑÂª∫‰∏Ä‰∏™ÊµãËØïÊâßË°åÁ®ãÂ∫èË∞ÉÁî®Ê†áËÆ∞‰∫Ü test Â±ûÊÄßÁöÑÂáΩÊï∞ÔºåÂπ∂Êä•ÂëäÊµãËØïÈÄöËøá‰∏éÂê¶ Rust ‰ºöÁºñËØëÂú® API ÊñáÊ°£‰∏≠ÁöÑ‰ª£Á†ÅÁ§∫‰æãÔºåÊâÄ‰ª•‰πüÂèØ‰ª•ËøõË°åÊñáÊ°£ÊµãËØï Doc-testsÔºåËøôÊ†∑ÂèØ‰ª•‰øùËØÅÁ®≥ÂÆöÂíå‰ª£Á†ÅÂêåÊ≠• ÊØè‰∏™ÊµãËØïÈÉΩÂú®‰∏Ä‰∏™Êñ∞Á∫øÁ®ã‰∏≠ËøêË°åÔºåÂΩì‰∏ªÁ∫øÁ®ãÂèëÁé∞ÊµãËØïÂºÇÂ∏∏ÔºåÂ∞±Â∞ÜÂØπÂ∫îÊµãËØïÊ†áËÆ∞‰∏∫Â§±Ë¥• ÊµãËØïÁõ∏ÂÖ≥ÁöÑÂÆèÔºåÂ¶ÇÊûúÊµãËØïÂ§±Ë¥•Ôºå‰ºöÊâìÂç∞Âá∫ËØ¶ÁªÜÁöÑÊñ≠Ë®ÄÂ§±Ë¥•ÂéüÂõ†Ôºå‰æø‰∫éÊéíÊü•Ôºö assert!: ÊòØÂê¶‰∏∫ True assert_ne!: ÊòØÂê¶‰∏çÁ≠â‰∫é assert_eq!: ÊòØÂê¶Á≠â‰∫é ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåassert_ne! Âíå assert_eq! Âú®Â∫ïÂ±Ç‰ΩøÁî®‰∫Ü == Âíå !=ÔºåÊÑèÂë≥ÁùÄË¢´ÊØîËæÉÁöÑÂÄºÂøÖÈ°ªÂÆûÁé∞ PartialEq Âíå Debug trait„ÄÇÊâÄÊúâÁöÑÂü∫Êú¨Á±ªÂûãÂíåÂ§ßÈÉ®ÂàÜÁöÑÊ†áÂáÜÁ±ªÂûãÈÉΩÂÆûÁé∞‰∫ÜËøô‰∫õ traitÔºåÂØπ‰∫éËá™ÂÆö‰πâÁöÑÁªìÊûÑ‰ΩìÂíåÊûö‰∏æÁ±ªÂûãÔºåÈÄöÂ∏∏ÂèØ‰ª•Âú®ÁªìÊûÑ‰Ωì‰∏äÂä† #[derive(PartialEq, Debug)] Ê≥®Ëß£Ëß£ÂÜ≥ ÂØπ‰∫é‰∏äËø∞‰∏â‰∏™Êñ≠Ë®ÄÁî®ÁöÑÂÆèÔºå‰ªª‰ΩïÂÖ∂ÂÆÉÂèÇÊï∞ÈÉΩ‰ºöË¢´‰º†ÂÖ• format ÂÆèÔºåÊâÄ‰ª•ÂèØ‰ª•ÂÄüÂä©Ëøô‰∏™ÁâπÊÄßËá™ÂÆö‰πâÈîôËØØÊèêÁ§∫ ‰ΩøÁî® #[should_panic] Â±ûÊÄßÊù•ÊµãËØïÊüê‰∫õÈ¢ÑÊúü‰ºö panic ÁöÑÂú∫ÊôØÔºõÂØπ‰∫éÂ∏åÊúõÊ£ÄÊü• panic ÁöÑÊñáÊú¨‰∏≠ÊòØÂê¶Âê´ÊúâÊåáÂÆöÊñáÊú¨ÁöÑÊÉÖÂÜµÔºåÂèØ‰ª•Âä†‰∏™ expected ÂèÇÊï∞Ôºö 123456789mod tests &#123; use super::*; #[test] #[should_panic(expected = "message to be contained")] fn should_panic_with_msg() &#123; foo_will_panic(); &#125;&#125; ÊµãËØïÂáΩÊï∞ÂèØ‰ª•ËøîÂõû Result&lt;T, E&gt;ÔºåÂíåÊñ≠Ë®ÄÂ§±Ë¥•Áõ¥Êé• panic ‰∏çÂêåÔºåËøôÈáåÊòØÈÄöËøá Result&lt;T, E&gt; ÁªìÊûúÊù•Âà§Êñ≠ÊµãËØïÁªìÊûú„ÄÇÊ≠§Â§ñ‰πü‰∏çËÉΩÂú®ËøôÊ†∑ÁöÑÊµãËØïÂáΩÊï∞‰∏äÂä† #[should_panic] Â±ûÊÄßÔºåÂê¶ÂàôÊèêÁ§∫Ôºö 1error: functions using `#[should_panic]` must return `()` cargo test ÈªòËÆ§Ë°å‰∏∫ÊòØÈááÁî®Âπ∂Ë°åËøêË°åÊµãËØïÁöÑÊñπÂºèÔºåÂπ∂‰∏î‰ºöÊà™Ëé∑ÊµãËØïËøêË°å‰∏≠ÁöÑËæìÂá∫ÔºåÈòªÊ≠¢ÊòæÁ§∫Ôºå‰ªéËÄåÊñπ‰æøÈòÖËØªÊµãËØïÁªìÊûú ÊµãËØïÂ∏∏Áî®ÁöÑÊéßÂà∂ÂèÇÊï∞Ôºö ÊåáÂÆöÂπ∂Ë°åÊâßË°åÊµãËØïÁöÑÁ∫øÁ®ãÊï∞Ôºöcargo test -- --test-threads=1 ÊµãËØïÊó∂ÊòæÁ§∫ÂáΩÊï∞ÊâìÂç∞ÁöÑ‰ø°ÊÅØÔºöcargo test -- --nocaptureÔºåÁî±‰∫éÊµãËØïÊó∂Âπ∂Ë°åÁöÑÔºå‰∏∫‰∫ÜÊñπ‰æøÊü•ÁúãËæìÂá∫ÔºåÊâÄ‰ª•‰Ω†ÂèØËÉΩÈúÄË¶ÅÊåáÂÆö‰ΩøÁî®ÂçïÁ∫øÁ®ãËøêË°åÊµãËØï ËøêË°åÊåáÂÆö‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÊµãËØïÔºàÁõ¥Êé•ÊåáÂÆöÊµãËØïÂáΩÊï∞ÂÖ®ÂêçÊàñÈÉ®ÂàÜÂ≠óÁ¨¶‰∏≤Áî®‰∫éÂåπÈÖçÔºâÔºöcargo test name ‰ΩøÁî® #[ignore] Â±ûÊÄßËøáÊª§‰∏çÂ∏åÊúõËøêË°åÁöÑÊµãËØï Âè™ËøêË°åË¢´ÂøΩÁï•ÁöÑÊµãËØïÔºöcargo test -- --ignored ÂÖ≥‰∫é cargo test ÂèÇÊï∞ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÁÇπÔºö ÂÆåÊï¥‰ΩøÁî®ÊñπÂºè cargo test [OPTIONS] [TESTNAME] [-- &lt;args&gt;...] -- ÂâçÁöÑÂèÇÊï∞‰º†ÈÄíÁªô cargo -- ÂêéÁöÑÂèÇÊï∞‰º†ÈÄíÁªô‰∫åËøõÂà∂ÊµãËØïÁ®ãÂ∫èÔºàtest binariesÔºâÔºåËøõËÄå‰º†ÈÄíÁªô libtestÔºàËøô‰∏™ÊòØ Rust ÂÜÖÂª∫ÁöÑÂçïÂÖÉÊµãËØïÂíå micro-benchmark Ê°ÜÊû∂ÔºâÔºåÂèØ‰ª•‰ΩøÁî® cargo -- --help ‰∫ÜËß£ËØ¶ÁªÜÂèÇÊï∞ ÂçïÂÖÉÊµãËØïÔºàunit testsÔºâ ‰æßÈáç‰∫éÂ∞èËÄåÈõÜ‰∏≠ÔºåÂú®ÈöîÁ¶ªÁéØÂ¢É‰∏≠‰∏ÄÊ¨°ÊµãËØï‰∏Ä‰∏™Ê®°ÂùóÔºåÊàñËÄÖÁßÅÊúâÊé•Âè£Ôºö ÂçïÂÖÉÊµãËØï‰∏éË¶ÅÊµãËØïÁöÑ‰ª£Á†ÅÂêåÂú® src ÁõÆÂΩï‰∏ãÁõ∏ÂêåÁöÑÊñá‰ª∂‰∏≠ ËßÑËåÉÊòØÂú®ÊØè‰∏™Êñá‰ª∂‰∏≠ÂàõÂª∫ÂåÖÂê´ÊµãËØïÂáΩÊï∞ÁöÑ tests Ê®°ÂùóÔºåÂπ∂‰ΩøÁî® cfg(test) Ê≥®Ëß£ ÈõÜÊàêÊµãËØïÔºàintegrated testsÔºâ ÂàôÊòØÂú®Â§ñÈÉ®ÊµãËØï‰Ω†ÁöÑÂ∫ìÔºåÂè™ÊµãËØïÂÖ¨ÊúâÊé•Âè£Ôºå‰∏îÊØè‰∏™ÊµãËØïÂèØËÉΩ‰ºöÊµãËØïÂ§ö‰∏™Ê®°ÂùóÔºö ‰ΩøÁî®ÂçïÁã¨ÁöÑ tests ÁõÆÂΩïÂíå src ÂêåÁ∫ßÂà´ cargo ‰ºöÂ∞ÜÊØè‰∏™Êñá‰ª∂ÂΩìÂÅöÂçïÁã¨ÁöÑ crate ÁºñËØë tests ÁõÆÂΩïÂæàÁâπÊÆäÔºåÈáåÈù¢ÁöÑÊµãËØï‰∏çÈúÄË¶Å #[cfg(test)] Ê≥®Ëß£ÔºåÂπ∂‰∏îÂè™‰ºöÂú® cargo test Êó∂ÁºñËØëÂπ∂ÊâßË°å tests ÁõÆÂΩï‰∏≠ÁöÑÊñá‰ª∂ cargo test --test &lt;filename&gt; ËøêË°åÊüê‰∏™ÁâπÂÆöÁöÑÈõÜÊàêÊµãËØïÊñá‰ª∂‰∏≠ÁöÑÊâÄÊúâÊµãËØï cargo test --test &lt;filename&gt; &lt;TESTNAME&gt; ËøêË°åÊüê‰∏™ÈõÜÊàêÊµãËØïÊñá‰ª∂‰∏≠Êüê‰∏™ case tests ÁõÆÂΩï‰∏≠ÁöÑÂ≠êÁõÆÂΩï‰∏ç‰ºöË¢´ÂΩì‰ΩúÂçïÁã¨ÁöÑ crate ÁºñËØëÊàñ‰Ωú‰∏∫‰∏Ä‰∏™ÊµãËØïÁªìÊûúÈÉ®ÂàÜÂá∫Áé∞Âú®ÊµãËØïËæìÂá∫‰∏≠ÔºåÊâÄ‰ª•ÂèØ‰ª•Â∞Ü‰∏Ä‰∫õÂÖ¨Áî®ÁöÑÂ∏ÆÂä©ÂáΩÊï∞ÊîæÂà∞Â≠êÁõÆÂΩï‰∏≠ÂÆûÁé∞ÔºàÊñ∞Â¢û‰∏Ä‰∏™Ê®°ÂùóÔºâ ÂëΩ‰ª§Ë°åÂ∞èÂ∑•ÂÖ∑Ôºörgrep std::env::args Âú®ÂÖ∂‰ªª‰ΩïÂèÇÊï∞ÂåÖÊã¨Êó†Êïà Unicode Êó∂‰ºöÊä•Èîô„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂ§ÑÁêÜËøôÁßçÊÉÖÂÜµÔºåÂèØ‰ª•‰ΩøÁî® std::env::args_osÔºåËØ•ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™ OsStringÔºåËÄåÈùû StringÔºå‰ΩÜÁªÜËäÇÂ§ÑÁêÜËµ∑Êù•ËøòÊòØÊØîËæÉÈ∫ªÁÉ¶ ‰∫åËøõÂà∂Á®ãÂ∫èÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ªÂü∫Êú¨Ê≠•È™§Ôºö Â∞ÜÁ®ãÂ∫èÊãÜÂàÜÊàê main.rs Âíå lib.rsÔºåÂπ∂Â∞ÜÁ®ãÂ∫èÁöÑÈÄªËæëÊîæÂÖ• lib.rs ‰∏≠ ÂΩìÂëΩ‰ª§Ë°åËß£ÊûêÈÄªËæëÊØîËæÉÂ∞èÊó∂ÔºåÂèØ‰ª•‰øùÁïôÂú® main.rs ‰∏≠ ÂΩìÂëΩ‰ª§Ë°åËß£ÊûêÂºÄÂßãÂèòÂæóÂ§çÊùÇÊó∂Ôºå‰πüÂêåÊ†∑Â∞ÜÂÖ∂‰ªé main.rs ÊèêÂèñÂà∞ lib.rs ‰∏≠ ÁªèËøáËøô‰∫õÂêéÔºå‰øùÁïôÂú® main ÂáΩÊï∞ÁöÑË¥£‰ªªÂ∫îËØ•Ë¢´ÈôêÂà∂‰∏∫Ôºö ‰ΩøÁî®ÂèÇÊï∞ÂÄºË∞ÉÁî®ÂëΩ‰ª§Ë°åËß£ÊûêÈÄªËæë ËÆæÁΩÆ‰ªª‰ΩïÂÖ∂ÂÆÉÁöÑÈÖçÁΩÆ Ë∞ÉÁî® lib.rs ‰∏≠ run ÂáΩÊï∞ Â¶ÇÊûú run ËøîÂõûÈîôËØØÔºåÂàôÂ§ÑÁêÜËøô‰∏™ÈîôËØØ ÈîôËØØËæìÂá∫Âà∞ stderrÔºå‰ΩøÁî® eprint! Âíå eprintln! Ëø≠‰ª£Âô®ÂíåÈó≠ÂåÖ Rust ÁöÑ Èó≠ÂåÖÔºàclosuresÔºâ ÊòØÂèØ‰ª•‰øùÂ≠òËøõÂèòÈáèÊàñ‰Ωú‰∏∫ÂèÇÊï∞‰º†ÈÄíÁªôÂÖ∂ÂÆÉÂáΩÊï∞ÁöÑÂåøÂêçÂáΩÊï∞„ÄÇÂèØ‰ª•Âú®‰∏Ä‰∏™Âú∞ÊñπÂàõÂª∫Èó≠ÂåÖÔºåÁÑ∂ÂêéÂú®‰∏çÂêåÁöÑ‰∏ä‰∏ãÊñá‰∏≠ÊâßË°åÈó≠ÂåÖËøêÁÆóÔºåÈó≠ÂåÖËøêË°åÊçïËé∑Ë∞ÉÁî®ËÄÖ‰ΩúÁî®ÂüüÁöÑÂÄº Èó≠ÂåÖ‰∏çË¶ÅÊ±ÇÂÉè fn ÂáΩÊï∞ÈÇ£Ê†∑Âú®ÂèÇÊï∞ÂíåËøîÂõûÂÄº‰∏äÊ≥®ÊòéÁ±ªÂûãÔºåÂõ†‰∏∫ÂÆÉ‰∏ç‰ºöË¢´Êö¥Èú≤ÁªôÂ∫ìÁöÑÁî®Êà∑Ë∞ÉÁî® Èó≠ÂåÖÈÄöÂ∏∏ÂæàÁü≠ÔºåÂπ∂‰∏îÂè™Áî®‰∫éÊúâÈôêÁöÑ‰∏ä‰∏ãÊñá‰∏≠Ôºå‰∏îÁºñËØëÂô®ËÉΩÂèØÈù†Âú∞Êé®Êñ≠ÂèÇÊï∞ÂíåËøîÂõûÂÄºÁ±ªÂûã ÊØè‰∏™Èó≠ÂåÖÂÆû‰æãÊã•ÊúâËá™Â∑±Áã¨ÊúâÁöÑÂåøÂêçÁ±ªÂûãÔºåÂç≥‰æøÁ≠æÂêçÁõ∏ÂêåÔºåÂÆÉ‰ª¨ÁöÑÁ±ªÂûã‰æùÁÑ∂ÂèØ‰ª•Ë¢´ËÆ§‰∏∫ÊòØ‰∏çÂêåÁöÑ ÊâÄÊúâÁöÑÈó≠ÂåÖÂíåÂáΩÊï∞ÈÉΩÂÆûÁé∞‰∫Ü trait Fn, FnMut Êàñ FnOnce ‰∏≠ÁöÑ‰∏Ä‰∏™ ÂΩìÈó≠ÂåÖ‰ªéÁéØÂ¢É‰∏≠ÊçïËé∑‰∏Ä‰∏™ÂÄºÔºåÈó≠ÂåÖ‰ºöÂú®Èó≠ÂåÖ‰Ωì‰∏≠Â≠òÂÇ®Ëøô‰∏™ÂÄº‰ª•‰æõ‰ΩøÁî® Èó≠ÂåÖËé∑ÂèñÁéØÂ¢ÉÁöÑ‰∏âÁßçÊñπÂºèÔºàÂØπÂ∫îÂèÇÊï∞Ëé∑ÂèñÁöÑÊñπÂºèÔºöÊâÄÊúâÊùÉ„ÄÅÂèØÂèòÂÄüÁî®Âíå‰∏çÂèØÂèòÂÄüÁî®ÔºâÔºö FnOnceÔºöÈó≠ÂåÖÂë®Âõ¥ÁöÑ‰ΩúÁî®ÂüüÂè´ÂÅöÁéØÂ¢ÉÔºåOnce Ë°®Á§∫Èó≠ÂåÖ‰∏çËÉΩÂ§öÊ¨°Ëé∑ÂèñÁõ∏ÂêåÂèòÈáèÁöÑÊâÄÊúâÊùÉÔºå‰πüÂè™ËÉΩË¢´Ë∞ÉÁî®‰∏ÄÊ¨°„ÄÇÁî±‰∫éÊâÄÊúâÈó≠ÂåÖÈÉΩËá≥Â∞ëË¢´Ë∞ÉÁî®‰∏ÄÊ¨°ÔºåÊâÄÊúâÈÉΩÂÆûÁé∞‰∫Ü FnOnce FnMutÔºöËé∑ÂèñÂèØÂèòÂÄüÁî®ÂÄºÔºåÂèØ‰ª•ÊîπÂèòÁéØÂ¢É„ÄÇÂØπ‰∫éÊ≤°ÊúâÁßªÂä®Ë¢´ÊçïËé∑ÂèòÈáèÁöÑÊâÄÊúâÊùÉÂà∞Èó≠ÂåÖÂÜÖÁöÑÈó≠ÂåÖ‰πüÂÆûÁé∞‰∫Ü FnMut FnÔºöËé∑Âèñ‰∏çÂèØÂèòÂÄüÁî®„ÄÇ‰∏çÈúÄË¶ÅÂØπË¢´ÊçïËé∑ÁöÑÂèòÈáèËøõË°åÂèØÂèòËÆøÈóÆÁöÑÈó≠ÂåÖÂÆûÁé∞‰∫Ü Fn 1.Ëø≠‰ª£Âô®Ê®°ÂºèÂÖÅËÆ∏‰Ω†ÂØπ‰∏Ä‰∏™È°πÁöÑÂ∫èÂàóËøõË°åÊüê‰∫õÂ§ÑÁêÜÔºåËø≠‰ª£Âô®ÔºàiteratorÔºâ Ë¥üË¥£ÈÅçÂéÜÂ∫èÂàó‰∏≠ÁöÑÊØè‰∏ÄÈ°πÂíåÂÜ≥ÂÆöÂ∫è‰ΩïÊó∂ÁªìÊùü Ëø≠‰ª£Âô®ÊòØÊÉ∞ÊÄßÁöÑÔºåËÅîÊÉ≥‰∏ã Python ÁöÑÁîüÊàêÂô®„ÄÅËø≠‰ª£Âô®Â∞±Â•Ω‰∫Ü Ëø≠‰ª£Âô® trait ‰∏≠ type Item Âíå Self::Item ÂÆö‰πâ‰∫Ü trait ÁöÑÂÖ≥ËÅîÁ±ªÂûã iter ÊñπÊ≥ïÁîüÊàê‰∏Ä‰∏™‰∏çÂèØÂèòÂ∫îÁî®ÁöÑËø≠‰ª£Âô®Ôºõinto_iter ÂàôËøîÂõûÊã•ÊúâÊâÄÊúâÊùÉÁöÑËø≠‰ª£Âô®ÔºõÂ¶ÇÊûúÈúÄË¶ÅËø≠‰ª£ÂèØÂèòÂºïÁî®ÔºåÂàô‰ΩøÁî® iter_mut Ëø≠‰ª£Âô® ÊòØ Rust Èõ∂ÂºÄÈîÄÊäΩË±°‰πã‰∏ÄÔºåÂÆÉÊÑèÂë≥ÁùÄÊäΩË±°Âπ∂‰∏ç‰ºöÂºïÂÖ•ËøêË°åÊó∂ÂºÄÈîÄ Â±ïÂºÄÊòØ‰∏ÄÁßçÁßªÈô§Âæ™ÁéØÊéßÂà∂‰ª£Á†ÅÁöÑÂºÄÈîÄÔºåÂπ∂ÊõøÊç¢‰∏∫ÊØè‰∏™Ëø≠‰ª£‰∏≠ÁöÑÈáçÂ§ç‰ª£Á†ÅÁöÑ‰ºòÂåñ ÂºÄËµ∑Êù• Rust ÊòØÊØîËæÉÊé®Ëçê‰ΩøÁî®Ëø≠‰ª£Âô®ÂíåÈó≠ÂåÖÁöÑÔºåËÄå‰∏îÂØπÂáΩÊï∞ÁºñÁ®ãÈ£éÊ†ºÊõ¥ÊòØÂÅèÁà±~ Cargo Âíå crates.io ÊñáÊ°£Ê≥®Èáä‰ΩøÁî®ÁöÑÊòØ ///ÔºåÂπ∂‰∏îÊîØÊåÅ Markdown Ê≥®Ëß£ ‰ΩøÁî® cargo doc ÂèØ‰ª•ÁîüÊàê HTML ÊñáÊ°£Âà∞ target/doc ‰∏≠Ôºå‰ΩøÁî® cargo doc --open ÂèØ‰ª•ÊûÑÂª∫ÂêéÊâìÂºÄÊñáÊ°£ ÊñáÊ°£‰∏≠ËøòÂèØ‰ª•ÂåÖÂê´ Panics, Errors Âíå Safety //! Âú® crate Ê†πÊñá‰ª∂Ôºà`src/lib.rsÔºâÊàñÊ®°ÂùóÊ†πÊñá‰ª∂Êèê‰æõ‰∏Ä‰∏™Ê¶ÇË¶ÅÊÄßÁöÑ‰ªãÁªç ‰ΩøÁî® pub use ÂèØ‰ª•ÈáçÂØºÂá∫Ôºå‰ΩøÂÖ±ÊúâÁªìÊûÑ‰∏çÂêå‰∫éÁßÅÊúâÁªìÊûÑÔºåÊñπ‰æøÁî®Êà∑‰ΩøÁî®ÔºàÂÖ∂ÂÆûÂú® Python ‰∏≠‰πüÊúâÂæàÂ§öÂ∫ìÊòØËøô‰πàÂπ≤ÁöÑÔºâ Â∑•‰ΩúÁ©∫Èó¥ÊòØ‰∏ÄÁ≥ªÂàóÂÖ±‰∫´ÂêåÊ†∑ÁöÑ Cargo.lock ÂíåËæìÂá∫ÁõÆÂΩïÁöÑÂåÖ ‰ΩøÁî® cargo install &lt;name&gt; ÂèØ‰ª•ÂÆâË£ÖÊù•Ëá™ creates.io ÁöÑ‰∫åËøõÂà∂Êñá‰ª∂ Êô∫ËÉΩÊåáÈíà ÊåáÈíà ÊòØ‰∏Ä‰∏™ÂåÖÂê´ÂÜÖÂ≠òÂú∞ÂùÄÁöÑÂèòÈáèÁöÑÈÄöÁî®Ê¶ÇÂøµ„ÄÇRust ‰∏≠ÊúÄÂ∏∏ËßÅÁöÑÊåáÈíàÊòØ ÂºïÁî®Ôºå‰ΩøÁî® &amp; Ë°®Á§∫ÔºåÈô§ÂºïÁî®Êï∞ÊçÆÊ≤°Êúâ‰ªª‰ΩïÂÖ∂ÂÆÉÁâπÊÆäÂäüËÉΩÔºåÊ≤°Êúâ‰ªª‰ΩïÈ¢ùÂ§ñÂºÄÈîÄ Êô∫ËÉΩÊåáÈíà ÊòØ‰∏ÄÁ±ªÊï∞ÊçÆÁªìÊûÑÔºåË°®Áé∞Á±ª‰ººÊåáÈíàÔºå‰ΩÜÊòØÊã•ÊúâÈ¢ùÂ§ñÁöÑÂÖÉÊï∞ÊçÆÂíåÂäüËÉΩ Rust ‰∏≠ÔºåÊôÆÈÄöÂºïÁî®ÂíåÊô∫ËÉΩÊåáÈíàÁöÑ‰∏Ä‰∏™È¢ùÂ§ñÂå∫Âà´ÊòØ ÂºïÁî®ÊòØ‰∏ÄÁ±ªÂè™ÂÄüÁî®Êï∞ÊçÆÁöÑÊåáÈíàÔºõÂ§ßÈÉ®ÂàÜÊÉÖÂÜµÔºåÊô∫ËÉΩÊåáÈíàÊã•ÊúâÂÆÉ‰ª¨ÊåáÂêëÁöÑÊï∞ÊçÆ Êô∫ËÉΩÊåáÈíàÈÄöÂ∏∏‰ΩøÁî®ÁªìÊûÑ‰ΩìÂÆûÁé∞ÔºåÂå∫Âà´‰∫éÂ∏∏ËßÑÁªìÊûÑ‰ΩìÔºåÂÆÉÂÆûÁé∞‰∫Ü Deref Âíå Drop traitÔºö Deref ËøêË°åÊô∫ËÉΩÊåáÈíàÁªìÊûÑ‰ΩìÂÆû‰æãË°®Áé∞ÂæóÂÉèÂºïÁî® Drop ÂàôÂÖÅËÆ∏Ëá™ÂÆö‰πâÂΩìÊô∫ËÉΩÊåáÈíàÁ¶ªÂºÄ‰ΩúÁî®ÂüüÊó∂ËøêË°åÁöÑÈÄªËæë Ê†áÂáÜÂ∫ì‰∏≠Â∏∏Áî®ÁöÑÊô∫ËÉΩÊåáÈíàÔºà‰Ω†‰πüÂèØ‰ª•ÂÆûÁé∞Ëá™ÂÆö‰πâÁöÑÊô∫ËÉΩÊåáÈíàÔºâÔºö Box&lt;T&gt; Áî®‰∫éÂú®Â†Ü‰∏äÂàÜÈÖçÂÄº Rc&lt;T&gt; ÂºïÁî®ËÆ°Êï∞Á±ªÂûãÔºåÊï∞ÊçÆÂèØ‰ª•Êã•ÊúâÂ§ö‰∏™ÊâÄÊúâËÄÖ Ref&lt;T&gt; Âíå RefMut&lt;T&gt;ÔºåÈÄöËøá RefCell&lt;T&gt; ËÆøÈóÆÔºåÂú®ËøêË°åÊó∂ËÄåÈùûÁºñËØëÊó∂ÊâßË°åÂÄüÁî®ËßÑÂàôÁöÑÁ±ªÂûã Box ‰ΩøÁî®Âú∫ÊôØÔºö ÂΩìÊúâ‰∏Ä‰∏™Âú®ÁºñËØëÊó∂Êú™Áü•Â§ßÂ∞èÁöÑÁ±ªÂûãÔºåËÄåÂèàÊÉ≥Ë¶ÅÂú®ÈúÄË¶ÅÁ°ÆÂàáÂ§ßÂ∞èÁöÑ‰∏ä‰∏ãÊñá‰∏≠‰ΩøÁî®ËØ•Á±ªÂûãÊó∂ ÂΩìÊúâÂ§ßÈáèÊï∞ÊçÆ‰∏îÂ∏åÊúõÂú®Á°Æ‰øùÊï∞ÊçÆ‰∏çË¢´Êã∑Ë¥ùÁöÑÊÉÖÂÜµ‰∏ãËΩ¨ÁßªÊâÄÊúâÊùÉÊó∂ ÂΩìÂ∏åÊúõÊã•Êúâ‰∏Ä‰∏™ÂÄºÔºå‰∏îÂè™ÂÖ≥ÂøÉÂÆÉÁöÑÁ±ªÂûãÊòØÂê¶ÂÆûÁé∞‰∫ÜÁâπÂÆö trait ËÄå‰∏çÊòØÂÖ∂ÂÖ∑‰ΩìÁ±ªÂûãÊó∂ ÈÄíÂΩíÁ±ªÂûã ÊòØÂú®ÁºñËØëÂô®Êó†Ê≥ïÁü•ÈÅìÂ§ßÂ∞èÁöÑÁ±ªÂûãÔºå‰πüÊòØ Box&lt;T&gt; ÈÄÇÁî®ÁöÑÂú∫ÊôØ Deref ÂÆûÁé∞ Deref trait ÂÖÅËÆ∏ÈáçËΩΩ„ÄåËß£ÂºïÁî®ËøêÁÆóÁ¨¶Ôºàdereference operatorÔºâ*„ÄçÔºåËøôÊ†∑Êô∫ËÉΩÊåáÈíàÂ∞±ÂèØ‰ª•Ë¢´ÂΩì‰ΩúÂ∏∏ËßÑÂºïÁî®ÂØπÂæÖ ÂÆûÁé∞‰∫Ü deref ÊñπÊ≥ïÂêéÔºåÂ∞±ÊòØÂêëÁºñËØëÂô®Êèê‰æõ‰∫ÜËé∑Âèñ‰ªª‰ΩïÂÆûÁé∞‰∫Ü Deref trait Á±ªÂûãÁöÑÂÄºÔºåÊèê‰æõ‰∫ÜËß£ÂºïÁî®ÁöÑËÉΩÂäõ ‰ª• let z = Box::new(10) ‰∏∫‰æãÔºå*z Âú®Â∫ïÂ±ÇÂÖ∂ÂÆûÊòØ *(z.deref()) Êìç‰Ωú ‰∏ÄËà¨ÊâÄÊúâÊùÉ‰æùÁÑ∂Ë¶Å‰øùÁïôÂú®Êô∫ËÉΩÊåáÈíàÁªìÊûÑ‰Ωì‰∏≠Ôºå‰∏çÁî®ÊääÊâÄÊúâÊùÉËΩ¨ÁßªÂá∫Âéª Ëß£ÂºïÁî®Âº∫Âà∂Â§öÊÄÅÔºàderef coercionsÔºâ ÊòØ Rust Ë°®Áé∞Âú®ÂáΩÊï∞ÊàñÊñπÊ≥ï‰º†ÂèÇ‰∏äÁöÑ‰∏ÄÁßç‰æøÂà©„ÄÇÂΩìÊâÄÊ∂âÂèäÁöÑÁ±ªÂûãÂÆö‰πâ‰∫Ü Deref traitÔºåRust ‰ºöÂàÜÊûêËøô‰∫õÁ±ªÂûãÂπ∂‰ΩøÁî®‰ªªÊÑèÂ§öÊ¨° Deref::deref Ë∞ÉÁî®Ëé∑ÂæóÂåπÈÖçÂèÇÊï∞ÁöÑÁ±ªÂûãÔºàÈÉΩÂèëÁîüÂú®ÁºñËØëÊó∂ÔºâÔºåËÄå‰∏î‰πüËÆ©‰ª£Á†ÅÂèØËØªÊÄßÊõ¥Â•ΩÔºö 123456789101112131415161718fn main() &#123; let m = MyBox::new(String::from("world")); // Ê≠£ÂºèÂõ†‰∏∫„ÄåËß£ÂºïÁî®Âº∫Âà∂Â§öÊÄÅ„ÄçÊú∫Âà∂Â≠òÂú®ÔºåËøôÁßç‰º†ÂèÇÊòØÊîØÊåÅÁöÑÔºå‰ºöËá™Âä®ÂÅöÁ±ªÂûãËΩ¨Êç¢ // Á¨¨‰∏ÄÊ¨° deref ÊãøÂà∞ &amp;String ÔºàÈíàÂØπ Box Á±ªÂûãÔºâ // Á¨¨‰∫åÊ¨° deref ÊãøÂà∞ &amp;strÔºàÈíàÂØπ &amp;String Á±ªÂûãÔºâ print_box(&amp;m); // Âê¶ÂàôÔºå‰Ω†ÂèØËÉΩË¶ÅËøôÊ†∑ÂÜô print_box(&amp;(*m)); // ÁîöËá≥ËøôÊ†∑ print_box(&amp;(*m)[..])&#125;fn print_box(s: &amp;str) &#123; println!("hello, &#123;&#125;", s);&#125; Ëß£ÂºïÁî®Âº∫Âà∂Â§öÊÄÅÁîüÊïàÊÉÖÂÜµÔºö ÂΩì T: Deref&lt;Target=U&gt; Êó∂Ôºå&amp;T -&gt; &amp;U ÂΩì T: DerefMut&lt;Target=U&gt; Êó∂Ôºå&amp;mut T -&gt; &amp;mut U ÂΩì T: Deref&lt;Target=U&gt; Êó∂Ôºå&amp;mut T -&gt; &amp;U Rust ÂèØ‰ª•Â∞ÜÂèØÂèòÂºïÁî®Âº∫Âà∂ÂèòÊàê‰∏çÂèØÂèòÂºïÁî®ÔºàÂèçËøáÊù•‰∏çË°åÔºåËÄÉËôë‰∏ã‰∏∫‰ªÄ‰πàÔºüÔºâ Drop ÂΩìÂÄºË¶ÅÁ¶ªÂºÄ‰ΩúÁî®ÂüüÊó∂ÔºåÂèØ‰ª•‰∏∫ËØ•Á±ªÂûãÂÆûÁé∞ Drop traitÔºåËøôÊ†∑ÂèØ‰ª•Âú®Á¶ªÂºÄÊó∂ÂÅö‰∏Ä‰∫õËá™ÂÆö‰πâÁöÑÊ∏ÖÁêÜÂ∑•‰ΩúÔºöÁΩëÁªúËµÑÊ∫ê„ÄÅÊñá‰ª∂ÊàñËÄÖÂÜÖÂ≠òÁ©∫Èó¥ÈáäÊîæÁ≠â Êàë‰ª¨‰∏çËÉΩÁõ¥Êà™‰∫ÜÂΩìÂú∞Á¶ÅÁî®Ëá™Âä® drop ÂäüËÉΩÔºåÈÄöÂ∏∏‰πü‰∏çÈúÄË¶Å„ÄÇDrop trait Â≠òÂú®ÁöÑÊÑè‰πâÂ∞±ÊòØÂÆÉ‰ºöË¢´Ëá™Âä®Â§ÑÁêÜ Â¶ÇÊûúÈúÄË¶ÅÊèêÂâçÊâßË°å dropÔºåÂèØ‰ª•‰ΩøÁî® std::mem::drop ÂáΩÊï∞Ôºå‰ΩÜ‰∏çËÉΩÁõ¥Êé•Ë∞ÉÁî®ÂÄºÁöÑ drop ÊñπÊ≥ïÔºåÂõ†‰∏∫Á¶ªÂºÄ‰ΩúÁî®ÂüüÂêé Rust ‰ºöËá™Âä®Ë∞ÉÁî®ÂÄºÁöÑ drop ÊñπÊ≥ïÔºå‰ªéËÄåÂØºËá¥ double free ÈîôËØØ Rc Â§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÊâÄÊúâÊùÉÊòØÂæàÊ∏ÖÊô∞ÁöÑ„ÄÇ‰ΩÜÊúâÊó∂ÂÄôÊüê‰∏™ÂÄºÂç¥ÂèØ‰ª•ÊúâÂ§ö‰∏™ÊâÄÊúâËÄÖÔºåÊØîÂ¶ÇÂõæÊï∞ÊçÆÁªìÊûÑ‰∏≠ÔºåÂ§öÊù°ËæπÂèØËÉΩÊåáÂêëÁõ∏ÂêåÁöÑËäÇÁÇπ Rc&lt;T&gt; ‰ºöËøΩË∏™ÂÄºÁöÑÂºïÁî®ËÆ°Êï∞Ôºå‰øùËØÅÊ≤°ÊúâÂºïÁî®Êó∂ÔºåÊâçÂèØ‰ª•Ë¢´Ê∏ÖÁ©∫ Rc&lt;T&gt; Áî®‰∫éÂΩìÊàë‰ª¨Â∏åÊúõÂú®Â†Ü‰∏äÂàÜÈÖçÂÜÖÂ≠ò‰æõÂ§ö‰∏™ÈÉ®ÂàÜËØªÂèñÔºå‰ΩÜÂèà‰∏çËÉΩÂú®ÁºñËØëÊó∂Á°ÆÂÆöÂì™‰∏™ÈÉ®ÂàÜ‰ºöÂú®ÊúÄÂêéÁªìÊùü‰ΩøÁî®ÂÆÉ„ÄÇ Rc&lt;T&gt; Âè™ËÉΩÁî®‰∫éÂçïÁ∫øÁ®ãÂú∫ÊôØ Rc::new Âíå Rc::clone ÊñπÊ≥ïÊØîËæÉÂ∏∏Áî®ÔºåRc::clone ÂÅöÁöÑÊòØÊµÖÊã∑Ë¥ùÔºåÂπ∂‰∏îÊØèÊ¨°Ë∞ÉÁî®Âè™‰ºöÁªôÂºïÁî®ËÆ°Êï∞Âä† 1 Rc::strong_count ÂèØ‰ª•Êü•ÁúãÂºïÁî®ËÆ°Êï∞ÔºàÊ≥®ÊÑèËøòÊúâ‰∏™ Rc::weak_countÔºåÈÅøÂÖçÂæ™ÁéØÂºïÁî®‰ΩøÁî®Ôºâ RefCell ÂíåÂÜÖÈÉ®ÂèØÂèòÊ®°Âºè ÂÜÖÈÉ®ÂèØÂèòÊÄßÔºàInterior mutabilityÔºâ ÊòØ Rust ‰∏≠ÁöÑ‰∏Ä‰∏™ËÆæËÆ°Ê®°ÂºèÔºåÂÖÅËÆ∏‰Ω†Âú®Êúâ‰∏çÂèØÂèòÂºïÁî®Êó∂‰πüËÉΩÊîπÂèòÊï∞ÊçÆ„ÄÇ‰ΩøÁî® unsafe Êù•Ê®°Á≥ä Rust ÁöÑÂ∏∏ËßÑÁöÑÂèØÂèòÊÄßÂíåÂÄüÁî®ËßÑÂàô RefCell&lt;T&gt; ‰ª£Ë°®ÂÖ∂ÁÆ°ÁêÜÁöÑÊï∞ÊçÆÁöÑÂîØ‰∏ÄÊâÄÊúâÊùÉ ÂÄüÁî®ËßÑÂàôÔºö Âú®‰ªªÊÑèÁªôÂÆöÊó∂Èó¥ÔºåÂè™ËÉΩÊã•Êúâ‰∏Ä‰∏™ÂèØÂèòÂºïÁî®Êàñ‰ªªÊÑèÊï∞ÈáèÁöÑ‰∏çÂèØÂèòÂºïÁî®‰πã‰∏Ä ÂºïÁî®ÂøÖÈ°ªÊÄªÊòØÊúâÊïàÁöÑ ÂØπ‰∫é RefCell&lt;T&gt;Ôºå‰∏çÂèØÂèòÊÄß‰ΩúÁî®‰∫é ËøêË°åÊó∂ÔºõÂ¶ÇÊûúÂú®ËøêË°åÊó∂ËøùÂèçÂÄüÁî®ËßÑÂàôÔºåÁ®ãÂ∫è‰ºö panic RefCell&lt;T&gt; Áî®‰∫é‰Ω†Á°Æ‰ø°‰ª£Á†ÅÈÅµÂÆàÂÄüÁî®ËßÑÂàôÔºå‰ΩÜÁºñËØëÂô®Ëøô‰∏™Â§ßÁ¨®Ëõã‰∏çËÉΩÁêÜËß£ÂíåÁ°ÆÂÆöÁöÑÊó∂ÂÄô Âè™ËÉΩÁî®‰∫éÂçïÁ∫øÁ®ãÂú∫ÊôØ Âú®‰∏çÂèØÂèòÂÄºÂÜÖÈÉ®ÊîπÂèòÂÄºÂ∞±ÊòØ ÂÜÖÈÉ®ÂèØÂèòÊÄß Ê®°ÂºèÔºå‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑÂ∫îÁî®Âú∫ÊôØÊòØ mock ÂØπË±° ÊµãËØïÊõøË∫´Ôºàtest doubleÔºâ ÊòØ‰∏Ä‰∏™ÈÄöÁî®ÁºñÁ®ãÊ¶ÇÂøµÔºåÂÆÉ‰ª£Ë°®‰∏Ä‰∏™Âú®ÊµãËØï‰∏≠Êõø‰ª£Êüê‰∏™Á±ªÂûãÁöÑÁ±ªÂûã borrow ÊñπÊ≥ïËøîÂõû RefÔºõborrow_mut ËøîÂõû RefMut Rc&lt;T&gt; Âíå RefCell&lt;T&gt; ÁªìÂêàÔºåÂèØ‰ª•ÂÅöÂà∞ÂÄºÊúâÂ§ö‰∏™ÊâÄÊúâËÄÖÂπ∂‰∏îÂèØ‰ª•Ë¢´‰øÆÊîπ Âæ™ÁéØÂºïÁî® Rust ÁöÑÂÜÖÂ≠òÂÆâÂÖ®Êú∫Âà∂‰ΩøÂæóÂÜÖÂ≠òÊ≥ÑÊºèÊõ¥Âä†Â∞ëËßÅÔºåÈô§Èùû‰Ω†ÂàªÊÑèÂàõÂª∫Á±ª‰ººÂæ™ÁéØÂºïÁî®ËøôÁßçÊï∞ÊçÆÁªìÊûÑ Rc::clone Â¢ûÂä†ÂÆû‰æãÁöÑ strong_count Rc::downgrade ÂàõÂª∫ÂÄºÁöÑ Âº±ÂºïÁî®Ôºàweak refÔºâ Ôºå‰ºöÂæóÂà∞ Weak&lt;T&gt; Á±ªÂûãÁöÑÊô∫ËÉΩÊåáÈíàÔºåÂπ∂‰ºöÂ∞Ü weak_count Â¢ûÂä†„ÄÇweak_count Êó†ÈúÄËÆ°Êï∞Âô®‰∏∫ 0 Â∞±ËÉΩ‰Ωø Rc ÂÆû‰æãË¢´Ê∏ÖÁêÜ Âº∫ÂºïÁî®‰ª£Ë°®Â¶Ç‰ΩïÂÖ±‰∫´ Rc&lt;T&gt; ÂÆû‰æãÊâÄÊúâÊùÉÔºåÂº±ÂºïÁî®‰∏ç‰ª£Ë°®ÊâÄÊúâÊùÉÂÖ≥Á≥ª Weak&lt;T&gt; ÂÆû‰æãÁöÑ upgrade ÊñπÊ≥ïËøîÂõû Option&lt;Rc&lt;T&gt;&gt;ÔºåÈúÄË¶ÅÊ£ÄÊü•ÊåáÂêëÁöÑÂÄºÊòØÂê¶Ë¢´Ê∏ÖÁêÜ‰∫Ü Âπ∂ÂèëÁ∫øÁ®ã Âπ∂ÂèëÁºñÁ®ã ‰ª£Ë°®Á®ãÂ∫èÁöÑ‰∏çÂêåÈÉ®ÂàÜÁõ∏‰∫íÁã¨Á´ãÊâßË°åÔºõÂπ∂Ë°åÁºñÁ®ã ‰ª£Ë°®Á®ãÂ∫è‰∏çÂêåÈÉ®ÂàÜÂêåÊó∂ÊâßË°å Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÁºñÁ®ãÂÖ∂ÂÆûËøòÊòØË¶ÅÂ∞èÂøÉÁÇπÔºå‰ΩÜÊòØ‰∏çË¶ÅÂÆ≥ÊÄïÔºåÈúÄË¶ÅÁöÑÊó∂ÂÄôÂ∞±Â§ßËÉÜÁî® Rust Ê†áÂáÜÂ∫ì‰ΩøÁî® 1:1 Á∫øÁ®ãÊ®°ÂûãÂÆûÁé∞ÔºåË∂≥Â§üÂ∫ïÂ±Ç thread::spawn ÂèØ‰ª•ÂêØÂä®Êñ∞ÁöÑÁ∫øÁ®ã Â¶ÇÊûúË¶ÅÂú®Âà´ÁöÑÁ∫øÁ®ã‰∏≠‰ΩøÁî®‰∏ªÁ∫øÁ®ã‰∏≠ÁöÑÂÄºÔºåÈúÄË¶Å‰ΩøÁî® move ÂÖ≥ÈîÆÂ≠ó Ê∂àÊÅØ‰º†ÈÄí ‰ΩøÁî® Ê∂àÊÅØ‰º†ÈÄí ÁöÑÊñπÂºèÂú®Â§öÁ∫øÁ®ã‰∏≠ÈÄö‰ø° Do not communicate by sharing memory; instead, share memory by communicating Rust ‰∏≠ÂÆûÁé∞Ê∂àÊÅØ‰º†ÈÄíÁöÑ‰∏ªË¶ÅÂ∑•ÂÖ∑ÊòØ ÈÄöÈÅìÔºàchannelÔºâÔºö ÂèëÈÄÅÊñπÔºötransmitter/producer Êé•Êî∂ÊñπÔºöreceiver/consumer ÂΩìÂèëÈÄÅÊñπÊàñÊé•Êî∂Êñπ‰ªªÊÑè‰∏Ä‰∏™Ë¢´ dropÔºåÈÉΩÂèØ‰ª•ËÆ§‰∏∫ÈÄöÈÅìË¢´ÂÖ≥Èó≠‰∫ÜÔºà‰∏çÂÉè Go ‰∏≠ÁöÑÊòæÂºè close(chan)Ôºâ mpsc::channelÔºåËøôÈáå mpsc ÂÖ®Áß∞ÊòØ Â§öÁîü‰∫ßËÄÖÔºåÂçïÊ∂àË¥πËÄÖÔºàmultiple producer, single consumerÔºâ recv ÊòØÈòªÂ°ûÊé•Êî∂Ôºåtry_recv Âàô‰ºöÁ´ãÂç≥ËøîÂõû ÂèØ‰ª•ÂØπ receiver ËøõË°åËø≠‰ª£ÔºåÊ∂àË¥π channel ‰∏≠ÁöÑÊ∂àÊÅØÔºàÊ≥®ÊÑèÔºåËøôÈáåÁöÑ channel ÊòØÂ∏¶ÁºìÂÜ≤ÁöÑÔºâ mpsc::Sender::clone ÂèØ‰ª•Áî®Êù•ÂÖãÈöÜÁîüÊàêÂ§ö‰∏™Áîü‰∫ßËÄÖ Áä∂ÊÄÅÂÖ±‰∫´ÔºöMutex ‰∏é Arc Âü∫‰∫é channel ÁöÑÊú∫Âà∂Á±ª‰ºº‰∫éÂçïÊâÄÊúâÊùÉÔºå‰∏ÄÊó¶ÂÄºË¢´ÂèëÈÄÅÂá∫ÂéªÔºåÂèëÈÄÅÊñπÂ∞ÜÂ§±ÂéªÊâÄÊúâÊùÉ ÂÖ±‰∫´ÂÜÖÂ≠òÊ®°ÂºèÂàôÁ±ª‰ººÂ§öÊâÄÊúâÊùÉÔºåÂ§ö‰∏™Á∫øÁ®ãÂèØ‰ª•ÂêåÊó∂ËÆøÈóÆÁõ∏ÂêåÁöÑÂÜÖÂ≠òÂú∞ÂùÄ ‰∫íÊñ•‰ø°Âè∑ÈáèÔºàmutex, mutual exclusionÔºâÔºåÂè™ÂÖÅËÆ∏‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆÊüê‰∫õÊï∞ÊçÆ Arc&lt;T&gt; Á±ª‰ºº‰∫é Rc&lt;T&gt;ÔºåA Ë°®Á§∫ AtomicÔºåÂç≥ÂéüÂ≠êÁöÑ„ÄÇÂºïÁî®ËÆ°Êï∞Âú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÊòØÂÆâÂÖ®ÁöÑÔºå‰ΩÜÂõ†‰∏∫ÈúÄË¶ÅÂπ∂ÂèëÂéüËØ≠Âä†ÊåÅÔºåÊâÄ‰ª•Áõ∏ÂØπ Rc&lt;T&gt; ‰ºöÂ≠òÂú®ÊÄßËÉΩÊçüËÄó Mutex&lt;T&gt; Êèê‰æõ‰∫ÜÂÜÖÈÉ®ÂèØÂèòÊÄß RefCell&lt;T&gt; Âíå Mutex&lt;T&gt; ÂÖ∑ÊúâÁõ∏‰ººÁöÑ‰ΩúÁî® Rc&lt;T&gt; Âíå Arc&lt;T&gt; ‰πüÊòØÁ±ª‰ºº Sync Âíå Send Rust ËØ≠Ë®ÄÊú¨Ë∫´ÂØπÂπ∂ÂèëÁü•‰πãÁîöÂ∞ëÔºåÂâçÈù¢ÊèêÂà∞ÁöÑÂè™ÊòØÊ†áÂáÜÂ∫ìÂÆûÁé∞ÊñπÊ°àÔºå‰ΩÜÂπ∂ÂèëÊñπÊ°à‰∏çÂèóÊ†áÂáÜÂ∫ìÊàñËØ≠Ë®ÄÊâÄÈôê std::marker ‰∏≠ Send ‰∏é Sync traitÔºö Send ÂÖÅËÆ∏Âú®Â§öÁ∫øÁ®ã‰πãÈó¥ËΩ¨ÁßªÊâÄÊúâÊùÉ Âá†‰πéÊâÄÊúâÁöÑ Rust Á±ªÂûãÈÉΩÊòØÂèØ Send ÁöÑÔºå‰ªª‰ΩïÁî± Send Á±ªÂûãÁªÑÊàêÁöÑÂ§çÂêàÁ±ªÂûã‰πüÊòØ Send ÁöÑ Sync ÂÖÅËÆ∏Â§öÁ∫øÁ®ãËÆøÈóÆÔºöÂÆûÁé∞‰∫Ü Sync ÁöÑÁ±ªÂûãÂèØ‰ª•ÂÆâÂÖ®Âú∞Âú®Â§ö‰∏™Á∫øÁ®ã‰∏≠Êã•ÊúâÂÖ∂ÂÄºÁöÑÂºïÁî® ÂØπ‰∫é‰ªªÊÑèÁ±ªÂûã TÔºåÂ¶ÇÊûú &amp;T ÊòØ Send ÁöÑÔºåÈÇ£‰πà T Â∞±ÊòØ Sync ÁöÑ ÂÆåÂÖ®Áî± Sync ÁöÑÁ±ªÂûãÁªÑÊàêÁöÑÁ±ªÂûã‰πüÊòØ Sync ÁöÑ ÊâãÂä®ÂÆûÁé∞ Send Âíå Sync ÊòØ‰∏çÂÆâÂÖ®ÁöÑÔºåÂÆÉ‰ª¨ÊòØÊ†áËÆ∞ traitÔºåÁîöËá≥ÈÉΩ‰∏çÈúÄË¶ÅÂÆûÁé∞‰ªª‰ΩïÊñπÊ≥ïÔºåÁî®‰∫éÂä†Âº∫Âπ∂ÂèëÁõ∏ÂÖ≥ÊÄßÁöÑ‰∏çÂèØÂèòÊÄß Rust Èù¢ÂêëÂØπË±°ÁâπÂæÅÈù¢ÂêëÂØπË±°ËØ≠Ë®ÄÁâπÁÇπ Design Patterns: Elements of Resuable Object-Oriented Software ‰∏≠ÂØπ‰∫éÈù¢ÂêëÂØπË±°ÁöÑÂÆö‰πâÔºö 12Object-oriented programs are made up of objects. An object packages both data and the procedures thatpeople on that data. The procedures are typically called methods or operations. Èù¢ÂêëÂØπË±°ÁºñÁ®ãËØ≠Ë®ÄÁöÑÂÖ±‰∫´ÁâπÊÄßÔºöÂØπË±°„ÄÅÂ∞ÅË£Ö ÂíåÂ§öÊÄÅ Rust ÁöÑÁªìÊûÑ‰ΩìÂíå Enum ÊòØÁ¨¶ÂêàÂØπË±°ÂåÖÂê´Êï∞ÊçÆÂíåË°å‰∏∫ÂÆö‰πâÁöÑÔºõÂè¶Â§ñÔºåÈÄöËøá pub ÂÖ≥ÈîÆÂ≠óÂèØ‰ª•ÊéßÂà∂ÊòØÂê¶ÂØπÂ§ñÊèê‰æõËÆøÈóÆÊùÉÈôêÔºåÂØπ‰∫éÁªÜËäÇÂèØ‰ª•ÁßÅÊúâÂåñÔºå‰∏çÁî®ÂØπÂ§ñÊö¥Èú≤ ÁªßÊâøÔºöÂ§çÁî®‰ª£Á†ÅÔºõÂ≠êÁ±ªÂûãÂèØ‰ª•Êõø‰ª£Áà∂Á±ªÂûãË¢´‰ΩøÁî®ÁöÑÂú∞ÊñπÔºàÂç≥Â§öÊÄÅÔºâ„ÄÇÁªßÊâøÂ≠òÂú®ÁöÑ‰∏Ä‰∏™ÈóÆÈ¢òÊòØÂ∏∏Â∏∏‰ºöÂÖ±‰∫´Â§ö‰∫éÈúÄË¶ÅÁöÑ‰ª£Á†ÅÔºàÊúâËøôÁßçÈ£éÈô©Ôºâ Rust ‰ΩøÁî® trait ÂØπË±°Êõø‰ª£ÁªßÊâøÔºåÂÆûÁé∞Â§öÊÄÅÔºà‰∏ÄÁßçÂèØÁî®‰∫éÂ§öÁßçÁ±ªÂûã‰ª£Á†ÅÁöÑÂπøÊ≥õÊ¶ÇÂøµÔºâ Trait Object trait ÂØπË±°ÊåáÂêë‰∏Ä‰∏™ÂÆûÁé∞‰∫ÜÊåáÂÆö trait ÁöÑÁ±ªÂûãÂÆû‰æãÔºåÈÄöËøáÊåáÂÆöÊüê‰∫õÊåáÈíàÔºà&amp; Êàñ Box&lt;T&gt; Á≠âÔºâÔºåÊé•ÁùÄÊåáÂÆöÁõ∏ÂÖ≥ trait ‰∏çËÉΩÂêë trait ÂØπË±°‰∏≠Â¢ûÂä†Êï∞ÊçÆÔºåÊ≤°ÊúâÈÇ£‰πàÈÄöÁî®ÔºöÂÖ∑‰Ωì‰ΩúÁî®ÊòØÂÖÅËÆ∏ÂØπÈÄöÁî®Ë°å‰∏∫ËøõË°åÊäΩË±° ‰∏éÂÆö‰πâ‰∫Ü‰ΩøÁî® trait bound ÁöÑÊ≥õÂûãÁ±ªÂûãÂèÇÊï∞‰∏çÂêåÁöÑÁªìÊûÑ‰Ωì‰∏çÂêåÔºåtrait ÂØπË±°ÂÖÅËÆ∏ËøêË°åÊó∂Êõø‰ª£Â§öÁßçÂÖ∑‰ΩìÁ±ªÂûãÔºåËÄåÊ≥õÂûãÂèÇÊï∞Âàô‰∏ÄÊ¨°Âè™ËÉΩÊõø‰ª£‰∏Ä‰∏™ÂÖ∑‰ΩìÁ±ªÂûã Á±ª‰ººÂä®ÊÄÅËØ≠Ë®Ä‰∏≠ÁöÑ È∏≠Â≠êÁ±ªÂûã Ê¶ÇÂøµÔºåÊàë‰ª¨‰∏çÈúÄË¶ÅÁü•ÈÅìÁªÑ‰ª∂ÁöÑÂÖ∑‰ΩìÁ±ªÂûãÔºåÂè™ÈúÄË¶ÅÁ°ÆÂÆöÊòØÂê¶ÂÆûÁé∞‰∫ÜÊåáÂÆöÁöÑ trait Âç≥ÂèØÊâßË°åÊúüÊúõÁöÑÊìç‰Ωú ‰ΩøÁî® trait ÂØπË±°Âíå Rust Á±ªÂûãÁ≥ªÁªüËøõË°åÁ±ª‰ººÈ∏≠Â≠êÁ±ªÂûãÊìç‰ΩúÁöÑ‰ºòÂäøÊòØÊó†ÈúÄÂú® ËøêË°åÊó∂ Ê£ÄÊü•‰∏Ä‰∏™ÂÄºÊòØÂê¶ÂÆûÁé∞‰∫ÜÁâπÂÆöÁöÑÊñπÊ≥ïÊàñÊãÖÂøÉË∞ÉÁî®Êó∂Âõ†‰∏∫ÂÄºÊ≤°ÊúâÂÆûÁé∞ÊñπÊ≥ïËÄå‰∫ßÁîüÈîôËØØ trait ÂØπË±°ÊâßË°åÂä®ÊÄÅÂàÜÂèëÔºàÁºñËØëÂô®‰ºöÁîüÊàêÂú®ËøêË°åÊó∂Á°ÆÂÆöË∞ÉÁî®‰ªÄ‰πàÊñπÊ≥ïÁöÑ‰ª£Á†ÅÔºâÔºåÂä®ÊÄÅ‰ºòÂåñ‰ºöÂØºËá¥ÁºñËØëÂô®Á¶ÅÁî®‰∏Ä‰∫õ‰ºòÂåñ Âè™ÊúâÂØπË±°ÂÆâÂÖ®Ôºàobject safeÔºâÁöÑ trait ÊâçÂèØ‰ª•ÁªÑÊàê trait ÂØπË±°„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™ trait ‰∏≠ÁöÑÊñπÊ≥ïÊúâÂ¶Ç‰∏ãÂ±ûÊÄßÊó∂ÔºåÂàôËØ• trait ÊòØÂØπË±°ÂÆâÂÖ®ÁöÑÔºö ËøîÂõûÂÄºÁ±ªÂûã‰∏çÊòØ Self ÊñπÊ≥ïÊ≤°Êúâ‰ªª‰ΩïÊ≥õÂûãÁ±ªÂûãÂèÇÊï∞ Áä∂ÊÄÅÊ®°ÂºèÂÆûÁé∞ Áä∂ÊÄÅÊ®°Âºè ÊòØ‰∏Ä‰∏™Èù¢ÂêëÂØπË±°ËÆæËÆ°Ê®°ÂºèÔºö‰∏Ä‰∏™ÂÄºÊã•ÊúâÊüê‰∫õÂÜÖÈÉ®Áä∂ÊÄÅÔºà‰ΩìÁé∞‰∏∫‰∏ÄÁ≥ªÂàó Áä∂ÊÄÅÂØπË±°ÔºâÔºåÂêåÊó∂ÂÄºÁöÑË°å‰∏∫‰ºöÈöèÁùÄÂÜÖÈÉ®Áä∂ÊÄÅËÄåÊîπÂèò„ÄÇÊØè‰∏Ä‰∏™Áä∂ÊÄÅÂØπË±°‰ª£Ë°®Ë¥üË¥£Ëá™Ë∫´ÁöÑË°å‰∏∫ÂíåÂΩìÈúÄË¶ÅÊîπÂèò‰∏∫Âè¶‰∏Ä‰∏™Áä∂ÊÄÅÊó∂ÁöÑËßÑÂàôÁä∂ÊÄÅ„ÄÇÊåÅÊúâ‰ªª‰Ωï‰∏Ä‰∏™ËøôÁßçÁä∂ÊÄÅÁöÑÂÄº‰∏çÂêå‰∫éÁä∂ÊÄÅÁöÑË°å‰∏∫Âèä‰ΩïÊó∂Áä∂ÊÄÅËΩ¨ÁßªÊØ´‰∏çÁü•ÊÉÖ ‰ºòÁÇπÔºöÊòì‰∫éÊâ©Â±ïÂíåÁª¥Êä§ Áº∫ÁÇπÔºö Âõ†‰∏∫ÈúÄË¶ÅÂÆûÁé∞Áä∂ÊÄÅ‰πãÈó¥ÁöÑËΩ¨Êç¢Ôºå‰∫ßÁîüÁõ∏‰∫íËÅîÁ≥ª Â≠òÂú®ÈáçÂ§çÈÄªËæë Ê®°ÂºèÂåπÈÖç Ê®°ÂºèÂèØÁî±‰∏ãÈù¢ÁöÑÂÜÖÂÆπÁªÑÂêàËÄåÊàêÔºö Â≠óÈù¢ÂÄº Ëß£ÊûÑÁöÑÊï∞ÁªÑ„ÄÅÊûö‰∏æ„ÄÅÁªìÊûÑ‰ΩìÊàñÂÖÉÁªÑ ÂèòÈáè ÈÄöÈÖçÁ¨¶ Âç†‰ΩçÁ¨¶ match Ë°®ËææÊó∂ÂøÖÈ°ªÊòØÁ©∑Â∞ΩÁöÑÔºàexhaustiveÔºâ if let, else if, else if let ÂèØ‰ª•Ê∑∑Âêà‰ΩøÁî®ÁöÑÊù°‰ª∂Ë°®ËææÂºè while let Êù°‰ª∂Âæ™ÁéØ for (x, y) in Âæ™ÁéØ let ËØ≠Âè• Â¶ÇÊûúÂ∏åÊúõÂøΩÁï•ÂÖÉÁªÑ‰∏≠ÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÄºÔºåÂèØ‰ª•‰ΩøÁî® _ Êàñ .. ÂáΩÊï∞ÂèÇÊï∞‰πüÂèØ‰ª•ÊòØÊ®°Âºè RefutableÔºàÂèØÂèçÈ©≥ÁöÑÔºâÔºöËÉΩÂ§üÂåπÈÖç‰ªª‰Ωï‰º†ÈÄíÁöÑÂèØËÉΩÂÄºÁöÑÊ®°Âºè if let Ë°®ËææÂºè while let Ë°®ËææÂºè IrrefutableÔºà‰∏çÂèØÂèçÈ©≥ÁöÑÔºâÔºöÂØπÊüê‰∫õÂèØËÉΩÁöÑÂÄºËøõË°åÂåπÈÖç‰ºöÂ§±Ë¥•ÁöÑÊ®°Âºè let ËØ≠Âè• ÂáΩÊï∞ÂèÇÊï∞ for Âæ™ÁéØ char Âíå numeric ÂÄºÊòØ Rust ÂèØ‰ª•Áü•ÈÅìËåÉÂõ¥ÊòØÂê¶‰∏∫Á©∫ÁöÑÁ±ªÂûã ÂåπÈÖçÂÆàÂç´Ôºàmatch guardÔºâ ÊòØ‰∏Ä‰∏™Âú® match ÂàÜÊîØÂêéÊåáÂÆöÁöÑÈ¢ùÂ§ñÁöÑ if Êù°‰ª∂ÔºåÂΩìÂåπÈÖçÂà∞ËØ•ÂàÜÊîØÊó∂ÔºåÈ¢ùÂ§ñÁöÑ if Êù°‰ª∂‰πüÂøÖÈ°ªÊª°Ë∂≥ÊâçÂèØ‰ª•„ÄÇÂåπÈÖçÂÆàÂç´ÂØπ‰∫éË°®ËææÈùûÂ∏∏Â§çÊùÇÁöÑÂåπÈÖçÊù°‰ª∂Êó∂ÂæàÊúâÂ∏ÆÂä© Rust È´òÁ∫ßÁâπÊÄßÔºàÈöæÔºâUnsafe Rust ÂèØ‰ª•Êèê‰æõ Super Power: Ëß£ÂºïÁî®Ë£∏ÊåáÈíà Ë∞ÉÁî®‰∏çÂÆâÂÖ®ÁöÑÂáΩÊï∞ÊàñÊñπÊ≥ï ËÆøÈóÆÊàñ‰øÆÊîπÂèØÂèòÈùôÊÄÅÂèòÈáè ÂÆûÁé∞‰∏çÂÆâÂÖ®ÁöÑ traitÔºöÂΩìËá≥Â∞ëÊúâ‰∏Ä‰∏™ÊñπÊ≥ï‰∏≠ÂåÖÂê´ÁºñËØëÂô®Êó†Ê≥ïÈ™åËØÅÁöÑÂèòÈáèÊó∂ trait ÊòØ‰∏çÂÆâÂÖ®ÁöÑ ‰πãÊâÄ‰ª•ÈúÄË¶Å Unsafe RustÔºåÊòØÂõ†‰∏∫Ôºö ÈùôÊÄÅÂàÜÊûêÔºàÁºñËØëÂô®ÔºâÊú¨Ë¥®‰∏äÊòØ‰øùÂÆàÁöÑÔºåÊúâÊó∂ÂÄôÁ®ãÂ∫èÂèØËÉΩÊòØÊúâÊïàÁöÑÔºå‰ΩÜË¢´ÊãíÁªùÁºñËØë Â∫ïÂ±ÇËÆ°ÁÆóÊú∫Á°¨‰ª∂Âõ∫ÊúâÁöÑ‰∏çÂÆâÂÖ®ÊÄß unsafe Âπ∂‰∏ç‰ºöÂÖ≥Èó≠ borrow-checker ÊàñËÄÖÁ¶ÅÁî®ÂÖ∂ÂÆÉ Rust ÂÆâÂÖ®Ê£ÄÊü• unsafe ‰∏ç‰ª£Ë°®‰ª£Á†ÅÂùóÁúüÁöÑÂæàÂç±Èô©ÊàñËÄÖÂøÖÁÑ∂ÂØºËá¥ÂÜÖÂ≠òÂÆâÂÖ®ÈóÆÈ¢òÔºåÁúüÊ≠£ÊÑèÂõæÊòØÁ®ãÂ∫èÂëò‰ºöÁ°Æ‰øù unsafe block ‰∏≠ÁöÑ‰ª£Á†ÅÊòØ‰ª•ÊúâÊïàÁöÑÊñπÂºèËÆøÈóÆÂÜÖÂ≠ò ÂèØ‰ª•‰∏∫‰∏çÂÆâÂÖ®ÁöÑ‰ª£Á†ÅÊèê‰æõÂÆâÂÖ®ÁöÑÊäΩË±°Êé•Âè£ Ë£∏ÊåáÈíàÔºàraw pointersÔºâ Á±ªÂûãÔºö*const T Âíå *mut TÔºåÂå∫Âà´‰∫éÂºïÁî®ÂíåÊô∫ËÉΩÊåáÈíàÁöÑÂú∞ÊñπÔºö ÂÖÅËÆ∏ÂøΩÁï•ÂÄüÁî®ËßÑÂàôÔºåÂèØÂêåÊó∂Êã•Êúâ‰∏çÂèØÂèòÂíåÂèØÂèòÁöÑÊåáÈíàÔºåÊàñÂ§ö‰∏™ÊåáÂêëÁõ∏Âêå‰ΩçÁΩÆÁöÑÂèØÂèòÊåáÈíà ‰∏ç‰øùËØÅÊåáÂêëÊúâÊïàÁöÑÂÜÖÂ≠ò ÂÖÅËÆ∏‰∏∫Á©∫ ‰∏çËÉΩÂÆûÁé∞‰ªª‰ΩïËá™Âä®Ê∏ÖÁêÜÂäüËÉΩ ÂèØ‰ª•Âú®ÂÆâÂÖ®ÁöÑ‰ª£Á†Å‰∏≠ÂàõÂª∫Ë£∏ÊåáÈíàÔºå‰ΩÜ‰∏çËÉΩÁõ¥Êé• Ëß£ÂºïÁî® Ë£∏ÊåáÈíàÔºàÂøÖÈ°ªË¶ÅÂú® unsafe ÁéØÂ¢É‰∏ãÔºâ Ë£∏ÊåáÈíàÁöÑ‰∏Ä‰∏™Â∏∏ËßÅÁöÑÂ∫îÁî®Âú∫ÊôØÂ∞±ÊòØË∞ÉÁî® C Êé•Âè£ extern ÂÖ≥ÈîÆÂ≠óÂèØ‰ª•ÂàõÂª∫Âíå‰ΩøÁî® Â§ñÈÉ®ÂáΩÊï∞Êé•Âè£ÔºàForeign Function Interface, FFIÔºâ Â∏∏Èáè‰∏éÈùôÊÄÅÂèòÈáèÔºö ÈùôÊÄÅÂèòÈáèÁöÑÂÜÖÂ≠òÂú∞ÂùÄÊÄªÊòØÂõ∫ÂÆöÁöÑÔºå‰∏îÁîüÂëΩÂë®Êúü‰∏∫ &#39;staticÔºå‰ΩøÁî®ÈùôÊÄÅÂèòÈáèÂÄºÊÄª‰ºöËÆøÈóÆÁõ∏ÂêåÁöÑÂú∞ÂùÄ Â∏∏ÈáèÂÖÅËÆ∏Âú®‰ªª‰ΩïË¢´Áî®Âà∞ÁöÑÊó∂ÂÄôÂ§çÂà∂ÂÖ∂Êï∞ÊçÆ ÈùôÊÄÅÂèòÈáèÊòØÂèØÂèòÁöÑÔºåËÆøÈóÆÂíå‰øÆÊîπÂèØÂèòÈùôÊÄÅÂèòÈáèÈÉΩÊòØ ‰∏çÂÆâÂÖ® ÁöÑ È´òÁ∫ßÁîüÂëΩÂë®Êúü Ê∂âÂèäÁöÑ‰∏ªÈ¢òÔºö ÁîüÂëΩÂë®ÊúüÂ≠êÁ±ªÂûãÔºàlifetime subtypingÔºâÔºöÁ°Æ‰øùÊüê‰∏™ÁîüÂëΩÂë®ÊúüÈïø‰∫éÂè¶‰∏Ä‰∏™ÁîüÂëΩÂë®ÊúüÁöÑÊñπÂºè ÁîüÂëΩÂë®ÊúüÁªëÂÆöÔºàlifetime boundsÔºâÔºöÁî®‰∫éÊåáÂÆöÊ≥õÂûãÂºïÁî®ÁöÑÁîüÂëΩÂë®Êúü trait ÂØπË±°ÁîüÂëΩÂë®ÊúüÔºàtrait object lifetimesÔºâÔºöÂ¶Ç‰ΩïÊé®Êñ≠Ôºå‰ΩïÊó∂ÈúÄË¶ÅÁªëÂÆö ÂåøÂêçÁîüÂëΩÂë®ÊúüÔºöÁúÅÁï•ÂÜôÊ≥ï trait bound ÂèØ‰ª•Â∏ÆÂä© Rust È™åËØÅÊ≥õÂûãÁöÑÂºïÁî®‰∏ç‰ºöÂ≠òÂú®ÁöÑÊØîÂÖ∂ÂºïÁî®ÁöÑÊï∞ÊçÆÊõ¥‰πÖÔºöÂ¶Ç T: &#39;a&#39; &#39;_ ÂåøÂêçÁîüÂëΩÂë®ÊúüÔºåÁÆÄÂåñÂÜôÊ≥ï È´òÁ∫ß trait ÂÖ≥ËÅîÁ±ªÂûãÔºàassociated typesÔºâ ÊòØ‰∏Ä‰∏™Â∞ÜÁ±ªÂûãÂç†‰ΩçÁ¨¶‰∏é trait Áõ∏ÂÖ≥ËÅîÁöÑÊñπÂºèÔºåËøôÊ†∑ trait ÁöÑÊñπÊ≥ïÁ≠æÂêç‰∏≠Â∞±ÂèØ‰ª•‰ΩøÁî®Ëøô‰∫õÂç†‰ΩçÁ¨¶ ‰∏∫‰ΩïË¶Å‰ΩøÁî®ÂÖ≥ËÅîÁ±ªÂûãËÄåÈùûÊ≥õÂûãÂë¢Ôºö Ê≥õÂûãÁöÑËØùÔºåÊØèÊ¨°ÂÆûÁé∞ trait ÈÉΩÈúÄË¶ÅÊ≥®ÊòéÁ±ªÂûãÔºõÊîØÊåÅÂ§öÊ¨°ÂÆûÁé∞ trait ÂÖ≥ËÅîÁ±ªÂûãÔºåÂàôÂè™ËÉΩÈíàÂØπ‰∏ÄÁßçÁ±ªÂûãÂÆûÁé∞‰∏ÄÊ¨°Ôºå‰∏îÊó†ÈúÄÊ≥®ÊòéÁ±ªÂûã ÂΩì‰ΩøÁî®Ê≥õÂûãÂèÇÊï∞Êó∂ÔºåÂèØ‰ª•‰∏∫Ê≥õÂûãÊåáÂÆöÈªòËÆ§ÁöÑÂÖ∑‰ΩìÁ±ªÂûã„ÄÇ‰∏∫Ê≥õÂûãÊåáÂÆöÈªòËÆ§Á±ªÂûãÁöÑËØ≠Ê≥ïÊòØÂú®Â£∞ÊòéÊ≥õÂûãÁ±ªÂûãÊó∂‰ΩøÁî®Ôºö&lt;PlaceholderType=ConcreteType&gt; std::ops ‰∏≠ÂàóÂá∫ÁöÑËøêÁÆóÁ¨¶Âíå trait ÂèØ‰ª•ÈáçËΩΩ RHS ÂÖ®Áß∞ÊòØ right hand side RHS=SelfÔºöÈªòËÆ§Á±ªÂûãÂèÇÊï∞Ôºàdefault parametersÔºâ Rust ‰∏ç‰ºöÈòªÊ≠¢‰Ω†‰∏∫‰∏Ä‰∏™Á±ªÂûãÂÆûÁé∞Êüê‰∏™ÊñπÊ≥ïÔºåÂÜçÂéªÂÆûÁé∞‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÖ∑ÊúâÂêåÂêçÁöÑ trait ÊñπÊ≥ï„ÄÇ‰ΩÜÊòØÂú®Ë∞ÉÁî®Êó∂ÔºåÈªòËÆ§‰ºöË∞ÉÁî®Áõ¥Êé•ÂÆûÁé∞Âú®Á±ªÂûã‰∏äÁöÑÊñπÊ≥ï„ÄÇË¶ÅÊÉ≥Ë∞ÉÁî®ÊåáÂÆö trait ÁöÑÊüê‰∏™ÊñπÊ≥ïÔºåÂèØ‰ª•‰ΩøÁî®Á±ª‰ºº TraitName::method(&amp;obj) ËøôÁßçÂÜôÊ≥ï ÂÆåÂÖ®ÈôêÂÆöËØ≠Ê≥ïÊ∂àÈô§ÂêåÂêçÂÖ≥ËÅîÂáΩÊï∞Ê≠ß‰πâÁ§∫‰æãÔºö&lt;Dog as Animal&gt;::baby_name()ÔºåÂÆåÊï¥ËØ≠Ê≥ïÔºö 1&lt;Type as Trait&gt;::function(receiver_if_method, next_arg, ...); ÂèØ‰ª•ÈÄâÊã©Âú®‰ªª‰ΩïÂáΩÊï∞ÊàñÊñπÊ≥ïË∞ÉÁî®Â§Ñ‰ΩøÁî®ÂÆåÂÖ®ÈôêÂÆöËØ≠Ê≥ï È´òÁ∫ßÁ±ªÂûã ÂøÖÈ°ªÂ∞ÜÂä®ÊÄÅÂ§ßÂ∞èÁ±ªÂûãÁöÑÂÄºÁΩÆ‰∫éÊüêÁßçÊåáÈíà‰πãÂêé Âä®ÊÄÅÂ§ßÂ∞èÁ±ªÂûã (DSTÔºådynamically sized types)ÔºåÂè™ÊúâÂú®ËøêË°åÊó∂ÊâçÂèØ‰ª•Áü•ÈÅìÂ§ßÂ∞èÁöÑÁ±ªÂûã Sized traitÔºåÂÜ≥ÂÆö‰∏Ä‰∏™Á±ªÂûãÁöÑÂ§ßÂ∞èÊòØÂê¶Âú®ÁºñËØëÊó∂ÂèØÁü•ÔºåËá™Âä®‰∏∫ÁºñËØëÂô®Âú®ÁºñËØëÊó∂Â∞±Áü•ÈÅìÂ§ßÂ∞èÁöÑÁ±ªÂûãÂÆûÁé∞ Rust ÈöêÂºèÂú∞‰ΩçÊØè‰∏™Ê≥õÂûãÂáΩÊï∞Â¢ûÂä†‰∫Ü Sized bound 12// ÈªòËÆ§Ê∑ªÂä†‰∫Ü `Sized` ÁªëÂÆöfn generic&lt;T: Sized&gt; (t: T) &#123;&#125; ?Sized ÂèØ‰ª•ÊîæÂÆΩÈôêÂà∂Ôºå‰ΩÜÊòØÈúÄË¶Å‰ΩøÁî® &amp;TÔºå‰øùËØÅÂèÇÊï∞ÊòØÁ±ªÂûãÊòØ SizedÔºå‰ΩÜ T ÂèØ‰ª•‰∏çÁî®ÊòØ Sized ÁöÑÔºö 1fn generic&lt;T: ?Sized&gt; (t: &amp;T) &#123;&#125; È´òÁ∫ßÂáΩÊï∞ÂíåÈó≠ÂåÖ Èô§‰∫ÜÂèØ‰ª•ÂêëÂáΩÊï∞‰º†ÈÄíÈó≠ÂåÖÂ§ñÔºåËøòÂèØ‰ª•‰º†ÈÄíÂ∏∏ËßÑÂáΩÊï∞„ÄÇÈÄöËøáÂáΩÊï∞ÊåáÈíàÂÖÅËÆ∏‰ΩøÁî®ÂáΩÊï∞‰Ωú‰∏∫Âè¶‰∏Ä‰∏™ÂáΩÊï∞ÁöÑÂèÇÊï∞ fn Âè´ÂÅö ÂáΩÊï∞ÊåáÈíàÔºàfunction pointerÔºâ ÂáΩÊï∞ÊåáÈíàÂÆûÁé∞‰∫Ü‰∏â‰∏™Èó≠ÂåÖ traitÔºàFn, FnMut Âíå FnOnceÔºâÔºåÊÄªÊòØÂèØ‰ª•Âú®Ë∞ÉÁî®ÊúüÊúõÈó≠ÂåÖÁöÑÂáΩÊï∞Êó∂‰º†ÈÄíÂáΩÊï∞ÊåáÈíà‰Ωú‰∏∫ÂèÇÊï∞ ÂÆè ÂÆèÔºàMacroÔºâ ÊòØ Rust ‰∏≠‰∏Ä‰∫õÂàóÁöÑÂäüËÉΩÔºö Â£∞ÊòéÔºàDeclarativeÔºâÂÆèÔºö‰ΩøÁî® macro_rules! ËøáÁ®ãÔºàProcedural) ÂÆèÔºö Ëá™ÂÆö‰πâ #[derive] ÂÆè Á±ªÂ±ûÊÄßÔºàAttributeÔºâÂÆè Á±ªÂáΩÊï∞ÂÆè ÂÆèÊòØ‰∏ÄÁßç‰∏∫ÂÖ∂ÂÆÉ‰ª£Á†ÅËÄåÂÜô‰ª£Á†ÅÁöÑÊñπÂºèÔºåÂç≥ÊâÄË∞ìÁöÑ **ÂÖÉÁºñÁ®ãÔºàmeta programmingÔºâ ÂÖÉÁºñÁ®ãÂØπ‰∫éÂáèÂ∞ëÂ§ßÈáèÁºñÂÜôÂíåÁª¥Êä§ÁöÑ‰ª£Á†ÅÈùûÂ∏∏ÊúâÁî® ÂÆèÂè™Êé•Âèó‰∏Ä‰∏™ÂèØÂèòÂèÇÊï∞ ÂÆèÂèØ‰ª•Âú®ÁºñËØëÂô®ÁøªËØë‰ª£Á†ÅÂâçÂ±ïÂºÄ ÂÆèÊØîÊôÆÈÄöÂáΩÊï∞Êõ¥Âä†Èöæ‰ª•ÈòÖËØª„ÄÅÁêÜËß£ÂíåÁª¥Êä§ Âú®Ë∞ÉÁî®ÂÆè ‰πãÂâç ÂøÖÈ°ªÂÆö‰πâÂπ∂ÂºïÂÖ•Âà∞‰ΩúÁî®ÂüüÔºåËÄåÂáΩÊï∞ÂàôÂèØ‰ª•Âú®‰ªª‰ΩïÂú∞ÊñπÂÆö‰πâÂíåË∞ÉÁî® ÂÆèÊ®°ÂºèÊâÄÂåπÈÖçÁöÑÊòØ Rust ‰ª£Á†ÅÁªìÊûÑËÄåÈùûÂÄºÔºåÊâÄ‰ª•Âíå match Ê®°ÂºèÂåπÈÖç‰∏çÂêå ËøáÁ®ãÂÆèÊõ¥ÂÉèÂáΩÊï∞Ôºà‰∏ÄÁßçËøáÁ®ãÁ±ªÂûãÔºâÔºåÊé•Êî∂ Rust ‰ª£Á†Å‰Ωú‰∏∫ËæìÂÖ•ÔºåÂú®Ëøô‰∫õ‰ª£Á†Å‰∏äËøõË°åÊìç‰ΩúÔºåÂÜç‰∫ßÁîüÂè¶‰∏Ä‰∫õ‰ª£Á†Å‰Ωú‰∏∫ËæìÂá∫ÔºåËÄåÈùûÂÉèÂ£∞ÊòéÂºèÂÆèÈÇ£Ê†∑ÂåπÈÖçÊ®°ÂºèÔºåÂÜçÁî®Âè¶Â§ñ‰∏ÄÈÉ®ÂàÜ‰ª£Á†ÅÊõøÊç¢ÂΩìÂâç‰ª£Á†Å #[derive(xx)] Â±ûÊÄßÂèØ‰ª•ÁîüÊàê‰ª£Á†Å Á±ªÂ±ûÊÄßÂÆèÂàôÂÖÅËÆ∏ÂàõÂª∫Êñ∞ÁöÑÂ±ûÊÄß #[some_attribute] derive Âè™ËÉΩÁî®‰∫éÁªìÊûÑ‰ΩìÂíåÊûö‰∏æÔºõÂ±ûÊÄßÂàôÂèØ‰ª•Áî®‰∫éÂÖ∂ÂÆÉÁöÑÈ°πÔºåÂ¶ÇÂáΩÊï∞ Á±ªÂáΩÊï∞ÂÆèÂÆö‰πâÁúãËµ∑Êù•ÂÉèÂáΩÊï∞Ë∞ÉÁî®ÁöÑÂÆèÔºåÂ¶Ç let sql = sql!(SELECT * FROM users) ÂèÇËÄÉ The Rust Book Rust Á®ãÂ∫èËÆæËÆ°ËØ≠Ë®Ä self, Self in Rust Paradigms of Rust for the Go developer]]></content>
      <categories>
        <category>Â≠¶‰π†Á¨îËÆ∞</category>
      </categories>
      <tags>
        <tag>Rust</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„ÄäÊû∂ÊûÑÊï¥Ê¥Å‰πãÈÅì„ÄãÂ≠¶‰π†Á¨îËÆ∞‰πã‰ªãÁªç]]></title>
    <url>%2F2018%2F12%2F22%2Fclean-arch-notes-intro%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄËøëÊù•ÂºÄÂßãÈòÖËØª Robert C. Martin ÁöÑÊñ∞Ëëó„ÄäÊû∂ÊûÑÊï¥Ê¥Å‰πãÈÅì„ÄãÔºàClean ArchitectureÔºâ„ÄÇÊ≤°Êúâ‰∫∫ÊÑøÊÑèÁúãÂà∞Âõ¢ÈòüÂÜÖÁöÑÈ°πÁõÆÈÄêÊ∏êÂèëÂ±ïÊàê‰∏ÄÂõ¢‰π±È∫ªÔºåÁõ∏‰∫íÁ∫†Áº†„ÄÇÈÇ£Â¶Ç‰Ωï‰ªéÊ†πÊú¨‰∏äÂáèÂ∞ëËøôÁßçÈóÆÈ¢òÁöÑÂèëÁîüÂë¢ÔºüËøôÂ∞±ÈúÄË¶ÅÊàë‰ª¨ÊéåÊè°‰∏Ä‰∫õÂÆèËßÇÂ±ÇÈù¢ÁöÑËÆæËÆ°ÊÄùÊÉ≥Ôºå‰ªéÁªôÈ°πÁõÆÊâìÂü∫Á°ÄÊó∂Â∞±Â∫îËØ•ËÄÉËôëÂ•ΩÂêÑ‰∏™Ê®°Âùó„ÄÅÁ±ª„ÄÅÂáΩÊï∞Á≠âÂ¶Ç‰ΩïËÆæËÆ°ÊàêÈ´òÂÜÖËÅö„ÄÅ‰ΩéËÄ¶ÂêàÁöÑÁªìÊûÑ„ÄÇÊï¥Ê¥ÅÁöÑÈ°πÁõÆÊû∂ÊûÑÊòØÂà©‰∫éÈïøËøúÂèëÂ±ïÁöÑÔºåËøôÁØáÁ¨îËÆ∞Â∞Ü‰ºöËÆ∞ÂΩï‰∏Ä‰∫õ‰ªé‰π¶‰∏≠Â≠¶‰π†Âà∞ÁöÑÈáçË¶ÅÁü•ËØÜÁÇπÔºå‰æø‰∫éÂêéÊúüÂ§ç‰π†ÂíåÂèÇËÄÉ„ÄÇ ÂΩìÁÑ∂Ôºå‰ΩúËÄÖËøòÊúâ‰∏ÄÊú¨Â§ßÂêçÈºéÈºéÁöÑËëó‰Ωú„Ää‰ª£Á†ÅÊï¥Ê¥Å‰πãÈÅì„Äã‰πüÈùûÂ∏∏ÂÄºÂæóÈòÖËØªÔºåÂÖ≥‰∫éËøôÊú¨‰π¶‰πüÂÅö‰∫ÜÁÇπÁ¨îËÆ∞ÔºåÂèÇËßÅ„Ää‰ª£Á†ÅÊï¥Ê¥Å‰πãÈÅì„ÄãËØª‰π¶Á¨îËÆ∞~ Ë¶ÅÁÇπËÆ∞ÂΩï‰ªÄ‰πàÊòØËÆæËÆ°ÂíåÊû∂ÊûÑ ËÆ°ÁÆóÊú∫‰ª£Á†ÅËøô‰πàÂ§öÂπ¥Ê≤°ÊúâÂèëÁîüÊú¨Ë¥®ÁöÑÂèòÂåñÔºåÂØºËá¥ËΩØ‰ª∂Êû∂ÊûÑÁöÑËßÑÂàô‰øùÊåÅ‰∫Ü‰∏ÄËá¥„ÄÇËΩØ‰ª∂Êû∂ÊûÑÁöÑËßÑÂàôÂÖ∂ÂÆûÂ∞±ÊòØÊéíÂàóÁªÑÂêà‰ª£Á†ÅÂùóÁöÑËßÑÂàô ËÆ©‰∏Ä‰∏™Á®ãÂ∫èÂèØ‰ª•Â∑•‰ΩúÈùûÂ∏∏ÂÆπÊòìÔºàÂ∞èÂ≠©Â≠êÈÉΩËÉΩÂÅöÂà∞ÔºâÔºå‰ΩÜËÆ©ÂÆÉÊ≠£Á°ÆÂú∞Â∑•‰ΩúÂàôÊòØÂè¶Â§ñ‰∏ÄÂõû‰∫ã„ÄÇËÄåËÆ©ËΩØ‰ª∂Ê≠£Á°ÆÂ∑•‰ΩúÂàôÊõ¥Âä†Âõ∞ÈöæÔºåÂõ†‰∏∫ËøôÈúÄË¶ÅÂºÄÂèë‰∫∫ÂëòÊúâÁã¨Âà∞ÁöÑÊÄùÊÉ≥ÂíåËøúËßÅÔºåÊéåÊè°‰∏ÄÂÆöÁöÑËÆæËÆ°ËßÑÂàô Âú®ËΩØ‰ª∂ËÆæËÆ°‰∏≠ÔºåÂ∫ïÂ±ÇÁöÑÁªÜËäÇÂíå‰∏äÂ±ÇÁöÑÁªìÊûÑÊòØ‰∏Ä‰∏™Êï¥‰ΩìÔºå‰∏çÂèØÂàÜÂâ≤ ËΩØ‰ª∂Êû∂ÊûÑÁöÑÁõÆÊ†áÊòØÊúÄÂ∞èÂåñÊûÑÂª∫ÂíåÁª¥Êä§Á≥ªÁªüÊâÄÈúÄË¶ÅÁöÑ‰∫∫ÂäõËµÑÊ∫ê ‰∏çË¶ÅÊÄªÊòØÂØÑÂ∏åÊúõ‰∫é‰ª•ÂêéÊù•Ëß£ÂÜ≥ÊäÄÊúØÂÄ∫Âä°ÔºåÂõ†‰∏∫‰Ω†‰ºöÂèëÁé∞‰ª•ÂêéÊÄªÊòØÂæàÈÅ•Ëøú ‰∫ãÂÆûÊòØ making messes is always slower than staying clean Ëµ∞ÂæóÂø´ÁöÑÂîØ‰∏ÄÂäûÊ≥ïÔºåÊòØÂÖàËµ∞Â•ΩÔºàThe only way to go fast, is to go wellÔºâ ‰ª∑ÂÄºÂØπÊØîÔºöË°®Áé∞ vs ÁªìÊûÑÔºàÊû∂ÊûÑÔºâ(Behavior and StructureÔºâ ‰ªª‰ΩïËΩØ‰ª∂Á≥ªÁªüÈÉΩ‰ºöÂú®‰∏§‰∏™ÊñπÈù¢‰∫ßÁîü‰ª∑ÂÄºÔºöBehavior Âíå Structure Ë°®Áé∞ÔºàBehaviorÔºâÔºöËΩØ‰ª∂Ë¢´ÂºÄÂèëÁî®Êù•ËÆ©ËÆ°ÁÆóÊú∫ÊåâÁÖßÈ¢ÑÊúüÁöÑÊñπÂºèÂ∑•‰ΩúÂπ∂‰∫ßÁîü‰ª∑ÂÄºÔºåÊàñËÄÖ‰∏∫‰∫∫‰ª¨Ëß£Á∫¶ÂºÄÊîØ Êû∂ÊûÑÔºàArchitectureÔºâÔºö ËΩØ‰ª∂Â∫îËØ•Êòì‰∫éÊõ¥ÂèòÂÖ∂Ë°å‰∏∫Ë°®Áé∞ÔºàÁÅµÊ¥ª„ÄÅÂèØÊâ©Â±ïÔºâ Â¶ÇÊûúÂ§ßÈÉ®ÂàÜÈúÄÊ±ÇÂèòÊõ¥Âè™ÊòØÂ±ÄÈÉ®ÂèòÂåñÔºåËÄå‰∏çÊòØÂΩ±ÂìçÂà∞Êï¥‰ΩìÊû∂ÊûÑ„ÄåÂ§ñÂΩ¢ÔºàshapeÔºâ„ÄçÁöÑËØùÔºåÈÇ£Â∫îËØ•Ê≤°‰ªÄ‰πàÈöæÂ∫¶Ôºå‰ΩÜÂ¶ÇÊûúÊû∂ÊûÑÊú¨Ë∫´Êó†Ê≥ïÊª°Ë∂≥ÈúÄÊ±ÇÂÆûÁé∞ÔºåÂàô‰ºöÂ∏¶Êù•ÂæàÂ§ßÁöÑÂºÄÂèëÊàêÊú¨ Êû∂ÊûÑÊú¨Ë∫´Â¶ÇÊûúÂè™Â±ÄÈôê‰∫éÊüêÁßç„ÄåÂ§ñÂΩ¢ÔºàshapeÔºâ„ÄçÔºàÊàñËÄÖÊõ¥ÂÅèÂêë‰∫éÔºâÔºåÈÇ£Êñ∞Â¢ûÂäüËÉΩÂèØËÉΩ‰ºöË∂äÊù•Ë∂äÂ§çÊùÇ„ÄÇÊâÄ‰ª•ËØ¥ÔºåÊû∂ÊûÑÊú¨Ë∫´‰∏çË¶ÅÊääËá™Â∑±ÈôêÂà∂Ê≠ªÔºåÂ∫îËØ•ÊòØËÉΩÁÅµÊ¥ªÂ∫îÂØπÂèòÂåñÈ¢ëÁπÅÁöÑÈúÄÊ±ÇÁöÑ„ÄÇÊõ¥‰∏∫ÂÆûÈôÖÁöÑÊû∂ÊûÑÂ∫îËØ•ÊòØÂØπ„ÄåÂ§ñÂΩ¢„ÄçÊó†ÊÑüÁü•ÁöÑÔºàÊõ¥Âº∫ÁöÑÂåÖÂÆπÊÄßÔºâ ‰Ωú‰∏∫ËΩØ‰ª∂Â∑•Á®ãÂ∏àÔºåÊàë‰ª¨‰∏çËÉΩ‰∏ÄÂë≥Âú∞Êª°Ë∂≥‰∫ßÂìÅÁªèÁêÜ‰ª¨ÂêÑÁßçÂäüËÉΩÂ†ÜÁßØÔºåËÄåÂøΩÁï•‰∫ÜËΩØ‰ª∂Ë¥®ÈáèÔºå‰πüÂêåÊ†∑Ë¶ÅËÆ©ËΩØ‰ª∂Êû∂ÊûÑÂèòÂæóÊõ¥ÁÅµÊ¥ª Dwight D. Eisenhower: ‚ÄúI have two kinds of problems, the urgent and the important. The urgent are not important, and the important are never urgent‚Äù Êàë‰ª¨ÂèØ‰ª•Ê†πÊçÆÈáçË¶ÅÊÄßÂíåÁ¥ßÊÄ•ÊÄßÂØπ‰ªªÂä°ÂÅöÂ¶Ç‰∏ãÂàÜÁ±ªÔºö Á¥ßÊÄ• + ÈáçË¶ÅÔºàÊØîÂ¶ÇÂá∫Áé∞‰∫ÜÂΩ±ÂìçÁî®Êà∑ÁöÑÂ§ß BugÔºâ ‰∏çÁ¥ßÊÄ• + ÈáçË¶ÅÔºàÊû∂ÊûÑ„ÄÅÂ∑•Á®ãË¥®Èáè„ÄÅ‰ª£Á†ÅÈáçÊûÑÔºâ Á¥ßÊÄ• + ‰∏çÈáçË¶ÅÔºàÈúÄÊ±ÇÈÄöÂ∏∏ÊØîËæÉÁ¥ßÊÄ•Ôºå‰ΩÜÂπ∂‰∏çÊÄªÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑÔºâ ‰∏çÁ¥ßÊÄ• + ‰∏çÈáçË¶Å ÂæàÂ§öÊÉÖÂÜµ‰∏ãÔºåÈ°πÁõÆÁªèÁêÜ‰ºöËØØÂà§‰ºòÂÖàÁ∫ßÔºåÊää„ÄåÁ¥ßÊÄ• + ‰∏çÈáçË¶Å„ÄçÁöÑ‰ªªÂä°ËÆ§‰∏∫ÊòØ‰ºòÂÖàÁ∫ßÊúÄÈ´òÁöÑÔºåËøôÊ†∑Â∞±ÂØºËá¥ÂºÄÂèë‰∫∫ÂëòÂøΩÁï•‰∫ÜËΩØ‰ª∂Êû∂ÊûÑÔºåËÆ©Á≥ªÁªüÂèòÂæóË∂äÊù•Ë∂äËÑÜÂº± ÂºÄÂèë‰∫∫ÂëòÁöÑËÅåË¥£Â∞±ÊòØË¶ÅÁ°ÆÂÆöÊû∂ÊûÑÂíåÊâÄË∞ìÁöÑÁ¥ßÊÄ•ÈúÄÊ±ÇÂì™‰∏™ÊòØÁúüÁöÑÊõ¥ÈáçË¶ÅÁöÑ ‰Ωú‰∏∫ÂºÄÂèëÂõ¢ÈòüÁöÑ‰∏ÄÂëòÔºåÂÆàÊä§‰Ω†ÁöÑÈ°πÁõÆË¥®ÈáèÊòØ‰Ω†ÁöÑËÅåË¥£ÊâÄÂú®ÔºõËÄå‰Ωú‰∏∫Êû∂ÊûÑÂ∏àÔºåÊõ¥ÈúÄË¶ÅÈáçÁÇπÂÖ≥Ê≥®Á≥ªÁªüÁªìÊûÑËÄåÈùûÂêÑÁßçÁâπÊÄßÂíåÂäüËÉΩÔºåËâØÂ•ΩÁöÑÊû∂ÊûÑÂ∫îËØ•ÂÖÅËÆ∏ÂêÑÁßçÁâπÊÄßÂíåÂäüËÉΩÊòì‰∫éÊ∑ªÂä†Ôºå‰øÆÊîπÂíåÊâ©Â±ï Â∞èÁªìÊ≠£ÊâÄË∞ì„ÄåÁêÜÊÉ≥Âæà‰∏∞Êª°ÔºåÁé∞ÂÆûÂæàÈ™®ÊÑü„ÄçÔºåÁé∞ÂÆûÂºÄÂèë‰∏≠Â¶ÇÊûúÊÉ≥Ë¶Å‰øùËØÅÂø´ÈÄüËø≠‰ª£ÁöÑÂêåÊó∂ÔºåÂ∞ΩÂèØËÉΩ‰∏çÁ†¥ÂùèÈ°πÁõÆÁªìÊûÑÔºåËôΩÁÑ∂ÊúâÁÇπÂõ∞ÈöæÔºå‰ΩÜÂπ∂ÈùûÂÅö‰∏çÂà∞„ÄÇÈ¶ñÂÖàÈ°πÁõÆÊú¨Ë∫´Âú®ÊúÄÂàùËÆæËÆ°Êó∂Â∞±Â∫îËØ•ÊòØ‰∏∫Êñπ‰æøÊâ©Â±ïËÄÉËôëÁöÑÔºàÂ¶ÇÊ®°ÂùóÂåñ„ÄÅÁºñÂÜôÈ£éÊ†ºÁ≠âÔºâÔºõÂÖ∂Ê¨°ÔºåÂõ¢ÈòüÁöÑÊàêÂëòÂ∫îËØ•ÊòØË¶ÅÊúâËæÉÂº∫ÁöÑË¥£‰ªªÂøÉÊù•‰øùÊä§ËøôÁßçËâØÂ•ΩÁöÑËÆæËÆ°ÔºåËøôÊ†∑Âú®Êâ©Â±ïÊñ∞ÂäüËÉΩÊó∂Â∞±‰ºöÊõ¥Âä†È°∫Âà©„ÄÇ]]></content>
      <categories>
        <category>Â≠¶‰π†Á¨îËÆ∞</category>
      </categories>
      <tags>
        <tag>Êû∂ÊûÑ</tag>
        <tag>ËÆæËÆ°ÊÄùÁª¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Go Web Â∑•Á®ãÂÆûË∑µÊÄªÁªì]]></title>
    <url>%2F2018%2F12%2F16%2Fgolang-web-dev-practice-summary%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄÊó©ÊúüÊàë‰ª¨Âú®‰∏Ä‰∫õÂ∞èÁöÑ Web È°πÁõÆ‰∏≠‰ΩøÁî®‰∫Ü Go Êù•ÂºÄÂèëÁÆÄÂçïÁöÑ REST APIÔºå‰∏ªË¶ÅÂèÇËÄÉÁöÑÊòØÂÖ∂ÂÆÉÈÉ®Èó®ÁöÑÊ†∏ÂøÉÈ°πÁõÆ„ÄÇ‰ΩÜÂΩìÊó∂Âè™ÊòØ‰∏∫‰∫ÜÂ∞ùÈ≤úÂíåÂÖ•Èó® Go Web ÂºÄÂèëÔºåÂπ∂Ê≤°ÊúâËä±ËæÉÂ§öÁöÑÊó∂Èó¥ËÄÉËôëÂ∑•Á®ãÁªìÊûÑ„ÄÅÈ°πÁõÆË¥®ÈáèËøô‰∫õËá≥ÂÖ≥ÈáçË¶ÅÁöÑÈóÆÈ¢ò„ÄÇ ÂÜçÂêéÊù•ÔºåÁªÑÂÜÖÈôÜÁª≠Â§ö‰∏™È°πÁõÆ‰ΩøÁî®‰∫Ü Go ËØ≠Ë®ÄÂºÄÂèë„ÄÇÊï¥‰ΩìÊù•ËØ¥ÔºåÈ°πÁõÆÁªìÊûÑ‰∏äÂ§ß‰ΩìÊòØÁõ∏ÂêåÁöÑÔºå‰ΩÜÊòØÂú®Â∑•Á®ãÂÆûË∑µ‰∏äËøòÊòØÊúâ‰∏çÂ§™Áªü‰∏ÄÁöÑÂú∞Êñπ„ÄÇÊàë‰ª¨Â∏åÊúõÊñ∞ÁöÑÈ°πÁõÆËÉΩÂ§üÂú®È°πÁõÆÁªìÊûÑ„ÄÅÂ∑•Á®ãË¥®Èáè‰∏äÊúâÊâÄÊîπÂñÑÔºåÊèêÈ´òÂ∑•Á®ãÁ®≥ÂÆöÊÄß‰∏éÂºÄÂèëÂπ∏Á¶èÊÑüÊòØÈúÄË¶ÅÊàë‰ª¨ÂÖ±ÂêåÂä™ÂäõÁöÑÁõÆÊ†á„ÄÇ ÂêéÊù•ÊâæÂà∞Êú∫‰ºö‰ªé‰∏Ä‰∏™Â§ßÁöÑÈ°πÁõÆ‰∏≠ÊãÜÂá∫ÂèØ‰ª•ÂÆåÂÖ®Áã¨Á´ãÁöÑÊúçÂä°ÔºåËøôÊ¨°Âπ∂Ê≤°ÊúâÂÆåÂÖ®ÁÖßÊê¨ÂÖ∂ÂÆÉ Go È°πÁõÆÁöÑÂ∑•Á®ãÂÆûË∑µ„ÄÇÂæàÂ§öÊó∂ÂÄôÔºåÊâÄË∞ìÁöÑÊúÄ‰Ω≥ÂÆûË∑µÊòØÈúÄË¶ÅÊùÉË°°ÂêÑÁßçÂà©ÂºäÂæóÊù•ÁöÑ„ÄÇÂú®ËøôÊ¨°ÂÆûË∑µ‰∏≠ÔºåÊàë‰ª¨ÁùÄÈáç‰∫éÊîπÂñÑÂ¶Ç‰∏ãÂá†‰∏™ÊñπÈù¢Ôºö È°πÁõÆÁªìÊûÑÔºöÂ±ÇÊ¨°ÁªìÊûÑË∞ÉÊï¥„ÄÅÂåÖÂëΩÂêçÈ£éÊ†ºÁªü‰∏Ä Áªü‰∏Ä Model Â±ÇÊé•Âè£ÔºöÈÄöËøá‰∏Ä‰∏™Á±ª‰ºº GORM ÁöÑÂ∑•ÂÖ∑ÂÆûÁé∞ ÂèØËÉΩÊõ¥Âä†‰ºòÈõÖÁöÑ REST API ÂÜôÊ≥ïÔºöÂü∫‰∫é chi Ê°ÜÊû∂ÂÅö‰∫Ü‰∏ÄÂ±ÇÂ∞ÅË£ÖÔºõË∑ØÁî±Ê≥®ÂÜåÂ∞ΩÂèØËÉΩÁªü‰∏ÄÂà∞‰∏Ä‰∏™Êñá‰ª∂ÔºåÈõÜ‰∏≠ÁÆ°ÁêÜ API Schema Êï∞ÊçÆËÅöÂêàÔºöÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Á±ª‰ººÊàë‰ª¨Âú® Python È°πÁõÆ‰∏≠‰ΩøÁî®ÁöÑ marshmallow Â∫ìËß£ÂÜ≥ ÂçïÂÖÉÊµãËØïÔºöËøêË°åÊó∂ PatchÔºå‰∏çÈúÄË¶ÅÂú®ÂÜô Handler/Controller/RPC Êó∂ÈÉΩ‰ª• interface ‰ºòÂÖàÁöÑÊñπÂºè ËøîÂõû Error ËÄå‰∏çÊòØ Panic Êéâ È°πÁõÆÁªìÊûÑ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647.‚îú‚îÄ‚îÄ Gopkg.lockÔºàDep ÂåÖÁÆ°ÁêÜÂ∑•ÂÖ∑Ëá™Âä®ÁîüÊàê„ÄÅÁª¥Êä§Ôºâ‚îú‚îÄ‚îÄ Gopkg.tomlÔºà‰æùËµñÂåÖÁÆ°ÁêÜÔºâ‚îú‚îÄ‚îÄ Makefile‚îú‚îÄ‚îÄ README.mdÔºàÈ°πÁõÆÊñáÊ°£Ôºâ‚îú‚îÄ‚îÄ binÔºà‰∫åËøõÂà∂ÂèØÊâßË°åÊñá‰ª∂ÔºåÂèØ‰ª•Áõ¥Êé•ËøêË°åÁöÑÊúçÂä°ÔºöRPC Âíå HTTP ÊúçÂä°Á≠âÔºâ‚îú‚îÄ‚îÄ cmd‚îÇ ‚îú‚îÄ‚îÄ serviceÔºàÂØπÂ§ñÊèê‰æõÁöÑ RPC ÊúçÂä°ÂÖ•Âè£Ôºâ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ main.go‚îÇ ‚îî‚îÄ‚îÄ webÔºàÂØπÂ§ñÊèê‰æõÁöÑ HTTP API ÊúçÂä°ÂÖ•Âè£Ôºâ‚îÇ ‚îî‚îÄ‚îÄ main.go‚îú‚îÄ‚îÄ gen-goÔºàÂü∫‰∫é thrift ÁºñËØëÁîüÊàêÁöÑÊñá‰ª∂ÔºåÂú®ÂÆûÁé∞ÂØπÂ§ñÊèê‰æõÁöÑ RPC ÊúçÂä°Êé•Âè£Êó∂ÈúÄË¶Å‰ΩøÁî®Ôºâ‚îú‚îÄ‚îÄ joker.yml‚îú‚îÄ‚îÄ pkgÔºàÊ†∏ÂøÉ‰ª£Á†ÅÊîæÂà∞Ëøô‰∏™ÁõÆÂΩï‰∏ãÔºâ‚îÇ ‚îú‚îÄ‚îÄ configsÔºàËµÑÊ∫êÈÖçÁΩÆÔºöMySQL, Redis Á≠âÔºâ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ mysql.go‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ redis.go‚îÇ ‚îú‚îÄ‚îÄ constsÔºàÂ∏∏ÈáèÂÆö‰πâÔºåÂåÖÊã¨Êûö‰∏æÔºâ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ enum.go‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ macro.go‚îÇ ‚îú‚îÄ‚îÄ controllersÔºàÂ§çÊùÇÁöÑ‰∏öÂä°ÈÄªËæëÊîæÂà∞ËøôÂÑøÂÆûÁé∞Ôºâ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ foo.go‚îÇ ‚îú‚îÄ‚îÄ errsÔºà‰∏öÂä°Ëá™ÂÆö‰πâÈîôËØØÁ±ªÂûãÔºâ‚îÇ ‚îú‚îÄ‚îÄ middlewaresÔºà‰∏öÂä°Áõ∏ÂÖ≥ÁöÑ‰∏≠Èó¥‰ª∂ÔºåÂ¶ÇÊûúÂèØ‰ª•Â§çÁî®ÔºåÂ∞±ÊäΩÂà∞ÂÖ¨ÂÖ±‰ªìÂ∫ìÁª¥Êä§Ôºâ‚îÇ ‚îú‚îÄ‚îÄ modelsÔºàÈ°æÂêçÊÄù‰πâÔºåÂÆö‰πâ ModelÔºåÂÖ≥ËÅîÊï∞ÊçÆÂ∫ìË°®Ôºâ‚îÇ ‚îú‚îÄ‚îÄ rpcsÔºà‰æùËµñÁöÑÁ¨¨‰∏âÊñπ RPC ÊúçÂä°Ôºâ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ bar.go‚îÇ ‚îú‚îÄ‚îÄ serviceÔºàÂØπÂ§ñÊèê‰æõÁöÑ RPC ÊúçÂä°ÂÆûÁé∞Ôºâ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ demo-service.go‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ protos‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ demo-service.thrift‚îÇ ‚îú‚îÄ‚îÄ utilsÔºàÂèØÂ§çÁî®ÁöÑÂ∑•ÂÖ∑ÔºöÂçïÂÖÉÊµãËØïÁ≠âÔºâ‚îÇ ‚îî‚îÄ‚îÄ webÔºàREST API ÊúçÂä°Ôºâ‚îÇ ‚îú‚îÄ‚îÄ handlers‚îÇ ‚îú‚îÄ‚îÄ routers‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ router.goÔºàË∑ØÁî±Ê≥®ÂÜåÔºâ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ urls.goÔºàURL ‰∏é Handler ÁöÑÁªëÂÆöÔºâ‚îÇ ‚îú‚îÄ‚îÄ schemas‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ dumpÔºàËÅöÂêàÊï∞ÊçÆÊ∫êÔºåÂÆö‰πâÂØπÂ§ñÁöÑ API SchemaÔºâ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ loadÔºàÂ§ÑÁêÜËæìÂÖ•ÔºåÂ≠óÊÆµÊ†°È™åËßÑÂàôÈÖçÁΩÆÔºâ‚îÇ ‚îî‚îÄ‚îÄ validatorsÔºàÂèØÂ§çÁî®ÁöÑËá™ÂÆö‰πâÊ†°È™åËßÑÂàôÂÆö‰πâÔºâ‚îú‚îÄ‚îÄ scriptsÔºàËÑöÊú¨Ôºâ‚îú‚îÄ‚îÄ testdataÔºà‰∏öÂä°ÈÄªËæëÊµãËØïÈúÄË¶ÅÁî®ÁöÑÊµãËØïÊï∞ÊçÆÔºâ‚îÇ ‚îú‚îÄ‚îÄ fixturesÔºàÈÄ†‰∏Ä‰∫õÊµãËØïÊï∞ÊçÆÊîæÂú®ÈáåÈù¢ÔºåÈªòËÆ§‰ΩøÁî® YAML Ê†ºÂºèÔºâ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ foo.yml‚îÇ ‚îî‚îÄ‚îÄ schema.sqlÔºàÊï∞ÊçÆÂ∫ìË°®ÂàõÂª∫ËØ≠Âè•ÈõÜÂêàÔºâ‚îî‚îÄ‚îÄ vendorÔºàÂêÑÁßç‰æùËµñÂåÖÔºâ MVC ÊÄé‰πàÂÆûË∑µModelÂÖ≥‰∫é Model Â±ÇÊÄé‰πàÂÜôÔºåËøô‰∏™ÁúãËµ∑Êù•ËøòÊòØÊúâÁÇπ‰∫âËÆÆ„ÄÇ‰πãÂâçÂéªÂê¨‰∫ÜÂÖ∂ÂÆÉÈÉ®Èó® Go ÂÆûË∑µÁªèÈ™åÂàÜ‰∫´ÔºåÊèêÂÄ°ÂçäÊâãÂÜô SQLÔºàÊú¨Ë¥®‰∏ä‰ΩøÁî®‰∫Ü SQL ÊûÑÂª∫Âô®ÔºâÁöÑÊñπÂºè„ÄÇ‰ΩÜËøô‰πàÂÅöÊÑüËßâËøòÊòØÂ≠òÂú®ÂæàÂ§öÈóÆÈ¢òÔºà‰∏ªË¶ÅÊòØËÄÉËôëÂà∞ÂêéÊúüÁª¥Êä§ËÄÖÁöÑÊÑüÂèóÔºâÔºö Êé•Âè£Â§çÁî®ÊÄß‰∏çÂ§üÂ•Ω ÂÜôÊ≥ïÈöæ‰ª•Áªü‰∏ÄÔºå‰∏î‰ª£Á†ÅÈáèÂÆπÊòìËÜ®ËÉÄ ÊâãÂ∑•ÁªÑË£Ö SQL ÊØîËæÉÁπÅÁêêÔºå‰∏î‰∏çÊòì‰∫éÂêéÊúüÂèòÊõ¥ÔºàÂ¶ÇÊñ∞Â¢ûÂ≠óÊÆµÔºâ ÈáçÂ§çÈÄªËæë‰∏çÂèØÈÅøÂÖç Â∫îÁî®Â±ÇÊõ¥Â∫îËØ•ÂÖ≥Ê≥®ÁöÑÊòØÊ†∏ÂøÉ‰∏öÂä°ÈÄªËæëÔºåËÄåÈùûÁπÅÁêêÈáçÂ§çÁöÑ‰ª£Á†ÅÁºñÂÜôÔºàKeep It SimpleÔºâ„ÄÇÂèÇÁÖßÊàë‰ª¨Âú® Python ‰∏≠ÁöÑÂÆûË∑µÔºåÈááÁî®‰∫ÜËΩªÈáèÁ∫ßÁöÑ ORM Â∑•ÂÖ∑ÂêéÂæàÂ§ßÁ®ãÂ∫¶‰∏äÁªü‰∏Ä‰∫ÜÂ¢ûÂà†ÊîπÊü•Êé•Âè£ÔºåËøôÊ†∑ÊØè‰∏™Áª¥Êä§ËÄÖÈÉΩ‰∏çÁî®ÁÉ¶ÂøÉ‰∫ÜËß£ÂêÑÁßçÁ±ª‰ºº get_xxx_by_wtf_balabala ÂáΩÊï∞‰∫Ü„ÄÇÂõ†‰∏∫Âä†‰∫Ü‰∏ÄÂ±ÇÊäΩË±°ÔºåÂèØË¢´Â§çÁî®ÁöÑÈÄªËæëÂÆåÂÖ®‰ªéÊàë‰ª¨ÁöÑ‰∏öÂä°Â±ÇÊäΩÁ¶ªÂá∫ÂéªÁª¥Êä§Ôºå‰πüÂèØ‰ª•Â§ßÂ§ßÁÆÄÂåñÂ∫îÁî®Â±Ç‰ª£Á†Å„ÄÇ ÂØπ‰∫éÂ∏∏ËßÑ‰∏öÂä°ÔºåÂ¶ÇÊûúÊàë‰ª¨ËÉΩÂ§üÊé•Âèó‰∏ÄÂÆöÁöÑÊÄßËÉΩÂºÄÈîÄÔºå‰∏çÂ¶®ÂºïÂÖ•‰∏Ä‰∫õÂ∑•ÂÖ∑ÔºåÊù•ÊîπÂñÑÈ°πÁõÆË¥®ÈáèÂπ∂‰∏îÊèêÈ´òÂºÄÂèëÊïàÁéá„ÄÇ ‰∏∫‰∫ÜÊñπ‰æøÊàë‰ª¨Âú®Ëá™Â∑±ÁöÑ Go È°πÁõÆ‰∏≠ÔºåËÉΩÂ§ü‰ΩøÁî®ËæÉ‰∏∫‰∏ÄËá¥ÁöÑÊñπÂºèÂÆûÁé∞Â∏∏ËßÑÁöÑÂ¢ûÂà†ÊîπÊü•ÈúÄÊ±ÇÔºåÊâÄ‰ª•Â∞±Ëä±‰∫Ü‰∫õÊó∂Èó¥ÈÄ†‰∫Ü‰∏™Á±ª‰ºº GORM ÁöÑÂ∑•ÂÖ∑ BORM„ÄÇÂú®ÁªèÂéÜÂ§öÊ¨°Ëø≠‰ª£ÂêéÔºåÁõÆÂâçÂü∫Êú¨Ë∂ã‰∫éÁ®≥ÂÆö„ÄÇÁõÆÂâçÊàë‰ª¨Â∑≤ÁªèÂú®Â§ö‰∏™ÂÜÖÈÉ®È°πÁõÆ‰∏≠‰ΩøÁî®ÔºåÂπ∂Âú®ÂÆûË∑µ‰∏≠‰øÆÂ§ç‰∫Ü‰∏çÂ∞ëÁªÜËäÇÈóÆÈ¢òÔºåÂ¢ûÂä†‰∫Ü‰∏Ä‰∫õÈùûÂ∏∏ÂÆûÁî®ÁöÑÂäüËÉΩ„ÄÇ ‰ª•‰∏ãÊòØËØ•Â∑•ÂÖ∑Êèê‰æõÁöÑ‰∏Ä‰∫õÂ∏∏Áî®Êé•Âè£Ôºö Êé•Âè£ Ê≥®Èáä Create/MustCreate Êñ∞Âª∫ËÆ∞ÂΩï Save/MustSave ÂÖ®ÈáèÊõ¥Êñ∞ Update/MustUpdate Êõ¥Êñ∞ÊåáÂÆöÂçï‰∏™Â≠óÊÆµ Updates/MustUpdates Êõ¥Êñ∞ÊåáÂÆöÂ§ö‰∏™Â≠óÊÆµ Delete/MustDelete Âà†Èô§ËÆ∞ÂΩï One/MustOne Ê†πÊçÆÊù°‰ª∂ÂåπÈÖç‰∏ÄÊù°ËÆ∞ÂΩï All/MustAll ÂåπÈÖçÊâÄÊúâÁ¨¶ÂêàÊù°‰ª∂ÁöÑËÆ∞ÂΩï FindByPK/MustFindByPK Âü∫‰∫é‰∏ªÈîÆÊü•ËØ¢ËÆ∞ÂΩï Begin/Commit/Rollback ‰∫ãÂä°Áõ∏ÂÖ≥Êé•Âè£ ÊÄªÁöÑÊù•ËØ¥ÔºåÂ∏åÊúõ BORM ËÉΩÂ§üËß£ÂÜ≥‰ª•‰∏ãÂá†‰∏™ÈóÆÈ¢òÔºö Áªü‰∏Ä‰∏îÊ∏ÖÊô∞ÁöÑÂ¢ûÂà†ÊîπÊü•Êé•Âè£ SQL Ëá™Âä®ÁªÑË£ÖÔºåÊó†ÈúÄ‰∫∫ËÇâÊãºÊé• Âü∫‰∫é Model Â±ÇÁöÑÁºìÂ≠òÁÆ°ÁêÜÁªü‰∏ÄÂà∞Â∑•ÂÖ∑Â±ÇËß£ÂÜ≥ ÂºïÂÖ• BORMÂ¶ÇÊûúÈúÄË¶ÅÂú®È°πÁõÆ‰∏≠ÂºïÂÖ• BORMÔºåÂèØ‰ª•ÈááÁî®Á±ª‰ºº‰∏ãÈù¢ÁöÑÁõÆÂΩïÁªìÊûÑÔºö 123pkg/models‚îú‚îÄ‚îÄ init.go‚îî‚îÄ‚îÄ material.go Âú® init.go ‰∏≠ÔºåÈÖçÁΩÆ BORM ÁöÑÊï∞ÊçÆÂ∫ìËøûÊé•ÔºàÊàñËÄÖÊ∑ªÂä†ÁºìÂ≠òÊîØÊåÅÔºâÔºö 1234567891011121314151617package modelsimport ( "url/to/borm" "project/pkg/configs")func init() &#123; mysqlConfig := configs.GetMySQLConfig("demo") borm.Setup(borm.NewMySQLConfig( mysqlConfig.Masters[0], mysqlConfig.Slaves, )) // Â¶ÇÊûúÈúÄË¶ÅÁöÑËØùÔºåÂèØ‰ª•Ê∑ªÂä† Model ÁºìÂ≠òÊîØÊåÅ // borm.Use(cache.New(configs.GetRedisConfig("cache-redis"), false))&#125; ÁºñÂÜô ModelÊé•‰∏ãÊù•ÔºåË°®Êºî‰∏ãÂ¶Ç‰ΩïÁºñÂÜô ModelÔºå‰ª•ÂèäÂ¶Ç‰ΩïÁªô Model ‰ª•„ÄåÂ±ûÊÄß„ÄçÁöÑÊñπÂºèÂÖ≥ËÅîËµÑÊ∫êÔºàÁ±ª‰ºº‰∫éÊàë‰ª¨Âú® Python ‰∏≠‰ΩøÁî® property Ëé∑ÂèñÊüê‰∏™ Model ÂÖ≥ËÅîÁöÑËµÑÊ∫êÔºâÁ≠âÔºö 12345678910111213141516171819202122232425262728293031323334// MaterialModel ÊòØÂπøÂëäÁ¥†ÊùêËµÑÊ∫êtype MaterialModel struct &#123; // ÂØπ‰∫é BORM ËÄåË®ÄÔºåÈªòËÆ§‰ºö‰ΩøÁî®ÂêçÂè´ `id` ÁöÑÂ≠óÊÆµ‰Ωú‰∏∫‰∏ªÈîÆÔºàÊ≥®ÊÑèÔºåËøôÈáåÁöÑÂ§ßÂÜôÂ≠óÊÆµÂêçÂú®ÁîüÊàê SQL Êó∂‰ºöËá™Âä®ÂèòÊàêÂ∞èÂÜôÊ®°ÂºèÔºâ // ÂÅáÂ¶Ç‰Ω†ÈúÄË¶ÅÊåáÂÆöÊüê‰∏™Â≠óÊÆµ‰∏∫‰∏ªÈîÆÔºåÂèØ‰ª•Âè¶Âä† tag `borm:pk` ID int64 Category string // ÂèØ‰ª•ÁúãÂà∞ÔºåËøôÈáå‰ΩøÁî®‰∫Ü‰∏Ä‰∏™Ëá™ÂÆö‰πâÁöÑÁ±ªÂûãÔºàÂÆûÈôÖÊï∞ÊçÆÂ∫ìÊòØ tinyintÔºåBORM ‰ºöÊ†πÊçÆËá™ÂÆö‰πâÁ±ªÂûãÂÆûÁé∞ÁöÑÊé•Âè£ÂÆåÊàêËá™Âä®Êò†Â∞ÑÔºâ // Âè¶Â§ñÔºå‰ΩøÁî® `column:type` Ë°®Á§∫ÂèØ‰ª•ËÆ© Model ÁöÑÂØπÂ§ñÊö¥Èú≤ÁöÑÂ≠óÊÆµÂêçÂíåÊï∞ÊçÆÂ∫ìÂÆûÈôÖÂ≠óÊÆµÂêç‰∏çÂêå Kind consts.TemplateKind `borm:"column:type"` // ËøôÈáåÁöÑ AdScale Âú®Êï∞ÊçÆÂÆûÈôÖ‰∏äÊòØ‰∏™ JSON Â≠óÁ¨¶‰∏≤Ôºå‰ΩÜÁî±‰∫é *AdScale Á±ªÂûãÂÆûÁé∞‰∫Ü BORM // ÊåáÂÆöÁöÑÊé•Âè£Ôºå‰æøËÉΩÂÆûÁé∞Ëá™Âä®ÂèçÂ∫èÂàóÂåñÔºåËøôÊ†∑‰Ω†‰∏çÈúÄË¶ÅÂú®‰∏äÂ±ÇÂ∑¶‰∏Ä‰∏™Âèà‰∏Ä‰∏™ `json.Unmarshal` Êìç‰Ωú AdScale *AdScale `borm:"column:adscale" portal:"nested"` // Áî±‰∫éÈªòËÆ§ÁöÑËá™Âä®ËΩ¨Êç¢Â≠óÊÆµÂêçÁöÑÁ≠ñÁï•‰ºöÂ∞Ü LandURL ËΩ¨Êç¢Êàê land_urlÔºå‰∏éÂÆûÈôÖÊï∞ÊçÆÂ∫ìÂ≠óÊÆµÂêç‰∏çÁ¨¶ // ËøôÈáå‰æùÁÑ∂Áî® `column:landurl` Ëá™ÂÆö‰πâÂ≠óÊÆµÂêç LandURL string `borm:"column:landurl"` DeepLinkURL string `borm:"column:deeplinkurl"` // ‰πãÊâÄ‰ª•‰∏çËÉΩÁõ¥Êé•Áî® bool Á±ªÂûãÔºåÊòØÂõ†‰∏∫Êï∞ÊçÆÂ∫ìÊòØ tinyint // borm.Bool ÂÆûÁé∞‰∫ÜÊåáÂÆöÊé•Âè£ÔºåÊâÄ‰ª•ÂèØ‰ª•ÂÆûÁé∞Ëá™Âä®Êò†Â∞Ñ IsDeleted borm.Bool // ËøôÈáå‰ΩøÁî®‰∫Ü `readonly` Ë°®ÊòéÊàë‰ª¨‰∏çÁî®ÂÖ≥ÂøÉËøô‰∏™Êó∂Èó¥Êà≥ÁöÑÊõ¥Êñ∞Ôºå‰∫§ÁªôÊï∞ÊçÆÂ∫ìËá™Âä®Êõ¥Êñ∞Âç≥ÂèØ CreatedAt time.Time `borm:"readonly"` UpdatedAt time.Time `borm:"readonly"`&#125;// TableName ÂëäËØâ BORM Êü•Âì™Âº†Ë°®func (m *MaterialModel) TableName() string &#123; return "material"&#125; ‰∏ãÈù¢Ë°®Êºî‰∏ãÂ¶Ç‰ΩïÈÄöËøáÂÆûÁé∞ÁâπÂÆöÊé•Âè£ÂÆåÊàêÊï∞ÊçÆÂ∫ìÁöÑ JSON Â≠óÁ¨¶‰∏≤‰∏éËá™ÂÆö‰πâÁªìÊûÑ‰ΩìÁ±ªÂûã‰πãÈó¥ÁöÑËΩ¨Êç¢ÁöÑ„ÄÇÈÄöËøáÊääËøôÁßç‰ΩéÁ∫ßÂà´ÁöÑËΩ¨Êç¢Êìç‰ΩúÊîæÂú® Model Â±ÇÂÆåÊàêÔºåÂèØ‰ª•ËÆ©‰∏öÂä°‰∏äÂ±ÇÂÜôËµ∑Êù•Êõ¥ÁàΩÔºÅ 12345678910111213141516171819202122232425262728293031323334353637type AdScale struct &#123; Width int `json:"width"` Height int `json:"height"`&#125;func NewAdScale(w, h int) *AdScale &#123; return &amp;AdScale&#123;w, h&#125;&#125;// Value Êé•Âè£‰ºöÂú®ÂÜôÂÖ•Êï∞ÊçÆÂ∫ìÊó∂Ë∞ÉÁî®ÔºåÂú®ÂÆûÁé∞ËØ•Êé•Âè£// Êó∂Ë∞ÉÁî®‰∫Ü json.Marshal ËΩ¨Êç¢Êàê‰∫Ü JSON Â≠óÁ¨¶‰∏≤// ËøôÊ†∑Âú®‰∏öÂä°Â±ÇÂ∞±ÂèØ‰ª•Âø´Âø´‰πê‰πê‰ΩøÁî® AdScale ÁªìÊûÑ‰Ωì// Â¶ÇÊûúÈúÄË¶ÅÂ≠òÂÇ®ÔºåBORM ‰ºöËá™Âä®Ëé∑ÂèñËøôÈáåÂ∫èÂàóÂåñÂêéÁöÑÁªìÊûú// Êç¢Êàê YAML ÈÉΩ‰∏çÊòØÊ¢¶Ôºå‰∏äÂ±ÇÂØπÊ≠§Êó†ÊÑüÁü•ÔºÅfunc (a *AdScale) Value() (interface&#123;&#125;, error) &#123; result, err := json.Marshal(a) if err != nil &#123; return nil, err &#125; return string(result), nil&#125;// SetValue ‰ºöÂú®ËØªÂèñÊï∞ÊçÆÊó∂Ë∞ÉÁî®ÔºåÂΩìÂ§ÑÁêÜÂà∞ËØ•Á±ªÂûãÊó∂Ôºå// ÈÄöËøá `json.Unmarshal` Ëá™Âä®ÂèçÂ∫èÂàóÂåñÊàê AdScale Á±ªÂûã‰∫Ü// ÂØπ‰∫é‰∏äÂ±ÇÊù•ËØ¥‰æùÁÑ∂ÊòØÈÄèÊòéÁöÑfunc (a *AdScale) SetValue(v interface&#123;&#125;) error &#123; jsonBody, ok := v.([]byte) if !ok &#123; return errors.New("models.material: expect []byte type") &#125; if len(jsonBody) != 0 &#123; return json.Unmarshal(jsonBody, &amp;a) &#125; else &#123; return nil &#125;&#125; ÂØπ‰∫ÜÔºåËøòÊúâËµÑÊ∫êÁöÑÂÖ≥ËÅîÂë¢ÔºüÂú® Python ‰∏≠Êàë‰ª¨ÂèØ‰ª•Áî®Â±ûÊÄßÁöÑÊñπÂºèÂÆûÁé∞ÔºåÂú® Go ‰∏≠‰æùÁÑ∂ÂèØ‰ª•ÂÆûÁé∞Á±ª‰ººÁöÑÂäüËÉΩÔºåÂè™ÊòØÂÜôÊ≥ï‰∏çÂ§™Áõ∏ÂêåËÄåÂ∑≤Ôºö 12345678910// Attributes ÊòØÂπøÂëäÁ¥†ÊùêÂÖ≥ËÅîÁöÑ‰∏ÄÁªÑËá™ÂÆö‰πâ„ÄåÂ±ûÊÄß„Äç// ËøôÈáåÂ∞±Ê∂âÂèäÂà∞ÂØπÂè¶‰∏ÄÂº†ÂÖ≥ËÅîË°®ÁöÑÊü•ËØ¢func (m *MaterialModel) Attributes(ctx context.Context) []*AttributeModel &#123; var results []*AttributeModel err := borm.New().Filter("material_id", m.ID).OrderBy("created_at").All(ctx, &amp;results) if err != nil &#123; log.Errorf("models.material: failed to get attributes of material '%d': %s", m.ID, err) &#125; return results&#125; ÂΩìÁÑ∂Âï¶ÔºåÂ¶ÇÊûúÊúâËµÑÊ∫êÂÖ≥ËÅîÁöÑÂ±ûÊÄßÂÄºÊù•Ëá™ RPCÔºå‰πüÂèØ‰ª•ÊîæÂú® Model Â±ÇÁºñÂÜô‰∏Ä‰∏™Á±ª‰ºº‰∏äÈù¢ÁöÑÂ±ûÊÄß„ÄÇÊàë‰ª¨Â∏åÊúõËÉΩÂ§üÂú® Model Â±ÇÁªëÂÆöËµÑÊ∫êÁöÑÂÖ≥ËÅîÊï∞ÊçÆÔºåËøôÊ†∑Âú®‰∏öÂä°‰∏äÂ±ÇÂè™ÈúÄË¶Å .Foo() Âç≥ÂèØËé∑ÂèñÂÖ≥ËÅîËµÑÊ∫ê„ÄÇ Ê≥®ÊÑèÂà∞Ôºå‰∏äÈù¢ÁöÑ„ÄåÂ±ûÊÄß„ÄçÂáΩÊï∞Êé•Êî∂‰∫Ü‰∏Ä‰∏™ ctx ÂèÇÊï∞ÔºåÈÇ£ÊòØÂõ†‰∏∫Âú®ËøõË°åÊï∞ÊçÆÂ∫ìÊü•ËØ¢ÊàñËÄÖ RPC ÊúçÂä°Ë∞ÉÁî®Êó∂ÈúÄË¶Å„ÄÇ‰ΩÜÊúâÊó∂ÂÄôÊàë‰ª¨ÁöÑ„ÄåÂ±ûÊÄß„ÄçÂáΩÊï∞Âπ∂‰∏çÈúÄË¶Å ctx ÂèÇÊï∞ÔºåÊØîÂ¶Ç‰∏ãÈù¢ËøôÊ†∑ËøôÊ†∑Ôºö 12345// IsInPromotion ÊòØÂê¶Âú®‰øÉÈîÄ‰∏≠func (m *Model) IsInPromotion() bool &#123; now := time.Now().Unix() return now &gt;= m.PromotionStartsAt &amp;&amp; now &lt; m.PromotionEndsAt&#125; ControllerÂÖ∂ÂÆÉÈ°πÁõÆÁöÑÂÜôÊ≥ïÊàë‰ª¨ÂÖàÊù•Áúã‰∏ãÂÖ∂ÂÆÉÈ°πÁõÆ‰∏≠ÊòØÂ¶Ç‰ΩïÁºñÂÜô Controller Â±ÇÁöÑ„ÄÇÈ¶ñÂÖàÁúã‰∏ãÁõÆÂΩïÁªìÊûÑÔºö 1234567controller‚îú‚îÄ‚îÄ user.go‚îú‚îÄ‚îÄ impl‚îÇ ‚îú‚îÄ‚îÄ user.go‚îÇ ‚îî‚îÄ‚îÄ user_test.go‚îî‚îÄ‚îÄ mock ‚îî‚îÄ‚îÄ user.go ÂÖ∂‰∏≠Âú® controller/user.go ‰∏≠ÂÆö‰πâ‰∫ÜËØ• Controller ÁöÑÊé•Âè£ÔºåËÄåÂú® mock ÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ÂàôÊòØÁî± mock Â∑•ÂÖ∑ÁîüÊàêÁöÑÊñá‰ª∂„ÄÇËÄåÂú® impl ÊîæÁΩÆÁöÑÊòØÁúüÊ≠£ÁöÑÂÆûÁé∞ÈÄªËæëÔºåÂÜôÊ≥ïÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021type UserControllerImpl struct &#123; userDao dao.UserDao&#125;var _ controller.UserController = (*UserControllerImpl)(nil)var DefaultUserController *UserControllerImplfunc init() &#123; DefaultUserController = NewUserController()&#125;func NewUserController() *UserControllerImpl &#123; return &amp;UserControllerImpl&#123; userDao: daoImpl.DefaultUserDao, &#125;&#125;func (c *UserControllerImpl) GetBar(ctx context.Context, uid int64) int64 &#123; return c.userDao.GetBar(ctx, uid)&#125; ‰πãÊâÄ‰ª•ÈááÁî®ËøôÊ†∑ÁöÑÁõÆÂΩïÁªìÊûÑÂíåÂÆûÁé∞ÊñπÊ≥ïÔºåÂèØËÉΩ‰πüÊòØ‰∏∫‰∫ÜÊñπ‰æøÁºñÂÜôÂçïÂÖÉÊµãËØïÊó∂ Mock ÊéâÂÖ≥ÈîÆÊé•Âè£„ÄÇ‰ΩÜÈÄöËøáÂàÜÊûêËøô‰∫õ‰ª£Á†ÅÔºå‰πüÂèëÁé∞‰∫ÜÂá†‰∏™ÈóÆÈ¢òÔºö Controller Â±ÇÂ•ΩÂÉè‰πüÊ≤°Âπ≤Âï•ÔºåË∞ÉÁî®‰∫Ü Dao Â±ÇÁöÑÊé•Âè£Ôºü ‰∏çÂ§™Á¨¶Âêà Go Âú£Áªè‰∏≠ÊâÄÂÄ°ÂØºÁöÑÊñπÂºèÔºåÊé•Âè£ÂÜôÂ§™Â§ö‰∫Ü ÊØè‰∏™ Controller ÈÉΩÂøÖÈ°ªÂÜô‰∏Ä‰∏™ÁªìÊûÑ‰ΩìÔºü ‰ΩÜÊòØ‰∏∫‰∫ÜÊª°Ë∂≥ mock Â∑•ÂÖ∑ËãõÂàªÁöÑÁîüÊàêÊù°‰ª∂ÔºàÊÄªÊòØÂü∫‰∫é interface ÁîüÊàêÔºâÔºå‰πü‰∏çÂæó‰∏çÈÇ£Ê†∑ÂÆûÁé∞„ÄÇ‰ΩÜÊàë‰ª¨Âú®ÂÆûË∑µ‰∏≠ÔºåÊúâ‰∏™ÂçïÂÖÉÊµãËØïÈúÄË¶ÅÂéª Mock time.Now() ÂáΩÊï∞„ÄÇËøôÊó∂Â∞±ÈÅáÂà∞‰∫ÜÈóÆÈ¢òÔºåËôΩÁÑ∂ÂèØ‰ª•Âü∫‰∫é time ÂÜçÂÆö‰πâ‰∏Ä‰∏™ÁªìÊûÑ‰ΩìÊù•ÔºåÂÜçÂÆö‰πâ‰∏ãÊé•Âè£ÔºåËÆ© mock Â∑•ÂÖ∑ÁîüÊàê Mock ÁâàÊú¨„ÄÇ‰ΩÜÊòØËøôÊ†∑ÊÑüËßâËøòÊòØÊØîËæÉÁπÅÁêêÔºå‰∏îÂÆπÊòìËÆ©‰ª£Á†ÅËÜ®ËÉÄ„ÄÇÊòéÊòéÂ∞±ÊòØË¶ÅËß£ÂÜ≥‰∏Ä‰∏™ÁúãËµ∑Êù•Âπ∂‰∏çÂ§çÊùÇÁöÑÈóÆÈ¢òÔºåÂç¥Ë¶ÅÂõ†‰∏∫ÂçïÂÖÉÊµãËØïÂºïÂÖ•ÈÇ£‰πàÂ§öÂï∞Âó¶ÁöÑ‰ª£Á†Å„ÄÇÂÖ∂ÂÆûÊàë‰ª¨Âπ∂‰∏çÂ∏åÊúõÂõ†‰∏∫ÂçïÂÖÉÊµãËØïËÄåÈÄ†Êàê‰∏öÂä°‰ª£Á†Å‰ª•ÊüêÁßçÂ¶•ÂçèÁöÑÊñπÂºèÂÆûÁé∞„ÄÇÂú®ÁªèËøá‰∏ÄÁï™Ë∞ÉÁ†îÂíåÂÆûË∑µÂêéÔºåÊàë‰ª¨ÂèëÁé∞ËøêË°åÊó∂ Mock ‰πüÊòØËÉΩÂ§üÂÅöÂà∞ÁöÑÔºàÁªÜËäÇ‰ºöÂú®ËÆ≤ÂçïÂÖÉÊµãËØïÊó∂ËØ¥ÊòéÔºâÔºåËá™ÁÑ∂‰πüÂ∞±‰∏çÂøÖÂÜôÂæóÂ¶ÇÊ≠§Âï∞Âó¶~ Êàë‰ª¨ÁöÑÂÅöÊ≥ïÂØπ‰∫éÊØîËæÉÂ§çÊùÇÁöÑ‰∏öÂä°ÈÄªËæëÔºåÊàë‰ª¨‰æùÁÑ∂Êé®Ëçê‰Ω†Âú® Controller Â±ÇÂéªÂÆûÁé∞Ôºå‰ΩÜÊòØ‰∏çÁî®ÊïôÊù°ÂºèÂú∞ÂÆö‰πâ‰∏Ä‰∏™ÁªìÊûÑ‰ΩìÔºåÂÜçÂÆö‰πâ‰∏Ä‰∏™ÊñπÊ≥ï„ÄÇÂü∫Êú¨ÂéüÂàôÂ∞±ÊòØÔºåËÉΩÊúâÁÆÄÂçïÊ∏ÖÊô∞Êòé‰∫ÜÁöÑÂÜôÊ≥ïÂç≥ÂèØ„ÄÇÊØîÂ¶Ç‰∏ãÈù¢Ëøô‰∏™‰æãÂ≠êÔºö 123456789101112131415161718192021// UpdateMaterial ÂÅö‰∏ÄÊ¨°ÂÖ®ÈáèÊõ¥Êñ∞Âêßfunc UpdateMaterial(ctx context.Context, materialID int64, schema *MaterialSchema) (err error) &#123; material, err := GetMaterial(ctx, materialID) if err != nil &#123; return &#125; tx := borm.New().Begin(ctx) // Á¥†ÊùêÊõ¥Êñ∞ÔºåËøôÈáåÂàÜ‰∏∫‰∏§Âùó err = updateMaterial(ctx, tx, material, schema) // ÁÑ∂ÂêéÊòØÁ¥†ÊùêÁöÑÂ±ûÊÄßÊõ¥Êñ∞Ôºà‰ΩÜÁî±‰∫éÊòØÂÖ®ÈáèÔºå‰∏∫‰∫ÜÊñπ‰æøÔºå‰ºöÂà†Èô§ÂÖàÂâçÁöÑÂ±ûÊÄßÔºåÁÑ∂ÂêéÊõøÊç¢ÊàêÊñ∞ÁöÑÔºâ err = updateMaterialAttributes(ctx, tx, material, schema) if err != nil &#123; tx.Rollback(ctx) &#125; else &#123; tx.Commit(ctx) &#125; return nil&#125; ViewHandler‰∏∫‰∫ÜÊñπ‰æøÁºñÂÜô REST APIÔºåÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Âü∫‰∫é go-chi ÁöÑËΩªÈáèÁ∫ß API Ê°ÜÊû∂ÔºåÂÖ∂ÂéüÂûãÂèØ‰ª•ÂèÇËÄÉ REST È°πÁõÆ„ÄÇ REST Â∑•ÂÖ∑Êèê‰æõ‰∫ÜÂ¶Ç‰∏ãÁâπÊÄßÔºö ËÉΩÂ§ü‰ª•Êõ¥Âä†‰ºòÈõÖÁÆÄÊ¥ÅÁöÑÊñπÂºèÂü∫‰∫é‰∏Ä‰∏™ ResourceHandler ÁºñÂÜô GET/POST/PATCH/DELETE Á≠âÊñπÊ≥ï ÈááÁî® return resp, err Ê®°ÂºèÊõø‰ª£ÂéüÂÖà RenderJSON/RenderError ÁöÑÊñπÂºèÔºö Ê°ÜÊû∂Â±ÇÂèØ‰ª•Ëá™Âä®ÂéªÂåπÈÖçË∞ÉÁî® renderJSON ÊàñËÄÖ renderError ÂÜç‰πü‰∏çÊÄïÂéüÂÖàË∞ÉÁî® RenderError ÂêéÂèàÂøòËÆ∞ return ÁöÑÈóÆÈ¢ò‰∫Ü ÂèØ‰ª•Êõ¥Â•ΩÁöÑÊîØÊåÅËøîÂõûÈîôËØØÔºåÊÑèÂë≥ÁùÄÊàë‰ª¨‰∏çÁî®Âà∞Â§Ñ panic ‰∏öÂä°ÈîôËØØÔºåÁÑ∂ÂêéÂú®‰∏äÂ±ÇÂèà recover Â∞ÅË£Ö‰∫Ü‰∏Ä‰∫õÂ∏∏Áî®ÁöÑÊé•Âè£Ôºö ÈÄöÁî®ÁöÑÂàÜÈ°µ Schema Ê∏≤Êüì ÂêÑÁßçÊòìÁî®ÁöÑÂèÇÊï∞Ëé∑ÂèñÊé•Âè£ Êé•‰∏ãÊù•ÔºåÁúãÁúã‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑ REST API Handler ÂÆûÁé∞Ôºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103type MaterialsHandler struct &#123; rest.BaseHandler&#125;// Get Ëé∑ÂèñÁ¥†ÊùêÂàóË°®È°µfunc (hd *MaterialsHandler) Get() (rest.Response, error) &#123; ctx := hd.R.Context() output, err := controllers.ListMaterials( ctx, hd.OffsetInt64(), hd.LimitInt64(), hd.QueryArgumentWithFallback("order_by", "-created_at")) if err != nil &#123; return nil, err &#125; var schemas []dump.MaterialSchema return rest.Pagination&#123; Context: ctx, Data: output.Materials, ToSchemaPtr: &amp;schemas, IsAdmin: true, Total: int(output.Total), &#125;, nil&#125;// Post Êñ∞Âª∫ÂπøÂëäÁ¥†Êùêfunc (hd *MaterialsHandler) Post() (rest.Response, error) &#123; var materialSchema load.MaterialSchema err := JSONArgs(hd.R, &amp;materialSchema) if err != nil &#123; return nil, err &#125; err = controllers.CreateMaterial(hd.R.Context(), &amp;materialSchema) if err != nil &#123; return nil, err &#125; return map[string]bool&#123;"success": true&#125;, nil&#125;type MaterialHandler struct &#123; rest.BaseHandler&#125;// Get Ëé∑ÂèñÊüê‰∏™ÂπøÂëäÁ¥†ÊùêËØ¶ÊÉÖfunc (hd *MaterialHandler) Get() (rest.Response, error) &#123; id, err := hd.getMaterialID() if err != nil &#123; return nil, err &#125; material, err := controllers.GetMaterial(hd.R.Context(), id) if err != nil &#123; return nil, err &#125; var schema dump.MaterialSchema err = portal.New().Dump(hd.R.Context(), material, &amp;schema) if err != nil &#123; log.Errorf("handlers.material.get: failed to dump material: %s", err) &#125; return schema, nil&#125;// Put Êõ¥Êñ∞Á¥†Êùê‰ø°ÊÅØfunc (hd *MaterialHandler) Put() (rest.Response, error) &#123; // ÂèÇÊï∞Â§ÑÁêÜ materialID, err := hd.getMaterialID() if err != nil &#123; return nil, err &#125; var materialSchema load.MaterialSchema err = JSONArgs(hd.R, &amp;materialSchema) if err != nil &#123; return nil, err &#125; // Êõ¥Êñ∞ÈÄªËæë‰∫§Áªô controller ÂÆåÊàê err = controllers.UpdateMaterial(hd.R.Context(), materialID, &amp;materialSchema) if err != nil &#123; return nil, err &#125; return map[string]bool&#123;"success": true&#125;, nil&#125;// Delete Âà†Èô§ÊåáÂÆöÁ¥†Êùêfunc (hd *MaterialHandler) Delete() (rest.Response, error) &#123; id, err := hd.getMaterialID() if err != nil &#123; return nil, err &#125; err = controllers.DeleteMaterial(hd.R.Context(), id) if err != nil &#123; return nil, err &#125; return map[string]bool&#123;"success": true&#125;, nil&#125; SchemaÊàë‰ª¨ÈÄöÂ∏∏‰ºöÂú® Schema Â±ÇÂÆö‰πâÊé•Âè£ÈúÄË¶ÅÁöÑÂ≠óÊÆµÂèäÂÖ∂Á±ªÂûãÔºåÂπ∂Âú®ËøôÂ±ÇÂÆåÊàêÊï∞ÊçÆËÅöÂêàÂêéÔºåÁîüÊàê JSON Ê†ºÂºèÁöÑÂÜÖÂÆπÂêêÁªôÂâçÁ´Ø‰ΩøÁî®„ÄÇÁî±‰∫éÊÑüÂèóÂà∞ marshamllow ÂºïÂÖ•ÂêéÁªôÊàë‰ª¨ÁöÑ Python È°πÁõÆÂ∏¶Êù•‰∫ÜËØ∏Â§öÂ•ΩÂ§ÑÂêéÔºàÂ¶ÇÊõ¥Âä†‰∏ÄËá¥Ê∏ÖÊô∞ÁöÑ Schema ÂÆö‰πâÊñπÂºèÔºâÔºåÂ∞±ÊñóËÉÜÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ Go ÁâàÊú¨ÁöÑ marshmallow Â∑•ÂÖ∑ PORTALÔºàÂÜôÂæóÂ§™ËèúÔºåÂ∞öÊú™ÂºÄÊ∫êÔºâ„ÄÇ‰ΩÜ PORTAL ÂÆûÈôÖ‰∏äÂè™ÊòØÊ≥®ÈáçÊï∞ÊçÆÁöÑËÅöÂêàÔºåÂõ†‰∏∫ Go Á§æÂå∫Â∑≤ÁªèÊúâÂæàÂ§öÊàêÁÜüÁöÑÂ∑•ÂÖ∑ÂèØ‰ª•ÂÆûÁé∞ Schema Struct Ê†°È™å‰∫ÜÔºåËá™ÁÑ∂‰∏çÁî®ÈáçÂ§çÈÄ†ËΩÆÂ≠ê„ÄÇ PORTAL ÁöÑ‰∏ªË¶ÅÁâπÁÇπÂ¶Ç‰∏ãÔºö Schema ÊîØÊåÅÁªÑÂêàÔºåÊèêÈ´ò Schema Â§çÁî®ÊÄß Schema Â≠óÊÆµÂÄºÊîØÊåÅÁÅµÊ¥ªÁöÑÂèñÂÄºÊñπÂºèÔºàËÅîÊÉ≥ marshamallow ‰∏≠Â∏∏Áî®ÁöÑÊñπÂºèÔºâ ÊîØÊåÅÂπ∂ÂèëÂ°´ÂÖÖÂ≠óÊÆµÔºàÂ¶Ç‰∏çÂêåÁöÑÂ≠óÊÆµÂÄºÂèØËÉΩÊù•Ê∫ê‰∫é RPC/Êï∞ÊçÆÂ∫ìÁ≠âÔºâ Â≠óÊÆµÊîØÊåÅÁÅµÊ¥ªÁöÑÁ±ªÂûãÂÆö‰πâÔºåPORTAL Ë¥üË¥£Â∞ùËØïÁ±ªÂûãËΩ¨Êç¢ ÊîØÊåÅÂèØÈÄâÂ≠óÊÆµÊ∏≤ÊüìÔºàËµãÂÄºÔºâ Â∞ΩÂèØËÉΩÂáèÂ∞ëÂÜó‰Ωô‰∏îÊÑöË†¢‰∏î‰∏çÂ∫îËØ•ËÆ©‰∫∫Á±ªÊù•ÂÜôÁöÑ‰ª£Á†ÅÔºàÊú∫Ê¢∞ÂºèËµãÂÄºÔºâÔºàËÑëË°•‰∏ãÁªô‰∏Ä‰∏™ Schema ÁöÑÂµåÂ•ó List Schema Â°´ÂÖÖÂÄºË¶ÅÂÜôÂæóÂ§ö‰πàÂ£ÆËßÇÔºåÈÇ£Â¶ÇÊûúÂÜçÂµåÂ•óÊØîËæÉÊ∑±Âë¢ÔºüÔºâÔºÅ Êé•‰∏ãÊù•Êàë‰ª¨ÁúãÁúãÂ¶Ç‰ΩïÂÆö‰πâÁî®‰∫éËÅöÂêàÊï∞ÊçÆÁöÑ SchemaÔºö 12345678910111213141516171819202122232425// TrackSchema Èü≥È¢ë‰ø°ÊÅØtype TrackSchema struct &#123; ID string `json:"id"` Title string `json:"title"` // ËøôÈáåÊàë‰ª¨ÂØπÂ§ñÁöÑÂ≠óÊÆµÂêçÂÆûÈôÖÊòØ audioÔºå‰ΩÜÂØπÂ∫îÂèñÂÄºÊù•Ê∫ê Model ÁöÑ AudioURL Audio string `json:"audio,omitempty" portal:"attr:AudioURL"` AudioDuration int `json:"audio_duration" portal:"attr:Duration"` // ËøôÈáåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑÊñπÊ≥ïÂèñÂÄº PlayedAt int `json:"played_at" portal:"meth:GetPlayedAt"` Description string `json:"description,omitempty" portal:"attr:Description.Description"`&#125;// GetPlayedAt ËøîÂõûÁî®Êà∑Êí≠ÊîæÁöÑËøõÂ∫¶func (*TrackSchema) GetPlayedAt(ctx context.Context, track interface&#123;&#125;) int &#123; return 90&#125;// SpeakerSchema ‰∏ªËÆ≤‰∫∫‰ø°ÊÅØtype SpeakerSchema struct &#123; // ÂµåÂ•ó‰∏Ä‰∏™ÂèØÂ§çÁî®ÁöÑ MemberSchema UserSchema // È¢ùÂ§ñ‰ø°ÊÅØ Role string `json:"role"`&#125; Êé•‰∏ãÊù•Ë°®Êºî‰∏ãÂ¶Ç‰Ωï‰ΩøÁî®Á±ª‰ºº‰∏äÈù¢ÂÆö‰πâÁöÑ SchemaÔºö 123456789// ‰ªé DB Êü•ËØ¢ÂæóÂà∞ Model Á§∫‰æãvar track models.Trackborm.New().FindByPK(ctx, &amp;track, pk)// Ë∞ÉÁî® Dump Âç≥ÂèØÂÆåÊàê Schema Â≠óÊÆµÊï∞ÊçÆÂ°´ÂÖÖvar trackSchema dump.TrackSchemaportal.New().Dump(ctx, &amp;track, &amp;trackSchema)// Êé•‰∏ãÊù•Â∞Ü trackSchema Â∫èÂàóÂåñÊàê JSON ËøîÂõûÂç≥ÂèØ ÂΩìÁÑ∂ÔºåËôΩÁÑ∂ÂºïÂÖ• PORTAL ÂèØ‰ª•ËÆ©Êàë‰ª¨Êõ¥Âä†ËÅöÁÑ¶‰∏öÂä°ÈÄªËæëÁöÑÁºñÂÜôÔºåÂ∞ΩÂèØËÉΩÂáèÂ∞ëÂÜó‰Ωô‰∏îÊú∫Ê¢∞ÁöÑ‰ª£Á†ÅÔºå‰ΩÜ‰πüÁî±Ê≠§Â∏¶Êù•‰∫Ü‰∏Ä‰∫õÈóÆÈ¢òÔºö ‰ΩøÁî® reflect Êú∫Âà∂Â∏¶Êù•ÁöÑÊÄßËÉΩÊçüËÄóÂ∞±ÁúãËÉΩ‰∏çËÉΩÊé•Âèó Êúâ‰∫õÂõ†‰∏∫Á±ªÂûãËΩ¨Êç¢ÁöÑ‰∏çÊàêÂäüÁöÑÈóÆÈ¢òÂèØËÉΩÂà∞ËøêË°åÊó∂Êâç‰ºöÂèëÁé∞ÔºåÊéíÊü•ËæÉÂõ∞ÈöæÔºà‰ΩÜÂá∫Áé∞ÊÉÖÂÜµÂæàÂ∞ëÔºâ ÊâÄ‰ª•ÔºåËøôËøòÊòØ‰∏Ä‰∏™ÈúÄË¶ÅÊùÉË°°ÁöÑÂà©ÂºäÂêéÊâçËÉΩËÄÉËôëÁöÑÊñπÊ°àÔºå‰ΩÜ‰∏™‰∫∫ËßâÂæóÂÆÉËøòÊòØÊúâ‰∏ÄÂÆö‰ª∑ÂÄºÁöÑ~ ËÅäËÅäË∑ØÁî±Ê≥®ÂÜåËØ¥Âà∞Ë∑ØÁî±Ê≥®ÂÜåÔºå‰∏™‰∫∫ËßâÂæóÂÖ∂ÂÆÉÈÉ®Èó®ÁöÑ Go È°πÁõÆÈááÁî®ÁöÑÊñπÂºèÂπ∂‰∏çÊòØÂæà‰ºòÈõÖÔºå‰∏îÁõ∏ÂØπÊØîËæÉÂàÜÊï£„ÄÇÊâÄ‰ª•ÔºåÂ∞±Áªô REST Â∑•ÂÖ∑ÂºïÂÖ•‰∫ÜÁ±ª‰ººÊàë‰ª¨Âú®‰ΩøÁî® Tornado Êó∂ÈááÁî®ÁöÑÈÇ£ÁßçË∑ØÁî±Ê≥®ÂÜåÊñπÂºè„ÄÇÂõ†‰∏∫ÊòØÂü∫‰∫é chi.Mux Â∞ÅË£ÖÁöÑ RouterÔºåÊâÄ‰ª•ÂÆåÂÖ®ÂÖºÂÆπÂéüÂÖàÁöÑÊé•Âè£„ÄÇ ÂØπ‰∫éÊØîËæÉÁÆÄÂçïÁöÑË∑ØÁî±ÔºåÂèØ‰ª•ÈááÁî®‰∏ãÈù¢ÁöÑÊ≥®ÂÜåÊñπÂºèÔºö 1r.MountHandler("/hello", &amp;hello.DemoHandler&#123;&#125;) ËÄåÂØπ‰∫é API ËæÉÂ§öÁöÑÈÇ£ÁßçÈ°πÁõÆÔºåÊé®ËçêÁöÑÁõÆÂΩïÁªìÊûÑÂ¶Ç‰∏ãÔºö 123routers‚îú‚îÄ‚îÄ router.go‚îî‚îÄ‚îÄ urls.go Âú® router.go ‰∏≠ÁºñÂÜô Router ÂàùÂßãÂåñÁöÑ‰ª£Á†ÅÔºåÂåÖÊã¨‰∏≠Èó¥‰ª∂ÈÖçÁΩÆÂíåË∑ØÁî±Ê≥®ÂÜåÔºö 12345678910// NewRouter web Ë∑ØÁî±ÂÆû‰æãÂàõÂª∫func NewRouter() Router &#123; r := rest.NewRouter() // Ê≥®ÂÜåÂêÑÁßçÈúÄË¶ÅÁöÑ‰∏≠Èó¥‰ª∂ r.Use(FooMiddleware) r.MountHandlers(handlers) return r&#125; Êé•‰∏ãÊù•Âú® urls.go ‰∏≠ÂÆö‰πâ URL Âíå Handler ÁöÑÊò†Â∞ÑÔºö 1234var handlers = map[string]rest.Handler&#123; "/tasks": &amp;task.TasksHandler&#123;&#125;, "/tasks/&#123;id:(\\d+)&#125;": &amp;task.TaskHandler&#123;&#125;,&#125; ÂçïÂÖÉÊµãËØïÂæàÈáçË¶ÅÂÖàËØ¥ÁªìËÆ∫ÔºåÊàë‰ª¨‰ΩøÁî®‰∫Ü gomonkey ÂÆûÁé∞ËøêË°åÊó∂ Monkey Patch„ÄÇËøôÊ†∑Êàë‰ª¨ÁöÑ Controller/Handler/RPC Á≠âÂ±ÇÊó†ÈúÄÂÜôÂæóÁâπÂà´Âï∞Âó¶„ÄÇ Â¶ÇÊûúÊÉ≥Áü•ÈÅìÂÖ∂Â∑•‰ΩúÂéüÁêÜÁöÑËØùÔºåÂèØ‰ª•ÂèÇËÄÉ monkey È°πÁõÆÂíå Monkey Patching in Go„ÄÇÂΩìÁÑ∂Ôºå‰∏ãÈù¢Âá†ÁØáÂíåÂçïÂÖÉÊµãËØïÊúâÂÖ≥ÁöÑÊñáÁ´†‰πüÂèØ‰ª•ÁúãÁúãÔºö GoConveyÊ°ÜÊû∂‰ΩøÁî®ÊåáÂçó Monkey Ê°ÜÊû∂‰ΩøÁî®ÊåáÂçó GoStub Ê°ÜÊû∂‰ΩøÁî®ÊåáÂçó GoMock Ê°ÜÊû∂‰ΩøÁî®ÊåáÂçó gomonkey 1.0 Ê≠£ÂºèÂèëÂ∏ÉÔºÅ Ê≠§Â§ñÔºåËøòÊúâ‰∏™Áî®‰∫éÂàùÂßãÂåñÊµãËØïÊï∞ÊçÆÁöÑÂ∑•ÂÖ∑‰πüÂæàÊúâÂ∏ÆÂä©ÔºåËØ¶ÁªÜÂèØ‰ª•ÂèÇËßÅ Fixture È°πÁõÆ„ÄÇ Panic ËøòÊòØÁõ¥Êé•ËøîÂõû ErrorÂØπ‰∫é‰∏öÂä°ÂºÇÂ∏∏Êù•ËØ¥ÔºåÁõ∏ÂØπÁ≥ªÁªüÁ∫ßÈîôËØØÁ≠â‰∏•ÈáçÈîôËØØÂèëÁîüÂú∞Êõ¥Âä†È¢ëÁπÅÔºåËøôÊ†∑‰∏ÄÊù•È¢ëÁπÅÂú∞ Panic/Recover ‰ºöÂ∏¶Êù•‰∏Ä‰∫õÈ¢ùÂ§ñÂºÄÈîÄ„ÄÇÊ≠§Â§ñÔºåÊó†ËÑëÂú∞ÂØπ‰ªª‰Ωï‰∏öÂä°ÂºÇÂ∏∏ÈÉΩÈááÂèñ Panic ÁöÑÂºèÊñπÔºåÁúüÁöÑÂ•ΩÂêóÔºü‰∏çËøáÁúãËµ∑Êù•ÂÖ∂ÂÆÉÁªÑÁöÑÈ°πÁõÆÁöÑÁ°ÆÂæà‰πêÊÑèÈááÁî®ËøôÁßçÊñπÂºè„ÄÇ ‰ΩÜ‰∏™‰∫∫Êé®ËçêÁöÑÊñπÂºèÊòØÂØπ‰∫é‰∏öÂä°ÈîôËØØÔºå‰æùÁÑ∂ÈááÁî® Go ‰∏≠ÂÖ∏ÂûãÁöÑÊñπÂºèÔºöËøîÂõûÈîôËØØÔºÅÂ¶ÇÊûúÊòØÊØîËæÉ‰∏•ÈáçÁöÑÈîôËØØÔºàÂ¶ÇÁΩëÁªú‰∏≠Êñ≠Á≠âÔºâÔºåÂàôÂèØ‰ª•ËøõË°å PanicÔºåÁÑ∂ÂêéÂú®‰∏äÂ±ÇÊçïËé∑„ÄÇ 12345678910111213// DeleteMaterial Âà†Èô§Á¥†Êùêfunc DeleteMaterial(ctx context.Context, materialID int64) error &#123; material, err := GetMaterial(ctx, materialID) if err != nil &#123; return err &#125; err = borm.New().Model(&amp;material).Update(ctx, "is_deleted", true) if err != nil &#123; log.Errorf("controllers.material.DeleteMaterial: failed to update: %s", err) &#125; return err&#125; Êûö‰∏æÂÆö‰πâÊàë‰ª¨‰∏ÄËà¨ÂÆö‰πâÂÆåÊûö‰∏æÂêéÔºåÈÉΩÂ∏åÊúõËÉΩÂ§üÊ†πÊçÆÁªôÂÆöÁöÑÂÄºËé∑ÂæóÂØπÂ∫îÁöÑÊûö‰∏æÂèòÈáèÔºåÊàñËÄÖÂæóÂà∞Êûö‰∏æÂèòÈáèÂêçÊò†Â∞ÑÁöÑÂêçÁß∞„ÄÇËøôÈáåÁªôÂá∫‰∏ÄÁßçÂèØË°åÁöÑÂÆö‰πâÊñπÂºèÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041// AuditStatus ÂÆ°Ê†∏Áä∂ÊÄÅtype AuditStatus int// ÂÆö‰πâ‰∏âÁßçÂÆ°Ê†∏Áä∂ÊÄÅconst ( AuditAwaiting AuditStatus = iota AuditPassed AuditRefused)// auditStatusNames ÂÆö‰πâÊØèÁßçÊûö‰∏æÁä∂ÊÄÅÂØπÂ∫îÁöÑÂêçÁß∞var auditStatusNames = []string&#123; "awaiting", "passed", "refused",&#125;func (s AuditStatus) String() string &#123; return auditStatusNames[s]&#125;// AuditStatusByName ÂèØ‰ª•Ê†πÊçÆÂêçÁß∞Êò†Â∞ÑÂæóÂà∞Êûö‰∏æÂèòÈáèfunc AuditStatusByName(name string) AuditStatus &#123; for i, v := range auditStatusNames &#123; if v == name &#123; return AuditStatus(i) &#125; &#125; panic(fmt.Sprintf("audit status name not found: '%s'", name))&#125;// Value ÂÆûÁé∞ÁöÑÊòØ BORM ÊåáÂÆöÁöÑÊé•Âè£ÔºåÂÆåÊàêÂíåÊï∞ÊçÆÂ∫ìÁ±ªÂûãÔºàtinyintÔºâÊò†Â∞ÑÔºàÂÜôÂÖ•Ôºâfunc (s *AuditStatus) Value() (interface&#123;&#125;, error) &#123; return int(*s), nil&#125;// SetValue ÂÆûÁé∞ÁöÑÊòØ BORM ÊåáÂÆöÁöÑÊé•Âè£ÔºåÂÆåÊàêÂíåÊï∞ÊçÆÂ∫ìÁ±ªÂûãÔºàtinyintÔºâÊò†Â∞ÑÔºàËØªÂèñÔºâfunc (s *AuditStatus) SetValue(v interface&#123;&#125;) error &#123; *s = AuditStatus(cast.ToInt(v)) return nil&#125;]]></content>
      <categories>
        <category>Web ÂºÄÂèë</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>Web</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Go ËØ≠Ë®ÄÁºñÂÜô RESTful API ÁöÑ‰∏Ä‰∫õÊÄùËÄÉ]]></title>
    <url>%2F2018%2F12%2F02%2Fthoughts-about-writing-restful-api-in-go%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄËøëÊù•ÂÆûË∑µ‰∫Ü‰∏ã Go Web ÂºÄÂèëÔºå‰πü‰∏ÄÂπ∂ÂÅö‰∫Ü‰∫õ Web ÂºÄÂèëÁõ∏ÂÖ≥ÁöÑÊïàÁéáÂ∑•ÂÖ∑ÔºåÁõÆÁöÑ‰πüÊòØ‰∏∫‰∫ÜÊèêÂçáÂºÄÂèë‰ΩìÈ™åÔºåËøõËÄåÊîπÂñÑÈ°πÁõÆË¥®ÈáèÂíåÊèêÈ´òÂºÄÂèëÊïàÁéá„ÄÇ ‰πãÂâçÂú®‰ΩøÁî® Python ÂÅö Web È°πÁõÆÊó∂ÔºåÊØîËæÉ‰π†ÊÉØÂü∫‰∫éÁ±ªÁöÑÊñπÂºè‰∏∫Êüê‰∏™ËµÑÊ∫êÊèê‰æõ RESTful Êé•Âè£„ÄÇÂíåÈááÁî®Á∫ØÂáΩÊï∞ÁöÑÊñπÂºè‰∏çÂêåÔºåÂü∫‰∫éÁ±ªÁöÑÊñπÂºèÂèØ‰ª•‰ΩøÂæóËµÑÊ∫êÁÆ°ÁêÜÊõ¥Ê∏ÖÊô∞ÔºåÂΩìÈÄªËæë‰ª£Á†ÅËæÉÂ§öÊó∂Ôºå‰ª£Á†ÅÁªìÊûÑ‰πü‰∏çËá≥‰∫éÂ§™Ê∑∑‰π±„ÄÇ ÊâÄ‰ª•Âú®‰ΩøÁî® Go ËØ≠Ë®ÄÂÆûË∑µÊó∂ÔºåÊàë‰ª¨‰ºöÈááÁî®Á±ª‰ºº ResourceHandler ÁöÑÁªìÊûÑ‰ΩìÁöÑÊñπÂºèÊù•Êõø‰ª£Á±ªÔºåÂπ∂ÁªôËØ•ÁªìÊûÑ‰ΩìÁªëÂÆöÁõ∏Â∫îÁöÑ GET/POST/DELETE/PUT/PATCH ÊñπÊ≥ïÔºåÁî®‰ª•Âíå HTTP Áõ∏Â∫îÁöÑËØ∑Ê±ÇÊñπÊ≥ïÂåπÈÖç„ÄÇ ÈÅáÂà∞ÁöÑÈóÆÈ¢òÊàë‰ª¨‰ΩøÁî®ÁöÑ Web Ê°ÜÊû∂ÊòØÂü∫‰∫é go-chi/chi Â∞ÅË£ÖÁöÑÔºåËøô‰∏™Ê°ÜÊû∂Êú¨Ë∫´ÁöÑÁâπÁÇπÂ∞±ÊòØÁÆÄÂçïÔºå‰∏é Go Ê†áÂáÜÂ∫ì http Êó†ÁºùË°îÊé•„ÄÇ‰∏ªË¶ÅÁî®ÂÆÉÊù•ÂÅöË∑ØÁî±ÂàÜÂèëÔºåÊñπ‰æøÁºñÂÜô HTTP API„ÄÇ ‰ΩÜÂú®ÂÆûË∑µ‰∏≠ÔºåË∑ØÁî±Ê≥®ÂÜåÈÇ£ÂùóÊÑüËßâÂæàÁπÅÁêê„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨ÂÖàÂâçÁöÑÂÜôÊ≥ïÂ§ßËá¥ÊòØ‰∏ãÈù¢ËøôÊ†∑ÁöÑÔºö 1234567r := chi.NewRouter()hd := NewTasksHandler()r.Get("/tasks/&#123;task_id:(\\d+)&#125;", hd.Get)r.Post("/tasks/&#123;task_id:(\\d+)&#125;", hd.Post)r.Delete("/tasks/&#123;task_id:(\\d+)", hd.Delete&#125; ÊòæÁÑ∂Ôºå‰∏äÈù¢ÁöÑÂÜôÊ≥ïÊúâÁÇπÂï∞Âó¶Ôºå‰∏îÂÆπÊòìÂá∫Èîô„ÄÇÊØîÂ¶ÇÂú®ÂçïÂÖÉÊµãËØï‰∏≠ÔºåÊàë‰ª¨Â∞±ÂèØËÉΩ‰ºöÂõ†‰∏∫ÁñèÂøΩÂ§ßÊÑèÔºåÁªô test server ÁªëÂÆöÁöÑË∑ØÁî±ÂíåÂÆûÈôÖÁöÑ‰∏çÂêåÔºàÂà´ÈóÆÊàëÊÄé‰πàÁü•ÈÅìÁöÑÔºâ„ÄÇÊâÄ‰ª•Â∞±Â∏åÊúõËÉΩÊúâ‰∏ÄÁßçÁÆÄÂçïÁöÑÊñπÂºèÊ≥®ÂÜåË∑ØÁî±ÔºåÂπ∂‰∏îËÆ©Á®ãÂ∫èËá™Â∑±Ê†πÊçÆËØ∑Ê±ÇÁöÑ Method ÂàÜÂèëÂà∞ Handler ÂØπÂ∫îÁöÑÊñπÊ≥ï‰∏ä„ÄÇ Êó¢ÁÑ∂ÈÅáÂà∞ÈóÆÈ¢òÔºåÈÇ£Â∞±ÂæóÊÉ≥‰∏™‰ºòÈõÖÁöÑÊñπÊ≥ïËß£ÂÜ≥ÔºåÂ∞ΩÂèØËÉΩ‰øùËØÅÊÄßËÉΩÊçüËÄó‰∏çÂ§ßÔºå‰ΩÜÂèàËÉΩÂ∏¶Êù•ËæÉÂ•ΩÁöÑÂºÄÂèë‰ΩìÈ™å„ÄÇ‰∫éÊòØ‰πéÔºårest ÂåÖËØûÁîü‰∫Ü„ÄÇ ËØ¥ËØ¥ REST ÂåÖrest ÂåÖÁöÑÂÆûÁé∞ÂæàÁÆÄÂçïÔºåÂ∞±ÊòØÂØπ go-chi/chi Ê°ÜÊû∂ÂÅö‰∫ÜÁÆÄÂçïÁöÑÂåÖË£ÖÔºåÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Ëá™ÂÆö‰πâÁöÑ BaseHandler ÂÆûÁé∞ËØ∑Ê±ÇÂàÜÂèëÂà∞ÊâÄË∞ìÁöÑ„ÄåÂ≠êÁ±ª„ÄçÁªìÊûÑ‰ΩìÂØπÂ∫îÁöÑÊñπÊ≥ïËøõË°åÂ§ÑÁêÜ„ÄÇÁî±‰∫éÂπ∂‰∏ç‰ºöËøõË°åÁ±ªÂûãÊñ≠Ë®ÄÊàñËÄÖ‰ΩøÁî®ÂèçÂ∞ÑÔºåÊâÄ‰ª•Â∏¶Êù•ÁöÑÊÄßËÉΩÂºÄÈîÄ‰∏ç‰ºöÂæàÈ´ò„ÄÇ ÈÇ£‰πàÔºåÂú®Êúâ‰∫Ü rest ÂåÖÂêéÔºåÊàë‰ª¨Â¶Ç‰Ωï‰ΩøÁî®ÂÆÉÂë¢Ôºü ‰ΩøÁî®Á§∫‰æãÂÅáÂ¶ÇÊàë‰ª¨Ë¶ÅÁºñÂÜô‰∏Ä‰∏™‰ªªÂä°ÁÆ°ÁêÜÊúçÂä°ÔºåÈúÄË¶ÅÊèê‰æõÁöÑÊé•Âè£Â¶Ç‰∏ãÔºö ÂäüËÉΩ ÊñπÊ≥ï URL Á§∫‰æã Ëé∑Âèñ‰ªªÂä°ÂàóË°® GET /tasks Êñ∞Âª∫‰ªªÂä° POST /tasks Ëé∑ÂèñÂçï‰∏™‰ªªÂä° GET /tasks/1 Âà†Èô§Âçï‰∏™‰ªªÂä° DELETE /tasks/1 Âú® rest ÁöÑÂä©Êîª‰∏ãÔºåÊàë‰ª¨ÂèØ‰ª•ËøôÊ†∑Êù•ÂÜôÔºö 123456789101112131415161718192021222324252627282930func main() &#123; r := rest.NewRouter() r.MountHandler("/tasks", &amp;TasksHandler&#123;&#125;) r.MountHandler("/tasks/&#123;task_id:(\\d+)&#125;", &amp;TaskHandler&#123;&#125;) rest.Run(r, 8000)&#125;type TasksHandler struct &#123; rest.BaseHandler&#125;func (hd *TasksHandler) Get() &#123; hd.RenderJSON(map[string]string&#123;"message": "Get Tasks"&#125;)&#125;func (hd *TasksHandler) Post() &#123; hd.RenderJSON(map[string]string&#123;"message": "Create Task"&#125;)&#125;type TaskHandler struct &#123; rest.BaseHandler&#125;func (hd *TaskHandler) Get() &#123; hd.RenderJSON(map[string]string&#123;"message": "GET Task"&#125;)&#125;func (hd *TaskHandler) Delete() &#123; hd.RenderJSON(map[string]string&#123;"message": "Delete Task"&#125;)&#125; È°πÁõÆÁªìÊûÑËøô‰∏™È°πÁõÆÁªìÊûÑ‰ªÖ‰æõÂèÇËÄÉÔºå‰πüÊ≤°Âï•ÁâπÂà´ÁöÑÔºö 123456789101112131415161718192021222324252627282930.‚îú‚îÄ‚îÄ Gopkg.lock (dep ÂåÖÁÆ°ÁêÜ‰ΩøÁî®ÔºåÈîÅÂÆöÁâàÊú¨)‚îú‚îÄ‚îÄ Gopkg.toml (dep ÂåÖÁÆ°ÁêÜ‰ΩøÁî®)‚îú‚îÄ‚îÄ Makefile (‰∏Ä‰∫õÁéØÂ¢ÉÂáÜÂ§áÂëΩ‰ª§Á≠â)‚îú‚îÄ‚îÄ README.md (È°πÁõÆÁÆÄ‰ªã)‚îú‚îÄ‚îÄ bin‚îÇ ‚îú‚îÄ‚îÄ web (Web ÊúçÂä°‰∫åËøõÂà∂Á®ãÂ∫èÔºåÂçï‰∏™Êñá‰ª∂Âç≥ÂèØËøêË°å)‚îú‚îÄ‚îÄ cmd‚îÇ ‚îî‚îÄ‚îÄ web (Web ÊúçÂä°ÁöÑÂÖ•Âè£)‚îÇ ‚îî‚îÄ‚îÄ main.go‚îú‚îÄ‚îÄ pkg‚îÇ ‚îú‚îÄ‚îÄ configs (È°πÁõÆËµÑÊ∫êÈÖçÁΩÆÔºåÈÄöËøáËµÑÊ∫êÂèëÁé∞Ëé∑Âèñ)‚îÇ ‚îú‚îÄ‚îÄ consts‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ enum.go (ÂÆö‰πâ‰∏Ä‰∫õÊûö‰∏æÁ±ªÂûã)‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ macro.go (ÂÆö‰πâ‰∏Ä‰∫õÂ∏∏Èáè)‚îÇ ‚îú‚îÄ‚îÄ controllers (Ê†∏ÂøÉÁöÑ‰∏öÂä°ÈÄªËæë)‚îÇ ‚îú‚îÄ‚îÄ errs (‰∏öÂä°ÈîôËØØÂÆö‰πâÔºåÊîæÂú®‰∏ÄÂùóÁª¥Êä§)‚îÇ ‚îú‚îÄ‚îÄ middlewares (‰∏öÂä°Ëá™ÂÆö‰πâ‰∏≠Èó¥‰ª∂)‚îÇ ‚îú‚îÄ‚îÄ models (È°æÂêçÊÄù‰πâÔºåORM Model Â±Ç)‚îÇ ‚îú‚îÄ‚îÄ rpcs (‰æùËµñÁöÑÁ¨¨‰∏âÊñπÊúçÂä°)‚îÇ ‚îú‚îÄ‚îÄ utils (Â∏∏Áî®ÁöÑÂ∞èÂ∑•ÂÖ∑)‚îÇ ‚îî‚îÄ‚îÄ web‚îÇ ‚îú‚îÄ‚îÄ handlers (Â§ÑÁêÜËØ∑Ê±ÇÁöÑ handlers ÂÆûÁé∞)‚îÇ ‚îú‚îÄ‚îÄ schemas (ÂÆö‰πâËÅöÂêàÊï∞ÊçÆÁöÑ API Schema)‚îÇ ‚îî‚îÄ‚îÄ router.go (Ë∑ØÁî±Ê≥®ÂÜå)‚îú‚îÄ‚îÄ scripts (‰∏Ä‰∫õËÑöÊú¨)‚îú‚îÄ‚îÄ testdata (ÊîæÂçïÂÖÉÊµãËØïÈúÄË¶ÅÁöÑ Mock Êï∞ÊçÆ)‚îÇ ‚îú‚îÄ‚îÄ fixtures (ÊµãËØïÊï∞ÊçÆÔºåÁî®‰∫éÂØºÂÖ•ÊµãËØïÂ∫ì)‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ foo.yml‚îî‚îÄ‚îÄ vendor (‰∏Ä‰∫õÁ¨¨‰∏âÊñπ‰æùËµñÂåÖÔºåÂõ†‰∏∫ÊúâÂ¢ôüò≠ÔºåÊâÄ‰ª•ÂæóÂ≠ò‰∏ãÊù•ÈÅøÂÖçÈÉ®ÁΩ≤Êó∂Âõ†‰∏∫ÁΩëÁªúÁ≠âÂ§™‰πÖ) ÊÄªÁªìÊÄé‰πàÊ†∑ÔºåÊñ∞ÁöÑË∑ØÁî±Ê≥®ÂÜåÊñπÂºèÊòØ‰∏çÊòØÊõ¥Âä†ÁÆÄÂçï‰∫ÜÔºüÂÖ∂ÂÆûËøôÊ≠£ÊòØÂÄüÈâ¥‰∫Ü Python Tornado ÁöÑ‰∏Ä‰∫õÊÄùÊÉ≥„ÄÇÊàë‰∏çËÆ§‰∏∫ËøôÁßçÂÅöÊ≥ïÊòØÊâÄË∞ìÁöÑÂèçÊ®°ÂºèÔºåÊàñËÄÖ‰∏çÁ¨¶Âêà Go ÁöÑÈ£éÊ†ºÔºàÊ¨¢ËøéÊù•Âñ∑Ôºâ„ÄÇÂÖ∂ÂÆûËøôÂéãÊ†πÂíåËØ≠Ë®ÄÊó†ÂÖ≥Ôºå‰∏∫‰ªÄ‰πà‰∏çÊÑøÊÑèÂéªÂÆûË∑µ‰∏Ä‰∫õËÉΩÂ§üÊîπÂñÑÂºÄÂèë‰ΩìÈ™åÁöÑÊñ∞ÊñπÊ≥ïÂë¢ÔºüÂÜµ‰∏îËøòËÉΩÂ§üÂáèÂ∞ëÁäØÈîôÔºÅ]]></content>
      <categories>
        <category>Web ÂºÄÂèë</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>Web</tag>
        <tag>RESTful</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TiDB Â≠¶‰π†Á¨îËÆ∞Ôºà‰∫åÔºâ]]></title>
    <url>%2F2018%2F12%2F02%2Ftidb-academy-learning-notes-part-two%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄTiDB Academy Êèê‰æõ‰∫Ü TiDB ÁöÑËßÜÈ¢ëÂ≠¶‰π†ËµÑÊ∫êÔºåÊñπ‰æø‰∫ÜËß£Ëøô‰∏™ÂÖ®Êñ∞ÁöÑÊï∞ÊçÆÂ∫ì„ÄÇÂú®Â≠¶‰π†ËøáÁ®ã‰∏≠ÔºåÂÅö‰∫ÜËøô‰∏™Á≥ªÂàóÁöÑÁ¨îËÆ∞ÔºåÊñπ‰æøÂêéÊúüÂõûÈ°æ„ÄÇ TiDB Âπ≥Âè∞ ËôΩËØ¥ TiDB Âú®‰∏äÂ±ÇÂÆûÁé∞‰∫Ü MySQL ÂçèËÆÆÔºå‰ΩÜÂπ∂‰∏ç‰ª£Ë°®ÂÆÉ‰ª¨‰ΩøÁî®ÁöÑÊòØÁõ∏ÂêåÁöÑÊ∫êÁ†Å„ÄÇ‰πãÊâÄÂè´ÂÅö TiDB Âπ≥Âè∞ÔºåÊòØÂõ†‰∏∫ÂÆÉÊòØÁî±‰∏â‰∏™Ê†∏ÂøÉÈÉ®ÂàÜÊûÑÊàêÔºö TiKV: ÂÖºÂÆπ ACID ÁöÑÂ≠òÂÇ®Â±Ç ÊîØÊåÅÂàÜÂ∏ÉÂºè Key Value Â≠òÂÇ® ÊîØÊåÅÊ®™ÂêëÊâ©Â±ï„ÄÅÂéüÁîüÂ§öÂâØÊú¨Êú∫Âà∂‰øùËØÅÈ´òÂèØÁî® Ëá™Âä®Âü∫‰∫éËåÉÂõ¥ÂàÜÂå∫ÔºåÊØè‰∏™ËåÉÂõ¥ÈÉΩÁß∞‰∏∫‰∏Ä‰∏™ Region„ÄÇRegion ‰ºöÊ†πÊçÆÈúÄË¶ÅËá™Âä®Ë∞ÉÊï¥ÔºåÈªòËÆ§ÊúÄÂ§ß‰∏∫ 96MB ÊØè‰∏™ Region ÈªòËÆ§Êúâ‰∏âÂàÜÊã∑Ë¥ùÔºå‰ΩøÁî® Raft ‰øùËØÅ‰∏ÄËá¥ÊÄß ÂΩìÁÑ∂ÔºåÂÆûÈôÖ‰∏ä TiKV ‰πüÂèØ‰ª•Áã¨Á´ãÈÉ®ÁΩ≤ÔºåÂπ∂Áõ¥Êé•‰ΩøÁî®ÂÆÉÁöÑ KV API ËÆøÈóÆÊï∞ÊçÆ TiDB: ÊîØÊåÅ MySQL ÂçèËÆÆÔºåËá™Âä®ËΩ¨Êç¢ÊàêÂàÜÂ∏ÉÂºèËØ∑Ê±ÇÂà∞ TiKV Êó†Áä∂ÊÄÅ„ÄÅ‰∏çÂ≠òÂÇ®Êï∞ÊçÆ Êòì‰∫éÊ∞¥Âπ≥Êâ©Â±ïÔºåÈ´òÂèØÁî® Á±ª‰ºº‰∏Ä‰∏™ TranslatorÔºå‰ΩÜÊòØËøôÈáåÈù¢ÁöÑÂçèÂêåÂ§ÑÁêÜÂæàÊúâÊÑèÊÄù Placement Driver (PD): ÈõÜÁæ§ÁÆ°ÁêÜÂô®ÔºåÂ∞±ÊòØÊï¥‰∏™Âπ≥Âè∞ÁöÑÂ§ßËÑë ÁÆ°ÁêÜ TiKV Region Ë¥üËΩΩÂùáË°°ÔºàÊØîÂ¶ÇÁÉ≠ÁÇπÊ£ÄÊü•„ÄÅRegion ÂêàÂπ∂Ôºâ ÂÖÉÊï∞ÊçÆÁÆ°ÁêÜÔºàÂ¶Ç SQL DDLÔºâ Êó∂Èó¥ÂêåÊ≠•ÔºàÂàÜÂ∏ÉÂºè‰∫ãÂä°‰∏≠ÂæàÂÖ≥ÈîÆÁöÑ‰∏ÄÁÇπÂ∞±ÊòØÂáÜÁ°ÆÁöÑÊó∂Èó¥Ôºâ ÂèØÈÄâÁªÑ‰ª∂ÔºöTiSpark: Ë∂äËøá SQL Â±ÇÔºåËÆ© Apache Spark Áõ¥Êé•‰∏é TiKV ËøûÊé• Êñπ‰æøÊâßË°åÂ§çÊùÇÁöÑ OLAP Êü•ËØ¢„ÄÅÊú∫Âô®Â≠¶‰π†‰ªªÂä° ‰ªé TiDB Âπ≥Âè∞ËøôÁßçÁªÑ‰ª∂ÂåñÁöÑÊû∂ÊûÑËÆæËÆ°ÂèØ‰ª•ÁúãÂà∞Ôºå‰Ω†ÂèØ‰ª•Áõ¥Êé•ÈÄöËøá‰∏çÂêåÁöÑÊñπÂºèÔºàSpark„ÄÅMySQL ÂçèËÆÆ„ÄÅKey-Value API Á≠âÔºâËÆøÈóÆÂêåÊ†∑ÁöÑÊï∞ÊçÆÔºà‰Ωç‰∫é TiKV ‰∏≠ÔºâÔºåËÄåÊó†ÈúÄËµ∞‰º†ÁªüÁöÑ ETL (Extract-Transform-Load) ÈÇ£Â•ó„ÄÇ Êúâ‰∫Ü TiDB Âπ≥Âè∞ÔºåÂ∞±ÂèØ‰ª•ÂêåÊó∂ÊîØÊåÅ OLAP Âíå OLTP Âú∫ÊôØ‰∫ÜÔºà‰º†ËØ¥‰∏≠ÁöÑÊ∑∑ÂêàÊ®°Âºè HATPÔºâ„ÄÇËøôÊ†∑ÔºåÂéüÂÖàÊàë‰ª¨Áî® MySQL Â∫î‰ªò OLTP Âú∫ÊôØÔºåÁî® Hadoop, HBase ÊàñËÄÖ Cassandra Á≠âÂ∫î‰ªò OLAP Âú∫ÊôØÔºåÈÉΩÂèØ‰ª•Âú® TiDB Ëøô‰∏Ä‰∏™Âπ≥Âè∞ÂÆåÊàêÔºå‰ªéËÄåÁÆÄÂåñËÆæËÆ°ÂíåÁª¥Êä§Â∑•‰ΩúÔºàÁúüÁöÑÂêóÔºüÔºâ„ÄÇ KOST ÊäÄÊúØÊ†àKOST ÊòØÊåáÔºöKubernetes, Operator, Spark Âíå TiDB„ÄÇK8S ÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨‰∏ÄÊ≠•Âà∞‰ΩçÊêûÂÆö TiDB Âπ≥Âè∞ÈÉ®ÁΩ≤„ÄÇ Âú® GKE ‰∏äÈÉ®ÁΩ≤ TiDBÁõ¥Êé•ÁúãËøô‰∏™ÈÉ®ÁΩ≤ÊïôÁ®ã„ÄÇ ‰∏Ä‰∫õÊèêÁ§∫Ôºö 1234567891011121314151. Watch tidb-cluster up and running watch kubectl get pods --namespace tidb -l app.kubernetes.io/instance=tidb -o wide2. List services in the tidb-cluster kubectl get services --namespace tidb -l app.kubernetes.io/instance=tidb3. Wait until tidb-initializer pod becomes completed watch kubectl get po --namespace tidb -l app.kubernetes.io/component=tidb-initializer4. Get the TiDB password PASSWORD=$(kubectl get secret -n tidb demo-tidb -o jsonpath="&#123;.data.password&#125;" | base64 -d | awk '&#123;print $6&#125;') echo $&#123;PASSWORD&#125;5. Access tidb-cluster using the MySQL client kubectl port-forward -n tidb svc/demo-tidb 4000:4000 &amp; mysql -h 127.0.0.1 -P 4000 -u root -D test -p6. View monitor dashboard for TiDB cluster kubectl port-forward -n tidb svc/demo-grafana 3000:3000 Open browser at http://localhost:3000. The default username and password is admin/admin. ‰ΩøÁî® MySQL ÂÆ¢Êà∑Á´ØËøûÊé•Ôºö 12345kubectl run -n tidb mysql-client --rm \ -i --tty --image mysql -- mysql \ -P 4000 -u root -h $(kubectl get \ svc demo-tidb -n tidb --output \ json | jq -r &apos;.spec.clusterIP&apos;) ÊàñËÄÖÂª∫Á´ãÈößÈÅìÔºö 1234567kubectl -n tidb port-forward \ demo-tidb-0 4000:4000 &amp;&gt;/dev/null \ &amp;sudo apt-get install -y mysql-client \ &amp;&amp;mysql -h 127.0.0.1 -u root -P 4000 Ë≤å‰ººÁé∞Âú®Ê†πÊú¨ËøûÊé•‰∏ç‰∏ä‰∫ÜÔºåÊÄªÊòØÊèêÁ§∫ÈúÄË¶ÅÂØÜÁ†ÅÔºå‰ΩÜÊòØÈªòËÆ§‰∏çÊòØ‰∏çÈúÄË¶ÅÂØÜÁ†ÅÁöÑÂêóÔºüÁúãÊù•ÈúÄË¶ÅÈáçÂª∫ÈõÜÁæ§ÔºåÁÑ∂ÂêéÈ¶ñÊ¨°ËøõÂÖ•Â∞±ËÆæÁΩÆÂ•ΩÂØÜÁ†Å„ÄÇÁî®Êà∑ÁÆ°ÁêÜÂèÇËÄÉÔºöTiDB User Account Management]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
      </categories>
      <tags>
        <tag>TiDB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TiDB Â≠¶‰π†Á¨îËÆ∞Ôºà‰∏ÄÔºâ]]></title>
    <url>%2F2018%2F12%2F02%2Ftidb-academy-learning-notes-part-one%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄTiDB Academy Êèê‰æõ‰∫Ü TiDB ÁöÑËßÜÈ¢ëÂ≠¶‰π†ËµÑÊ∫êÔºåÊñπ‰æø‰∫ÜËß£Ëøô‰∏™ÂÖ®Êñ∞ÁöÑÊï∞ÊçÆÂ∫ì„ÄÇÂú®Â≠¶‰π†ËøáÁ®ã‰∏≠ÔºåÂÅö‰∫ÜËøô‰∏™Á≥ªÂàóÁöÑÁ¨îËÆ∞ÔºåÊñπ‰æøÂêéÊúüÂõûÈ°æ„ÄÇ ËØæÁ®ãÊ¶ÇË¶ÅËøô‰∏™Á≥ªÂàóËØæÁ®ãÊòØ‰∏∫ MySQL DBA ÂáÜÂ§áÁöÑÈ´òÁ∫ßËØæÁ®ã„ÄÇËÆ≤Â∏à‰πüÂÅáËÆæÂ≠¶‰π†ËÄÖÊã•Êúâ 3~5 Âπ¥ÁöÑ MySQL ËøêÁª¥Âíå‰ΩøÁî®ÁªèÈ™å„ÄÇÂõ†‰∏∫Âú®ËÆ≤Ëß£ÁöÑËøáÁ®ã‰∏≠Ôºå‰ºöÂ∞Ü TiDB ÁöÑ‰∏Ä‰∫õÊ¶ÇÂøµÁõ¥Êé•Âíå MySQL ÂØπÊØîÔºàËôΩÁÑ∂Âπ∂‰∏çÊòØ MySQL DBAÔºå‰ΩÜ‰∏çËÉΩÈòªÊå°ÊàëÂ≠¶‰π†ÁöÑËÑöÊ≠•~Ôºâ„ÄÇ Êàë‰ª¨Â∞ÜÂú®Ëøô‰∏™Á≥ªÂàóËØæÁ®ã‰∏≠Â≠¶‰π†Âà∞ÂæàÂ§öÂÖ≥‰∫éÂ¶Ç‰ΩïËÆæËÆ°ÂíåÂÆûÁé∞‰∏Ä‰∏™Á±ª‰ºº TiDB ËøôÊ†∑Â§çÊùÇÁöÑÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ∫ìÁöÑÁªÜËäÇ„ÄÇÊÄªÁöÑÊù•ËØ¥ÔºåÂ∞Ü‰ºöÊ∂µÁõñÂ¶Ç‰∏ãÂá†‰∏™ËØùÈ¢òÔºö TiDB ÁöÑÊû∂ÊûÑËÆæËÆ°ÔºàOLTP/OLAP ÊîØÊåÅÔºâÔºü Â¶Ç‰ΩïÂÅöÂà∞Ê∞¥Âπ≥Êâ©Â±ïÔºåÂêåÊó∂‰øùÊåÅÊï∞ÊçÆÂº∫‰∏ÄËá¥ÊÄßÂíåÈ´òÂèØÁî®ÁöÑÔºü Âú®Á∫ø DDL ÁÆóÊ≥ïÂíåÂÆûÁé∞ ËØæÂâçÂáÜÂ§á‰∏∫‰∫ÜË∑üÁùÄÊïôÁ®ã‰∏ÄÊ≠•Ê≠•Â≠¶‰π†ÔºåËá™ÁÑ∂ÊòØÈúÄË¶ÅÊúâ‰∏™ÁéØÂ¢ÉÂèØ‰ª•ÈÉ®ÁΩ≤ TiDB ÁöÑÂíØ„ÄÇGoogle Cloud Platform È¶ñÊ¨°‰ΩøÁî®ÔºåÁ¨¨‰∏ÄÂπ¥ÂÖçË¥πËµ†ÈÄÅ $300„ÄÇÂè™ÈúÄË¶Å‰∏ÄÂº† Visa ‰ø°Áî®Âç°ÁªëÂÆöÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ ÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ∫ì‰ªãÁªç 20 ‰∏ñÁ∫™ 60 Âπ¥‰ª£ÔºåÁ¨¨‰∏Ä‰ª£Êï∞ÊçÆÂ∫ìËØûÁîü„ÄÇ‰∏ªË¶ÅÁâπÁÇπÔºö ÈùûÂÖ≥Á≥ªÂûã ËÆøÈóÆÂ≠òÂÇ®ËÆ∞ÂΩïÁöÑËØ≠Ë®Ä‰∏çÁªü‰∏ÄÔºå‰∏éÂ≠òÂÇ®Ê†ºÂºèÁ¥ßÂØÜÂÖ≥ËÅî 20 ‰∏ñÁ∫™ 70 Âπ¥‰ª£ÔºåÂÖ≥Á≥ªÊ®°ÂûãÂíå SQL ËØûÁîü 20 ‰∏ñÁ∫™ 70 Âπ¥‰ª£Âà∞ 21 ‰∏ñÁ∫™ÂàùÔºåÂü∫‰∫é SQL ÁöÑÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂç†ÊçÆÁªüÊ≤ªÂú∞‰Ωç„ÄÇ‰∏ªË¶ÅÁâπÁÇπÔºö Êï∞ÊçÆÂ∫ìÂéÇÂïÜÂæàÂ§öÔºåÂùáÊîØÊåÅ SQL Â≠òÂÇ®ËøáÁ®ãËØ≠Ë®ÄÂæàÂ§öÔºå‰∏îÁßªÊ§çÊÄßÂæàÂ∑Æ Èù¢ÂêëÂçïÊú∫ËÆæËÆ° 2000 Âπ¥‰∏≠ÊúüÔºåNoSQL Êï∞ÊçÆÂ∫ìËØûÁîü„ÄÇ‰∏ªË¶ÅÁâπÁÇπÔºö Êâ©Â±ïÊÄßÂæàÂ•Ω Áº∫‰πè‰∫ãÂä°ÊîØÊåÅ Â¢ûÂä†‰∫ÜÂ∫îÁî®Á®ãÂ∫èË¥üÊãÖÔºåÂ§çÊùÇÊÄßÊèêÂçá Êñ∞‰∏Ä‰ª£ NewSQL ËØûÁîüÔºö Á±ª‰ºº NoSQL ÁöÑÊòì‰∫éÊâ©Â±ïÊÄß ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì ÊîØÊåÅ SQL Âº∫‰∏ÄËá¥ÊÄß‰øùËØÅ TiDBÔºåNewSQL ÂÆ∂ÊóèÊàêÂëòÔºö Â∏àÊâø Google Spanner Êû∂ÊûÑ ÊîØÊåÅ MySQL ÁΩëÁªúÂçèËÆÆ Â∫îÁî®Â±ÇÂü∫Êú¨Êó†ÁóõÂàáÊç¢ TiDB ‰ΩøÁî®‰πêËßÇÈîÅÊ®°ÂûãÔºà‰∏Ä‰∏™ÊØîËæÉÂ§ßÁöÑÂ∑ÆÂà´ÔºâÔºåÂèØÂèÇËÄÉ ËøôÊÆµ‰ªãÁªç]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
      </categories>
      <tags>
        <tag>TiDB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[VSCode Markdown ÂÜô‰ΩúÊïàÁéáÊèêÂçá]]></title>
    <url>%2F2018%2F11%2F04%2Fmkdown-in-vscode%2F</url>
    <content type="text"><![CDATA[ÂºïË®ÄÂπ≥Êó∂Â§ö‰ΩøÁî® VSCode ÁºñÂÜô Markdown Êñá‰ª∂ÔºåËôΩÁÑ∂ÂÆÉ‰πüÊúâÂÜÖÂª∫ÁöÑÈ¢ÑËßàÂäüËÉΩÔºå‰ΩÜÊòØÊïàÊûú‰∏ÄËà¨„ÄÇÂ¶ÇÊûúËÉΩÊúâÂ•ΩÁöÑÊèí‰ª∂ÊîØÊåÅÔºåÂèØ‰ª•ÂæàÂ§ßÁ®ãÂ∫¶‰∏äÊèêÈ´òÂÜô‰ΩúÊïàÁéá„ÄÇ‰∏ãÈù¢Âá†‰∏™Êèí‰ª∂ÁùÄÈáçËß£ÂÜ≥Ëøô‰πàÂá†‰∏™ÈóÆÈ¢òÔºö ÊîØÊåÅÊõ¥Âº∫Â§ßÁöÑÈ¢ÑËßàÂäüËÉΩÂíåÊõ¥‰∏∞ÂØåÁöÑÊâ©Â±ïËØ≠Ê≥ï ÊîØÊåÅÂø´Êç∑ÂõæÁâáÊèíÂÖ•ÔºåËá™Âä®Ë°•ÈΩê URL ÊîØÊåÅÂø´Êç∑ÈîÆËÆæÁΩÆÂä†Á≤ó„ÄÅÊñú‰ΩìÁ≠â Â¢ûÂº∫Êèí‰ª∂Markdown ÂÆûÊó∂È¢ÑËßà Âú® VSCode ÁöÑÊèí‰ª∂‰∏≠ÂøÉÊêúÁ¥¢ Markdown Preview Enhanced Êèí‰ª∂Âπ∂ÂÆâË£ÖÔºåËøôÊ¨æÊèí‰ª∂ÊîØÊåÅÊõ¥Âä†‰∏∞ÂØåÁöÑÊâ©Â±ïËØ≠Ê≥ïÔºåÂØπ‰∫éÊèêÂçáÂÜô‰ΩúÊïàÁéáÂ∏ÆÂä©ÂæàÂ§ß„ÄÇÂè¶Â§ñÔºåÈ¢ÑËßàÂäüËÉΩ‰πüÊòØÈùûÂ∏∏ÁªôÂäõÔºåÊûÅÂäõÊé®ËçêÔºÅ Âø´Êç∑ÊèíÂÖ•ÂõæÁâáÂú® VSCode Êèí‰ª∂‰∏≠ÂøÉÊúâ‰∏§Ê¨æÁúãËµ∑Êù•‰∏çÈîôÁöÑÂõæÁâáÊèíÂÖ•Â∑•ÂÖ∑ÔºåÂùáÊîØÊåÅ‰∏ä‰º†Ëá≥‰∏ÉÁâõ‰∫ëÔºåÂπ∂Ëá™Âä®Âú®ÈúÄË¶ÅÊèíÂÖ•ÂõæÁâáÁöÑ‰ΩçÁΩÆË°•ÂÖ®Ë∑ØÂæÑ„ÄÇ È¶ñÂÖàÂú® VSCode ‰∏≠ÊêúÁ¥¢Âπ∂ÂÆâË£ÖÊèí‰ª∂ paste image to qiniuÔºåÊé•‰∏ãÊù•ÈÖçÁΩÆ‰∏ÉÁâõ‰∫ëÔºàAK, SK, Bucket Á≠âÔºâÔºö ËøôÊ¨æÊèí‰ª∂ÁöÑÁâπÁÇπÊòØÊîØÊåÅÁõ¥Êé•Á≤òË¥¥ÂõæÁâáÂπ∂Ëá™Âä®‰∏ä‰º†ÁöÑ„ÄÇÂÖ∂ÈªòËÆ§ÁöÑÁ≤òË¥¥Âø´Êç∑ÈîÆÊòØ option+command+v~ Âè¶Â§ñ‰∏ÄÊ¨æÊèí‰ª∂ qiniu-upload-image ÂàôÊîØÊåÅÊâìÂºÄÊåáÂÆöÁöÑÂõæÁâáÂπ∂ÂÆåÊàêËá™Âä®‰∏ä‰º†„ÄÇÂÖ∂ÈÖçÁΩÆ‰∏é‰∏ä‰∏Ä‰∏™Êèí‰ª∂Á±ª‰ººÔºå‰∏çÂÜçËµòËø∞„ÄÇ ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå‰∏§Ê¨æÊèí‰ª∂ÁöÑÂø´Êç∑ÈîÆÂèØËÉΩ‰∏çÊòØÂ§™Êñπ‰æøÔºåÂª∫ËÆÆÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÈúÄË¶Å‰øÆÊîπ‰∏ãÔºö Markdown Âø´Êç∑ÈîÆÊúÄÂêéË¶Å‰ªãÁªçÁöÑÊòØ‰∏ÄÊ¨æËÉΩÂ§üÊèê‰æõ Markdown Ê†ºÂºèÂ∏∏Áî®Âø´Êç∑ÈîÆÁöÑÊèí‰ª∂ÔºöMarkdown Shortcuts„ÄÇÊîØÊåÅÁöÑÂø´Êç∑Êìç‰ΩúÂ¶Ç‰∏ãÔºö Âä†Á≤ó ÂÄæÊñú Âà†Èô§Á∫ø Âø´ÈÄüÂà∂Ë°® ÊèíÂÖ•‰ª£Á†Å Â°´ÂÜô URL‚Ä¶]]></content>
      <categories>
        <category>Â∑•ÂÖ∑</category>
      </categories>
      <tags>
        <tag>VSCode</tag>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„Ää‰ª£Á†ÅÊï¥Ê¥Å‰πãÈÅì„ÄãËØª‰π¶Á¨îËÆ∞]]></title>
    <url>%2F2018%2F11%2F04%2Fclean-code-notes%2F</url>
    <content type="text"><![CDATA[ÂºïË®Ä„Ää‰ª£Á†ÅÊï¥Ê¥Å‰πãÈÅì„ÄãÔºàClean CodeÔºâËøôÊú¨‰π¶ÈùûÂ∏∏ÈÄÇÂêàÊØè‰∏Ä‰∏™Â∏åÊúõÊèêÈ´òÁºñÁ®ãË¥®ÈáèÁöÑÁ®ãÂ∫èÂëòÈòÖËØª„ÄÇÂ¶Ç‰ΩïÁªôÂèÇÊï∞ÂëΩÂêçÔºüÂ¶Ç‰ΩïÂÆö‰πâÂáΩÊï∞ÔºüÂ¶Ç‰ΩïÁºñÊéíÂ≠êÂáΩÊï∞ÔºüÁ≠âÁ≠âËøô‰∫õÈóÆÈ¢òÁöÑÁ≠îÊ°àÔºå‰Ω†ÈÉΩÂèØ‰ª•Âú®‰π¶‰∏≠ÊâæÂà∞„ÄÇ È°πÁõÆË¥®ÈáèÁöÑÂ•ΩÂùèÂæàÂ§ßÁ®ãÂ∫¶‰∏äÂèñÂÜ≥‰∫é‰ª£Á†ÅÈ£éÊ†ºÔºåÂ¶ÇÊûúÂõ¢ÈòüÁöÑ‰ª£Á†ÅÈ£éÊ†ºËÉΩÂ§üÂü∫Êú¨‰øùÊåÅ‰∏ÄËá¥ÔºåÂØπ‰∫éÊØè‰∏Ä‰ΩçÂºÄÂèëËÄÖÂíåÁª¥Êä§ËÄÖÊù•ËØ¥ÈÉΩÊòØÁ¶èÈü≥„ÄÇ‰ºòÁßÄÁöÑ‰ª£Á†ÅÊòì‰∫éÁêÜËß£ÔºåÈÄªËæëÊ∏ÖÊô∞ÔºåÂëΩÂêçËßÑËåÉÔºå‰πüÊòØÈùûÂ∏∏ÂÄºÂæóÂ≠¶‰π†ÁöÑ„ÄÇ Êú¨ÊñáËÆ∞ÂΩï‰∫ÜÂú®ÈòÖËØª Robert C. Martin ÁöÑ„Ää‰ª£Á†ÅÊï¥Ê¥Å‰πãÈÅì„Äã‰∏Ä‰π¶Êó∂Â≠¶‰π†Âà∞ÁöÑÂÖ≥ÈîÆÂÜÖÂÆπÔºå‰æø‰∫éÂêéÊúüÂ§ç‰π†„ÄÅÂèçÊÄù„ÄÅÊÄªÁªìÂíåËøõ‰∏ÄÊ≠•ÊèêÂçá„ÄÇÂä™ÂäõÂÅö‰∏Ä‰∏™Êã•ÊúâËâØÂ•Ω„Äå‰ª£Á†ÅÊ¥ÅÁôñ„ÄçÁöÑÁ†ÅÂÜú~ ÂëΩÂêçËßÑÂàô ÂêçÂâØÂÖ∂ÂÆûÔºö ‰∏çÈúÄË¶ÅÊ≥®ÈáäÊù•Ë°•ÂÖÖÂëΩÂêçÁöÑÂê´‰πâ ÈÅøÂÖçËØØÂØºÔºö ÈÅøÂÖç‰ΩøÁî®‰∏éÊú¨ÊÑèÁõ∏ÊÇñÁöÑËØç Â†§Èò≤‰ΩøÁî®‰∏çÂêå‰πãÂ§ÑËæÉÂ∞èÁöÑÂêçÁß∞ ÂÅöÊúâÊÑè‰πâÁöÑÂå∫ÂàÜÔºö ‰∏çË¶Å‰ª•Êï∞Â≠óÂå∫ÂàÜ ÈÅøÂÖçÂ∫üËØù Â∫üËØùÈÉΩÊòØÂÜó‰ΩôÔºåVariable ‰∏ÄËØçÊ∞∏Ëøú‰∏çÂ∫îÂΩìÂá∫Áé∞Âú®ÂèòÈáèÂêç‰∏≠ Ë¶ÅÂå∫ÂàÜÂêçÁß∞ÔºåÂ∞±Ë¶Å‰ª•ËØªËÄÖËÉΩÈâ¥Âà´‰∏çÂêå‰πãÂ§ÑÁöÑÊñπÂºèÊù•Âå∫ÂàÜ„ÄÇ ‰ΩøÁî®ËØªÂæóÂá∫Êù•ÁöÑÂêçÁß∞ ‰ΩøÁî®ÂèØÊêúÁ¥¢ÁöÑÂêçÁß∞Ôºö ÈÅøÂÖç‰ΩøÁî®ÂçïÂ≠óÊØçÁöÑËØç ÂêçÁß∞ÈïøÁü≠Â∫î‰∏éÂÖ∂‰ΩúÁî®ÂüüÂ§ßÂ∞èÁõ∏ÂØπÂ∫î ÈÅøÂÖç‰ΩøÁî®ÁºñÁ†ÅÔºö ÂØπ‰∫éÁé∞‰ª£ÁºñËØëÂô®ÔºåËØ∑ÊëíÂºÉÂåàÁâôÂà©ÂëΩÂêçÊ≥ï ‰∏çÈúÄË¶ÅÊàêÂëòÂâçÁºÄÔºåÂ¶Ç _m ÈÅøÂÖçÊÄùÁª¥Êò†Â∞ÑÔºö ÊòéÁ°ÆÊòØÁéãÈÅì Á±ªÂêçÔºö Á±ªÂêçÂíåÂØπË±°Â∫îÂΩìÊòØÂêçËØçÊàñËÄÖÂêçËØçÊÄßÁü≠ËØ≠ ÈÅøÂÖç Manager, Processor, Data Êàñ Info ËøôÁ±ªÁöÑÁ±ªÂêç Á±ªÂêç‰∏çÂ∫îËØ•ÊòØÂä®ËØç„ÄÇ ÊñπÊ≥ïÂêçÔºö ÊñπÊ≥ïÂêçÂ∫îÂΩìÊòØÂä®ËØçÊàñÂä®ËØçÁü≠ËØ≠ Âà´ÊâÆÂèØÁà±Ôºö ÂÆÅÂèØÊòéÁ°ÆÔºåÊØã‰∏∫Â•ΩÁé© Ë®ÄÂà∞ÊÑèÂà∞ÔºåÊÑèÂà∞Ë®ÄÂà∞ ÊØè‰∏™Ê¶ÇÂøµÂØπÂ∫î‰∏Ä‰∏™ËØç Âà´Áî®ÂèåÂÖ≥ËØ≠Ôºö ÈÅøÂÖçÂ∞ÜÂêå‰∏Ä‰∏™ÂçïËØçÁî®‰∫é‰∏çÂêåÁõÆÁöÑ ‰ΩøÁî®Ëß£ÂÜ≥ÊñπÊ°àÈ¢ÜÂüüÂêçÁß∞Ôºö Â§ö‰ΩøÁî® CS ÊúØËØ≠„ÄÅÁÆóÊ≥ï„ÄÅÊ®°Âºè„ÄÅÊï∞Â≠¶ÊúØËØ≠Âêß ‰ΩøÁî®Ê∫êËá™ÊâÄÊ∂âÈóÆÈ¢òÈ¢ÜÂüüÁöÑÂêçÁß∞ Ê∑ªÂä†ÊúâÊÑè‰πâÁöÑËØ≠Â¢ÉÔºö ËâØÂ•ΩÂëΩÂêçÁöÑÁ±ª„ÄÅÂáΩÊï∞ÊàñÂëΩÂêçÁ©∫Èó¥ÊîæÁΩÆÂêçÁß∞ÔºåÊèê‰æõËØ≠Â¢É ‰ΩøÁî®ÂâçÁºÄ ‰∏çË¶ÅÊ∑ªÂä†Ê≤°Áî®ÁöÑËØ≠Â¢ÉÔºö Âè™Ë¶ÅÁü≠ÂêçÁß∞Ë∂≥Â§üÊ∏ÖÊ•öÔºåÂ∞±ÊØîÈïøÂêçÁß∞Â•Ω ÂáΩÊï∞ Áü≠Â∞èÔºö ÂáΩÊï∞ÁöÑÁ¨¨‰∏ÄËßÑÂàôÊòØÁü≠Â∞èÔºåÁ¨¨‰∫åÊù°ÊòØÊõ¥Áü≠Â∞è ÂáΩÊï∞Ôºå20 Ë°åÂ∞ÅÈ°∂ÊúÄ‰Ω≥ Âè™ÂÅö‰∏Ä‰ª∂‰∫ãÔºö ÂáΩÊï∞Â∫îËØ•Âè™ÂÅö‰∏Ä‰ª∂‰∫ãÊÉÖÔºåÊúÄÂ•ΩËøô‰ª∂‰∫ãÊÉÖ Âà§Êñ≠ÂáΩÊï∞ÊòØÂê¶‰∏çÊ≠¢ÂÅö‰∫Ü‰∏Ä‰ª∂‰∫ãÊÉÖÔºåÂ∞±ÊòØÁúãËÉΩÂê¶ÂÜçÊãÜÂá∫‰∏Ä‰∏™ÂáΩÊï∞ Â¶ÇÊûúÂáΩÊï∞Âè™ÊòØÂÅö‰∫ÜËØ•ÂáΩÊï∞Âêå‰∏ÄÊäΩË±°Â±Ç‰∏äÁöÑÊ≠•È™§ÔºåÂàôÂáΩÊï∞ËøòÊòØÂè™ÂÅö‰∫Ü‰∏Ä‰ª∂‰∫ã ÊØè‰∏™ÂáΩÊï∞‰∏Ä‰∏™ÊäΩË±°Â±ÇÁ∫ßÔºö Ëá™È°∂Âêë‰∏ãËØª‰ª£Á†ÅÔºöÂêë‰∏ãËßÑÂàô ËÆ©ÊØè‰∏™ÂáΩÊï∞ÂêéÈù¢ÈÉΩË∑üÁùÄ‰Ωç‰∫é‰∏ã‰∏ÄÊäΩË±°Â±ÇÁöÑÂáΩÊï∞ switch ËØ≠Âè•Ôºö Â§öÊÄÅÂàõÂª∫ÔºåÈöêËóè‰∫éÊüê‰∏™ÁªßÊâøÂÖ≥Á≥ª‰∏≠Ôºå‰∏çË¶ÅÊö¥Èú≤Âá∫Êù• ‰ΩøÁî®ÊèèËø∞ÊÄßÁöÑÂêçÁß∞Ôºö Â¶ÇÊûúÊØè‰∏™‰æãÁ®ãÈÉΩËÆ©‰Ω†ÊÑüÂà∞Ê∑±ÂêàÂ∑±ÊÑèÔºåÈÇ£Â∞±ÊòØÊï¥Ê¥Å‰ª£Á†Å ÈïøËÄåÂÖ∑ÊúâÊèèËø∞ÊÄßÁöÑÂêçÁß∞ÔºåÊØîÁü≠ËÄå‰ª§‰∫∫Ë¥πËß£ÁöÑÂêçÁß∞Â•Ω ÈïøËÄåÂÖ∑ÊúâÊèèËø∞ÊÄßÁöÑÂêçÁß∞ÔºåË¶ÅÊØîÊèèËø∞ÊÄßÁöÑÈïøÊ≥®ÈáäÂ•Ω ÂáΩÊï∞ÂèÇÊï∞Ôºö ÂèÇÊï∞‰∏çË¶ÅËøáÂ§öÔºàÂ∞ΩÂèØËÉΩÔºâ ÂèÇÊï∞ÂíåÂáΩÊï∞ÂêçÁß∞Â§Ñ‰∫é‰∏çÂêåÁöÑÊäΩË±°Â±ÇÁ∫ßÔºåË¶ÅÊ±Ç‰Ω†‰∫ÜËß£ÁõÆÂâçÂπ∂‰∏çÁâπÂà´ÈáçË¶ÅÁöÑÁªÜËäÇ Ê†áËØÜÂèÇÊï∞‰∏ëÈôã‰∏çÂ†™ÔºåÊÑèÂë≥ÁùÄË¶ÅÂÅö‰∏çÊ≠¢‰∏Ä‰ª∂‰∫ãÊÉÖ Êúâ‰∏§‰∏™ÂèÇÊï∞ÁöÑÂáΩÊï∞Ë¶ÅÊØî‰∏ÄÂÖÉÂáΩÊï∞ÈöæÊáÇ Â∞ëÁî®ÂèÇÊï∞ÂàóË°® Êó†ÂâØ‰ΩúÁî®Ôºö ÊôÆÈÅçËÄåË®ÄÔºåÂ∫îÈÅøÂÖç‰ΩøÁî®ËæìÂá∫ÂèÇÊï∞„ÄÇÂ¶ÇÊûúÂáΩÊï∞ÂøÖÈ°ªË¶Å‰øÆÊîπÊüêÁßçÁä∂ÊÄÅÔºåÂ∞±‰øÆÊîπÊâÄÂ±ûÁöÑÂØπË±°Áä∂ÊÄÅÂêß„ÄÇ ÂàÜÈöîÊåá‰ª§‰∏éËØ¢ÈóÆÔºö ÂáΩÊï∞Ë¶Å‰πàÂÅö‰ªÄ‰πà‰∫ãÊÉÖÔºåË¶Å‰πàÂõûÁ≠î‰ªÄ‰πàÔºå‰∫åËÄÖ‰∏çÂèØÂÖºÂæó ÂáΩÊï∞Â∫îËØ•‰øÆÊîπÂØπË±°ÁöÑÁä∂ÊÄÅÊàñËøîÂõûÂØπË±°ÁöÑÊúâÂÖ≥‰ø°ÊÅØ„ÄÇ ‰ΩøÁî®ÂºÇÂ∏∏Êõø‰ª£ËøîÂõûÁöÑÈîôËØØÁ†ÅÔºö ÊäΩÁ¶ª try/catch ‰ª£Á†ÅÂùó ÂáΩÊï∞Âè™Â∫îËØ•ÂÅö‰∏Ä‰ª∂‰∫ãÔºåÈîôËØØÂ§ÑÁêÜÂ∞±ÊòØ‰∏Ä‰ª∂ Âà´ÈáçÂ§çËá™Â∑±ÔºàDRY)Ôºö ÈáçÂ§çÂèØËÉΩÊòØËΩØ‰ª∂‰∏≠‰∏ÄÂàáÈÇ™ÊÅ∂ÁöÑÊ†πÊ∫ê ÂæàÂ§öÂéüÂàôÂíåÂÆûË∑µËßÑÂàôÈÉΩÊòØ‰∏∫‰∫ÜÊéßÂà∂‰∏éÊ∂àÈô§ÈáçÂ§çËÄåÂàõÂª∫ ÁªìÊûÑÂåñÁºñÁ®ã Âπ∂‰∏çÊòØ‰ªé‰∏ÄÂºÄÂßãÊåâÁÖßËßÑÂàôÂÜôÂáΩÊï∞ÔºåÊ≤°‰∫∫ÂèØ‰ª•ÂÅöÂà∞„ÄÇÂèØ‰ª•‰∏ÄÂºÄÂßãËÆ©ÂáΩÊï∞Â∑•‰ΩúËµ∑Êù•ÔºåÂÜçÂà©Áî®‰∏äÈù¢ÁöÑËßÑËåÉËøõË°å‰ºòÂåñÔºåÂêåÊó∂ÈÖçÂêàÂçïÂÖÉÊµãËØï‰øùËØÅÊ≤°ÊúâÈîôËØØ ÁúüÊ≠£ÁöÑÁõÆÊ†áÂú®‰∫éËÆ≤Ëø∞Á≥ªÁªüÁöÑÊïÖ‰∫ãÔºåÁºñÂÜôÁöÑÂáΩÊï∞ÂøÖÈ°ªÂèØ‰ª•Âπ≤ÂáÄÂà©ËêΩÂú∞ÊãºË£ÖÂú®‰∏ÄÂùóÔºåÂΩ¢Êàê‰∏ÄÁßçÁ≤æÁ°ÆËÄåÊ∏ÖÊô∞ÁöÑËØ≠Ë®ÄÔºåÂ∏Æ‰Ω†ËÆ≤ÊïÖ‰∫ã Ê≥®Èáä Ê≥®ÈáäÊÄªÊòØ‰∏ÄÁßçÂ§±Ë¥•ÔºåÊàë‰ª¨ÊÄªÊó†Ê≥ïÊâæÂà∞‰∏çÁî®Ê≥®ÈáäÂ∞±ËÉΩË°®ËææËá™ÊàëÁöÑÊñπÊ≥ïÔºåÊâÄ‰ª•ÊÄªË¶ÅÊúâÊ≥®ÈáäÔºåÂπ∂‰∏çÂÄºÂæóÂ∫ÜÁ•ù Á®ãÂ∫èÂëò‰∏çËÉΩÂùöÊåÅÁª¥Êä§Ê≥®Èáä ÁúüÊ≠£Â•ΩÁöÑÊ≥®ÈáäÊòØ‰∏çÂÜôÊ≥®ÈáäÔºåÁî®‰ª£Á†ÅË°®Ëææ Â•ΩÁöÑÊ≥®ÈáäÔºö Ê≥ïÂæã‰ø°ÊÅØ Êèê‰æõ‰ø°ÊÅØÁöÑÊ≥®Èáä ÂØπÊÑèÂõæÁöÑËß£Èáä ÈòêÈáä Ë≠¶Á§∫ TODO Ê≥®Èáä ÊîæÂ§ß ÂùèÁöÑÊ≥®ÈáäÔºö ÂñÉÂñÉËá™ËØ≠Ôºö‰ªª‰ΩïËø´‰ΩøËØªËÄÖÊü•ÁúãÂÖ∂ÂÆÉÊ®°ÂùóÁöÑÊ≥®ÈáäÈÉΩÊ≤°ËÉΩ‰∏éËØªËÄÖÊ≤üÈÄöÂ•Ω Â§ö‰ΩôÁöÑÊ≥®Èáä ËØØÂØºÊÄßÊ≥®Èáä Âæ™ËßÑËπàÁü©ÂºèÊ≥®Èáä Êó•ÂøóÂºèÊ≥®Èáä Â∫üËØùÊ≥®Èáä ÂèØÊÄïÁöÑÂ∫üËØù ËÉΩÁî®ÂáΩÊï∞ÊàñÂèòÈáèÊó∂Â∞±Âà´Áî®Ê≥®Èáä ‰ΩçÁΩÆÊ†áËÆ∞ ÂΩíÂ±û‰∏éÁΩ≤ÂêçÔºöÊ∫êÁ†ÅÊéßÂà∂Á≥ªÁªüÂ∑≤ÁªèÂèØ‰ª•ÊêûÂÆö Ê≥®ÈáäÊéâÁöÑ‰ª£Á†Å HTML Ê≥®Èáä ÈùûÊú¨Âú∞‰ø°ÊÅØÔºöÊ≥®ÈáäË¶ÅÈù†Ëøë‰ª£Á†Å ‰ø°ÊÅØËøáÂ§ö ‰∏çÊòéÊòæÁöÑËÅîÁ≥ªÔºöÊ≥®ÈáäË¶ÅËß£Èáä‰ª£Á†Å‰∏≠‰∏çËÉΩËá™Ë°åËß£ÈáäÁöÑÈÉ®ÂàÜÔºå‰∏çË¶ÅËÆ©Ê≥®ÈáäÈúÄË¶Å‰∫åÊ¨°Ëß£Êûê ÂáΩÊï∞Â§¥Ê≥®ÈáäÔºöÁî®Â•ΩÁöÑÂáΩÊï∞ÂêçÁß∞‰ª£Êõø ËåÉ‰æã Ê†ºÂºè ‰ª£Á†ÅÊ†ºÂºèÂæàÈáçË¶Å„ÄÇ‰ª£Á†ÅÊ†ºÂºèÂÖ≥‰πéÊ≤üÈÄöÔºåËÄåÊ≤üÈÄöÊòØ‰∏ì‰∏öÂºÄÂèëÁöÑÂ§¥Á≠âÂ§ß‰∫ã ËÆ©È£éÊ†ºÂíåÂæãÊù°Ê∞∏Â≠ò Áü≠Êñá‰ª∂ÈÄöÂ∏∏ÊØîÈïøÊñá‰ª∂Êòì‰∫éÁêÜËß£ ÂêëÊä•Á∫∏Â≠¶‰π†ÔºöÂæ™Â∫èÊ∏êËøõ Ê¶ÇÂøµÈó¥ÂûÇÁõ¥ÊñπÂêë‰∏äÁöÑÂå∫ÈöîÔºöÁ©∫Ë°å ÂûÇÁõ¥ÊñπÂêë‰∏äÁöÑÈù†ËøëÔºöÁ¥ßÂØÜ‰ª£Á†ÅÁõ∏‰∫íÈù†Ëøë ÂûÇÁõ¥Ë∑ùÁ¶ªÔºöÂÖ≥Á≥ªÂØÜÂàáÁöÑÊ¶ÇÂøµÂ∫îËØ•Áõ∏‰∫íÈù†ËøëÔºåÂ∫îÈÅøÂÖçËØªËÄÖÂú®Ê∫êÊñá‰ª∂ÂíåÁ±ª‰∏≠Ë∑≥Êù•Ë∑≥Âéª ÂèòÈáèÂ£∞ÊòéÔºöÂ∞ΩÂèØËÉΩÈù†Ëøë‰ΩøÁî®‰ΩçÁΩÆ ÂÆû‰ΩìÂèòÈáèÔºöÂ∫îÂú®Á±ªÁöÑÈ°∂ÈÉ®Â£∞Êòé Áõ∏ÂÖ≥ÂáΩÊï∞ÔºöËã•Êüê‰∏™ÂáΩÊï∞Ë∞ÉÁî®‰∫ÜÂè¶‰∏Ä‰∏™ÔºåÂ∞±Â∫îËØ•ÊääÂÆÉ‰ª¨ÊîæÂà∞‰∏ÄËµ∑ÔºåË∞ÉÁî®ËÄÖÂ∫îËØ•Â∞ΩÂèØËÉΩÊîæÂú®Ë¢´Ë∞ÉÁî®ËÄÖ‰∏äËæπ Ê¶ÇÂøµÁõ∏ÂÖ≥ÔºöÊ≠§Á±ª‰ª£Á†ÅÂ∫îÊîæÂú®‰∏ÄËµ∑ÔºåÁõ∏ÂÖ≥ÊÄßË∂äÂº∫ÔºåÂ∫îËØ•Ë∂äÈù†Ëøë ÂûÇÁõ¥È°∫Â∫èÔºöËá™È°∂Âêë‰∏ãÂú∞Â±ïÁé∞Ë∞ÉÁî®‰æùËµñ Ê®™ÂêëÊ†ºÂºèÔºöÂª∫ËÆÆÊØèË°åÁü≠Â∞èÔºå120 ÂàóÂ∞±ÊòØ‰∏äÈôê‰∫Ü Ê∞¥Âπ≥ÊñπÂêë‰∏äÁöÑÂå∫Èöî‰∏éÈù†ËøëÔºö Âä†Á©∫Ê†ºÂàÜÈöî Ê∞¥Âπ≥ÂØπÈΩêÔºö ‰∏çÁî®Â§™ÂàªÊÑèÂÖ≥Ê≥® Áº©ËøõÔºö‰∏ÄÁßçÁªßÊâøÁªìÊûÑÔºå‰ΩìÁé∞‰∏ÄÁßçÂ±ÇÁ∫ßÂÖ≥Á≥ª Á©∫ËåÉÂõ¥ÔºöÂ∫îÂΩìÁº©ËøõÂºÄÊù• Âõ¢ÈòüËßÑÂàôÔºöÈÅµÂÆàÂõ¢ÈòüËßÑÂàô„ÄÇÂ•ΩÁöÑËΩØ‰ª∂Á≥ªÁªüÊòØÁî±‰∏ÄÁ≥ªÂàóËØªËµ∑Êù•‰∏çÈîôÁöÑ‰ª£Á†ÅÊñá‰ª∂ÁªÑÊàêÁöÑ ÂØπË±°ÂíåÊï∞ÊçÆÁªìÊûÑ ÈöêËóèÂÆûÁé∞ÂÖ≥‰πéÊäΩË±°ÔºåÁ±ªÂπ∂‰∏çÊòØÁÆÄÂçïÂú∞Áî®ÂèñÂÄºÂô®ÂíåËµãÂÄºÂô®Â∞ÜÂÖ∂ÂèòÈáèÊé®ÂêëÂ§ñÈó¥ÔºåËÄåÊòØÊö¥Èú≤ÊäΩË±°Êé•Âè£Ôºå‰ª•‰æøÁî®Êà∑Êó†ÈúÄ‰∫ÜËß£Êï∞ÊçÆÁöÑÂÆûÁé∞Â∞±ËÉΩÊìç‰ΩúÊï∞ÊçÆÊú¨‰Ωì Êï∞ÊçÆ„ÄÅÂØπË±°ÂíåÂèçÂØπÁß∞ÊÄßÔºö ÂØπË±°ÊääÊï∞ÊçÆÈöêËóè‰∫éÊäΩË±°‰πãÂêéÔºåÊö¥Èú≤Êìç‰ΩúÊï∞ÊçÆÁöÑÂáΩÊï∞ Êï∞ÊçÆÁªìÊûÑÊö¥Èú≤Êï∞ÊçÆÔºåÊ≤°ÊúâÊèê‰æõÊúâÊÑè‰πâÁöÑÂáΩÊï∞ ËøáÁ®ãÂºè‰ª£Á†ÅÔºà‰ΩøÁî®Êï∞ÊçÆÁªìÊûÑÁöÑ‰ª£Á†ÅÔºâ‰æø‰∫éÂú®‰∏çÊîπÂä®Êó¢ÊúâÊï∞ÊçÆÁªìÊûÑÁöÑÂâçÊèê‰∏ãÊñ∞Â¢ûÂáΩÊï∞„ÄÇÈù¢ÂêëÂØπË±°‰ª£Á†Å‰æø‰∫éÂú®‰∏çÊîπÂä®Êó¢ÊúâÂáΩÊï∞ÁöÑÂâçÊèê‰∏ãÊñ∞Â¢ûÁ±ªÔºåÂèç‰πã‰∫¶ÁÑ∂ ÂØπ‰∫é‰∏§ÁßçÁ±ªÂûãÔºåÂ∫îËØ•Ê†πÊçÆÊÉÖÂÜµËÄÉËôë‰ΩøÁî® ÂæóÂ¢®ÂøíËÄ≥ÂæãÔºöÊ®°Âùó‰∏çÂ∫îËØ•‰∫ÜËß£ÂÆÉÊâÄÊìç‰ΩúÂØπË±°ÁöÑÂÜÖÈÉ®ÊÉÖÂΩ¢ÔºåÊñπÊ≥ï‰∏çÂ∫îË∞ÉÁî®‰ªª‰ΩïÂáΩÊï∞ËøîÂõûÁöÑÂØπË±°ÁöÑÊñπÊ≥ïÔºàÊØîÂ¶ÇÈìæÂºèË∞ÉÁî®Â∞±ËøùÂèç‰∫ÜÔºâ Êï∞ÊçÆ‰º†ÈÄÅÂØπË±°Ôºö ÊúÄ‰∏∫Á≤æÁÇºÁöÑÊï∞ÊçÆÁªìÊûÑÊòØ‰∏Ä‰∏™Âè™ÊúâÂÖ¨ÂÖ±ÂèòÈáè„ÄÅÊ≤°ÊúâÂáΩÊï∞ÁöÑÁ±ªÔºåÂç≥Êï∞ÊçÆ‰º†ÈÄÅÂØπË±°ÔºàDTO, Data Transfer ObjectsÔºâ ÂØπË±°Êö¥Èú≤Ë°å‰∏∫ÔºåÈöêËóèÊï∞ÊçÆ„ÄÇ‰æø‰∫éÊ∑ªÂä†Êñ∞ÂØπË±°Á±ªÂûãËÄåÊó†ÈúÄ‰øÆÊîπÊó¢ÊúâË°å‰∏∫ÔºåÂêåÊó∂‰πüÈöæ‰ª•Âú®Êó¢ÊúâÂØπË±°‰∏≠Ê∑ªÂä†Êñ∞Ë°å‰∏∫ Êï∞ÊçÆÁªìÊûÑÊö¥Èú≤Êï∞ÊçÆÔºåÊ≤°ÊúâÊòéÊòæÁöÑË°å‰∏∫„ÄÇ‰æø‰∫éÂêëÊï∞ÊçÆÁªìÊûÑÊ∑ªÂä†Êñ∞Ë°å‰∏∫ÔºåÂêåÊó∂‰πüÈöæ‰ª•ÂêëÊó¢ÊúâÂáΩÊï∞‰∏≠Ê∑ªÂä†Êñ∞ÁöÑÊï∞ÊçÆÁªìÊûÑ Âú®‰ªª‰ΩïÁ≥ªÁªü‰∏≠Êàë‰ª¨ÊúâÊó∂Â∏åÊúõËÉΩÂ§üÁÅµÊ¥ªÊ∑ªÂä†Êñ∞ÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÊâÄ‰ª•ËøôÈÉ®ÂàÜ‰ΩøÁî®ÂØπË±°„ÄÇÊúâÊó∂Â∏åÊúõÁÅµÊ¥ªÊ∑ªÂä†Êñ∞Ë°å‰∏∫ÔºåËøôÊó∂Êõ¥Â∏åÊúõ‰ΩøÁî®Êï∞ÊçÆÁ±ªÂûãÂíåËøáÁ®ã„ÄÇ‰ºòÁßÄÁöÑÂºÄÂèëËÄÖ‰∏çÂ∏¶ÊàêËßÅÂú∞‰∫ÜËß£Ëøô‰∫õÂΩ¢ÂºèÔºåÊ†πÊçÆÊÉÖÂÜµÈÄâÊã©ÂêàÈÄÇÁöÑÊâãÊÆµ ÈîôËØØÂ§ÑÁêÜÂΩìÈîôËØØÂèëÁîüÊó∂ÔºåÁ®ãÂ∫èÂëòÊúâË¥£‰ªª‰øùËØÅ‰ª£Á†ÅÁÖßÂ∏∏Â∑•‰Ωú„ÄÇÈîôËØØÂ§ÑÁêÜÂæàÈáçË¶ÅÔºåÂ¶ÇÊûúÊêû‰π±‰∫Ü‰ª£Á†ÅÈÄªËæëÔºåÂàôÊòØÈîôËØØÁöÑÂÅöÊ≥ï„ÄÇ ‰ΩøÁî®ÂºÇÂ∏∏ËÄåÈùûËøîÂõûÁ†Å ÂÖàÂÜô try-catch-finally ËØ≠Âè•Ôºö ÂºÇÂ∏∏ÁöÑÂ¶ôÂ§Ñ‰πã‰∏ÄÔºåÂÆÉ‰ª¨Âú®Á®ãÂ∫è‰∏≠ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ËåÉÂõ¥ Â∞ùËØïÁºñÂÜôÂº∫Ë°åÊäõÂá∫ÂºÇÂ∏∏ÁöÑÊµãËØïÔºåÂÜçÂæÄÂ§ÑÁêÜÂô®‰∏≠Ê∑ªÂä†Ë°å‰∏∫Ôºå‰Ωø‰πãÊª°Ë∂≥ÊµãËØïË¶ÅÊ±Ç ‰ΩøÁî®‰∏çÂèØÊéßÂºÇÂ∏∏Ôºö ÂèØÊéßÂºÇÂ∏∏ÁöÑ‰ª£‰ª∑ÊòØËøùÂèç‚ÄúÂºÄÈó≠ÂéüÂàô‚Äù ‰∏ÄËà¨Â∫îÁî®ÂºÄÂèëÔºåÂ∫îËØ•ÈÅøÂÖçÂèØÊéßÂºÇÂ∏∏ ÁªôÂá∫ÂºÇÂ∏∏ÂèëÁîüÁöÑÁéØÂ¢ÉËØ¥ÊòéÔºöÂàõÂª∫‰ø°ÊÅØÂÖÖÂàÜÁöÑÈîôËØØÊ∂àÊÅØÔºåÂπ∂ÂíåÂºÇÂ∏∏‰∏ÄËµ∑‰º†ÈÄíÂá∫Âéª„ÄÇÂú®Ê∂àÊÅØ‰∏≠ÂåÖÊã¨Â§±Ë¥•ÁöÑÊìç‰ΩúÂíåÂ§±Ë¥•ÁöÑÁ±ªÂûã ‰æùË∞ÉÁî®ËÄÖÈúÄË¶ÅÂÆö‰πâÂºÇÂ∏∏Á±ªÔºö ÂÆö‰πâÂºÇÂ∏∏ÔºåËÄÉËôëÂÆÉ‰ª¨Â∫îËØ•Â¶Ç‰ΩïÊçïËé∑ Â∞ÜÁ¨¨‰∏âÊñπ API ÊâìÂåÖÊòØ‰∏™ËâØÂ•ΩÁöÑÂÆûË∑µÊâãÊÆµÔºåÂΩìÊâìÂåÖ‰∏Ä‰∏™Á¨¨‰∏âÊñπ APIÔºåÂ∞±Èôç‰Ωé‰∫ÜÂØπÂÆÉÁöÑ‰æùËµñÔºåÂêåÊó∂Âú®ÊµãËØïÊó∂ÊúâÂä©‰∫éÊ®°ÊãüÁ¨¨‰∏âÊñπË∞ÉÁî® ÂÆö‰πâÂ∏∏ËßÑÊµÅÁ®ãÔºö ÂàõÂª∫‰∏Ä‰∏™Á±ªÊàñÈÖçÁΩÆ‰∏Ä‰∏™ÂØπË±°ÔºåÁî®Êù•Â§ÑÁêÜÁâπ‰æãÔºåÂºÇÂ∏∏Ë°å‰∏∫Â∞ÅË£ÖÂà∞Áâπ‰æãÂØπË±°‰∏≠ ÈÅøÂÖçÊâìÊñ≠‰∏öÂä°ÈÄªËæë ÈÅøÂÖç‰º†ÈÄí None/NULL/nil Á≠âÔºåÂê¶ÂàôÂáΩÊï∞ÈúÄË¶ÅÂÅöÂæàÂ§öÈ¢ùÂ§ñÁöÑÂà§Êñ≠ÔºàÂΩìÁÑ∂ÔºåËøô‰∫õÊòØÂøÖÈ°ªÁöÑÔºâ ËæπÁïåÂ¶Ç‰Ωï‰øùÊåÅËΩØ‰ª∂ËæπÁïåÊï¥Ê¥ÅÔºüËøô‰∏ÄÁ´†ÁªôÂá∫‰∏Ä‰∫õÂÆûË∑µÊâãÊÆµÂíåÊäÄÂ∑ß ‰ΩøÁî®Á¨¨‰∏âÊñπ‰ª£Á†ÅÔºö ËæπÁïå‰∏äÁöÑÊé•Âè£ÊòØÈöêËóèÁöÑ ‰∏çÂ∫îÂ∞ÜÂê´ÊúâËæπÁïåÊé•Âè£ÁöÑÂØπË±°Âà∞Â§Ñ‰º†ÈÄíÔºåÂ∫îÂΩìÊääÂÆÉ‰øùÁïôÂú®Á±ªÊàñËøë‰∫≤Á±ª‰∏≠ Â≠¶‰π†ÊÄßÊµãËØïÁöÑÂ•ΩÂ§Ñ‰∏çÂè™ÊòØÂÖçË¥πÔºö Êó†ËÆ∫Â¶Ç‰ΩïÈÉΩË¶ÅÂ≠¶‰π†‰ΩøÁî® APIÔºåËÄåÁºñÂÜôÊµãËØïÊòØËé∑ÂæóËøô‰∫õÁü•ËØÜÁöÑÂÆπÊòìËÄå‰∏çÂΩ±ÂìçÂÖ∂‰ªñÂ∑•‰ΩúÁöÑÈÄîÂæÑ Â≠¶‰π†ÊÄßÊµãËØïÊòØ‰∏ÄÁßçÁ≤æÁ°ÆÂÆûÈ™åÔºåÂ∏ÆÂä©Êàë‰ª¨Èòü API ÁöÑÁêÜËß£ ‰ΩøÁî®Â∞ö‰∏çÂ≠òÂú®ÁöÑ‰ª£Á†ÅÔºö ËøòÊúâ‰∏ÄÁßçËæπÁïåÔºåÂ∞ÜÂ∑≤Áü•Âíå‰ΩçÁΩÆÂàÜÈöîÂºÄÁöÑËæπÁïå Fake Âíå Adapter Êï¥Ê¥ÅÁöÑËæπÁïåÔºö ËæπÁïå‰∏äÁöÑ‰ª£Á†ÅÈúÄË¶ÅÊ∏ÖÊô∞Âú∞ÂàÜÂâ≤ÂíåÂÆö‰πâÊúüÊúõÁöÑÊµãËØï„ÄÇÂ∫îËØ•ÈÅøÂÖçÊàë‰ª¨ÁöÑ‰ª£Á†ÅËøáÂ§ö‰∫ÜËß£Á¨¨‰∏âÊñπ‰ª£Á†ÅÁöÑÁâπÂÆö‰ø°ÊÅØ ‰æùÈù†‰Ω†ËÉΩÊéßÂà∂ÁöÑ‰∏úË•øÔºåÂ•ΩËøá‰æùÈù†‰Ω†ÊéßÂà∂‰∏ç‰∫ÜÁöÑ‰∏úË•ø ÂèØ‰ª•ÈááÁî®ÂÜÖÈÉ®ÈöêËóèËæπÁïåÊé•Âè£ÊàñËÄÖ‰ΩøÁî®ÈÄÇÈÖçÊ®°Âºè‰øùÊåÅËæπÁïåÊï¥Ê¥ÅÔºå‰ªéËÄåÂáèÂ∞ëÊé•Âè£ÁöÑ‰øÆÊîπ ÂçïÂÖÉÊµãËØï TDD ‰∏âÂÆöÂæãÔºö Âú®ÁºñÂÜô‰∏çËÉΩÈÄöËøáÁöÑÂçïÂÖÉÊµãËØïÂâçÔºå‰∏çÂèØÁºñÂÜôÁîü‰∫ß‰ª£Á†Å Âè™ÂèØÁºñÂÜôÂàöÂ•ΩÊó†Ê≥ïÈÄöËøáÁöÑÂçïÂÖÉÊµãËØïÔºå‰∏çËÉΩÁºñËØë‰πüÁÆó‰∏çÈÄöËøá Âè™ÁºñÂÜôÂàöÂ•ΩÂèØ‰ª•ÈÄöËøáÂΩìÂâçÂ§±Ë¥•ÊµãËØïÁöÑÁîü‰∫ß‰ª£Á†Å ‰øùÊåÅÊï¥Ê¥ÅÁöÑÊµãËØïÔºö ËÇÆËÑèÁöÑÊµãËØïÁ≠âÂêå‰∫éÊ≤°ÊúâÊµãËØï ÊµãËØïÂøÖÈ°ªË∑üÈöèÁîü‰∫ß‰ª£Á†Å‰øÆÊîπ ÊµãËØï‰ª£Á†ÅÂíåÁîüÊàê‰ª£Á†Å‰∏ÄÊ†∑ÈáçË¶ÅÔºåÈúÄË¶Å‰ªîÁªÜÊÄùËÄÉ„ÄÅËÆæËÆ°ÂíåÁÖßÊñôÔºå‰øùÊåÅÊï¥Ê¥Å Ê≠£ÊòØÂçïÂÖÉÊµãËØïËÆ©‰Ω†ÁöÑ‰ª£Á†ÅÂèØÊâ©Â±ï„ÄÅÂèØÁª¥Êä§„ÄÅÂèØÂ§çÁî® ÊµãËØïÂ∏¶Êù•‰∫Ü‰∏ÄÂàáÂ•ΩÂ§ÑÔºå‰ΩøÂèòÂä®Êàê‰∏∫ÂèØËÉΩ ÊµãËØïË∂äËÑèÔºå‰ª£Á†ÅÊúÄÁªà‰ºöË∂äËÑè Êï¥Ê¥ÅÁöÑÊµãËØïÔºö ÂèØËØªÊÄß ÊûÑÈÄ†-Êìç‰Ωú-Ê£ÄÈ™åÔºàBUILD-OPERATE-CHECK)Ê®°Âºè ÊµãËØïÁõ¥ËææÁõÆÁöÑÔºåÂè™Áî®ÁúüÊ≠£ÈúÄË¶ÅÁöÑÊï∞ÊçÆÁ±ªÂûãÂíåÂáΩÊï∞ ‰∏ì‰∏öÁöÑÂºÄÂèëËÄÖÂ∞Ü‰ªñ‰ª¨ÁöÑÊµãËØï‰ª£Á†ÅÈáçÊûÑ‰∏∫ÁÆÄÊ¥ÅÂíåÂÖ∑ÊúâË°®ËææÂäõÁöÑÂΩ¢Âºè ÊØè‰∏™ÊµãËØï‰∏Ä‰∏™Êñ≠Ë®ÄÔºö ÊØè‰∏™ÊµãËØïÊó∂‰∏Ä‰∏™Ê¶ÇÂøµ FIRSTÔºö Âø´ÈÄü FastÔºöËÉΩÂ§üÈ¢ëÁπÅËøêË°å Áã¨Á´ã IndependentÔºöÊüê‰∏™ÊµãËØï‰∏çÂ∫î‰∏∫‰∏ã‰∏Ä‰∏™ÊµãËØïËÆæÂÆöÊù°‰ª∂ ÂèØÈáçÂ§ç RepeatableÔºöÊµãËØïÂ∫îÂΩìÂèØ‰ª•Âú®‰ªª‰ΩïÁéØÂ¢É‰∏≠ÈáçÂ§çÈÄöËøá Ëá™Ë∂≥È™åËØÅ Self-ValidatingÔºöÊµãËØïÂ∫îÊúâÂ∏ÉÂ∞îÂÄºËæìÂá∫ÔºåÂèØ‰ª•Áõ¥Êé•ÂèçÈ¶àÊµãËØïÁªìÊûú ÂèäÊó∂ TimelyÔºöÊµãËØïÂ∫îÂèäÊó∂ÁºñÂÜô ÊàñËÆ∏ÊµãËØïÊõ¥‰∏∫ÈáçË¶ÅÔºåÂÆÉ‰øùËØÅÂíåÂ¢ûÂº∫‰∫ÜÁîü‰∫ß‰ª£Á†ÅÁöÑÂèØÊâ©Â±ïÊÄß„ÄÅÂèØÁª¥Êä§ÊÄßÂíåÂèØÂ§çÁî®ÊÄß Á±ª Á±ªÁöÑÁªÑÁªáÔºö ÂÖ¨ÂÖ±ÂáΩÊï∞Â∫îË∑üÂú®ÂèòÈáèÂàóË°®‰πãÂêéÔºåÊàë‰ª¨ÂñúÊ¨¢ÊääÁî±Êüê‰∏™ÂÖ¨ÂÖ±ÂáΩÊï∞Ë∞ÉÁî®ÁöÑÁßÅÊúâÂ∑•ÂÖ∑ÂáΩÊï∞Á¥ßÈöèÂú®ËØ•ÂÖ¨ÂÖ±ÂáΩÊï∞ÁöÑÂêéÈù¢ÔºåÁ¨¶ÂêàËá™È°∂Âêë‰∏ãÁöÑÂéüÂàô Á±ªÂ∫îËØ•Áü≠Â∞èÔºö ËÆ°ÁÆó„ÄåÊùÉË¥£ responsibility„ÄçË°°ÈáèÁ±ªÂ§ßÂ∞è Á±ªÁöÑÂêçÁß∞Â∫îÂΩìÊèèËø∞ÊùÉË¥£ÔºåÂ¶ÇÊûúÊó†Ê≥ï‰∏∫Êüê‰∏™Á±ªÂëΩÂêç‰ª•Á≤æÁ°ÆÁöÑÂêçÁß∞ÔºåËøô‰∏™Á±ªÂ§ßÊ¶ÇÂ∞±Â§™Èïø‰∫Ü Âçï‰∏ÄÊùÉË¥£ÂéüÂàôÔºàSRP)ÔºöÁ±ªÊàñÊ®°ÂùóÂ∫îËØ•Êúâ‰∏îÂè™Êúâ‰∏ÄÊù°Âä†‰ª•‰øÆÊîπÁöÑÁêÜÁî± Á≥ªÁªüÂ∫îËØ•Áî±ËÆ∏Â§öÁü≠Â∞èÁöÑÁ±ªËÄåÈùûÂ∞ëÈáèÂ∑®Â§ßÁöÑÁ±ªÁªÑÊàê„ÄÇÊØè‰∏™Â∞èÁ±ªÂ∞ÅË£Ö‰∏Ä‰∏™ÊùÉË¥£ÔºåÂè™Êúâ‰∏Ä‰∏™‰øÆÊîπÁöÑÂéüÂõ†ÔºåÂπ∂‰∏éÂ∞ëÊï∞ÂÖ∂‰ªñÁ±ª‰∏ÄËµ∑ÂçèÂêåËææÊàêÊúüÊúõÁöÑÁ≥ªÁªüË°å‰∏∫ ÂÜÖËÅöÔºöÁ±ªÂ∫îËØ•Âè™ÊúâÂ∞ëÈáèÁöÑÂÆû‰ΩìÂèòÈáèÔºåÁ±ª‰∏≠ÁöÑÊØè‰∏™ÊñπÊ≥ïÈÉΩÂ∫îËØ•Êìç‰Ωú‰∏Ä‰∏™ÊàñÂ§ö‰∏™ËøôÁßçÂèòÈáè ‰øùÊåÅÂÜÖËÅö‰ºöÂæóÂà∞ËÆ∏Â§öÁü≠Â∞èÁöÑÁ±ª Âú®ÁêÜÊÉ≥Á≥ªÁªü‰∏≠ÔºåÊàë‰ª¨ÈÄöËøáÊâ©Â±ïËÄåÈùû‰øÆÊîπÁé∞ÊúâÁ≥ªÁªüÁöÑÊñπÂºèÊ∑ªÂä†Êñ∞ÁâπÊÄß ÈÉ®‰ª∂‰πãÈó¥ÁöÑËß£ËÄ¶‰ª£Ë°®Á≥ªÁªü‰∏≠ÁöÑÂÖÉÁ¥†Áõ∏‰∫íÈöîÁ¶ªÁöÑÂæàÂ•ΩÔºåÈöîÁ¶ª‰πüËÆ©Á≥ªÁªüÊØè‰∏™ÂÖÉÁ¥†ÁöÑÁêÜËß£ÂèòÂæóÊõ¥Âä†ÂÆπÊòì ‰æùËµñÂÄíÁΩÆÂéü(DIP)Ôºö‰æùËµñ‰∫éÊäΩË±°ËÄåÈùûÂÆûÁé∞ÁöÑÁªÜËäÇ Á≥ªÁªüÔºàÂÅè JavaÔºâ‚ÄúÂ§çÊùÇË¶Å‰∫∫ÂëΩ„ÄÇÂÆÉÊ∂àÁ£®ÂºÄÂèëËÄÖÁöÑÁîüÂëΩÔºåËÆ©‰∫ßÂìÅÈöæ‰ª•ËßÑÂàí„ÄÅÊûÑÂª∫ÂíåÊµãËØï‚Äù‚Äî‚Äî Ray OzzieÔºåÂæÆËΩØÈ¶ñÂ∏≠ÊäÄÊúØÂÆò ÂüéÂ∏ÇÁÆ°ÁêÜÔºöÊúâ‰∫∫Ë¥üË¥£ÂÖ®Â±ÄÔºåÊúâ‰∫∫Ë¥üË¥£Â±ÄÈÉ® Â∞ÜÁ≥ªÁªüÁöÑÊûÑÈÄ†Âíå‰ΩøÁî®ÂàÜÂºÄÔºö ‚ÄúËΩØ‰ª∂Á≥ªÁªüÂ∫îÂ∞ÜËµ∑ÂßãËøáÁ®ãÂíåËµ∑ÂßãËøáÁ®ã‰πãÂêéÁöÑËøêË°åÊó∂ÈÄªËæëÂàÜÁ¶ªÂºÄÔºåÂú®Ëµ∑ÂßãËøáÁ®ã‰∏≠ÊûÑÂª∫Â∫îÁî®ÂØπË±°Ôºå‰πü‰ºöÂ≠òÂú®‰∫íÁõ∏Á∫†Áº†ÁöÑ‰æùËµñÂÖ≥Á≥ª‚Äù ÂàÜËß£ main Â∑•ÂéÇ ‰æùËµñÊ≥®ÂÖ•ÔºöÊéßÂà∂ÂèçËΩ¨Âú®‰æùËµñÁÆ°ÁêÜ‰∏≠ÁöÑ‰∏ÄÁßçÂ∫îÁî®ÊâãÊÆµ Êâ©ÂÆπÔºö ‚Äú‰∏ÄÂºÄÂßãÂ∞±ÂÅöÂØπÁ≥ªÁªü‚ÄùÁ∫ØÂ±ûÁ•ûËØù ÊµãËØïÈ©±Âä®ÂºÄÂèë„ÄÅËø≠‰ª£ÂíåÂ¢ûÈáèÊïèÊç∑Êâ©Â±ïÁ≥ªÁªü Â∞èÊ≠•Âø´Ë∑ëÔºöËø≠‰ª£ ÈÄöËøáËø≠‰ª£ÂíåÊîπËøõËÆæËÆ°ËææÂà∞Êï¥Ê¥ÅÁõÆÁöÑÔºàKent Beck ÁöÑÁÆÄÂçïËÆæËÆ°ËßÑÂàôÔºâÔºö ËøêË°åÊâÄÊúâÊµãËØï ‰∏çÂèØÈáçÂ§ç Ë°®Ëææ‰∫ÜÁ®ãÂ∫èÂëòÁöÑÊÑèÂõæ Â∞ΩÂèØËÉΩÂáèÂ∞ëÁ±ªÂíåÊñπÊ≥ïÁöÑÊï∞Èáè ‰ª•‰∏äËßÑÂàôÊåâÈáçË¶ÅÁ®ãÂ∫¶ÊéíÂ∫è ÁÆÄÂçïËÆæËÆ°ËßÑÂàô 1ÔºöËøêË°åÊâÄÊúâÊµãËØïÔºö ÂÖ®Èù¢ÊµãËØïÂπ∂ÊåÅÁª≠ÈÄöËøáÊâÄÊúâÊµãËØïÁöÑÁ≥ªÁªüÔºåÂ∞±ÊòØÂèØÊµãËØïÁöÑÁ≥ªÁªü ‰∏çÂèØÊµãËØïÁöÑÁ≥ªÁªü‰∏çÂèØÈ™åËØÅÔºå‰∏çÂèØÈ™åËØÅÁöÑÁ≥ªÁªüÔºå‰∏çÂèØÈÉ®ÁΩ≤ Á¥ßËÄ¶ÂêàÁöÑ‰ª£Á†ÅÈöæ‰ª•ÁºñÂÜôÊµãËØïÔºåÂêåÊ†∑ÁºñÂÜôÊµãËØïË∂äÂ§öÔºåÂ∞±Ë∂ä‰ºöÈÅµÂæ™ DIP ‰πãÁ±ªËßÑÂàô ÈÅµÂæ™ÊúâÂÖ≥ÁºñÂÜôÊµãËØïÂπ∂ÊåÅÁª≠ËøêË°åÊµãËØïÁöÑÁÆÄÂçï„ÄÅÊòéÁ°ÆÁöÑËßÑÂàíÔºåÁ≥ªÁªüÂ∞±‰ºöÊõ¥Ë¥¥Ëøë OO ‰ΩéËÄ¶ÂêàÂ∫¶„ÄÅÈ´òÂÜÖËÅöÂ∫¶ÁöÑÁõÆÊ†áÔºåÁºñÂÜôÊµãËØïÂºïËá¥Êõ¥Â•ΩÁöÑËÆæËÆ° ÁÆÄÂçïËÆæËÆ°ËßÑÂàô 2~4ÔºöÈáçÊûÑÔºö ÊµãËØïÊ∂àÈô§‰∫ÜÂØπÊ∏ÖÁêÜ‰ª£Á†ÅÂ∞±‰ºöÁ†¥Âùè‰ª£Á†ÅÁöÑÊÅêÊÉß Â¢ûÈáèÂºèÈáçÊûÑÊîπÂñÑ‰ª£Á†Å ÊèêÂçáÂÜÖËÅöÊÄß„ÄÅÈôç‰ΩéËÄ¶ÂêàÂ∫¶„ÄÅÂàáÂàÜÂÖ≥Ê≥®Èù¢„ÄÅÊ®°ÂùóÂåñÁ≥ªÁªüÊÄßÂÖ≥Ê≥®Èù¢„ÄÅÁº©Â∞èÂáΩÊï∞ÂíåÁ±ªÁöÑÂ∞∫ÂØ∏„ÄÅÈÄâÁî®Êõ¥Â•ΩÁöÑÂêçÁß∞Á≠â ‰∏çÂèØÈáçÂ§çÔºö ÈáçÂ§çÂåÖÊã¨ÂΩ¢Âºè‰∏äÂíåÂÆûÁé∞‰∏äÁöÑÈáçÂ§ç Ê®°ÊùøÊñπÊ≥ïÊ®°ÂºèÊòØ‰∏ÄÁßçÁßªÈô§È´òÂ±ÇÈáçÂ§çÁöÑÈÄöÁî®ÊäÄÂ∑ß Ë°®ËææÂäõÔºö ËΩØ‰ª∂È°πÁõÆÁöÑ‰∏ªË¶ÅÊàêÊú¨Âú®‰∫éÈïøÊúüÁª¥Êä§ ÈÄâÁî®Â•ΩÁöÑÂêçÁß∞ ‰øùÊåÅÂáΩÊï∞ÂíåÁ±ªÂ∞∫ÂØ∏Áü≠Â∞è ÈááÁî®Ê†áÂáÜÂëΩÂêçÊ≥ï ÁºñÂÜôËâØÂ•ΩÁöÑÂçïÂÖÉÊµãËØï ÂÅöÂà∞ÊúâË°®Â∏¶ÊúÄÈáçË¶ÅÁöÑÊòØÂ∞ùËØïÔºåÂ§™Â§öÊó∂ÂÄôÊàë‰ª¨ÂÜôÂá∫ËÉΩÂ∑•‰ΩúÁöÑ‰ª£Á†ÅÔºåÂ∞±ËΩ¨ÁßªÂà∞‰∏ã‰∏Ä‰∏™ÈóÆÈ¢òÔºåÊ≤°Êúâ‰∏ãË∂≥ÂäüÂ§´Ë∞ÉÊï¥ Â∞ΩÂèØËÉΩÂáèÂ∞ëÁ±ªÂíåÊñπÊ≥ïÔºö Á±ªÂíåÊñπÊ≥ïÁöÑÊï∞ÈáèÂ§™Â§öÔºåÊúâÊó∂ÂÄôÊòØÁî±ÊØ´Êó†ÊÑè‰πâÁöÑÊïôÊù°‰∏ª‰πâÂØºËá¥ÁöÑ ‰øùÊåÅÂáΩÊï∞ÂíåÁ±ªÁü≠Â∞èÁöÑÂêåÊó∂Ôºå‰øùÊåÅÊï¥‰∏™Á≥ªÁªüÁü≠Â∞èÁ≤æÊÇç ÈÅµÂæ™ÁÆÄÂçïËÆæËÆ°ÁöÑÂÆûË∑µÊâãÊÆµÔºåÂºÄÂèëËÄÖ‰∏çÂøÖÂπ¥ËΩªÂ≠¶‰π†Â∞±ËÉΩÊéåÊè°Â•ΩÁöÑÂéüÂàôÂíåÊ®°Âºè Âπ∂ÂèëÁºñÁ®ã‚ÄúÂØπË±°ÊòØÂØπËøáÁ®ãÁöÑÊäΩË±°ÔºåÁ∫øÁ®ãÊòØÂØπË∞ÉÂ∫¶ÁöÑÊäΩË±°‚Äù ‰∏∫‰ªÄ‰πàË¶ÅÂπ∂ÂèëÔºö Âπ∂ÂèëÊòØ‰∏ÄÁßçËß£ËÄ¶Á≠ñÁï•ÔºåÊääÂÅö‰ªÄ‰πàÔºàÁõÆÁöÑÔºâÂíå‰ΩïÊó∂ÔºàÊó∂Êú∫ÔºâÂàÜÂºÄ Ëß£ËÄ¶ÁõÆÁöÑ‰∏éÊó∂Êú∫ËÉΩÊòéÊòæÂú∞ÊîπËøõÂ∫îÁî®Á®ãÂ∫èÁöÑÂêûÂêêÈáèÂíåÁªìÊûÑ ËØØÂå∫Ôºö Âπ∂ÂèëÊÄªËÉΩÊîπËøõÊÄßËÉΩ ÁºñÂÜôÂπ∂ÂèëÁ®ãÂ∫èÊó†ÈúÄ‰øÆÊîπËÆæËÆ° ÂÆûÈôÖÔºö Âπ∂Âèë‰ºöÂú®ÊÄßËÉΩÂíåÁºñÂÜôÈ¢ùÂ§ñ‰ª£Á†Å‰∏äÂ¢ûÂä†È¢ùÂ§ñ‰∏Ä‰∫õÂºÄÈîÄ Ê≠£Á°ÆÁöÑÂπ∂ÂèëÊòØÂ§çÊùÇÁöÑÔºåÂá†ÈÅçÂØπ‰∫éÁÆÄÂçïÁöÑÈóÆÈ¢ò‰πüÊòØÂ¶ÇÊ≠§ Âπ∂ÂèëÁº∫Èô∑Âπ∂ÈùûÊÄªËÉΩÈáçÁé∞ Âπ∂ÂèëÂ∏∏Â∏∏ÈúÄË¶ÅÂØπËÆæËÆ°Á≠ñÁï•ÁöÑÊ†πÊú¨ÊÄß‰øÆÊîπ Âπ∂ÂèëÈò≤Âæ°ÂéüÂàôÔºö Âçï‰∏ÄÊùÉË¥£ÂéüÂàôÔºö ÂàÜÁ¶ªÂπ∂ÂèëÁõ∏ÂÖ≥ÁöÑ‰ª£Á†ÅÂíåÂÖ∂ÂÆÉ‰ª£Á†Å Êé®ËÆ∫ÔºöÈôêÂà∂Êï∞ÊçÆ‰ΩúÁî®ÂüüÔºö ‰øùÊä§‰∏¥ÁïåÂå∫ÂÖ±‰∫´ÂØπË±° Ë∞®ËÆ∞Êï∞ÊçÆÂ∞ÅË£ÖÔºå‰∏•Ê†ºÈôêÂà∂ÂØπÂèØËÉΩË¢´ÂÖ±‰∫´ÁöÑÊï∞ÊçÆÁöÑËÆøÈóÆ Êé®ËÆ∫Ôºö‰ΩøÁî®Êï∞ÊçÆÂâØÊú¨ Êé®ËÆ∫ÔºöÁ∫øÁ®ãÂ∫îÂ∞ΩÂèØËÉΩÁã¨Á´ãÔºöÂ∞ùËØïÂ∞ÜÊï∞ÊçÆÂàÜËß£Âà∞ÂèØË¢´Áã¨Á´ãÁ∫øÁ®ãÔºàÂèØËÉΩ‰∏çÂêåÁöÑÊúçÂä°Âô®‰∏äÔºâÊìç‰ΩúÁöÑÁã¨Á´ãÂ≠êÈõÜ ‰∫ÜËß£ÊâßË°åÊ®°ÂûãÔºö Âá†ÁßçÊ¶ÇÂøµÔºö ÈôêÂÆöËµÑÊ∫ê ‰∫íÊñ• Á∫øÁ®ãÈ••È•ø Ê≠ªÈîÅ Ê¥ªÈîÅÔºöÊâßË°åÊ¨°Â∫è‰∏ÄËá¥ÁöÑÁ∫øÁ®ãÔºåÊØè‰∏™ÈÉΩÊÉ≥Ëµ∑Ê≠•Ôºå‰ΩÜÂèëÁé∞ÂÖ∂‰ªñÁ∫øÁ®ãÂ∑≤ÁªèÂú®Ë∑Ø‰∏ä Áîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÊ®°ÂûãÔºö‰∏≠Èó¥ÈòüÂàóÊòØÈôêÂÆöËµÑÊ∫ê ËØªËÄÖ-ÂÜôÁùÄÊ®°Âûã ÂÆ¥Â∏≠Âì≤Â≠¶ÂÆ∂ ‰øùÊåÅÂêåÊ≠•Âå∫ÂüüÂæÆÂ∞èÔºöÂ∞ΩÂèØËÉΩÂáèÂ∞ëÂêåÊ≠•Âå∫ÂüüÔºåÂê¶Âàô‰ºöÂ¢ûÂä†ËµÑÊ∫êÁ´û‰∫âÔºåÊâßË°åÊïàÁéáÈôç‰Ωé Â∞ΩÊó©ËÄÉËôëÂÖ≥Èó≠ÈóÆÈ¢òÔºåÂ∞ΩÊó©‰ª§ÂÖ∂Ê≠£Â∏∏Â∑•‰Ωú ÊµãËØïÁ∫øÁ®ã‰ª£Á†ÅÔºö Âª∫ËÆÆÁºñÂÜôÊúâÊΩúÂäõÊö¥Èú≤ÈóÆÈ¢òÁöÑÊµãËØïÔºåÂú®‰∏çÂêåÁöÑÈÖçÁΩÆÂíåË¥üËΩΩ‰∏ãÈ¢ëÁπÅËøêË°å„ÄÇÂ¶ÇÊûúÊµãËØïÂ§±Ë¥•ÔºåÂàôË∑üË∏™ÈîôËØØ Â∞Ü‰º™Â§±Ë¥•ÁúãÂÅöÂèØËÉΩÁöÑÁ∫øÁ®ãÈóÆÈ¢ò ÂÖà‰ΩøÁî®ÂçïÁ∫øÁ®ã‰ª£Á†ÅÂèØÂ∑•‰Ωú ÁºñÂÜôÂèØÊèíÊãîÁöÑÁ∫øÁ®ã‰ª£Á†Å ÁºñÂÜôÂèØË∞ÉÊï¥ÁöÑÁ∫øÁ®ã‰ª£Á†Å ËøêË°åÂ§ö‰∫éÂ§ÑÁêÜÂô®Êï∞ÈáèÁöÑÁ∫øÁ®ã Âú®‰∏çÂêåÂπ≥Âè∞‰∏äËøêË°å Ë∞ÉÊï¥‰ª£Á†ÅÂπ∂Âº∫Ëø´ÂèëÁîüÈîôËØØ ‰∏çË¶ÅÂ∞ÜÁ≥ªÁªüÈîôËØØÂΩíÂíé‰∫éÂÅ∂Âèë‰∫ã‰ª∂ ‰ªªÂä°‰∫§Êç¢Ë∂äÈ¢ëÁπÅÔºåË∂äÊúâÂèØËÉΩÊâæÂà∞ÈîôËøá‰∏¥ÁïåÂå∫ÊàñÂØºËá¥Ê≠ªÈîÅÁöÑ‰ª£Á†Å Code Smell &amp; Inspiration Ê≥®ÈáäÔºö ‰∏çÊÅ∞ÂΩìÁöÑÊ≥®Èáä Â∫üÂºÉÁöÑÊ≥®Èáä ÂÜó‰ΩôÁöÑÊ≥®Èáä Á≥üÁ≥ïÁöÑÊ≥®Èáä Ê≥®ÈáäÊéâÁöÑ‰ª£Á†Å ÁéØÂ¢ÉÔºö ÈúÄË¶ÅÂ§öÊ≠•ÊâçËÉΩÂÆûÁé∞ÁöÑÊûÑÂª∫ÔºöÊûÑÂª∫Á≥ªÁªüÂ∫îËØ•ÊòØÂçïÊ≠•ÁöÑÂ∞èÊìç‰Ωú ÈúÄË¶ÅÂ§öÊ≠•ÊâçËÉΩÂÅöÂà∞ÁöÑÊµãËØïÔºöÂ∫îËØ•ËÉΩÂø´ÈÄüËøêË°åÂçïÂÖÉÊµãËØï ÂáΩÊï∞Ôºö ËøáÂ§öÁöÑÂèÇÊï∞ ËæìÂá∫ÂèÇÊï∞ Ê†áÂøóÂèÇÊï∞ Ê≠ªÂáΩÊï∞ ‰∏ÄËà¨ÊÄßÈóÆÈ¢òÔºö ‰∏Ä‰∏™Ê∫êÊñá‰ª∂‰∏≠Â≠òÂú®Â§öÁßçËØ≠Ë®ÄÔºöÂ∫îÂ∞ΩÂäõÂáèÂ∞ëÊ∫êÊñá‰ª∂‰∏≠È¢ùÂ§ñËØ≠Ë®ÄÁöÑÊï∞ÈáèÂíåËåÉÂõ¥ ÊòéÊòæÁöÑË°å‰∏∫Êú™ÂÆûÁé∞ÔºöÂ∫îÈÅµÂæ™‚ÄúÊúÄÂ∞èÊÉäËÆ∂ÂéüÂàô‚Äù ‰∏çÊ≠£Á°ÆÁöÑËæπÁïåË°å‰∏∫ ÂøΩËßÜÂÆâÂÖ® ÈáçÂ§ç Âú®ÈîôËØØÁöÑÊäΩË±°Â±ÇÁ∫ß‰∏äÁöÑ‰ª£Á†ÅÔºö ÂàõÂª∫ÂàÜÁ¶ªËæÉÈ´òÂ±Ç‰∏ÄËà¨ÊÄßÊ¶ÇÂøµ‰∏éËæÉ‰ΩéÂ±ÇÁªÜËäÇÊ¶ÇÂøµÁöÑÊäΩË±°Ê®°ÂûãÂæàÈáçË¶Å Â≠§Á´ãÊäΩË±°ÊòØËΩØ‰ª∂ÂºÄÂèëËÄÖÊúÄÈöæÂÅöÂà∞ÁöÑ‰∫ãÊÉÖ‰πã‰∏ÄÔºåËÄå‰∏î‰∏ÄÊó¶ÂÅöÈîô‰πüÊ≤°ÊúâÂø´Êç∑ÁöÑ‰øÆÂ§çÊâãÊÆµ Âü∫Á±ª‰æùËµñ‰∫éÊ¥æÁîüÁ±ªÔºöÈÄöÂ∏∏Âü∫Á±ªÂØπÊ¥æÁîüÁ±ª‰∏ÄÊó†ÊâÄÁü• ‰ø°ÊÅØËøáÂ§öÔºö ËâØÂ•ΩËÆæËÆ°ÁöÑÊ®°ÂùóÊúâÈùûÂ∏∏Â∞èÁöÑÊé•Âè£ ‰ºòÁßÄÂºÄÂèëËÄÖÂ∫îËØ•ÈôêÂà∂Á±ªÊàñËÄÖÊ®°Âùó‰∏≠Êö¥Èú≤ÁöÑÊé•Âè£Êï∞Èáè ÈöêËóèÊï∞ÊçÆ„ÄÅÂ∑•ÂÖ∑ÂáΩÊï∞„ÄÅÂ∏∏Èáè„ÄÅ‰∏¥Êó∂ÂèòÈáè Ê≠ª‰ª£Á†ÅÔºöÊ≠ª‰ª£Á†Å‰ºöÂèòËá≠ ÂûÇÁõ¥ÂàÜÁ¶ªÔºö ÂèòÈáèÂíåÂáΩÊï∞Â∫îËØ•Èù†ËøëË¢´‰ΩøÁî®ÁöÑÂú∞ÊñπÂÆö‰πâ ÁßÅÊúâÂáΩÊï∞Â∫îËØ•ÂàöÂ•ΩÂú®ÂÖ∂È¶ñÊ¨°Ë¢´‰ΩøÁî®ÁöÑ‰ΩçÁΩÆ‰∏ãÈù¢ÂÆö‰πâ ÂâçÂêé‰∏ç‰∏ÄËá¥ Ê∑∑Ê∑ÜËßÜÂê¨Ôºö Ê≤°ÊúâÁî®Âà∞ÁöÑÂèòÈáè„ÄÅÂáΩÊï∞„ÄÅÊ≥®ÈáäÁ≠âÈÉΩË¶ÅÁßªÈô§ ‰øùÊåÅÊñá‰ª∂Êï¥Ê¥Å„ÄÅËâØÂ•ΩÁªÑÁªá ‰∫∫‰∏∫ËÄ¶ÂêàÔºö‰∫∫‰∏∫ËÄ¶ÂêàÊòØÊåá‰∏§‰∏™Ê≤°ÊúâÁõ¥Êé•ÁõÆÁöÑÁöÑÊ®°ÂùóÁöÑËÄ¶Âêà ÁâπÊÄß‰æùÊÅãÔºöÁ±ªÁöÑÊñπÊ≥ïÂè™Â∫îÂØπÂÖ∂ÊâÄÂ±ûÁ±ªÁöÑÂèòÈáèÂíåÂáΩÊï∞ÊÑüÂÖ¥Ë∂£Ôºå‰∏çÂ∫îËØ•ÂûÇÈùíÂÖ∂‰ªñÁ±ª‰∏≠ÁöÑÂèòÈáèÂíåÂáΩÊï∞ ÈÄâÊã©Ê†áÂøóÂèÇÊï∞ÔºöÈÄâÊã©Ê†áÂøóÂèÇÊï∞Âè™ÊòØ‰∏ÄÁßçÈÅøÂÖçÊääÂ§ßÂáΩÊï∞ÂàáÂàÜÊàêÂ∞èÂáΩÊï∞ÂÅ∑ÊáíÁöÑÂÅöÊ≥ï Êô¶Ê∂©ÁöÑÊÑèÂõæ ‰ΩçÁΩÆÈîôËØØÁöÑÊùÉË¥£ ‰∏çÊÅ∞ÂΩìÁöÑÈùôÊÄÅÊñπÊ≥ï ‰ΩøÁî®Ëß£ÈáäÊÄßÂèòÈáè ÂáΩÊï∞ÂêçÁß∞Â∫îËØ•Ë°®ËææÂÖ∂Ë°å‰∏∫ ÁêÜËß£ÁÆóÊ≥ï ÊääÈÄªËæë‰æùËµñÊîπ‰∏∫Áâ©ÁêÜ‰æùËµñ Áî®Â§öÊÄÅÊõøÊç¢ if/else ÈÅµÂæ™Á∫¶ÂÆöÊ†áÂáÜ Áî®ÂëΩÂêçÂ∏∏ÈáèÊõø‰ª£È≠îÊúØÊï∞ ÂáÜÁ°ÆÔºöÂ¶ÇÊûúÂ§ÑÁêÜË¥ßÂ∏ÅÔºåËØ∑‰ΩøÁî®Êï¥Êï∞ ÁªìÊûÑÁîö‰∫éÁ∫¶ÂÆöÔºö Â∞ÅË£ÖÊù°‰ª∂ ÈÅøÂÖçÂê¶ÂÆöÊÄßÊù°‰ª∂ ÂáΩÊï∞Âè™ÂÅö‰∏Ä‰ª∂‰∫ãÊÉÖ Êé©ËîΩÊó∂Â∫èËÄ¶Âêà Âà´ÈöèÊÑè Â∞ÅË£ÖËæπÁïåÊù°‰ª∂ ÂáΩÊï∞Â∫îËØ•Âè™Âú®‰∏Ä‰∏™ÊäΩË±°Â±ÇÁ∫ß‰∏ä Âú®ËæÉÈ´òÂ±ÇÁ∫ßÊîæÁΩÆÂèØÈÖçÁΩÆÊï∞ÊçÆ ÈÅøÂÖç‰º†ÈÄíÊµèËßà ÂêçÁß∞Ôºö ÈááÁî®ÊèèËø∞ÊÄßÂêçÁß∞ ÂêçÁß∞Â∫î‰∏éÊäΩË±°Â±ÇÁ∫ßÁõ∏Á¨¶ Â∞ΩÂèØËÉΩ‰ΩøÁî®Ê†áÂáÜÂëΩÂêçÊ≥ï Êó†Ê≠ß‰πâÁöÑÂêçÁß∞ ‰∏∫ËæÉÂ§ß‰ΩúÁî®ËåÉÂõ¥ÈÄâÁî®ËæÉÈïøÁöÑÂêçÁß∞ ÈÅøÂÖçÁºñÁ†ÅÔºöÂ¶Ç‰∏Ä‰∫õÂâçÁºÄÁ≠â ÂêçÁß∞Â∫îËØ•ËØ¥ÊòéÂâØ‰ΩúÁî® ÊµãËØïÔºö ÊµãËØï‰∏çË∂≥ ‰ΩøÁî®Ë¶ÜÁõñÁéáÂ∑•ÂÖ∑ Âà´Áï•ËøáÂ∞èÊµãËØï Ë¢´ÂøΩÁï•ÁöÑÊµãËØïÂ∞±ÊòØÂØπ‰∏çÁ°ÆÂÆö‰∫ãÁâ©ÁöÑÁñëÈóÆ ÊµãËØïËæπÁïåÊù°‰ª∂ ÂÖ®Èù¢ÊµãËØïÁõ∏ËøëÁöÑÁº∫Èô∑ ÊµãËØïÂ§±Ë¥•ÁöÑÊ®°ÂºèÊúâÂêØÂèëÊÄß ÊµãËØïÂ∫îËØ•Âø´ÈÄü]]></content>
      <categories>
        <category>ÁºñÁ®ã‰πãÈÅì</category>
      </categories>
      <tags>
        <tag>Êï¥Ê¥Å‰ª£Á†Å</tag>
        <tag>ÁºñÁ®ãÈ£éÊ†º</tag>
      </tags>
  </entry>
</search>
